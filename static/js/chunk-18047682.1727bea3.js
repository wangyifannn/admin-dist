(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18047682"],{"06a2":function(e,r,t){},"164d":function(e,r,t){"use strict";t.r(r);var i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container adminuser-edit"},[t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[e._v("\n      编辑成员信息【"),t("span",{staticClass:"name"},[e._v(e._s(e.name))]),e._v("】\n    ")]),t("div",{staticClass:"avatar",style:{backgroundImage:"url("+e.form.avatar+")"}})]),t("div",{staticClass:"content-container"},[t("el-form",{ref:"form",staticStyle:{"margin-top":"110px",width:"500px"},attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"成员姓名",prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(r){e.$set(e.form,"name","string"===typeof r?r.trim():r)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"成员性别",prop:"gender"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"未选择"},model:{value:e.form.gender,callback:function(r){e.$set(e.form,"gender",r)},expression:"form.gender"}},e._l(e.genderArr,(function(e){return t("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),t("el-form-item",{attrs:{label:"成员ID",prop:"id"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.id,callback:function(r){e.$set(e.form,"id",r)},expression:"form.id"}})],1),t("el-form-item",{attrs:{label:"钉钉ID",prop:"userid"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.userid,callback:function(r){e.$set(e.form,"userid",r)},expression:"form.userid"}})],1),t("el-form-item",{attrs:{label:"部门",prop:"department"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.department,callback:function(r){e.$set(e.form,"department",r)},expression:"form.department"}})],1),t("el-form-item",{attrs:{label:"权限组",prop:"roles"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.roles,callback:function(r){e.$set(e.form,"roles",r)},expression:"form.roles"}},e._l(e.roles,(function(e){return t("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),t("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[t("el-input",{model:{value:e.form.mobile,callback:function(r){e.$set(e.form,"mobile",r)},expression:"form.mobile"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),t("el-form-item",{staticStyle:{"margin-top":"60px","text-align":"center"}},[t("el-button",{attrs:{loading:e.loading,size:"medium",type:"primary"},on:{click:function(r){return e.submitForm("form")}}},[e._v("保存修改")])],1)],1)],1)])},a=[],n=(t("7f7f"),t("c5f6"),t("7cdf"),t("ef80")),o={name:"AdminUserEdit",data:function(){var e=function(e,r,t){var i=/^1(3|4|5|6|7|8|9)\d{9}$/;if(!r)return t(new Error("电话号码不能为空"));setTimeout((function(){Number.isInteger(+r)?i.test(r)?t():t(new Error("电话号码格式不正确")):t(new Error("请输入数字值"))}),100)};return{genderArr:[{_id:1,name:"男"},{_id:2,name:"女"}],name:"",id:"",form:{name:"",gender:"",userid:"",id:"",department:"",roles:"",mobile:"",email:""},formGender:"",loading:!1,roles:[],rules:{name:[{required:!0,message:"请填写成员姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择成员性别",trigger:"blur"}],userid:[{required:!0,trigger:"blur"}],id:[{required:!0,trigger:"blur"}],department:[{required:!0,trigger:"blur"}],roles:[{required:!0,message:"请选择对应的角色",trigger:"change"}],mobile:[{required:!0,message:"请填写电话",trigger:"blur"},{validator:e,trigger:"blur"}]}}},created:function(){this.name=this.$route.query.name,this.id=this.$route.params.id,this.id&&(this.rules.userid=[],this.rules.id=[],this.rules.department=[]),this.handlerGetEditInfo(this.id)},methods:{handlerGetEditInfo:function(e){var r=this;Object(n["b"])(e).then((function(e){e.data.adminuser.gender=e.data.adminuser.gender?e.data.adminuser.gender:"",r.form=e.data.adminuser,r.roles=e.data.roles}))},submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return!1;if(!r.loading){r.loading=!0;var t={name:r.form.name,roles:r.form.roles,mobile:r.form.mobile,email:r.form.email,gender:r.form.gender};Object(n["d"])(r.id,t).then((function(e){r.loading=!1,r.$message({message:e&&e.data?"成员信息修改成功":"成员信息修改失败",type:e&&e.data?"success":"error"}),r.$router.go(-1)})).catch((function(e){console.log(e),r.loading=!1}))}}))}}},l=o,s=(t("37ee"),t("2877")),m=Object(s["a"])(l,i,a,!1,null,null,null);r["default"]=m.exports},"37ee":function(e,r,t){"use strict";var i=t("06a2"),a=t.n(i);a.a},"7cdf":function(e,r,t){var i=t("5ca1");i(i.S,"Number",{isInteger:t("9c12")})},"9c12":function(e,r,t){var i=t("d3f4"),a=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&a(e)===e}},ef80:function(e,r,t){"use strict";t.d(r,"c",(function(){return a})),t.d(r,"a",(function(){return n})),t.d(r,"d",(function(){return o})),t.d(r,"b",(function(){return l}));var i=t("b775");function a(e){return Object(i["a"])({url:"/admin_user/list",method:"get",params:e})}function n(e,r){return Object(i["a"])({url:"/admin_user/"+e+"/conlogs",method:"get",params:r})}function o(e,r){return Object(i["a"])({url:"/admin_user/"+e,method:"put",data:r})}function l(e){return Object(i["a"])({url:"/admin_user/"+e+"/edit_info",method:"get"})}}}]);
//# sourceMappingURL=chunk-18047682.1727bea3.js.map