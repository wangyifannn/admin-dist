(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35068968"],{"488e":function(e,t,i){"use strict";var a=i("c4b8"),n=i.n(a);n.a},6928:function(e,t,i){},8515:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"guidance-container"},[i("el-card",{staticStyle:{"margin-bottom":"30px"}},[i("div",{staticClass:"express-container"},[i("div",{staticClass:"express-item",on:{click:function(t){return e.$router.push({name:"AddRecipes"})}}},[e._v("\n        新建食谱模板\n      ")])]),i("div",{staticClass:"search-container"},[i("el-row",[i("el-col",{attrs:{span:6}},[i("div",{staticClass:"search-item"},[i("div",[e._v("模板名称")]),i("div",[i("el-input",{attrs:{placeholder:"请输入模板名称",size:"mini"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1)])]),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"search-item"},[i("div",[e._v("创建人")]),i("div",[i("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.searchForm.uid,callback:function(t){e.$set(e.searchForm,"uid",t)},expression:"searchForm.uid"}},e._l(e.allCreaters,(function(e){return i("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1)])]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"search-time search-date-picker"},[i("div",[e._v("\n              创建时间\n            ")]),i("div",[i("el-date-picker",{attrs:{size:"mini",type:"datetimerange","range-separator":"-","start-placeholder":"请选择时间范围起始","end-placeholder":"请选择时间范围结束"},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1)])])],1),i("el-row",[i("el-col",{attrs:{span:6}},[i("div",{staticClass:"search-item"},[i("div",[e._v("状态")]),i("div",[i("el-select",{attrs:{size:"mini"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.statusOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"recipes-button"},[i("div",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索")])],1),i("div",[i("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v("重置")])],1)])])],1)],1)]),i("el-card",[i("div",{staticClass:"table-title"},[e._v("\n      食谱模版列表\n    ")]),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"450px"}},[i("el-table-column",{attrs:{prop:"title",label:"模板名称",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"创建人",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.dietician.name)+"\n        ")]}}])}),i("el-table-column",{attrs:{label:"创建时间",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formatTime")(new Date(t.row.created_at)))+"\n        ")]}}])}),i("el-table-column",{attrs:{label:"状态",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("recipesStatus")(t.row.status))+"\n        ")]}}])}),i("el-table-column",{attrs:{align:"left","header-align":"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{class:"online"===t.row.status?"online-style":"",staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(i){return e.publish(t.row)}}},[e._v("单击"+e._s("online"===t.row.status?"下线":"发布"))]),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.handleCheck(t.row)}}},[e._v("查看")]),"online"!==t.row.status?i("el-button",{attrs:{disabled:!t.row.isSelfCreate,size:"mini",type:"text"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v("编辑")]):e._e(),"online"!==t.row.status?i("el-button",{attrs:{disabled:!t.row.isSelfCreate,type:"text",size:"mini"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),i("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[i("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:e.dialogText.title,visible:e.dialogVisible,center:!0,width:"22%"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.handleClose}},[e._v("\n      "+e._s(e.dialogText.desc)+"\n      "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v(e._s(e.dialogText.button))])],1)])],1)],1)},n=[],s=(i("96cf"),i("3b8d")),r=(i("386d"),i("7f7f"),i("1e42")),l={name:"Guidance",components:{},data:function(){return{dietician:this.$store.state.user.name,currentId:"",allCreaters:[],dialogText:{title:"",desc:"",button:""},dialogVisible:!1,currentPage:1,pageSize:10,total:0,tableData:[],searchForm:{name:"",nickname:"",uid:"",status:"",beginTime:"",endTime:""},searchTime:null,statusOptions:[{value:"save",label:"已保存"},{value:"online",label:"已发布"},{value:"offline",label:"已下线"}]}},mounted:function(){this.getRecipesList()},methods:{handleConfirm:function(){var e=this,t=this.dialogText.button;switch(t){case"确认删除":Object(r["e"])(this.currentId).then((function(t){2e4===t.code&&(e.dialogVisible=!1,e.reset())}));break;default:Object(r["k"])(this.currentId).then((function(t){2e4===t.code&&(e.dialogVisible=!1,e.reset())}))}},publishStatus:function(e){return"online"===e},handleClose:function(){this.reset()},publish:function(e){this.currentId=e._id,this.dialogVisible=!0,"offline"===e.status||"save"===e.status?this.dialogText={title:"发布提示",desc:"操作成功后，该模板数据将更新在新建定制食谱任务的下拉菜单中，可在创建任务时供营养师 [".concat(this.dietician,"] 选择，请确认后操作！"),button:"确认发布"}:this.dialogText={title:"下线提示",desc:"操作成功后，该模板数据将从营养师 [".concat(this.dietician,"] 的新建定制食谱任务的下拉菜单中移除，不可被选择，请确认后操作！"),button:"确认下线"}},handleSizeChange:function(e){this.pageSize=e,this.search()},handleCurrentChange:function(e){this.currentPage=e,this.search()},handleEdit:function(e){this.$router.push({path:"/system-settings/recipes/edit",query:{id:e._id}})},handleCheck:function(e){this.$router.push({path:"/system-settings/recipes/check",query:{id:e._id}})},handleDelete:function(e){this.currentId=e._id,this.dialogText={title:"删除提示",desc:"操作成功后，该食谱模板将从食谱模板列表删除，请确认后操作！",button:"确认删除"},this.dialogVisible=!0},getRecipesList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["g"])(this.searchForm);case 2:t=e.sent,i=t.data,this.total=i.total,this.tableData=i.list,this.allCreaters=i.allCreaters;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),search:function(){this.searchForm.beginTime=this.searchTime?this.searchTime[0]:"",this.searchForm.endTime=this.searchTime?this.searchTime[1]:"",this.searchForm.pageSize=this.pageSize,this.searchForm.currentPage=this.currentPage,this.getRecipesList()},reset:function(){this.searchForm={name:"",uid:"",status:"",beginTime:"",endTime:""},this.searchTime=null,this.search()}}},c=l,o=(i("98dc"),i("488e"),i("2877")),u=Object(o["a"])(c,a,n,!1,null,"11a851d6",null);t["default"]=u.exports},"98dc":function(e,t,i){"use strict";var a=i("6928"),n=i.n(a);n.a},c4b8:function(e,t,i){}}]);
//# sourceMappingURL=chunk-35068968.d8222397.js.map