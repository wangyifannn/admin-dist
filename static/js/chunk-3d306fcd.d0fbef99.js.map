{"version":3,"sources":["webpack:///./src/views/system-settings/role/index.vue?80de","webpack:///./src/views/system-settings/role/index.vue?f3c3","webpack:///./src/views/system-settings/role/index.vue?88bd","webpack:///src/views/system-settings/role/index.vue","webpack:///./src/views/system-settings/role/index.vue?3079","webpack:///./src/views/system-settings/role/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","nativeOn","$event","type","indexOf","_k","keyCode","key","handleSearch","model","value","callback","$$v","searchName","trim","expression","on","handleSearchByName","_v","handleAddRole","handleReset","slot","_l","curPermissionTypeTree","handleChangeTreeType","_s","_f","rolesList","handleRowClick","scopedSlots","_u","fn","scope","row","$set","name","description","insertTime","updateTime","undefined","editable","stopPropagation","handleEdit","removeable","handleDelete","page","currentPage","pageSizes","pageSize","total","handleSizeChange","handleCurrentChange","Boolean","role","id","handleSaveTree","ref","treeDate","defaultProps","checkChange","dialogVisible","dialogType","handleResetForm","roleFormRules","minRows","maxRows","changeSize","descriptionSize","staticStyle","confirmRole","staticRenderFns","backEndAccess","routes","filters","permissionType","Error","data","saveDisabled","Object","assign","defaultRole","apiAccessTree","checkStrictly","children","label","permissionTreeTypes","computed","routesData","watch","created","getApiAccessTree","getRoutes","methods","checked","length","changeKeyIdToPath","apiRoutes","forEach","path","title","res","push","setPage","$message","message","generateRoutes","resetTreeChecked","$refs","tree","setCheckedKeys","treePathArr","j","newRoute","changeKey","map","fromHandleBtn","$confirm","resetFields","component"],"mappings":"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","file":"static/js/chunk-3d306fcd.d0fbef99.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=0fa77aee&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=0fa77aee&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"role\"},[_c('div',{staticClass:\"role__header\"},[_c('el-input',{staticClass:\"role__header__item role__header__search\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入权限组名称搜索\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleSearch($event)}},model:{value:(_vm.searchName),callback:function ($$v) {_vm.searchName=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"searchName\"}}),_c('el-button',{staticClass:\"role__header__item\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleSearchByName}},[_vm._v(\"搜索\")]),_c('el-button',{staticClass:\"role__header__item\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleAddRole}},[_vm._v(\"新增\")]),_c('el-button',{staticClass:\"role__header__item\",attrs:{\"type\":\"primary\",\"size\":\"small\",\"plain\":\"\"},on:{\"click\":_vm.handleReset}},[_vm._v(\"重置\")])],1),_c('div',{staticClass:\"role__body\"},[_c('div',{staticClass:\"el-card-warpper role__body__list\"},[_c('el-card',{staticClass:\"el-card--no-shadow el-card--header-nbb el-card--flex\"},[_c('div',{staticClass:\"el-card__header__flex-warpper\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticClass:\"el-card__header__title\"},[_vm._v(\"权限组列表\")]),_c('el-button-group',_vm._l((_vm.permissionTreeTypes),function(type){return _c('el-button',{key:type,attrs:{\"size\":\"medium\",\"type\":_vm.curPermissionTypeTree === type ? 'primary' : ''},on:{\"click\":function($event){return _vm.handleChangeTreeType(type)}}},[_vm._v(_vm._s(_vm._f(\"permissionType\")(type)))])}),1)],1),_c('el-table',{staticClass:\"role__body__list__table\",attrs:{\"data\":_vm.rolesList,\"empty-text\":\"暂无数据，请输入正确的权限组名称\"},on:{\"row-click\":_vm.handleRowClick}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"\",\"width\":\"60\",\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"role__body__list__table-checkbox-wrapper\",on:{\"click\":function () {}}},[_c('div',{staticClass:\"role__body__list__table-checkbox-mask\"}),_c('el-checkbox',{attrs:{\"disabled\":scope.row.key === 'superAdmin'},model:{value:(scope.row.checked),callback:function ($$v) {_vm.$set(scope.row, \"checked\", $$v)},expression:\"scope.row.checked\"}})],1)]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"权限组名称\",\"width\":\"150\",\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n              \"+_vm._s(scope.row.name)+\"\\n            \")]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"权限组描述\",\"min-width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n              \"+_vm._s(scope.row.description)+\"\\n            \")]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"创建日期\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n              \"+_vm._s(_vm._f(\"formatTime\")(scope.row.insertTime,'{y}-{m}-{d}'))+\"\\n            \")]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"最后编辑日期\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return (scope.row.updateTime)?[_vm._v(\"\\n              \"+_vm._s(_vm._f(\"formatTime\")(scope.row.updateTime,'{y}-{m}-{d}'))+\"\\n            \")]:undefined}}],null,true)}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"140\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":!scope.row.editable ? 'info' : 'primary',\"size\":\"mini\",\"icon\":\"el-icon-edit\",\"disabled\":!scope.row.editable},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleEdit(scope)}}}),_c('el-button',{attrs:{\"type\":!scope.row.removeable ? 'info' : 'danger',\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"disabled\":!scope.row.removeable},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleDelete(scope)}}})]}}])})],1),_c('div',{staticClass:\"role__body__list__pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.page.currentPage,\"page-sizes\":_vm.pageSizes,\"page-size\":_vm.page.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.page.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)],1),_c('div',{staticClass:\"el-card-warpper role__body__tree\"},[_c('el-card',{staticClass:\"el-card--no-shadow\"},[_c('div',{staticClass:\"el-card__header__flex-warpper el-card__header__flex-warpper--align-center\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticClass:\"el-card__header__title\"},[_vm._v(_vm._s(_vm._f(\"permissionType\")(_vm.curPermissionTypeTree)))]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":Boolean(!_vm.role.id)},on:{\"click\":_vm.handleSaveTree}},[_vm._v(\"保存\")])],1),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.treeDate,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"path\",\"props\":_vm.defaultProps},on:{\"check-change\":_vm.checkChange}})],1)],1)]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"title\":_vm.dialogType === 'edit' ? '编辑权限组' : '新增权限组',\"width\":\"450px\",\"top\":\"25vh\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"closed\":_vm.handleResetForm}},[_c('el-form',{ref:\"roleForm\",attrs:{\"model\":_vm.role,\"label-width\":\"100px\",\"label-position\":\"right\",\"rules\":_vm.roleFormRules,\"append-to-body\":true}},[_c('el-form-item',{attrs:{\"label\":\"权限组名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.role.name),callback:function ($$v) {_vm.$set(_vm.role, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"role.name\"}})],1),_c('el-form-item',{staticClass:\"description_item\",attrs:{\"label\":\"权限组描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"autosize\":{ minRows: 4, maxRows: 4 },\"type\":\"textarea\"},on:{\"input\":_vm.changeSize},model:{value:(_vm.role.description),callback:function ($$v) {_vm.$set(_vm.role, \"description\", $$v)},expression:\"role.description\"}}),_c('i',{staticClass:\"fontsize10 textarea_tip\"},[_vm._v(_vm._s(_vm.descriptionSize)+\"/100\")])],1)],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.confirmRole}},[_vm._v(\"\\n        \"+_vm._s(_vm.dialogType === 'edit' ? '保存修改' : '确认新增')+\"\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"role\">\r\n    <div class=\"role__header\">\r\n      <el-input\r\n        v-model.trim=\"searchName\"\r\n        class=\"role__header__item role__header__search\"\r\n        size=\"small\"\r\n        placeholder=\"请输入权限组名称搜索\"\r\n        @keyup.enter.native=\"handleSearch\"\r\n      />\r\n      <el-button\r\n        class=\"role__header__item\"\r\n        type=\"primary\"\r\n        size=\"small\"\r\n        @click=\"handleSearchByName\"\r\n        >搜索</el-button\r\n      >\r\n      <el-button\r\n        class=\"role__header__item\"\r\n        type=\"primary\"\r\n        size=\"small\"\r\n        @click=\"handleAddRole\"\r\n        >新增</el-button\r\n      >\r\n      <el-button\r\n        class=\"role__header__item\"\r\n        type=\"primary\"\r\n        size=\"small\"\r\n        plain\r\n        @click=\"handleReset\"\r\n        >重置</el-button\r\n      >\r\n    </div>\r\n    <div class=\"role__body\">\r\n      <div class=\"el-card-warpper role__body__list\">\r\n        <el-card class=\"el-card--no-shadow el-card--header-nbb el-card--flex\">\r\n          <div slot=\"header\" class=\"el-card__header__flex-warpper\">\r\n            <span class=\"el-card__header__title\">权限组列表</span>\r\n            <el-button-group>\r\n              <el-button\r\n                v-for=\"type in permissionTreeTypes\"\r\n                :key=\"type\"\r\n                size=\"medium\"\r\n                :type=\"curPermissionTypeTree === type ? 'primary' : ''\"\r\n                @click=\"handleChangeTreeType(type)\"\r\n                >{{ type | permissionType }}</el-button\r\n              >\r\n            </el-button-group>\r\n          </div>\r\n          <el-table\r\n            class=\"role__body__list__table\"\r\n            :data=\"rolesList\"\r\n            empty-text=\"暂无数据，请输入正确的权限组名称\"\r\n            @row-click=\"handleRowClick\"\r\n          >\r\n            <el-table-column align=\"center\" label=\"\" width=\"60\" fixed>\r\n              <template slot-scope=\"scope\">\r\n                <div\r\n                  class=\"role__body__list__table-checkbox-wrapper\"\r\n                  @click=\"() => {}\"\r\n                >\r\n                  <div class=\"role__body__list__table-checkbox-mask\" />\r\n                  <el-checkbox\r\n                    v-model=\"scope.row.checked\"\r\n                    :disabled=\"scope.row.key === 'superAdmin'\"\r\n                  />\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              align=\"center\"\r\n              label=\"权限组名称\"\r\n              width=\"150\"\r\n              fixed\r\n            >\r\n              <template slot-scope=\"scope\">\r\n                {{ scope.row.name }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" label=\"权限组描述\" min-width=\"200\">\r\n              <template slot-scope=\"scope\">\r\n                {{ scope.row.description }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" label=\"创建日期\" min-width=\"150\">\r\n              <template slot-scope=\"scope\">\r\n                {{ scope.row.insertTime | formatTime('{y}-{m}-{d}') }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              align=\"center\"\r\n              label=\"最后编辑日期\"\r\n              min-width=\"150\"\r\n            >\r\n              <template v-if=\"scope.row.updateTime\" slot-scope=\"scope\">\r\n                {{ scope.row.updateTime | formatTime('{y}-{m}-{d}') }}\r\n              </template>\r\n              <template v-else>\r\n                -\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              align=\"center\"\r\n              label=\"操作\"\r\n              fixed=\"right\"\r\n              width=\"140\"\r\n            >\r\n              <template slot-scope=\"scope\" class=\"role__body__list-handle\">\r\n                <el-button\r\n                  :type=\"!scope.row.editable ? 'info' : 'primary'\"\r\n                  size=\"mini\"\r\n                  icon=\"el-icon-edit\"\r\n                  :disabled=\"!scope.row.editable\"\r\n                  @click.stop=\"handleEdit(scope)\"\r\n                />\r\n                <el-button\r\n                  :type=\"!scope.row.removeable ? 'info' : 'danger'\"\r\n                  size=\"mini\"\r\n                  icon=\"el-icon-delete\"\r\n                  :disabled=\"!scope.row.removeable\"\r\n                  @click.stop=\"handleDelete(scope)\"\r\n                />\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <div class=\"role__body__list__pagination\">\r\n            <el-pagination\r\n              :current-page=\"page.currentPage\"\r\n              :page-sizes=\"pageSizes\"\r\n              :page-size=\"page.pageSize\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :total=\"page.total\"\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n            />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n      <div class=\"el-card-warpper role__body__tree\">\r\n        <el-card class=\"el-card--no-shadow\">\r\n          <div\r\n            slot=\"header\"\r\n            class=\"el-card__header__flex-warpper el-card__header__flex-warpper--align-center\"\r\n          >\r\n            <span class=\"el-card__header__title\">{{\r\n              curPermissionTypeTree | permissionType\r\n            }}</span>\r\n            <el-button\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              :disabled=\"Boolean(!role.id)\"\r\n              @click=\"handleSaveTree\"\r\n              >保存</el-button\r\n            >\r\n          </div>\r\n          <el-tree\r\n            ref=\"tree\"\r\n            :data=\"treeDate\"\r\n            show-checkbox\r\n            default-expand-all\r\n            node-key=\"path\"\r\n            :props=\"defaultProps\"\r\n            @check-change=\"checkChange\"\r\n          />\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n    <el-dialog\r\n      :visible.sync=\"dialogVisible\"\r\n      :title=\"dialogType === 'edit' ? '编辑权限组' : '新增权限组'\"\r\n      width=\"450px\"\r\n      top=\"25vh\"\r\n      center\r\n      @closed=\"handleResetForm\"\r\n    >\r\n      <el-form\r\n        ref=\"roleForm\"\r\n        :model=\"role\"\r\n        label-width=\"100px\"\r\n        label-position=\"right\"\r\n        :rules=\"roleFormRules\"\r\n        :append-to-body=\"true\"\r\n      >\r\n        <el-form-item label=\"权限组名称\" prop=\"name\">\r\n          <el-input v-model.trim=\"role.name\" size=\"small\" />\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"权限组描述\"\r\n          prop=\"description\"\r\n          class=\"description_item\"\r\n        >\r\n          <el-input\r\n            v-model=\"role.description\"\r\n            :autosize=\"{ minRows: 4, maxRows: 4 }\"\r\n            type=\"textarea\"\r\n            @input=\"changeSize\"\r\n          />\r\n          <i class=\"fontsize10 textarea_tip\">{{ descriptionSize }}/100</i>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div style=\"text-align:center;\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"confirmRole\">\r\n          {{ dialogType === 'edit' ? '保存修改' : '确认新增' }}\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { deepClone } from '@/utils'\r\nimport {\r\n  getApiAccessTree,\r\n  getRoles,\r\n  addRole,\r\n  deleteRole,\r\n  updateRoleBaseInfo,\r\n  updateRoleRoutes,\r\n  updateRoleBackendAccess\r\n} from '@/api/role'\r\nimport { asyncRoutes } from '@/router'\r\nimport _ from 'lodash'\r\nconst defaultRole = {\r\n  key: '',\r\n  id: '',\r\n  name: '',\r\n  description: '',\r\n  insertTime: '',\r\n  editable: true,\r\n  removeable: false,\r\n  backEndAccess: [],\r\n  routes: []\r\n}\r\n\r\nexport default {\r\n  filters: {\r\n    permissionType(type) {\r\n      switch (type) {\r\n        case 'api':\r\n          return '权限分配'\r\n        case 'fontend-routes':\r\n          return '菜单分配'\r\n        default:\r\n          throw new Error('不能识别的权限类型')\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      saveDisabled: true,\r\n      descriptionSize: 0,\r\n      role: Object.assign({}, defaultRole),\r\n      roleFormRules: {\r\n        name: [\r\n          { required: true, message: '请输入权限组名称', trigger: 'blur' }\r\n        ],\r\n        description: [\r\n          {\r\n            min: 0,\r\n            max: 100,\r\n            message: '修改理由最多为100个字符',\r\n            trigger: 'blur'\r\n          },\r\n          {\r\n            min: 0,\r\n            max: 100,\r\n            message: '修改理由最多为100个字符',\r\n            trigger: 'change'\r\n          }\r\n        ]\r\n      },\r\n      routes: [],\r\n      apiAccessTree: [],\r\n      rolesList: [],\r\n      searchName: '',\r\n      dialogVisible: false,\r\n      dialogType: 'new',\r\n      checkStrictly: false,\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'title'\r\n      },\r\n      curPermissionTypeTree: 'api',\r\n      permissionTreeTypes: ['api', 'fontend-routes'],\r\n      page: {\r\n        total: 0,\r\n        pageSize: 10,\r\n        currentPage: 1\r\n      },\r\n      pageSizes: [10, 50, 100]\r\n    }\r\n  },\r\n  computed: {\r\n    routesData() {\r\n      return this.routes\r\n    },\r\n    treeDate() {\r\n      const data =\r\n        this.curPermissionTypeTree === 'api'\r\n          ? this.apiAccessTree\r\n          : this.routesData\r\n      return data\r\n    }\r\n  },\r\n  watch: {\r\n    'role.id': function(val) {\r\n      this.handleChangeTreeType(this.curPermissionTypeTree)\r\n    }\r\n  },\r\n  created() {\r\n    this.getApiAccessTree()\r\n    this.getRoutes()\r\n    this.handleSearch()\r\n    // this.changeSize()\r\n    // this.pageSizes = Array.apply(null, { length: 20 }).reduce((acc, item, index) => acc.concat(5 * (index + 1)), [])\r\n  },\r\n  methods: {\r\n    checkChange(data, checked, indeterminate) {\r\n      if (checked) {\r\n        this.saveDisabled = !checked\r\n        return\r\n      } else {\r\n        this.saveDisabled = true\r\n      }\r\n    },\r\n    changeSize() {\r\n      this.descriptionSize = this.role.description.length\r\n    },\r\n    async getRoutes() {\r\n      this.routes = this.generateRoutes(asyncRoutes)\r\n      // this.routes = asyncRoutes\r\n    },\r\n    async getApiAccessTree() {\r\n      const res = await getApiAccessTree()\r\n      this.apiAccessTree = this.changeKeyIdToPath(res.data)\r\n    },\r\n    changeKeyIdToPath(apiRoutes) {\r\n      const res = []\r\n      apiRoutes.forEach(({ id, label, children }) => {\r\n        const data = {\r\n          path: id,\r\n          title: label\r\n        }\r\n        if (children) data.children = this.changeKeyIdToPath(children)\r\n        res.push(data)\r\n      })\r\n      return res\r\n    },\r\n    async setTableData({ list }) {\r\n      this.rolesList = list.map(ele => {\r\n        ele.checked = false\r\n        ele.routes = ele.fontEndAccess\r\n        ele.description = ele.describe\r\n        ele.id = ele._id\r\n        if (!ele.key) ele.key = ele._id\r\n        delete ele.fontEndAccess\r\n        delete ele.describe\r\n        delete ele._id\r\n        if (this.role.id && this.role.id === ele.id) {\r\n          const role = Object.assign(ele, {\r\n            checked: this.role.checked\r\n          })\r\n          this.role = deepClone(role)\r\n        }\r\n        return ele\r\n      })\r\n    },\r\n\r\n    setPage({ currentPage, pageSize, count: total }) {\r\n      this.page.currentPage = currentPage\r\n      this.page.pageSize = pageSize\r\n      this.page.total = total\r\n    },\r\n\r\n    handleSearchByName() {\r\n      if (!this.searchName) {\r\n        this.$message({\r\n          message: '输入权限组名称搜索',\r\n          type: 'error'\r\n        })\r\n        return\r\n      }\r\n      this.handleSearch()\r\n    },\r\n\r\n    async handleSearch(pageQuery) {\r\n      const _query = pageQuery || {}\r\n      if (!_query.currentPage) _query.currentPage = this.page.currentPage\r\n      if (!_query.pageSize) _query.pageSize = this.page.pageSize\r\n      _query.search = this.searchName\r\n      const { data } = await getRoles(_query)\r\n      if (data.list.length === 0 && this.page.currentPage > 1) {\r\n        this.handleSearch(\r\n          Object.assign(_query, {\r\n            currentPage: 1\r\n          })\r\n        )\r\n        this.setPage({ currentPage: 1, pageSize: 10, total: 0 })\r\n        return\r\n      } else {\r\n        this.setPage({ ...data })\r\n      }\r\n      this.setTableData({ ...data })\r\n    },\r\n\r\n    // Reshape the routes structure so that it looks the same as the sidebar\r\n    generateRoutes(routes) {\r\n      const res = []\r\n\r\n      for (const route of routes) {\r\n        // skip some route\r\n        if (route.hidden) {\r\n          continue\r\n        }\r\n        const data = {\r\n          path: route.r_id,\r\n          title: route.meta && route.meta.title\r\n        }\r\n        // recursive child routes\r\n        if (route.children) {\r\n          data.children = this.generateRoutes(route.children)\r\n        }\r\n        res.push(data)\r\n      }\r\n      return res\r\n    },\r\n\r\n    handleAddRole() {\r\n      this.role = Object.assign({}, defaultRole)\r\n      this.dialogType = 'new'\r\n      this.dialogVisible = true\r\n    },\r\n\r\n    async handleReset() {\r\n      this.searchName = ''\r\n      await this.handleSearch()\r\n    },\r\n\r\n    resetTreeChecked() {\r\n      this.$refs.tree && this.$refs.tree.setCheckedKeys([])\r\n    },\r\n\r\n    handleChangeTreeType(type) {\r\n      this.curPermissionTypeTree = type\r\n      if (this.role.id === '') {\r\n        this.resetTreeChecked()\r\n        return\r\n      }\r\n      if (type === 'api') {\r\n        this.$refs.tree.setCheckedKeys(this.role.backEndAccess)\r\n      } else if (type === 'fontend-routes') {\r\n        let newRoute = this.role.routes\r\n        const treePathArr = []\r\n        for (let j = 0; j < this.treeDate.length; j++) {\r\n          treePathArr.push(this.treeDate[j].path)\r\n        }\r\n        newRoute = _.difference(newRoute, treePathArr)\r\n        this.$refs.tree.setCheckedKeys(newRoute, false)\r\n      } else {\r\n        this.resetTreeChecked()\r\n      }\r\n    },\r\n\r\n    handleRowClick(row) {\r\n      const changeKey = row.key\r\n      const fromHandleBtn = !!row.fromHandleBtn\r\n      if (changeKey === 'superAdmin') {\r\n        this.resetTreeChecked()\r\n        return\r\n      }\r\n      this.rolesList = this.rolesList.map(role => {\r\n        if (role.key === changeKey) {\r\n          role.checked = fromHandleBtn || !role.checked\r\n          if (role.checked) {\r\n            this.role = deepClone(row)\r\n          } else {\r\n            this.role = Object.assign({}, defaultRole)\r\n          }\r\n        } else {\r\n          role.checked = false\r\n        }\r\n        return role\r\n      })\r\n    },\r\n\r\n    handleEdit({ row }) {\r\n      this.dialogType = 'edit'\r\n      this.dialogVisible = true\r\n      this.handleRowClick({\r\n        ...row,\r\n        fromHandleBtn: true\r\n      })\r\n      this.descriptionSize = row.description.length\r\n    },\r\n    handleDelete({ $index, row }) {\r\n      this.handleRowClick({\r\n        ...row,\r\n        fromHandleBtn: true\r\n      })\r\n      this.$confirm(\r\n        '删除后，该权限组信息系统将不再保留，确认删除吗？',\r\n        '提示',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消'\r\n        }\r\n      )\r\n        .then(async () => {\r\n          await deleteRole(row.id)\r\n          await this.handleSearch()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功！'\r\n          })\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n        })\r\n    },\r\n\r\n    async confirmRole() {\r\n      this.$refs['roleForm'].validate(async valid => {\r\n        if (valid) {\r\n          const isEdit = this.dialogType === 'edit'\r\n          if (isEdit) {\r\n            const res = await updateRoleBaseInfo(this.role.id, {\r\n              name: this.role.name,\r\n              describe: this.role.description\r\n            })\r\n            this.$message({\r\n              type: res && res.code === 20000 ? 'success' : 'error',\r\n              message: res.message\r\n            })\r\n          } else {\r\n            const res = await addRole({\r\n              name: this.role.name,\r\n              describe: this.role.description\r\n            })\r\n            this.$message({\r\n              type: res && res.code === 20000 ? 'success' : 'error',\r\n              message: res.message\r\n            })\r\n          }\r\n          await this.handleSearch()\r\n          this.dialogVisible = false\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n\r\n    handleResetForm() {\r\n      this.$refs['roleForm'].resetFields()\r\n    },\r\n\r\n    async handleCurrentChange(page) {\r\n      await this.handleSearch({\r\n        currentPage: page\r\n      })\r\n    },\r\n    async handleSizeChange(pageSize) {\r\n      await this.handleSearch({\r\n        pageSize\r\n      })\r\n    },\r\n\r\n    async handleSaveTree() {\r\n      if (this.curPermissionTypeTree === 'api') {\r\n        const checkedKeys = this.$refs.tree.getCheckedKeys(true)\r\n        await updateRoleBackendAccess(this.role.id, {\r\n          access: checkedKeys\r\n        }).then(async res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '保存成功！'\r\n          })\r\n          await this.handleSearch()\r\n        })\r\n      } else if (this.curPermissionTypeTree === 'fontend-routes') {\r\n        const harfnodes = this.$refs.tree.getCheckedNodes(false, true)\r\n        const checkedKeys = harfnodes.map(item => {\r\n          return item.path\r\n        })\r\n        // const checkedKeys = this.$refs.tree.getCheckedKeys(true)\r\n        await updateRoleRoutes(this.role.id, {\r\n          access: checkedKeys\r\n        }).then(async res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '保存成功！'\r\n          })\r\n          await this.handleSearch()\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.role {\r\n  &__body {\r\n    &__list {\r\n      .el-card__body {\r\n        height: calc(100% - 72px);\r\n      }\r\n    }\r\n  }\r\n  .el-form-item {\r\n    &__label,\r\n    &__content {\r\n      line-height: 32px;\r\n    }\r\n  }\r\n  .fontsize10 {\r\n    font-size: 10px;\r\n  }\r\n  .description_item {\r\n    position: relative;\r\n  }\r\n  .textarea_tip {\r\n    position: absolute;\r\n    right: 10px;\r\n    bottom: -6px;\r\n    color: #576277;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n.role {\r\n  min-height: 100%;\r\n  &__header {\r\n    overflow: hidden;\r\n    &__item {\r\n      float: left;\r\n    }\r\n    &__search {\r\n      margin-right: 30px;\r\n      width: 220px;\r\n    }\r\n  }\r\n  &__body {\r\n    display: flex;\r\n    padding-top: 30px;\r\n    height: calc(100% - 32px);\r\n    &__list {\r\n      overflow: auto;\r\n      height: 100%;\r\n      flex-grow: 1;\r\n      .el-card {\r\n        height: 100%;\r\n      }\r\n      &__table-checkbox-wrapper {\r\n        position: relative;\r\n      }\r\n      &__table-checkbox-mask {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        background: #fff;\r\n        opacity: 0;\r\n        z-index: 9;\r\n      }\r\n      &__pagination {\r\n        padding: 60px 0 40px;\r\n        text-align: center;\r\n      }\r\n    }\r\n    &__list-handle {\r\n      font-size: 0; // 因为打包的inline element标签后有一个空格，临时清楚多余间距\r\n    }\r\n    &__tree {\r\n      margin-left: 20px;\r\n      min-width: 300px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0fa77aee&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=0fa77aee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0fa77aee\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}