(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df2a06ea"],{"2f7f":function(t,e,s){},"3d13":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layout"},[s("div",{staticClass:"header"},[s("el-button",{staticClass:"button",attrs:{type:"text",size:"medium"},on:{click:t.goBack}},[t._v("返回工作台")])],1),s("div",{staticClass:"content"},[s("div",{staticClass:"content--left"},[s("el-tabs",{staticClass:"tab",attrs:{stretch:""},on:{"tab-click":t.handleTabClick},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[s("el-tab-pane",{attrs:{name:"normal"}},[s("el-badge",{staticClass:"singleask-baged-item",attrs:{slot:"label",value:t.normalNum?t.normalNum:""},slot:"label"},[t._v("\n            待接诊\n          ")]),t.userList.normal.list.length?s("div",t._l(t.userList.normal.list,(function(e,i){return s("User",{key:i,attrs:{user:e,selected:t.selectedInfo},on:{"on-select":t.onSelect}})})),1):s("div",{staticClass:"tip"},[t._v("\n            暂无数据\n          ")])],1),s("el-tab-pane",{attrs:{name:"reply"}},[s("el-badge",{staticClass:"singleask-baged-item",attrs:{slot:"label",value:t.askNum?t.askNum:""},slot:"label"},[t._v("\n            追问待回复\n          ")]),t.userList.reply.list.length?s("div",t._l(t.userList.reply.list,(function(e,i){return s("User",{key:i,attrs:{user:e,selected:t.selectedInfo},on:{"on-select":t.onSelect}})})),1):s("div",{staticClass:"tip"},[t._v("\n            暂无数据\n          ")])],1),s("el-tab-pane",{staticClass:"box__all-user",attrs:{label:"全部",name:"all"}},[s("div",{staticClass:"scroll-box"},[t.userList.all.list.length?s("div",t._l(t.userList.all.list,(function(e,i){return s("User",{key:i,attrs:{user:e,selected:t.selectedInfo},on:{"on-select":t.onSelect}})})),1):s("div",{staticClass:"tip"},[t._v("\n              暂无数据\n            ")])]),s("div",{staticClass:"page-box"},[s("el-pagination",{attrs:{layout:"prev, pager, next",total:t.userList.all.page.counts,"page-size":15},on:{"current-change":function(e){return t.onPageChange(e,"user")}}})],1)])],1)],1),s("div",{staticClass:"content--main"},[t.detail.question?s("div",[s("ReplyDetail",{attrs:{detail:t.detail}}),t.canReply?s("div",{staticClass:"answer-list"},[t._m(0),s("p",{staticClass:"tip-content"},[t._v("\n            温馨提示：请您使用简单易懂的文字给出专业的诊断结果，如果能够使用更具亲和的语言，会使患者更加能够感受到您的关怀！\n          ")]),t._l(t.answerList,(function(e,i){return s("div",{key:i,staticClass:"answer"},[i>=1?s("i",{staticClass:"el-icon-close close_question_icon",on:{click:function(e){return t.removeAnswer(i)}}}):t._e(),s("el-input",{staticClass:"input",attrs:{type:"textarea","show-word-limit":"",maxlength:"2000",autosize:{minRows:4,maxRows:7}},on:{focus:function(e){return t.setAnswerIndex(i)}},model:{value:e.content,callback:function(s){t.$set(e,"content",s)},expression:"item.content"}}),s("UploaderList",{attrs:{max:9},model:{value:e.images,callback:function(s){t.$set(e,"images",s)},expression:"item.images"}})],1)})),s("el-tooltip",{attrs:{content:"添加新的回复段落",placement:"top"}},[s("i",{staticClass:"el-icon-circle-plus btn--icon",on:{click:t.addAnswer}})]),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{on:{click:t.preview}},[t._v("预览")])],1)],2):t._e()],1):s("div",{staticClass:"tip"},[t._v("\n        暂无数据\n      ")])]),s("div",{staticClass:"content--right"},[s("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"快捷回复",name:"fastreply"}},[s("div",{staticClass:"reply-box"},[s("el-button",{attrs:{type:"text"},on:{click:t.showAddFun}},[t._v(t._s(t.OperatorTxt))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddTextarea,expression:"showAddTextarea"}],staticClass:"clearfix"},[s("el-input",{attrs:{type:"textarea","aria-placeholder":"",maxlength:"2000",rows:"3","show-word-limit":""},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}}),s("el-button",{staticClass:"float-right margin-top-10",attrs:{type:"primary",size:"mini"},on:{click:t.addReplyFun}},[t._v("保存")])],1),t.replyList.length>0?s("div",{staticClass:"reply-list-box"},t._l(t.replyList,(function(e,i){return s("div",{key:i},[s("div",{staticClass:"reply-list clearfix"},[s("p",{staticClass:"clearfix"},[s("el-button",{staticClass:"float-right",attrs:{type:"text"},on:{click:function(s){return t.delReply(e._id)}}},[t._v("删除")]),s("el-button",{staticClass:"float-right margin-right-10",attrs:{type:"text"},on:{click:function(s){return t.updateReply(e)}}},[t._v("修改")])],1),s("div",{staticClass:"cursor-pointer text-wrap",domProps:{innerHTML:t._s(e.content)},on:{click:function(s){return t.setAnswer(e.content)}}})])])})),0):t._e()],1)]),s("el-tab-pane",{attrs:{label:"问诊历史",name:"history"}},[s("div",{staticClass:"scroll-box-history"},[t.historiesList.list.length?s("el-collapse",{attrs:{accordion:""},on:{change:t.onCollapseOpen}},t._l(t.historiesList.list,(function(e,i){return s("el-collapse-item",{key:i,attrs:{name:e._id}},[s("div",{staticClass:"sollapse__title",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"title"},[t._v("\n                    首次提问日期："+t._s(t._f("formatTime")(new Date(e.active_at),"{y}-{m}-{d}"))+"\n                  ")]),s("div",[t._v("\n                    接诊科室："+t._s(t.sectionOffice(e.section_office,"",!0))+"\n                  ")]),s("div",[t._v("接诊人："+t._s(e.doctor?e.doctor.name:""))]),s("div",[t._v("问诊状态："+t._s(t.singleAskStatus(e.status)))])]),t.historiesList.detail[e._id]?s("div",{staticClass:"sollapse__content"},[t._l(t.historiesList.detail[e._id].list,(function(i,n){return[s("ResultList",{key:n,attrs:{result:i,question:t.historiesList.detail[e._id].question,"is-history":""}})]}))],2):s("div",{staticStyle:{"text-align":"center"}},[s("i",{staticClass:"el-icon-loading",staticStyle:{fontSize:"30px"}})])])})),1):s("div",{staticClass:"tip"},[t._v("\n              暂无数据\n            ")])],1)])],1),"history"===t.activeName?s("div",{staticClass:"align-center"},[t.historiesList.page.counts>0?s("el-pagination",{attrs:{layout:"prev, pager, next",total:t.historiesList.page.counts,"page-size":15},on:{"current-change":function(e){return t.onPageChange(e,"history")}}}):t._e()],1):t._e()],1)]),s("el-dialog",{attrs:{title:"提示",visible:t.emptyShow,width:"30%",center:""},on:{close:function(){return t.emptyShow=!1}}},[t._v("\n    未检测到您输入的诊断内容，请输入后进行预览\n    "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.emptyShow=!1}}},[t._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"回复预览",visible:t.previewShow,width:"600px",center:""},on:{close:function(){return t.previewShow=!1}}},[s("p",{staticStyle:{"line-height":"1.5"}},[t._v("\n      您一共编辑了\n      "),s("span",{staticStyle:{color:"red"}},[t._v(t._s(t.answerList.length))]),t._v("\n      段内容，当您单击确认回复操作成功后，用户会一次性收到这些回复，避免用户在等待的过程中焦虑或产生疑问。\n    ")]),s("div",{staticClass:"preview-box"},t._l(t.answerList,(function(e,i){return s("div",{key:i,staticClass:"box"},[s("div",{staticClass:"text-wrap",domProps:{innerHTML:t._s(e.content)}}),e.images.length?s("UploaderList",{attrs:{disabled:""},model:{value:e.images,callback:function(s){t.$set(e,"images",s)},expression:"item.images"}}):t._e()],1)})),0),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{disabled:t.repyLoading},on:{click:function(e){t.previewShow=!1}}},[t._v("返回修改")]),s("el-button",{attrs:{type:"primary",loading:t.repyLoading},on:{click:t.replyQuestion}},[t._v("确认回复")])],1)]),s("el-dialog",{attrs:{title:"提示",visible:t.delReplyVisible,width:"30%",center:""},on:{close:t.closeVisible}},[s("el-row",{attrs:{type:"flex",justify:"center"}},[t._v("\n      确定要删除此条快捷回复吗？\n    ")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.delConfirm}},[t._v("确 定")])],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"tip-title"},[s("span",{staticStyle:{color:"#F8747F"}},[t._v("*")]),t._v("诊断结果\n          ")])}],a=s("a8db"),r=(s("ac6a"),s("96cf"),s("3b8d")),o=(s("20d6"),s("7f7f"),s("6762"),s("2fdb"),s("db72")),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("div",{staticClass:"user"},[s("el-avatar",{attrs:{src:t.detail.question.user.avatar}}),s("p",{staticClass:"nickname"},[t._v(t._s(t.detail.question.user.nickname))]),s("p",{staticClass:"status"},[t._v("\n      "+t._s(t.singleAskStatus(t.detail.question.status,""))+"\n    ")])],1),s("div",{staticClass:"detail"},[t._l(t.detail.list,(function(e,i){return[s("ResultList",{key:i,attrs:{result:e,question:t.detail.question}})]}))],2)])},c=[],u=s("5248"),d=s("0680"),h={components:{ResultList:u["a"]},props:{detail:{type:Object,default:function(){}}},data:function(){return{}},mounted:function(){},methods:{singleAskStatus:d["f"]}},p=h,f=(s("5b49"),s("2877")),m=Object(f["a"])(p,l,c,!1,null,"4ec587f4",null),g=m.exports,v=s("2ef0"),b=s.n(v),_=s("dc16"),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user__info cursor-pointer",class:{select:t.selected.questionId===(t.user?t.user._id:"")},on:{click:t.click}},[t.user.user?s("div",{staticClass:"user"},[s("el-avatar",{attrs:{src:t.user.user.avatar}}),s("div",{staticClass:"info"},[s("p",{staticClass:"nickname"},[t._v(t._s(t.user.user.nickname))]),s("p",{staticClass:"time"},[t._v(t._s(t._f("formatTime")(new Date(t.user.ask_at))))])])],1):s("div",[t._v("\n    空\n  ")]),t.user.bus_status.includes("ask")?s("div",{staticClass:"wait-time",class:{warning:t.getTime.hour>4}},[s("i",{staticClass:"el-icon-time"}),t._v("\n    "+t._s(t.getTime.hour+":"+t.getTime.minutes)+"\n  ")]):t._e()])},w=[],F={props:{user:{type:Object,default:function(){}},selected:{type:Object,default:function(){}}},data:function(){return{}},computed:{getTime:function(){var t=new Date(this.user.ask_at);t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var e=new Date;e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);var s=0;while(t<e){var i=t.getHours();i>8&&i<=23&&(s+=1),t.setTime(t.setHours(t.getHours()+1))}var n=new Date(this.user.ask_at),a=new Date,r=n.getHours(),o=a.getHours(),l=n.getMinutes(),c=n.getSeconds(),u=n.getMilliseconds();r<=7&&(l=0,c=0,u=0);var d=a.getMinutes(),h=a.getSeconds(),p=a.getMilliseconds();o<=7&&o>0?(d=0,h=0,p=0):0===o&&(d=59,h=59,p=0);var f=d-l,m=h-c,g=p-u;return g<0&&(m-=1,g=1e3+g),m<0&&(f-=1,m=60+m),f<0&&(s-=1,f=60+f),{hour:s,minutes:f,seconds:m,milliseconds:g}}},methods:{click:function(){this.$emit("on-select",{userId:this.user.user._id||"",questionId:this.user._id||""})}}},C=F,x=(s("f793"),Object(f["a"])(C,y,w,!1,null,"66c46c0e",null)),k=x.exports,T=s("7af3"),L=s("2f62"),I=s("ed08"),O={components:{ReplyDetail:g,UploaderList:_["a"],ResultList:u["a"],User:k},data:function(){return{activeName:"fastreply",showAddTextarea:!1,OperatorTxt:"添加",showReplyContent:!1,delReplyVisible:!1,replyContent:"",activeId:"",normalNum:0,askNum:0,replyList:[],answerIndex:0,emptyShow:!1,previewShow:!1,repyLoading:!1,currentTab:"normal",detail:{},timer:null,selectedInfo:{},answerList:[{content:"",images:[],videos:[]}],userList:{normal:{list:[]},reply:{list:[]},all:{list:[],page:{}}},historiesList:{list:[],detail:{},page:{}}}},computed:Object(o["a"])({},Object(L["c"])(["userInfo","newAskMessage","singleAskSelect"]),{canReply:function(){return this.detail.question.doctor===this.userInfo.id&&(!("close"!==this.detail.question.bus_status||!this.detail.question.status.includes("ask"))||!!this.detail.question.bus_status.includes("ask"))}}),watch:{answerList:{handler:function(t){Object(I["j"])(this.selectedInfo.questionId,JSON.stringify(t))},deep:!0},newAskMessage:{handler:function(t){t&&this.selectedInfo.questionId&&(this.getQuestionDetail(this.selectedInfo.questionId),this.getQuestionHistories(),"all"===this.currentTab?this.getAllUserQuestionList():this.getQuestionReplyList(),this.changeMessage(!1))},immediate:!0},singleAskSelect:function(t){t&&(this.currentTab=t.status,"all"===this.currentTab?this.getAllUserQuestionList():this.getQuestionReplyList(),this.selectedInfo=t,this.selectedInfo.userId&&this.selectedInfo.questionId&&(this.getQuestionHistories(),this.getQuestionDetail(this.selectedInfo.questionId)))}},mounted:function(){var t=this;this.getReplyList();var e=this.$route.query,s=e.type,i=e.info;this.currentTab=s||"normal",this.selectedInfo=i||{},this.$route.query.questionId&&(this.selectedInfo.questionId=this.$route.query.questionId),this.$route.query.userId&&(this.selectedInfo.userId=this.$route.query.userId),this.getAllUserQuestionList(),this.getQuestionReplyList(),this.selectedInfo.userId&&this.selectedInfo.questionId&&(this.getQuestionHistories(),this.getQuestionDetail(this.selectedInfo.questionId)),this.timer||(this.timer=setInterval((function(){t.getQuestionReplyList()}),1e4))},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},methods:Object(o["a"])({sectionOffice:d["d"],singleAskStatus:d["f"],removeAnswer:function(t){this.answerList=b.a.remove(this.answerList,(function(e,s){return!(s===t)}))},closeVisible:function(){this.delReplyVisible=!1,this.activeId=""},setAnswerIndex:function(t){this.answerIndex=t},setAnswer:function(t){this.answerList[this.answerIndex].content+=t},showAddFun:function(){this.showAddTextarea=!this.showAddTextarea},addReplyFun:function(){var t=this,e=this.activeId?T["m"]:T["a"],s={id:this.activeId,content:this.replyContent},i=this.activeId?"修改":"添加";this.replyContent?e(s).then((function(e){e&&e.data.result&&(t.OperatorTxt="添加",t.activeId="",t.replyContent="",t.showAddTextarea=!1,t.$message({type:e.data.result?"success":"error",message:e.data.result?i+"成功":i+"失败"}),t.getReplyList())})):this.$message({type:"warning",message:"内容不能为空"})},updateReply:function(t){this.showAddFun(),this.showAddTextarea=!0,this.OperatorTxt="修改",this.replyContent=t.content,this.activeId=t._id},delReply:function(t){this.delReplyVisible=!0,this.activeId=t},getReplyList:function(){var t=this;Object(T["l"])().then((function(e){e&&2e4===e.code?t.replyList=e.data:t.replyList=[]}))},delConfirm:function(){var t=this;Object(T["d"])(this.activeId).then((function(e){e&&(t.activeId="",t.getReplyList(),t.delReplyVisible=!1,t.$message({type:e.data.result?"success":"error",message:e.data.result?"删除成功":"删除失败"}))}))}},Object(L["b"])({changeMessage:"ask/changeMessage"}),{goBack:function(){this.$router.push({name:"ConsultationList"})},handleTabClick:function(t){"all"===t.name?this.getAllUserQuestionList():this.getQuestionReplyList()},onCollapseOpen:function(t){t&&this.getQuestionDetail(t,"history")},onPageChange:function(t,e){"user"===e?this.getAllUserQuestionList(t,!1):this.getQuestionHistories(t,!1)},resetAnswerList:function(){this.answerList=[{content:"",images:[],videos:[]}]},onSelect:function(t){var e=this;this.selectedInfo=t,this.getQuestionDetail(t.questionId),this.getQuestionHistories(),this.$nextTick((function(){var t=Object(I["i"])(e.selectedInfo.questionId);t?e.answerList=JSON.parse(t):e.resetAnswerList()}))},addAnswer:function(){this.answerList.push({content:"",images:[],videos:[]})},preview:function(){var t=this.answerList.findIndex((function(t){return!t.content}));-1!==t?this.emptyShow=!0:this.previewShow=!0},getQuestionReplyList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,i,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(T["k"])();case 2:e=t.sent,s=e.data.askNum,i=e.data.normalNum,n=e.data.list,a={normal:{list:[]},reply:{list:[]}},n.forEach((function(t){"normal"===t.status?a.normal.list.push(t):a.reply.list.push(t)})),this.askNum=s,this.normalNum=i,this.userList=Object.assign(this.userList,a),!this.selectedInfo.userId&&this.userList.normal.list[0]&&(this.selectedInfo.userId=this.userList.normal.list[0].user._id,this.selectedInfo.questionId=this.userList.normal.list[0]._id,Object(I["i"])(this.selectedInfo.questionId)&&(this.answerList=JSON.parse(Object(I["i"])(this.selectedInfo.questionId))),this.getQuestionHistories(),this.getQuestionDetail(this.selectedInfo.questionId));case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAllUserQuestionList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,i,n,r,o,l,c,u=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:1,s=!(u.length>1&&void 0!==u[1])||u[1],t.next=4,Object(T["e"])({page:s?1:e});case 4:i=t.sent,n=i.data.askNum,r=i.data.normalNum,o=i.data.list,l=o.list,c=Object(a["a"])(o,["list"]),this.userList.all={list:l,page:c},this.askNum=n,this.normalNum=r;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getQuestionHistories:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,i,n,r,o,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:1,s=!(l.length>1&&void 0!==l[1])||l[1],t.next=4,Object(T["j"])({user:this.selectedInfo.userId,page:s?1:e});case 4:i=t.sent,n=i.data,r=n.list,o=Object(a["a"])(n,["list"]),s?this.historiesList={list:r,page:o,detail:{}}:(this.historiesList.list=r,this.historiesList.page=o);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getQuestionDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,s){var i,n,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("history"!==s||!this.historiesList.detail[e]){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(T["i"])(e);case 4:i=t.sent,n=i.data,n.list.forEach((function(t){"user"===t.role?t.msg_content.images=t.msg_content.images.concat(t.msg_content.videos||[]):t.msg_content.length&&t.msg_content.forEach((function(t){t.images=t.images.concat(t.videos||[])}))})),"history"===s?this.$nextTick((function(){var t=a.historiesList.detail;a.historiesList.detail={},t[e]=n,a.historiesList.detail=t})):this.detail=n;case 8:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}(),replyQuestion:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return localStorage.removeItem(this.selectedInfo.questionId),this.repyLoading=!0,t.prev=2,t.next=5,Object(T["c"])({msg_content:this.answerList,question:this.selectedInfo.questionId});case 5:this.getQuestionDetail(this.selectedInfo.questionId),this.getQuestionHistories(),"all"===this.currentTab?this.getAllUserQuestionList():this.getQuestionReplyList(),this.answerList=[{content:"",images:[],videos:[]}],t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0);case 14:return t.prev=14,this.repyLoading=!1,this.previewShow=!1,t.finish(14);case 18:case"end":return t.stop()}}),t,this,[[2,11,14,18]])})));function e(){return t.apply(this,arguments)}return e}()})},j=O,q=(s("fb98"),Object(f["a"])(j,i,n,!1,null,"4bbcea5a",null));e["default"]=q.exports},5248:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"layout--history":t.isHistory}},["user"===t.result.role?s("div",{staticClass:"user"},[t.isHistory?s("div",[s("p",{staticClass:"title--history"},[s("el-divider",{attrs:{"content-position":"center"}},[t._v(t._s((1===t.result.count?"首次提":2===t.result.count?"第1次追":"第2次追")+"问"))])],1),s("div",{staticClass:"userinfo"},[s("el-avatar",{attrs:{src:t.question.user.avatar}}),s("p",{staticClass:"nickname"},[t._v(t._s(t.question.user.nickname))]),s("p",{staticClass:"time"},[t._v(t._s(t._f("formatTime")(t.result.created_at)))])],1)]):s("div",{staticClass:"title"},[s("p",{staticClass:"text"},[t._v("\n        "+t._s((1===t.result.count?"首次提":2===t.result.count?"第1次追":"第2次追")+"问")+"\n      ")]),s("p",{staticClass:"time"},[t._v(t._s(t._f("formatTime")(new Date(t.result.created_at))))])]),s("div",{staticClass:"content"},[t.showData.length&&!t.isHistory?s("div",t._l(t.showData,(function(e,i){return s("div",{key:i},[e.show?s("div",{staticClass:"row"},[s("div",{staticClass:"label",class:t.type},[t._v(t._s(e.label))]),e.value?s("div",{staticClass:"value"},[t._v(t._s(e.value))]):t._e(),e.html?s("div",{staticClass:"content--text",domProps:{innerHTML:t._s(e.html)}}):t._e()]):t._e()])})),0):t._e(),s("div",{staticClass:"row"},[t.isHistory?s("div",{staticClass:"value"},t._l(t.showData,(function(e,i){return s("span",{key:i},[e.show?s("span",[s("span",[t._v(t._s(e.label))]),e.value?s("span",{staticClass:"value"},[t._v(t._s(e.value))]):t._e(),e.html?s("div",{staticClass:"content--text",domProps:{innerHTML:t._s(e.html)}}):t._e()]):t._e()])})),0):t._e()]),1!==t.result.count?s("div",{staticClass:"content--text",domProps:{innerHTML:t._s(t.result.msg_content.content)}}):t._e(),t.result.msg_content.voice?s("div",{staticClass:"row margin-top-10"},[s("my-audio",{attrs:{msgtime:t.result.msg_content.voice.msgTime?t.result.msg_content.voice.msgTime:"1",src:t.result.msg_content.voice.url,vduration:t.result.msg_content.voice.duration}})],1):t._e(),s("div",{staticClass:"row"},[t.result.msg_content.images.length?s("UploaderList",{staticClass:"uploader",attrs:{disabled:""},model:{value:t.result.msg_content.images,callback:function(e){t.$set(t.result.msg_content,"images",e)},expression:"result.msg_content.images"}}):t._e()],1)])]):t._e(),"admin"===t.result.role?s("div",{staticClass:"admin"},[t.result.admin.name?s("div",{staticClass:"title"},[s("el-avatar",{attrs:{src:t.result.admin.avatar}}),s("p",{staticClass:"name"},[t._v(t._s(t.result.admin.name))]),s("p",{staticClass:"time"},[t._v(t._s(t._f("formatTime")(new Date(t.result.created_at))))])],1):t._e(),t._l(t.result.msg_content,(function(e,i){return s("div",{key:i,staticClass:"content"},[s("div",{staticClass:"content--text",domProps:{innerHTML:t._s(e.content)}}),e.images.length?s("UploaderList",{staticClass:"uploader",attrs:{disabled:""},model:{value:e.images,callback:function(s){t.$set(e,"images",s)},expression:"item.images"}}):t._e()],1)}))],2):t._e()])},n=[],a=s("dc16"),r=s("8975"),o=s("7a26"),l={components:{UploaderList:a["a"]},data:function(){return{type:"",showData:[]}},props:{result:{type:Object,default:function(){}},question:{type:Object,default:function(){}},isHistory:{type:Boolean,default:!1}},created:function(){this.getData(this.result,this.isHistory,this.question)},watch:{question:{handler:function(){this.getData(this.result,this.isHistory,this.question)},deep:!0}},methods:{curStageTxt:r["curStageTxt"],booleanToTxt:r["booleanToTxt"],measureToTxt:r["measureToTxt"],feedModeTxt:r["feedModeTxt"],fenmianModeTxt:r["fenmianModeTxt"],getChankeInfo:o["b"],getEekeOrOldChankeData:function(t,e,s,i){this.showData=[{show:"pediatric"===t,label:"患者性别：",value:1===e.gender?"男":"女"},{show:!0,label:"pediatric"===t?"患者出生日期：":"上次月经日期：",value:this.formatTime(e.birth_day,"{y}-{m}-{d}")},{show:"pediatric"===t,label:"患者年龄：",value:e.age},{show:!0,label:"pediatric"===t?"症状持续时长：":"孕周：",value:"pediatric"===t?e.symptom<90?"".concat(e.symptom,"天"):"超过".concat(e.symptom,"天"):"".concat(Math.floor(e.symptom/7),"周 ").concat(e.symptom%7,"天")},{show:!0,label:s?"":"症状描述：",value:"",html:i.msg_content.content}]},getData:function(t,e,s){var i=t.count,n=s.section_office,a=s.ask_basic_info?s.ask_basic_info:s;if(1===i)if("pediatric"===n||"obstetrics"===n&&a.is_old)this.type="erke",this.getEekeOrOldChankeData(n,a,e,t);else if("obstetrics"===n){this.type="chanke";var r=a.cur_stage;this.showData=this.getChankeInfo(r,a,e,t)}}}},c=l,u=(s("63c8"),s("2877")),d=Object(u["a"])(c,i,n,!1,null,"42247cc4",null);e["a"]=d.exports},"5b49":function(t,e,s){"use strict";var i=s("7fc5"),n=s.n(i);n.a},"63c8":function(t,e,s){"use strict";var i=s("a7ca"),n=s.n(i);n.a},"791e":function(t,e,s){},"7a26":function(t,e,s){"use strict";s.d(e,"a",(function(){return o})),s.d(e,"d",(function(){return l})),s.d(e,"c",(function(){return c})),s.d(e,"b",(function(){return u}));var i=s("2ef0"),n=s.n(i),a=s("4360"),r=s("8975");function o(){return{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,s=new Date;s.setTime(s.getTime()-6048e5),t.$emit("pick",[s,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,s=new Date;s.setTime(s.getTime()-2592e6),t.$emit("pick",[s,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,s=new Date;s.setTime(s.getTime()-7776e6),t.$emit("pick",[s,e])}}],disabledDate:function(t){var e=(new Date).getTime();return t>e}}}function l(t){var e=t.event,s=t.bus_role;switch(t.type){case"over_time_send_suggestion":return{bgColor:"#FFFFFF",iconType:"icon-fsdz",color:"#0085FF",border:"1px solid #0085FF"};case"round_append":return{bgColor:"#FFFFFF",iconType:"icon-round_append",color:"#67CA39",border:"1px solid #67CA39"};case"admin_end":return{bgColor:"#FFFFFF",iconType:"icon-admin_end",color:"#ED3645",border:"1px solid #ED3645"};case"text_answer":return{bgColor:"#FFFFFF",iconType:"iconhushi",color:"#FF8181",border:"1px solid #FF8181"};case"system":return"error"===e?{bgColor:"#ED3645",iconType:"icon-setting-fill",border:"1px solid #ED3645"}:"warning"===e?{bgColor:"#FFB718",iconType:"icon-setting-fill",border:"1px solid #FFB718"}:"end"===e?{bgColor:"#979797",iconType:"icon-setting-fill",border:"1px solid #979797"}:"transfer_auto_accept"===e?{bgColor:"#67CA39",iconType:"icon-setting-fill",border:"1px solid #67CA39"}:{};case"system-info":return"error"===e?{bgColor:"#ED3645",iconType:"icon-setting-fill",borderColor:"#FFFFFF"}:"warning"===e?{bgColor:"#FFB718",iconType:"icon-setting-fill",borderColor:"#FFFFFF"}:"end"===e?{bgColor:"#979797",iconType:"icon-setting-fill",borderColor:"#FFFFFF"}:{};case"user_ask":return{bgColor:"#FFFFFF",iconType:"icon-signal-fill",color:"#0085FF",border:"1px solid #0085FF"};case"round_apply_transfer":return{bgColor:"#FFFFFF",iconType:"icon-signal-fill",color:"#0085FF",border:"1px solid #0085FF"};case"user_end":return{bgColor:"#FFFFFF",iconType:"el-icon-user-solid",color:"#979797",border:"1px solid #979797"};case"voice_transfer_answer":return{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"};case"text_transfer_answer":return"doctor"===s?{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"}:"dietician"===s?{bgColor:"#fff",iconType:"icon-yingyangshi1",color:"#FFB718",border:"1px solid #FFB718"}:{};case"transfer_apply":return{bgColor:"#FFFFFF",iconType:"iconhushi",color:"#FF8181",border:"1px solid #FF8181"};case"transfer_start":return{bgColor:"#FFFFFF",iconType:"iconhushi",color:"#FF8181",border:"1px solid #FF8181"};case"transfer_accept":return"doctor"===s?{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"}:"dietician"===s?{bgColor:"#fff",iconType:"icon-yingyangshi1",color:"#FFB718",border:"1px solid #FFB718"}:{};case"transfer_reject":return"doctor"===s?{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"}:"dietician"===s?{bgColor:"#fff",iconType:"icon-yingyangshi1",color:"#FFB718",border:"1px solid #FFB718"}:{};case"voice_transfer_end":return{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#999",border:"1px solid #999"};case"user_transfer":return{bgColor:"#FFFFFF",iconType:"icon-signal-fill",color:"#0085FF",border:"1px solid #0085FF"};case"iconicon-ysdaiban":return{bgColor:"#FFFFFF",iconType:"iconicon-ysdaiban",color:"#0085FF",border:"1px solid #0085FF"};default:return{}}}function c(t){if(a["a"].state.chat.serviceItem){var e=a["a"].state.chat.serviceItem;if("transfer"===t&&e.length){for(var s=!1,i=0;i<e.length;i++)if(-1!==e[i].indexOf(t))return s=!0,s;return s}var r=n.a.indexOf(e,t);return r=-1!==r,r}}function u(t,e,s,i,n){var a="y-m-d",o=[{show:!0,label:"当前阶段：",value:Object(r["curStageTxt"])(t)},{show:!0,label:"月经史（月经是否规律）：",value:Object(r["booleanToTxt"])(e.is_schedule)},{show:!e.is_schedule&&e.measure_desc,label:"",html:'<span class="color-999">'+e.measure_desc+"</span>",value:""},{show:e.is_schedule,label:"月经周期：",value:e&&e.period_start?e.period_start+"天 至 "+e.period_end+"天":"-"},{show:e.is_schedule,label:"每次持续：",value:e&&e.duration_start?e.duration_start+"天 至 "+e.duration_end+"天":"-"},{show:e.is_schedule,label:"月经量：",value:e&&e.measure?this.measureToTxt(e.measure):"-"},{show:"byz"===t,label:"备孕开始日期：",value:n?this.formatTime(e.started_at,a):e.started_at},{show:"byz"===t,label:"备孕时长：",value:e.bysc},{show:"byz"===t,label:"是否做过孕前检查：",value:Object(r["booleanToTxt"])(e.is_checked)},{show:"byz"===t&&e.is_checked,label:"检查是否有异常：",value:Object(r["booleanToTxt"])(e.has_unusual_status)},{show:"byz"===t&&e.is_checked&&e.has_unusual_status,label:"",html:'<span class="color-999">'+e.unusual_desc+"</span>",value:""},{show:"hyz"===t,label:"末次月经日期：",value:n?this.formatTime(e.last_yuejing_at,a):e.last_yuejing_at},{show:"hyz"===t,label:"预产期：",value:n?this.formatTime(e.yuchan_at,a):e.yuchan_at},{show:"hyz"===t,label:"孕周：",value:e.gestational_weeks?e.gestational_weeks+"周"+e.gestational_days+"天":""},{show:"hyz"===t,label:"是否孕育过有缺陷的宝宝：",value:Object(r["booleanToTxt"])(e.has_unusual_baby)},{show:"hyz"===t&&e.has_unusual_baby,label:"",html:'<span class="color-999">'+e.unusual_baby_desc+"</span>",value:""},{show:"hyz"===t,label:"既往妊娠综合症：",value:Object(r["booleanToTxt"])(e.has_renshen_history,"has")},{show:"hyz"===t&&e.has_renshen_history,label:"",html:'<span class="color-999">'+e.renshen_desc+"</span>",value:""},{show:"crq"===t,label:"分娩日期：",value:n?this.formatTime(e.fenmian_at,a):e.fenmian_at},{show:"crq"===t,label:"分娩方式：",value:Object(r["fenmianModeTxt"])(e.fenmian_mode)},{show:"crq"===t&&"ydfm"===e.fenmian_mode,label:"是否侧切：",value:Object(r["booleanToTxt"])(e.is_ceqie)},{show:"crq"===t,label:"本次产后喂养方式：",value:Object(r["feedModeTxt"])(e.feed_mode)},{show:!!i,label:s?"":"症状描述：",value:"",html:i?i.msg_content.content:""}];return o}},"7af3":function(t,e,s){"use strict";s.d(e,"h",(function(){return n})),s.d(e,"g",(function(){return a})),s.d(e,"f",(function(){return r})),s.d(e,"k",(function(){return o})),s.d(e,"e",(function(){return l})),s.d(e,"i",(function(){return c})),s.d(e,"j",(function(){return u})),s.d(e,"b",(function(){return d})),s.d(e,"c",(function(){return h})),s.d(e,"l",(function(){return p})),s.d(e,"a",(function(){return f})),s.d(e,"d",(function(){return m})),s.d(e,"m",(function(){return g}));var i=s("b775");function n(t){return Object(i["a"])({url:"/admin/question/handler",method:"get",params:t})}function a(t){return Object(i["a"])({url:"/admin/question/users",method:"get",params:t})}function r(){return Object(i["a"])({url:"/admin/question/list/doctors",method:"get"})}function o(){return Object(i["a"])({url:"/admin/question/reply",method:"get"})}function l(t){return Object(i["a"])({url:"/admin/question/list/users",method:"get",params:t})}function c(t){return Object(i["a"])({url:"/admin/question/detail/".concat(t),method:"get"})}function u(t){return Object(i["a"])({url:"/admin/question/histories",method:"get",params:t})}function d(){return Object(i["a"])({url:"/admin/question/line",method:"get"})}function h(t){return Object(i["a"])({url:"/admin/question/reply",method:"post",data:t})}function p(){return Object(i["a"])({url:"/question_fast_reply/list",method:"get"})}function f(t){return Object(i["a"])({url:"/question_fast_reply",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/question_fast_reply/".concat(t),method:"delete"})}function g(t){return Object(i["a"])({url:"/question_fast_reply/".concat(t.id),method:"put",data:t})}},"7fc5":function(t,e,s){},"91b6":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return l})),s.d(e,"c",(function(){return u}));s("7f7f"),s("386d"),s("28a5");var i=s("db72"),n=(s("96cf"),s("3b8d")),a=s("b775"),r=function(){return Object(a["a"])({url:"/oss/auth",method:"get"})},o=function(t){return Object(a["a"])({url:t+"?x-oss-process=image/info",method:"get"})},l=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var s,n,r,l,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.oss,n=e.key,r=e.file,l=e.onProgress,c=new FormData,c.append("OSSAccessKeyId",s.OSSAccessKeyId),c.append("success_action_status",200),c.append("policy",s.policy),c.append("Signature",s.Signature),c.append("key",n),c.append("file",r),u="https://pic1.baobaohehu.com/",t.next=11,Object(a["a"])({url:u,method:"post",headers:{"Content-Type":"multipart/form-data"},onUploadProgress:l||null,data:c});case 11:if(u+=n,!(r.type.indexOf("image")>-1)){t.next=18;break}return t.next=15,o(u);case 15:d=t.sent,t.next=27;break;case 18:if(!(r.type.indexOf("video")>-1)){t.next=22;break}d=Object(i["a"])({},r.videoMeta,{size:r.size}),t.next=27;break;case 22:if(!(r.type.indexOf("audio")>-1)){t.next=26;break}d={size:r.size,type:r.type},t.next=27;break;case 26:throw new Error("当前上传的类型不是image或者video；当前上传的类型是"+r.type);case 27:return t.abrupt("return",{url:u,meta:d});case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(t){if(!t||"string"!==typeof t)return!1;var e=t.split("").reverse().join(""),s=e.substring(0,e.search(/\./)).split("").reverse().join("");return s},u=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,s){var i,n,a,o,u,d,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:return i=t.sent,n=i.data,a=Math.floor(99*Math.random())+1,o=(new Date).getTime(),u=c(e.name),o=o+a+"."+u,d="".concat(n.path,"/").concat(n.prefix,"/").concat(o),t.next=11,l({oss:n,key:d,file:e,onProgress:s});case 11:return h=t.sent,t.abrupt("return",h);case 13:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},a7ca:function(t,e,s){},a8db:function(t,e,s){"use strict";var i=s("e265"),n=s.n(i),a=s("a4bb"),r=s.n(a);function o(t,e){if(null==t)return{};var s,i,n={},a=r()(t);for(i=0;i<a.length;i++)s=a[i],e.indexOf(s)>=0||(n[s]=t[s]);return n}function l(t,e){if(null==t)return{};var s,i,a=o(t,e);if(n.a){var r=n()(t);for(i=0;i<r.length;i++)s=r[i],e.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}s.d(e,"a",(function(){return l}))},f793:function(t,e,s){"use strict";var i=s("791e"),n=s.n(i);n.a},fb98:function(t,e,s){"use strict";var i=s("2f7f"),n=s.n(i);n.a}}]);
//# sourceMappingURL=chunk-df2a06ea.66e941f5.js.map