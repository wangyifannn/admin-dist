(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c09f9fe4"],{"703b":function(t,e,a){"use strict";var i=a("c034"),r=a.n(i);r.a},c034:function(t,e,a){},e83a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart_wrap margin-top-20"},[a("div",{staticClass:"order_wrap margin-bottom-30"},[a("el-row",{staticClass:"time_wrap"},[a("el-col",{staticClass:"align-left",attrs:{span:5}},[a("el-button",{staticStyle:{"line-height":"2px"},attrs:{size:"large",type:"text"}},[t._v("请选择日期范围：")])],1),a("el-col",{attrs:{span:13}},[a("el-date-picker",{attrs:{size:"mini",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.datetimeRange,callback:function(e){t.datetimeRange=e},expression:"datetimeRange"}})],1),a("el-button",{staticClass:"margin-left-20",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDataByTime("order")}}},[t._v("搜索")]),a("el-button",{staticClass:"margin-left-20",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.resetDataByTime("order")}}},[t._v("重置")])],1),a("BarChart",{attrs:{title:t.barTitle,barChartData:t.barChartData}})],1),a("div",{staticClass:"chat_wrap margin-top-30"},[a("el-row",{staticClass:"time_wrap"},[a("el-col",{staticClass:"align-left",attrs:{span:5}},[a("el-button",{staticStyle:{"line-height":"2px"},attrs:{size:"large",type:"text"}},[t._v("请选择时间范围：")])],1),a("el-col",{attrs:{span:13}},[a("el-date-picker",{attrs:{size:"mini",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期时间","end-placeholder":"结束日期时间"},model:{value:t.datetimeRange2,callback:function(e){t.datetimeRange2=e},expression:"datetimeRange2"}})],1),a("el-button",{staticClass:"margin-left-20",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getDataByTime()}}},[t._v("搜索")]),a("el-button",{staticClass:"margin-left-20",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.resetDataByTime()}}},[t._v("重置")])],1),a("LineChart",{staticClass:"margin-top-30",attrs:{title:t.lineTitle,chartData:t.lineChartData}})],1),t._e()],1)},r=[],s=(a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})}),n=[],l=a("313e"),o=a.n(l),h=a("2ef0"),c=a.n(h);a("817d");var d={name:"barChart",props:{title:{type:Object,default:function(){}},className:{type:String,default:"barChart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},barChartData:{type:Object,required:!0}},data:function(){return{barChart:null,sidebarElm:null,colorArr:["orange","#67C23A","#409EFF"],lineNameArr:["家庭医生订单总数","单次问诊订单总数","订单总量"],seriesArr:[],legendData:[]}},watch:{barChartData:{deep:!0,handler:function(t){this.barChart&&(this.barChart.dispose(),this.barChart=null),this.initChart()}}},mounted:function(){var t=this;this.initChart(),this.autoResize&&(this.__resizeHandler=c.a.debounce((function(){t.barChart&&t.barChart.resize()}),100),window.addEventListener("resize",this.__resizeHandler))},beforeDestroy:function(){this.barChart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler),this.barChart.dispose(),this.barChart=null)},methods:{sidebarResizeHandler:function(t){"width"===t.propertyName&&this.__resizeHandler()},getDataByxAxis:function(t){switch(t){case 0:return"fd";case 1:return"singleAsk";case 2:return"total";default:return""}},setSeriesArr:function(){var t=this;this.seriesArr=[],this.lineNameArr.forEach((function(e,a){a<t.lineNameArr.length-1?t.seriesArr.push({name:e,type:"bar",stack:"总量",label:{show:!0,position:"insideRight"},barWidth:"25px",itemStyle:{color:t.colorArr[a]},data:t.barChartData[t.getDataByxAxis(a)],animationDelay:function(t){return 10*t}}):t.seriesArr.push({name:e,smooth:!0,type:"line",lineStyle:{opacity:1,width:3},itemStyle:{color:t.colorArr[a]},label:{show:!0,textStyle:{color:"#fff"}},data:t.barChartData[t.getDataByxAxis(a)]}),t.setLegendData(a)}))},setLegendData:function(t){this.legendData.push({name:this.lineNameArr[t],textStyle:{color:this.colorArr[t]}})},setOptions:function(t){this.barChart.setOption({title:{text:this.title.text,subtext:this.title.subtext,lineHeight:100,textStyle:{fontStyle:"normal",color:"#000"}},toolbox:{left:470,top:0,feature:{saveAsImage:{show:!0}}},dataZoom:[{id:"dataZoomX",type:"inside",xAxisIndex:[0],filterMode:"filter"}],grid:{left:10,right:10,bottom:20,top:50,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"line"}},xAxis:{type:"category",data:t.xAxisData,axisTick:{show:!0}},yAxis:{type:"value"},legend:{top:4,left:100,data:this.legendData},series:this.seriesArr})},initChart:function(){this.barChart=o.a.init(this.$el,this.className),this.barChartData&&(this.setSeriesArr(),this.setOptions(this.barChartData))}}},u=d,p=a("2877"),f=Object(p["a"])(u,s,n,!1,null,null,null),m=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},b=[];a("817d");var y={name:"pieChart",props:{className:{type:String,default:"pieChart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},title:{type:Object,default:function(){}},seriesData:{type:Array,default:function(){return[]}}},data:function(){return{pieChart:null,sidebarElm:null,colorArr:["#36A5FB","#FF005A","#EF2136","#7FF468"],nameArr:["全部","健康管理师","营养师","医生"],seriesArr:[]}},watch:{seriesData:function(){console.log("sss"),this.initChart()}},mounted:function(){var t=this;this.initChart(),this.autoResize&&(this.__resizeHandler=c.a.debounce((function(){t.pieChart&&t.pieChart.resize()}),100),window.addEventListener("resize",this.__resizeHandler))},beforeDestroy:function(){this.pieChart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler),this.pieChart.dispose(),this.pieChart=null)},methods:{sidebarResizeHandler:function(t){"width"===t.propertyName&&this.__resizeHandler()},setSeriesArr:function(){var t=this;this.nameArr.forEach((function(e,a){t.seriesArr.push({name:e,value:t.seriesData[a]})}))},setOptions:function(t){this.setSeriesArr(),console.log("seriesArr==",this.seriesArr),this.pieChart.setOption({title:{text:this.title.text,subtext:this.title.subtext,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:this.nameArr},series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:this.seriesArr,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},initChart:function(){this.pieChart=o.a.init(this.$el,this.className),this.setOptions()}}},C=y,x=Object(p["a"])(C,g,b,!1,null,null,null),A=x.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},v=[];a("817d");var w={name:"countLine",props:{title:{type:Object,default:function(){}},className:{type:String,default:"lineChart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{lineChart:null,sidebarElm:null,colorArr:["#F56C6C","#67C23A","#E6A23C","#409EFF"],lineNameArr:["服务中的合约总数","咨询总数","待接入总数","转诊中总数"],seriesArr:[],legendData:[]}},watch:{chartData:{deep:!0,handler:function(t){this.lineChart&&(this.lineChart.dispose(),this.lineChart=null),this.initChart()}}},mounted:function(){var t=this;this.autoResize&&(this.__resizeHandler=c.a.debounce((function(){t.lineChart&&t.lineChart.resize()}),100),window.addEventListener("resize",this.__resizeHandler))},beforeDestroy:function(){this.lineChart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler),this.lineChart.dispose(),this.lineChart=null)},methods:{sidebarResizeHandler:function(t){"width"===t.propertyName&&this.__resizeHandler()},getDataNameByIndex:function(t){switch(t){case 0:return"totalContract";case 1:return"consult";case 2:return"waitting";case 3:return"transfer";default:return""}},setSeriesArr:function(t){var e=this;this.seriesArr=[],this.lineNameArr.forEach((function(a,i){e.seriesArr.push({name:a,smooth:!0,type:"line",lineStyle:{opacity:1,width:3},itemStyle:{color:e.colorArr[i]},data:t[e.getDataNameByIndex(i)],animationDuration:2800,animationEasing:"cubicInOut"}),e.setLegendData(i)}))},setLegendData:function(t){this.legendData.push({name:this.lineNameArr[t],icon:"circle",textStyle:{color:this.colorArr[t]}})},setOptions:function(t){this.setSeriesArr(t),this.lineChart.setOption({title:{text:this.title.text,subtext:this.title.subtext,lineHeight:100,textStyle:{fontStyle:"normal",color:"#000"}},toolbox:{show:!0,left:570,top:0,feature:{saveAsImage:{show:!0}}},dataZoom:[{id:"dataZoomX",type:"inside",xAxisIndex:[0],filterMode:"filter"}],xAxis:{data:t.xAxisData,boundaryGap:!1,axisLabel:{rotate:"60",interval:this.chartData.totalContract.length>30?20:0},axisLine:{onZero:!1,lineStyle:{color:this.colorArr}},axisTick:{show:!0}},grid:{left:10,right:10,bottom:20,top:50,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!0}},legend:{top:4,left:150,data:this.legendData},series:this.seriesArr},!0)},initChart:function(){this.lineChart=o.a.init(this.$el,this.className),this.chartData&&this.setOptions(this.chartData)}}},_=w,z=Object(p["a"])(_,D,v,!1,null,null,null),S=z.exports,E=a("b775");function k(t){return Object(E["a"])({url:"/data_analyze/fd_ask",method:"get",params:t})}function R(t){return Object(E["a"])({url:"/data_analyze/orders",method:"get",params:t})}var O={name:"count",components:{LineChart:S,PieChart:A,BarChart:m},data:function(){return{datetimeRange:[],datetimeRange2:[],start:"",end:"",lineChartData:{},barChartData:{},pieSeriesData:[200,22,55,66],lineTitle:{text:"咨询数据统计",subText:""},barTitle:{text:"订单统计",subText:""},pieTitle:{text:"咨询数据统计-饼图",subText:""}}},methods:{resetDataByTime:function(t){var e={start:"",end:""};"order"===t?(this.datetimeRange=[],this.getOrderData(e)):(this.datetimeRange2=[],this.getFdAskData(e))},getDataByTime:function(t){var e="order"===t?this.datetimeRange:this.datetimeRange2;e&&e.length>=2&&(this.start=e[0],this.end=e[1]);var a={start:this.start,end:this.end};"order"===t?this.getOrderData(a):this.getFdAskData(a)},getFdAskData:function(t){var e=this;k(t).then((function(t){var a=t.data.list;console.log("getLineChartData==",a);var i={totalContract:[],consult:[],waitting:[],transfer:[],xAxisData:[]};a.forEach((function(t,a){i.totalContract.push(t.ask_record.in_service_contracts),i.consult.push(t.ask_record.asking_num),i.waitting.push(t.ask_record.pending_num),i.transfer.push(t.ask_record.transfer_num),i.xAxisData.push(e.formatTime(t.created_at,"MDHM"))})),console.log("obj===",i),e.lineChartData=i}))},getOrderData:function(t){var e=this;R(t).then((function(t){console.log("barChartData==",t);var a=t.data.list,i={singleAsk:[],fd:[],total:[],xAxisData:[]};a.forEach((function(t,e){i.total.push(t.total),i.fd.push(t.FdServiceType?t.FdServiceType:0),i.singleAsk.push(t.InquiryServiceType?t.InquiryServiceType:0),i.xAxisData.push(t.day)})),e.barChartData=i}))}},created:function(){this.getFdAskData(),this.getOrderData()}},T=O,H=(a("703b"),Object(p["a"])(T,i,r,!1,null,null,null));e["default"]=H.exports}}]);
//# sourceMappingURL=chunk-c09f9fe4.63c62d0f.js.map