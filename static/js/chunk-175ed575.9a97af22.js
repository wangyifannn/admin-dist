(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-175ed575"],{"2e78":function(e,t,r){"use strict";var a=r("a18b"),n=r.n(a);n.a},3552:function(e,t,r){"use strict";var a=r("f409"),n=r.n(a);n.a},"3acd":function(e,t,r){"use strict";r.d(t,"i",(function(){return n})),r.d(t,"l",(function(){return s})),r.d(t,"m",(function(){return i})),r.d(t,"g",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"o",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"k",(function(){return d})),r.d(t,"f",(function(){return f})),r.d(t,"e",(function(){return p})),r.d(t,"h",(function(){return m})),r.d(t,"n",(function(){return h})),r.d(t,"c",(function(){return _})),r.d(t,"j",(function(){return b})),r.d(t,"b",(function(){return g}));var a=r("b775");function n(e){return Object(a["a"])({url:"/crm/customer/list",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/crm/user/list",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/crm/user/".concat(e),method:"get",params:e})}function o(e){return Object(a["a"])({url:"/crm/customer/".concat(e,"/detail"),method:"get",params:e})}function c(e){return Object(a["a"])({url:"/crm/customer",method:"post",data:e})}function u(e,t){return Object(a["a"])({url:"/crm/customer/".concat(t,"/update"),method:"put",data:e})}function l(e,t){return Object(a["a"])({url:"/crm/customer/".concat(t,"/relative"),method:"put",data:e})}function d(e,t){return Object(a["a"])({url:"/crm/customer/".concat(e,"/orders"),method:"get",params:t})}function f(e){return Object(a["a"])({url:"/crm/customer/".concat(e,"/brief_info"),method:"get"})}function p(e,t){return Object(a["a"])({url:"/crm/customer/".concat(e,"/path"),method:"post",data:t})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["a"])({url:"/crm/customer/".concat(e,"/path/list"),method:"get",params:t})}function h(){return Object(a["a"])({url:"/crm/basic/customer/supervisor/options",method:"get"})}function _(e){return Object(a["a"])({url:"/crm/customer/change_supervisor",method:"put",data:e})}function b(e){return Object(a["a"])({url:"/crm/customer/".concat(e,"/creator_options"),method:"get"})}function g(e){return Object(a["a"])({url:"/crm/customer/".concat(e,"/cancel_relative"),method:"put"})}},"3ccc":function(e,t,r){e.exports={menuText:"#17233D",menuActiveText:"#409EFF",subMenuActiveText:"#17233D",menuBg:"#FEFEFE",menuHover:"#ECF4FF",subMenuBg:"#FEFEFE",subMenuHover:"#ECF4FF",sideBarWidth:"240px"}},"3f9d5":function(e,t,r){"use strict";var a=r("9037"),n=r.n(a);n.a},5118:function(e,t,r){(function(e){var a="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(n.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new s(n.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r("24aa"))},6017:function(e,t,r){(function(e,t){(function(e,r){"use strict";if(!e.setImmediate){var a,n=1,s={},i=!1,o=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?p():m()?h():e.MessageChannel?_():o&&"onreadystatechange"in o.createElement("script")?b():g(),c.setImmediate=u,c.clearImmediate=l}function u(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return s[n]=i,a(n),n++}function l(e){delete s[e]}function d(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(r,a);break}}function f(e){if(i)setTimeout(f,0,e);else{var t=s[e];if(t){i=!0;try{d(t)}finally{l(e),i=!1}}}}function p(){a=function(e){t.nextTick((function(){f(e)}))}}function m(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}function h(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"===typeof r.data&&0===r.data.indexOf(t)&&f(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),a=function(r){e.postMessage(t+r,"*")}}function _(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;f(t)},a=function(t){e.port2.postMessage(t)}}function b(){var e=o.documentElement;a=function(t){var r=o.createElement("script");r.onreadystatechange=function(){f(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}function g(){a=function(e){setTimeout(f,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,r("24aa"),r("4362"))},7857:function(e,t,r){"use strict";var a=r("3ccc"),n=r.n(a);n.a},9037:function(e,t,r){},"9c49":function(e,t,r){},a18b:function(e,t,r){},b561:function(e,t,r){"use strict";var a=r("9c49"),n=r.n(a);n.a},ee25:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-list"},[r("div",{staticClass:"order-list__search"},[r("OrderTab",{on:{orderTab:e.orderTab}}),r("el-button",{staticClass:"order-list__search__collapse-btn",attrs:{type:"text"},on:{click:function(t){e.searchFormShow=!e.searchFormShow}}},[e._v("\n      "+e._s(e.searchFormShowText)+"\n      "),r("i",{staticClass:"el-icon--right",class:e.searchFormShow?"el-icon-arrow-up":"el-icon-arrow-down"})]),r("el-collapse-transition",[r("search-form",{directives:[{name:"show",rawName:"v-show",value:e.searchFormShow,expression:"searchFormShow"}],ref:"orderSearchRef",attrs:{orderTab:e.orderTabVal,"cur-order-status":"all"===e.curTabName?"":e.curTabName,"local-form-data":e.searchParams},on:{search:e.handleSearch,orderBasicOpts:e.orderBasicOpts}})],1)],1),r("div",{staticClass:"order-list__body"},[r("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.curTabName,callback:function(t){e.curTabName=t},expression:"curTabName"}},e._l(e.tabArr,(function(t){var a=t.label,n=t.name,s=t.num;return r("el-tab-pane",{key:n,attrs:{name:n}},[r("el-badge",{staticClass:"item",attrs:{slot:"label",value:s,max:99},slot:"label"},[r("el-button",{class:"pending"===n?"order-list__body__button--pending":"",attrs:{type:"text",size:"small"}},[e._v(e._s(a))])],1)],1)})),1),e.loading?r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"250px"}}):e._e(),e.loading?e._e():r("OrderTable",{attrs:{orderTab:e.orderTabVal,currentPage:e.current_page,pageSize:e.page_size,total:e.total,tableData:e.orderList},on:{search:e.handleSearch}})],1)])},n=[],s=r("db72"),i=(r("96cf"),r("3b8d")),o=r("f8b7"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tabs",{staticClass:"margin-bottom-30",on:{"tab-click":e.handleTabClick},model:{value:e.orderTab,callback:function(t){e.orderTab=t},expression:"orderTab"}},e._l(e.tabArr,(function(e){var t=e.label,a=e.name;return r("el-tab-pane",{key:a,attrs:{label:t,name:a}})})),1)},u=[],l={data:function(){return{orderTab:"",tabArr:[{label:"全部",name:""},{label:"家庭医生",name:"FdServiceType"},{label:"单次问诊",name:"InquiryServiceType"}]}},methods:{handleTabClick:function(){this.$emit("orderTab",this.orderTab)}}},d=l,f=r("2877"),p=Object(f["a"])(d,c,u,!1,null,null,null),m=p.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("MyForm",{ref:"orderSearchForm",attrs:{form:e.form,formData:e.formData,formItem:e.formItem,getOrderOptsData:!0},on:{resetForm:e.resetForm,submit:e.searchSubmit,orderBasicOpts:e.getOrderBasicOpts,exportFun:e.exportConfirm}},[r("div",{attrs:{name:"scene"}},[e._v("\n      来源\n    ")])]),r("Dialog",{attrs:{title:"数据导出确认",showCancelBtn:!0,btnText:"确认",width:"400px"},on:{btnHandle:e.exportData},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[r("template",{slot:"content"},[r("div",{staticClass:"align-center"},[e._v("\n        确认导出当前搜索条件的数据吗？\n        "),r("p",{staticClass:"fontsize-12 color-orange margin-top-10"},[e._v("\n          注：当数据量超过1万条时将无法导出！\n        ")])])])],2)],1)},_=[],b=r("2f62");function g(e){var t="FdServiceType"!==e&&"InquiryServiceType"!==e,r="FdServiceType"===e,a="InquiryServiceType"===e,n={item:[{type:"text",name:"order_id",value:"",width:"100%",label:"订单号：",placeholder:"请输入订单号",show:!0},{type:"datetimerange",name:"createdDateRange",value:"",width:"100%",label:"创建时间：",colSpan:7,show:!0},{type:"orderType",value:"",name:"order_type",width:"100%",label:"订单类型",show:t},{type:"orderName",value:"",name:"order_name",orderType:e,width:"100%",label:"订单名称",colSpan:6,show:!0},{type:"orderStatus",value:"",name:"order_status",width:"100%",label:"订单状态",show:!0},{type:"text",name:"user_id",value:"",width:"100%",label:"用户ID：",placeholder:"请输入用户ID",show:!0},{type:"text",name:"nickname",value:"",width:"100%",label:"用户昵称：",placeholder:"请输入用户昵称",show:!0},{type:"servicePackage",value:"",name:"product_type",width:"100%",label:"套餐类型：",placeholder:"请选择套餐类型",show:r},{type:"signType",value:"",name:"order_action",width:"100%",label:"签约类型：",placeholder:"请选择签约类型",show:r},{type:"fdStatus",value:"",name:"fd_status",width:"100%",label:"服务状态：",placeholder:"请选择服务状态",show:r},{type:"servicePeople",value:"",width:"100%",name:"fd_users",label:"服务人员：",colSpan:6,placeholder:"请选择服务人员",show:r},{type:"serviceDepartment",value:"",width:"100%",name:"single_ask_department",label:"服务科室：",colSpan:4,placeholder:"请选择服务科室",show:a},{type:"servicePeople",value:"",width:"100%",label:"接诊人：",placeholder:"请选择接诊人",name:"single_ask_users",colSpan:6,peopleType:"singleAsk",show:a},{label:"来源：",placeholder:"请选择场景值ID",name:"weapp_scene",type:"weappScene",colSpan:4,show:t},{label:"",placeholder:"请选择场景自定义值",name:"custom_scene",labelWidth:"25px",type:"customScene",colSpan:3,show:t},{show:!0,labelWidth:"0px",type:"btn",colSpan:4}],data:{order_id:"",createdDateRange:"",order_type:"",order_name:"",order_status:"",user_id:"",nickname:"",product_type:"",fd_status:"",weapp_scene:"",custom_scene:"",order_action:"",fd_users:"",single_ask_department:"",single_ask_users:""}};return n}var v=r("63d4"),y=r("9039"),w={data:function(){var e={showFormBorder:!1,showTitle:!1,ref:"orderSearchForm",labelWidth:"100px",labelPositon:"right",style:"notprepend",showExportBtn:!0,column:4,btnStyle:"inline",hasSubmit:!0,btnRight:!0,cancleShow:!0,submitText:"搜索",cancleText:"重置"};return{dialogVisible:!1,searchParams:{},formItem:[],formData:{},form:e,initData:{}}},props:{orderTab:{type:String,default:""},moduleName:{type:String,default:""},localFormData:{type:Object,default:function(){}},curOrderStatus:{type:String,default:""}},components:{MyForm:v["a"],Dialog:y["a"]},watch:{localFormData:function(e){this.formData=Object.assign(this.formData,e.searchParams)},orderTab:function(){this.resetForm()},curOrderStatus:function(e){this.formData.order_status=e}},computed:Object(s["a"])({},Object(b["c"])(["token"])),created:function(){this.formInit()},methods:{initDataFun:function(){this.initData={order_id:"",createdDateRange:"",order_type:"",order_name:[],order_status:"",user_id:"",nickname:"",product_type:"",fd_status:"",weapp_scene:"",custom_scene:"",order_action:"",fd_users:"",single_ask_department:"",single_ask_users:""}},getOrderBasicOpts:function(e){this.$emit("orderBasicOpts",e)},exportData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.formData.createdDateRange&&this.formData.createdDateRange.length>=2?(this.formData.create_time_begin=this.formData.createdDateRange[0],this.formData.create_time_end=this.formData.createdDateRange[1]):(this.formData.create_time_begin="",this.formData.create_time_end=""),this.orderTab&&"0"!==this.orderTab?this.formData.order_type=this.orderTab:this.formData.order_type="",e.next=4,Object(o["d"])(this.formData);case 4:if(t=e.sent,r=t.data,!(r.count>1e4)){e.next=9;break}return this.$message({type:"warning",message:"导出数据大于10000条，无法导出!"}),e.abrupt("return");case 9:if(0!==r.count){e.next=12;break}return this.$message({type:"warning",message:"导出数据为0条，无法导出!"}),e.abrupt("return");case 12:a="https://api-v3.baobaohehu.com/api/",n=JSON.stringify(this.formData),s=a+"order/data_export?str="+n+"&token="+this.token,window.open(s),this.dialogHide();case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),dialogHide:function(){this.dialogVisible=!1},exportConfirm:function(){this.dialogVisible=!0},searchSubmit:function(e){this.resetForm("search")},resetForm:function(e){"search"!==e&&(this.initDataFun(),this.formInit(this.initData));var t={searchParams:this.formData,current_page:1,page_size:10};this.$emit("search",t)},formInit:function(e){this.formItem=g(this.orderTab).item,this.formData=e||g(this.orderTab).data}}},T=w,S=Object(f["a"])(T,h,_,!1,null,null,null),k=S.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("MyTable",{attrs:{size:"mini",stripe:!1,border:!1,multiple:!1,outlineBorder:!1,emptyText:e.emptyText,operation:e.operation,column:e.column,data:e.tableData,currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange},scopedSlots:e._u([{key:"userInfo",fn:function(t){return[r("div",[r("div",{staticStyle:{"line-height":"20px"}},[e._v(e._s(t.row.userName))]),r("span",[e._v(e._s(t.row.userId))]),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.seeUserOrder(t.row.userId)}}},[r("svg-icon",{attrs:{"icon-class":"tuanduicankaoxian"}}),e._v("\n        查询该用户"+e._s(e.orderTabName)+"订单\n      ")],1)],1)]}},{key:"tradeStatus",fn:function(t){return[r("div",{staticClass:"order-list__body__table__trade-Status"},[r("p",[e._v(e._s(e._f("tradeStatusFilter")(t.row.tradeStatus)))]),r("el-button",{staticClass:"trade_detail_btn",attrs:{type:"text",size:"mini"},on:{click:function(r){return e.seeDetail(t.row.id)}}},[e._v("详情")]),"PENDING"===t.row.tradeStatus?r("close-trade",{attrs:{id:t.row.id},on:{closeTradeAfter:function(r){return e.search(t.row)}},model:{value:e.closeTrandVisible,callback:function(t){e.closeTrandVisible=t},expression:"closeTrandVisible"}},[r("el-button",{staticClass:"close-btn cherry",attrs:{type:"text",size:"mini"},on:{click:function(t){e.closeTrandVisible=!0}}},[e._v("关闭交易")])],1):e._e()],1)]}},{key:"afterSaleStatus",fn:function(t){return[r("div",{staticClass:"order-list__body__table__source"},[!t.row.afterSaleStatus||t.row.canRefund?r("span",[e._v("无")]):r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.seeRefundDetail(t.row.orderRefundId)}}},[e._v(e._s(e._f("afterSaleStatusFilter")(t.row.afterSaleStatus)))]),t.row.canRefund?r("apply-refund",{attrs:{id:e.selectOrder.id,"refund-reasons":e.refundReasons,"order-type":e.selectOrder.orderType},on:{applyRefundAfter:function(r){return e.applyRefundAfter(t.row.userId)}},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[r("el-button",{staticClass:"cherry",attrs:{type:"text",size:"mini"},on:{click:function(r){return e.handlerRefundButtonClick(t.row)}}},[e._v("退款给用户")])],1):e._e()],1)]}},{key:"scene",fn:function(t){return[r("el-tooltip",{attrs:{content:t.row.weappScene,placement:"top"}},[r("p",[e._v("\n        "+e._s(t.row.weappScene.substring(0,10))+"..."+e._s(t.row.customScene)+"\n      ")])])]}}])})},x=[],R=(r("386d"),r("ac6a"),r("c5f6"),r("6d02")),D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"apply-refund"},[e._t("default"),r("el-dialog",{staticClass:"apply-refund__dialog",attrs:{visible:e.curDialogVisible,"append-to-body":"",width:"400px",top:"25vh"},on:{"update:visible":function(t){e.curDialogVisible=t},closed:e.resetCom}},[r("div",{staticClass:"apply-refund__dialog__body"},[r("div",{staticClass:"apply-refund__dialog__body__tips"},[r("i",{staticClass:"el-icon-warning"}),"问诊"===e.orderType?r("span",[e._v("发起主动退款成功后，将直接向微信发起转账申请！请熟知！")]):r("span",[e._v("发起主动退款后，将为该用户所有可退订单发起退款申请！"),r("br"),e._v("在退款详情页可以进行每笔退款申请的处理！请知悉！")])]),r("div",{staticClass:"apply-refund__dialog__content"},[r("div",{staticClass:"apply-refund__dialog__content__close-txt"},[e._v("\n          请选择退款给用户的理由\n        ")]),r("el-select",{staticClass:"apply-refund__dialog__content__select",attrs:{placeholder:"请选择退款给用户的理由",size:"small"},model:{value:e.refundReason,callback:function(t){e.refundReason=t},expression:"refundReason"}},e._l(e.refundReasons,(function(e){var t=e.key,a=e.value;return r("el-option",{key:t,attrs:{value:t,label:a}})})),1),"other"===e.refundReason?r("el-input",{staticClass:"margin-top-10",attrs:{type:"text",maxlength:"10","show-word-limit":"",placeholder:"请填写具体的其他原因"},model:{value:e.refundRemark,callback:function(t){e.refundRemark="string"===typeof t?t.trim():t},expression:"refundRemark"}}):e._e()],1),"问诊"!==e.orderType?r("div",{staticClass:"apply-refund__dialog__body__down-tips"},[r("span",[e._v("单击申请退款后，将为您跳转至退款管理页，可查看该用户关联的所有退款订单\n        ")])]):e._e()]),r("span",{staticClass:"apply-refund__dialog__footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSummitRefundReason}},[e._v("申请退款")]),r("el-button",{staticClass:"apply-refund__dialog__cancel",attrs:{size:"small"},on:{click:function(t){e.curDialogVisible=!1}}},[e._v("取消并返回")])],1)])],2)},j=[],C=r("27ff"),F={model:{prop:"dialogVisible",event:"change"},props:{id:{type:String,required:!0},dialogVisible:{type:Boolean,default:!1,required:!0},refundReasons:{type:Array,default:function(){return[{key:"misdiagnose",value:"误诊"},{key:"user_asked",value:"用户要求退款"},{key:"other",value:"其它"}]}},orderType:{type:String,default:function(){return""}}},data:function(){return{curDialogVisible:!1,refundReason:"",refundRemark:""}},watch:{dialogVisible:function(e){e!==this.curDialogVisible&&(this.curDialogVisible=e)},curDialogVisible:function(e){this.$emit("change",e)}},methods:{handleApplyRefund:function(e,t,r){return new Promise((function(a){Object(o["c"])(e,{refund_reason:t,other_reason_message:r}).then((function(e){Object(C["a"])(e),a()}))}))},handleSummitRefundReason:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.refundReason){e.next=3;break}return this.$message({message:"请选择退款给用户的理由",type:"warning"}),e.abrupt("return");case 3:if("other"!==this.refundReason||this.refundRemark){e.next=6;break}return this.$message({message:"请填写具体的其他原因",type:"warning"}),e.abrupt("return");case 6:return e.next=8,this.handleApplyRefund(this.id,this.refundReason,this.refundRemark).then(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.curDialogVisible=!1,t.$emit("applyRefundAfter");case 2:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetCom:function(){this.refundReason=""}}},I=F,P=(r("3f9d5"),r("3552"),Object(f["a"])(I,D,j,!1,null,"00cd2260",null)),V=P.exports,z=r("19ea"),N=r("0969"),E=r("ed08"),A=r("527b"),$=r("b5b3"),B={mixins:[R["a"]],data:function(){var e={nowPage:"orderListTable",show:!1};return{selectOrder:{id:"",orderType:""},emptyText:"没有符合条件的订单，请尝试其他搜索条件",column:[],closeTrandVisible:!1,dialogVisible:!1,operation:e}},filters:{afterSaleStatusFilter:N["a"]},props:{tableData:{type:Array,default:function(){return[]}},total:{type:Number,default:0},orderTab:{type:String,default:""},pageSize:{type:Number,default:10},currentPage:{type:Number,default:10}},components:{MyTable:$["a"],ApplyRefund:V,CloseTrade:z["a"]},computed:{refundReasons:function(){return[{key:"misdiagnose",value:"误诊"},{key:"user_asked",value:"用户要求退款"},{key:"other",value:"其它"}]},orderTabName:function(){return"InquiryServiceType"===this.orderTab?"单次问诊":"FdServiceType"===this.orderTab?"家庭医生":"所有"}},created:function(){this.fieldInit()},methods:{fieldInit:function(){var e=Object(A["b"])(this.orderTab);e.forEach((function(e){e.width&&"auto"!=e.width&&(e.width="300")})),this.column=e},seeRefundDetail:function(e){this.$router.push({name:"RefundDetail",params:{id:e}})},applyRefundAfter:function(e){Object(E["j"])("refund-filter-query",JSON.stringify({searchParams:{userId:e},disabled:!1})),this.$router.push({name:"RefundOrderList"})},seeUserOrder:function(e){var t={current_page:1,searchParams:{user_id:e,order_id:"",createdDateRange:"",order_type:"",order_name:[],order_status:"",nickname:"",product_type:"",fd_status:"",weapp_scene:"",custom_scene:"",order_action:"",fd_users:"",single_ask_department:"",single_ask_users:""}};this.search("","",t)},handlerRefundButtonClick:function(e){this.selectOrder=e,this.dialogVisible=!0},seeDetail:function(e){this.$router.push({name:"OrderDetail",params:{id:e}})},handleSizeChange:function(e){this.search(1,e)},handleCurrentChange:function(e){this.search(e,this.pageSize)},search:function(e,t,r){this.$emit("search",{current_page:e,page_size:t,searchParams:r})}}},M=B,q=(r("b561"),Object(f["a"])(M,O,x,!1,null,null,null)),L=q.exports,H=r("8975"),J=r("8f09"),W={components:{SearchForm:k,OrderTable:L,OrderTab:m},data:function(){return{searchParams:{},loading:!1,orderTabVal:"",searchFormShow:!0,curTabName:"all",orderProcess:{},orderList:[],total:0,page_size:10,current_page:1,orderStatusOpts:[]}},computed:{refundReasons:function(){return[{key:"misdiagnose",value:"误诊"},{key:"user_asked",value:"用户要求退款"},{key:"other",value:"其它"}]},searchFormShowText:function(){return this.searchFormShow?"收起":"展开搜索条件"},tabArr:function(){var e=this;return[{label:"全部",name:"all"}].concat((this.orderStatusOpts||[]).filter((function(e){return["pending","after_sale","wait_pay","success","closed","refund_closed","refund_refused","refund_success"].indexOf(e.value)>-1})).map((function(t){var r=t.label,a=t.value;return{label:r,name:a,num:e.orderProcess[a]||""}})))}},created:function(){this.handleSearch()},methods:{orderBasicOpts:function(e){this.orderStatusOpts=e.order_status},orderTab:function(e){this.orderTabVal=e},getOrderProcess:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["j"])();case 2:t=e.sent,r=t.data,this.orderProcess=Object(E["d"])(r);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSearch:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t&&t.searchParams&&(this.searchParams=t.searchParams),e.prev=2,r=Object.assign({page_size:t&&t.page_size?t.page_size:this.page_size,current_page:t&&t.current_page?t.current_page:this.current_page},this.searchParams),r=Object.assign(r,r.searchParams),r.createdDateRange&&r.createdDateRange.length>=2?(r.create_time_begin=r.createdDateRange[0],r.create_time_end=r.createdDateRange[1]):(r.create_time_begin="",r.create_time_end=""),this.orderTabVal&&"0"!==this.orderTabVal&&(r=Object.assign(r,{order_type:this.orderTabVal})),e.next=9,Object(o["g"])(r);case 9:return a=e.sent,n=a.data,this.loading=!1,this.setTableData(Object(s["a"])({},n)),e.next=15,this.handleSearchAfter(r.order_status);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](2),this.loading=!1,console.error(e.t0);case 21:case"end":return e.stop()}}),e,this,[[2,17]])})));function t(t){return e.apply(this,arguments)}return t}(),handleSearchAfter:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.curTabName=t||"all",e.next=3,this.getOrderProcess();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setTableData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.list,a=t.count,n=t.current_page,s=t.page_size,this.current_page=n,this.page_size=s,this.total=a,this.orderList=r.map((function(e){return{afterSaleStatus:e.after_sale_status&&e.after_sale_status.key?e.after_sale_status.key:"",canRefund:e.can_refund,orderRefundId:e.order_refund&&e.order_refund._id?e.order_refund._id:"",unitPrice:e.unit_price,actualUnitPrice:Object(H["RMBSymbol"])(Object(H["fenToYuan"])(e.unit_price)),count:e.count,cost:Object(H["RMBSymbol"])(Object(H["fenToYuan"])(e.cost)),orderId:e.order_id,orderName:e.order_name,orderAction:e.order_action,fd_status:e.fd_status,single_ask_user:e.single_ask_user,department:e.department,orderType:e.order_type,createdDate:Object(J["b"])(e.create_at),tradeStatus:e.trade_status,userId:e.user_id,userName:e.nickname,weappScene:e.scene&&e.scene.weapp?e.scene.weapp:"",customScene:e.scene&&e.scene.custom?e.scene.custom:"",id:e._id}}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleTabClick:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.handleSearch({current_page:1,page_size:10,searchParams:{order_status:this.curTabName}});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},U=W,Y=(r("7857"),r("2e78"),Object(f["a"])(U,a,n,!1,null,"621fdcbd",null));t["default"]=Y.exports},f409:function(e,t,r){}}]);
//# sourceMappingURL=chunk-175ed575.9a97af22.js.map