(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44f33514","chunk-537e3168"],{"116c":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l}));var r=a("4de9"),o=a("c88f");function n(e){return r[e]}function l(e,t){return o[e][t]}},"26a5":function(e,t,a){"use strict";var r=a("7e6c"),o=a.n(r);o.a},"3acd":function(e,t,a){"use strict";a.d(t,"i",(function(){return o})),a.d(t,"l",(function(){return n})),a.d(t,"m",(function(){return l})),a.d(t,"g",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"o",(function(){return u})),a.d(t,"d",(function(){return c})),a.d(t,"k",(function(){return d})),a.d(t,"f",(function(){return h})),a.d(t,"e",(function(){return p})),a.d(t,"h",(function(){return m})),a.d(t,"n",(function(){return b})),a.d(t,"c",(function(){return f})),a.d(t,"j",(function(){return w})),a.d(t,"b",(function(){return g}));var r=a("b775");function o(e){return Object(r["a"])({url:"/crm/customer/list",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/crm/user/list",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/crm/user/".concat(e),method:"get",params:e})}function s(e){return Object(r["a"])({url:"/crm/customer/".concat(e,"/detail"),method:"get",params:e})}function i(e){return Object(r["a"])({url:"/crm/customer",method:"post",data:e})}function u(e,t){return Object(r["a"])({url:"/crm/customer/".concat(t,"/update"),method:"put",data:e})}function c(e,t){return Object(r["a"])({url:"/crm/customer/".concat(t,"/relative"),method:"put",data:e})}function d(e,t){return Object(r["a"])({url:"/crm/customer/".concat(e,"/orders"),method:"get",params:t})}function h(e){return Object(r["a"])({url:"/crm/customer/".concat(e,"/brief_info"),method:"get"})}function p(e,t){return Object(r["a"])({url:"/crm/customer/".concat(e,"/path"),method:"post",data:t})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["a"])({url:"/crm/customer/".concat(e,"/path/list"),method:"get",params:t})}function b(){return Object(r["a"])({url:"/crm/basic/customer/supervisor/options",method:"get"})}function f(e){return Object(r["a"])({url:"/crm/customer/change_supervisor",method:"put",data:e})}function w(e){return Object(r["a"])({url:"/crm/customer/".concat(e,"/creator_options"),method:"get"})}function g(e){return Object(r["a"])({url:"/crm/customer/".concat(e,"/cancel_relative"),method:"put"})}},"4de9":function(e){e.exports={customerList:[{prop:"nickname",label:"微信昵称",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"babys",label:"宝宝信息",width:"auto",fixed:!1,sortable:!1,type:"ArrayObject",separator:"-",object:[{prop:"name",label:"",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"desc",label:"",width:"auto",fixed:!1,sortable:!1,show:!0}],show:!0},{prop:"user_type",label:"客户类型",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"source_channel",label:"来源渠道",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"createAt",label:"创建时间",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"customer_ask",label:"首次沟通客户诉求",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"supervisor",label:"当前负责人",width:"auto",fixed:!1,type:"slot",sortable:!1,show:!0},{prop:"isRelative",label:"是否与系统关联",width:"auto",fixed:!1,sortable:!1,type:"slot",show:!0},{prop:"fd_sign_status",label:"当前签约状态",width:"auto",fixed:!1,sortable:!1,slot:{header:!0,content:"表示该客户当前家庭医生签约状态",placement:"top"},show:!0},{prop:"updatedAt",label:"更新时间",width:"auto",fixed:!1,sortable:!1,show:!0}],relatedList:[{prop:"user_id",label:"用户ID",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"nickname",label:"用户微信",width:"auto",fixed:!1,type:"slot",sortable:!1,show:!0},{prop:"gender",label:"性别",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"mobile",label:"联系方式",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"area",label:"地区信息",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"lastLoginTime",label:"最后登录时间",width:"auto",fixed:!1,sortable:!1,show:!0},{type:"Object",fprop:"last_order",prop:"order_id",label:"最近一次订单号",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"last_order_created_at",label:"最近一次订单时间",width:"auto",fixed:!1,sortable:!1,show:!0},{fprop:"last_order",prop:"order_name",type:"Object",label:"最近一次订单名称",width:"auto",fixed:!1,sortable:!1,show:!0},{fprop:"last_order",prop:"order_type",type:"Object",label:"最近一次订单类型",width:"auto",fixed:!1,sortable:!1,show:!0},{fprop:"last_order",prop:"order_status",cpropType:"Object",cprop:"value",type:"Object",label:"最近一次订单状态",width:"auto",fixed:!1,sortable:!1,show:!0}],opratorAction:[{prop:"id",label:"编号",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"actionName",label:"运营动作描述",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"description",label:"描述",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"creator",label:"创建人",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"createAt",label:"创建时间",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"status",label:"状态",width:"auto",type:"switch",fixed:!1,sortable:!1,show:!0}],orderList:[{prop:"orderId",label:"订单号",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"createAt",label:"订单创建时间",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"orderName",label:"订单名称",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"orderType",label:"订单类型",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"unitPrice",label:"单价",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"count",label:"数量",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"afterMarket",label:"售后状态",width:"auto",fixed:!1,sortable:!1,show:!0,type:"slot"},{prop:"user",label:"客户",width:"auto",fixed:!1,sortable:!1,show:!0,type:"slot"},{prop:"tradeStatus",label:"交易状态",width:"auto",fixed:!1,sortable:!1,show:!0,type:"slot"},{prop:"cost",label:"实收款",width:"auto",fixed:!1,sortable:!1,show:!0}]}},"7e6c":function(e,t,a){},c88f:function(e){e.exports={customerListSearch:{item:[{type:"text",name:"user_id",value:"",placeholder:"请输入用户ID",width:"100%",label:"用户ID:",show:!0,colSpan:6,rules:[]},{type:"text",name:"weapp_info",value:"",placeholder:"请输入客户微信名或昵称",width:"100%",label:"客户:",colSpan:6,show:!0,rules:[]},{type:"text",name:"baby_name",value:"",placeholder:"请输入宝宝乳名",width:"100%",colSpan:6,label:"宝宝乳名:",show:!0,rules:[]},{type:"creator",haveItem:!0,value:"",show:!0,colSpan:6,placeholder:"请选择创建人",label:"创建人:",name:"creator"},{type:"datetimerange",name:"createAt",placeholder:"创建日期",value:"",width:"100%",colSpan:10,label:"创建日期:",show:!0,rules:[]},{type:"supervisor",haveItem:!0,value:"",placeholder:"请选择负责人",show:!0,label:"负责人:",name:"supervisor"},{type:"contractStatus",haveItem:!0,value:"",show:!0,placeholder:"请选择当前签约状态",label:"当前签约状态:",name:"fd_sign"},{type:"customerType",haveItem:!0,value:"",show:!0,label:"客户类型:",placeholder:"请选择客户类型",isOpen:"all",disabled:!1,name:"user_type",colSpan:7},{type:"sourceChannel",haveItem:!0,value:"",show:!0,label:"来源渠道:",placeholder:"请选择来源渠道",isOpen:"all",disabled:!1,colSpan:7,multiple:!0,name:"sourceChannel"},{type:"relatedStatus",haveItem:!0,value:"",show:!0,label:"关联状态:",placeholder:"请选择关联状态",colSpan:5,name:"relative_status"},{type:"btn",colSpan:5,show:!0}],data:{user_id:"",weapp_info:"",baby_name:"",sourceChannel:"",user_type:"",createAt:"",creator:"",supervisor:"",relative_status:"",fd_sign:""}},customerRelatedSearch:{item:[{type:"text",name:"user_id",value:"",placeholder:"请输入用户ID",width:"100%",label:"用户ID:",show:!0,colSpan:6,rules:[]},{type:"text",name:"nickname",value:"",placeholder:"请输入用户昵称",width:"100%",label:"用户:",colSpan:6,show:!0,rules:[]},{type:"text",name:"mobile",value:"",placeholder:"请输入用户联系方式",width:"100%",label:"联系方式:",show:!0,colSpan:7,rules:[]},{type:"text",value:"",show:!0,label:"订单号:",colSpan:6,placeholder:"请输入订单号",name:"order_id"},{type:"btn",colSpan:13,show:!0}],data:{user_id:"",nickname:"",mobile:"",order_id:"",order_name:"",order_status:""}},customerAddForm:{item:[{type:"text",name:"nickname",value:"",placeholder:"请输入客户微信昵称",width:"100%",label:"客户微信昵称:",show:!0,rules:[{required:!0,message:"请输入客户微信昵称",trigger:"blur"}]},{type:"text",name:"weapp_id",value:"",placeholder:"请输入客户微信号",width:"100%",label:"客户微信号:",showlimit:!0,maxlength:20,show:!0,rules:[{required:!0,message:"请输入客户微信号",trigger:"blur"}]},{type:"radio",name:"is_during_pregnancy",value:"",width:"100%",label:"客户怀孕状态:",show:!0,options:[{value:!1,label:"未怀孕"},{value:!0,label:"怀孕中"}],rules:[{required:!0,message:"请选择客户怀孕状态",trigger:"blur"}]},{type:"customerType",haveItem:!0,value:"",show:!0,label:"客户类型:",placeholder:"请选择客户类型",name:"user_type",isOpen:!0,disabled:!1,rules:[{required:!0,message:"请选择客户类型",trigger:"blur"}]},{type:"sourceChannel",haveItem:!0,value:"",show:!0,label:"来源渠道:",placeholder:"请选择来源渠道",isOpen:!0,disabled:!1,rules:[{required:!0,message:"请选择来源渠道",trigger:"blur"}],multiple:!1,name:"sourceChannel"},{type:"textarea",name:"customer_ask",value:"",placeholder:"请填写首次沟通客户诉求",width:"100%",label:"首次沟通客户诉求:",disabled:!0,show:!0,rules:[{required:!0,message:"请填写首次沟通客户诉求",trigger:"blur"}]},{type:"text",name:"customer_realname",value:"",placeholder:"请输入客户真实姓名",width:"100%",label:"客户真实姓名:",show:!0,showlimit:!0,maxlength:20,rules:[]},{type:"text",name:"mobile",value:"",placeholder:"请输入客户联系方式",width:"100%",label:"客户联系方式:",show:!0,showlimit:!0,maxlength:20,rules:[]},{type:"textarea",name:"remark",value:"",placeholder:"请填写备注信息",width:"100%",label:"备注:",show:!0,rules:[]}],data:{nickname:"",weapp_id:"",is_during_pregnancy:"",user_type:"",sourceChannel:"",customer_ask:"",realName:"",relative_user:"",mobile:"",remark:""}},historySearchForm:{item:[{type:"datetimerange",name:"createTime",placeholder:"请选择时间",value:"",width:"100%",colSpan:8,label:"运营动作创建时间",show:!0,rules:[]},{type:"supervisor",haveItem:!0,value:"",show:!0,label:"负责人:",name:"supervisor",colSpan:5},{type:"btn",colSpan:5,show:!0}],data:{createTime:"",supervisor:""}}}},d0100:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"step-box margin-bottom-30"},[a("el-steps",{attrs:{space:200,"align-center":"",active:e.activeStep,"finish-status":"success"}},[a("el-step",{attrs:{title:"关联客户"}}),a("el-step",{attrs:{title:"完善客户信息"}})],1)],1)],1)},o=[],n=(a("c5f6"),{data:function(){return{}},props:{activeStep:{type:Number,default:1}}}),l=n,s=a("2877"),i=Object(s["a"])(l,r,o,!1,null,null,null);t["a"]=i.exports},f06c0:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer__box"},[a("el-row",{staticClass:"step-box margin-bottom-30"},[a("Step",{attrs:{activeStep:1}})],1),a("el-row",{staticClass:"margin-top-20"},[a("searchForm",{on:{searchFun:e.searchFun}})],1),e.userId?e._e():a("el-button",{staticClass:"margin-bottom-30",attrs:{type:"primary",size:"mini"},on:{click:e.linkCustomer}},[e._v("\n    无法查找到客户\n  ")]),a("RelatedTable",{attrs:{searchParams:e.searchParams,searchFlag:e.searchFlag},on:{searchFlag:e.setSearchFlag}})],1)},o=[],n=(a("7f7f"),a("d0100")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("MyForm",{ref:"customerSearchForm",attrs:{form:e.form,formData:e.formData,formItem:e.formItem},on:{submit:e.searchSubmit,resetForm:e.reset}})},s=[],i=a("116c"),u=a("63d4"),c={data:function(){var e={showFormBorder:!1,showTitle:!1,ref:"customerSearchForm",labelWidth:"120px",labelPositon:"right",style:"notprepend",column:3,btnStyle:"inline",hasSubmit:!0,btnRight:!0,cancleShow:!0,submitText:"搜索",cancleText:"重置"};return{searchParams:{},formItem:[],formData:{},form:e}},props:{optionsVal:{type:String,default:""},moduleName:{type:String,default:""}},components:{MyForm:u["a"]},created:function(){this.formInit()},methods:{searchSubmit:function(e){this.$emit("searchFun",e)},formInit:function(e){this.formItem=Object(i["b"])("customerRelatedSearch","item"),this.formData=e||Object(i["b"])("customerRelatedSearch","data")},reset:function(){this.$emit("searchFun")}}},d=c,h=a("2877"),p=Object(h["a"])(d,l,s,!1,null,null,null),m=p.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("MyTable",{attrs:{size:"mini",stripe:!1,border:!0,multiple:!1,outlineBorder:!1,operation:e.operation,column:e.column,data:e.tableData,currentPage:e.currentPage,pageSize:e.pageSize,total:e.total},on:{relatedCustomer:e.relatedCustomer,handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange},scopedSlots:e._u([{key:"nickname",fn:function(t){return[a("div",[a("el-avatar",{key:t.row._id,attrs:{src:t.row.avatar}}),a("p",[e._v("\n          "+e._s(t.row.nickname)+"\n        ")])],1)]}}])})],1)},f=[],w=(a("ac6a"),a("b5b3")),g=a("8975"),_=a("3acd"),v={data:function(){var e={nowPage:"relatedTable",show:!0,fixed:!1,size:"mini",width:80,minWidth:100,label:"操作",btns:[{type:"text",size:"mini",content:"关联客户",icon:"",handle:"relatedCustomer",class:"button-operator"}]};return{userId:"",column:[],loading:!1,formItem:[],formData:{},tableData:[],pageSize:10,currentPage:1,total:0,operation:e}},components:{MyTable:w["a"]},created:function(){this.fieldInit(),this.getRelatedList()},props:{searchParams:{type:Object,default:function(){}},searchFlag:{type:Boolean,default:!1}},watch:{searchFlag:function(e){!0===e&&this.getRelatedList()}},methods:{gender:g["gender"],fieldInit:function(){var e=Object(i["a"])("relatedList");e.forEach((function(e){e.width&&"auto"!=e.width&&(e.width="300")})),this.column=e},relatedCustomer:function(e){this.$router.push({path:"/crm/customer/".concat(this.$route.meta.name,"/add"),query:{relative_id:e._id,userId:this.$route.query.userId}})},handleCurrentChange:function(e){this.currentPage=e,this.getRelatedList()},handleSizeChange:function(e){this.pageSize=e,this.getRelatedList()},setTableData:function(e){var t=this,a=e.list;this.tableData=a.map((function(e,a){return{user_id:e.user_id?e.user_id:"",_id:e._id?e._id:a,userId:e.id?e.id:"",avatar:e.avatar?e.avatar:"",nickname:e.nickname?e.nickname:"",area:e.area?e.area:"",mobile:e.mobile?e.mobile:"",gender:e.gender?Object(g["gender"])(e.gender):"",weixin:e.weixin?e.weixin:"",is_relative:e.is_relative?e.is_relative:"",last_order_created_at:e.last_order&&e.last_order.created_at?t.formatTime(e.last_order.created_at):"-",last_order:e.last_order?e.last_order:"",lastLoginTime:e.last_login_time?t.formatTime(e.last_login_time):"-"}}))},getRelatedList:function(){var e=this,t={current_page:this.currentPage,page_size:this.pageSize};this.loading=!0;var a=Object.assign({},t,this.searchParams);Object(_["l"])(a).then((function(t){e.$emit("searchFlag",!1),e.loading=!1,t&&(e.total=t.data.count,e.setTableData(t.data))})).catch((function(t){e.loading=!1}))}}},y=v,x=Object(h["a"])(y,b,f,!1,null,null,null),S=x.exports,O={data:function(){return{searchParams:{},userId:this.$route.query.userId,searchFlag:!1}},components:{searchForm:m,RelatedTable:S,Step:n["a"]},created:function(){},methods:{setSearchFlag:function(e){this.searchFlag=e},refreshRelated:function(){this.searchParams=this.searchParams?this.searchParams:{},this.setSearchFlag(!0)},linkCustomer:function(e){this.$router.push({path:"/crm/customer/".concat(this.$route.meta.name,"/add"),query:{relative_id:""}})},searchFun:function(e){this.searchParams=e||{},this.setSearchFlag(!0)}}},j=O,I=(a("26a5"),Object(h["a"])(j,r,o,!1,null,null,null));t["default"]=I.exports},f8b7:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"i",(function(){return n})),a.d(t,"h",(function(){return l})),a.d(t,"k",(function(){return s})),a.d(t,"l",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"j",(function(){return h})),a.d(t,"g",(function(){return p})),a.d(t,"c",(function(){return m})),a.d(t,"m",(function(){return b})),a.d(t,"b",(function(){return f}));var r=a("b775");function o(e){return Object(r["a"])({url:"/fd/contract/".concat(e,"/active"),method:"put"})}function n(){return Object(r["a"])({url:"order/basic/options",method:"get"})}function l(){return Object(r["a"])({url:"/order/basic/order_name/options",method:"get"})}function s(){return Object(r["a"])({url:"/order/basic/order_status/options",method:"get"})}function i(){return Object(r["a"])({url:"/order/basic/order_type/options",method:"get"})}function u(e){return Object(r["a"])({url:"/order/check_export",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/order/".concat(e,"/detail"),method:"get"})}function d(e,t){return Object(r["a"])({url:"/order/".concat(e,"/close"),method:"put",data:t})}function h(){return Object(r["a"])({url:"/order/process_numbers",method:"get"})}function p(e){return Object(r["a"])({url:"/order/list",method:"post",data:e})}function m(e,t){return Object(r["a"])({url:"/order/".concat(e,"/refund"),method:"put",data:t})}function b(e){return Object(r["a"])({url:"/order/log",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/order/log",method:"post",data:e})}}}]);
//# sourceMappingURL=chunk-44f33514.475b56d4.js.map