(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7227e061"],{"0373":function(e,t,n){},"11a5":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"professional-role"},[n("div",{staticClass:"professional-role__header"},[n("el-tabs",{staticClass:"professional-role__header__tabs",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabArr,(function(t){var a=t.label,i=t.value;return n("el-tab-pane",{key:i,attrs:{name:i}},[n("span",{staticClass:"professional-role__header__tabs__slot-label",attrs:{slot:"label"},slot:"label"},[e._v(e._s(a))])])})),1)],1),n("div",{staticClass:"professional-role__body"},[n("div",{staticClass:"professional-role__body__handle"},[n("el-button",{attrs:{type:"primary",size:"small",loading:e.addLoading},on:{click:e.addMemberByPage}},[e._v("新增成员")])],1),n("el-divider"),n("list",{staticClass:"professional-role__body__list",attrs:{"user-fd-type":e.activeName,"add-loading":e.addLoading,pageType:e.pageType}})],1)])},i=[],s=(n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"professional-role-list"},[n("div",{staticClass:"professional-role-list__header"},[n("span",[e._v("成员姓名")]),e._v("  \n    "),n("el-input",{staticClass:"professional-role-list__header__item professional-role-list__header__search",attrs:{size:"small",placeholder:"请输入成员姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearchByName(t)}},model:{value:e.searchName,callback:function(t){e.searchName="string"===typeof t?t.trim():t},expression:"searchName"}}),"doctor"===e.userFdType||"consult"===e.pageType?n("span",[n("span",[e._v(e._s("consult"===e.pageType?"服务":"")+"科室")]),e._v("  \n      "),n("el-select",{staticClass:"margin-right-10",attrs:{placeholder:"请选择服务科室",size:"small"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},e._l(e.departmentByPage,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),n("el-button",{staticClass:"professional-role-list__header__item",attrs:{type:"primary",size:"small"},on:{click:e.handleSearchByName}},[e._v("搜索")]),n("el-button",{staticClass:"professional-role-list__header__item",attrs:{type:"primary",size:"small",plain:""},on:{click:e.handleReset}},[e._v("重置")])],1),n("div",{staticClass:"professional-role-list__body"},["consult"===e.pageType||"familyDoctor"===e.pageType?n("div",{staticClass:"el-card-warpper professional-role-list__body__list"},[n("el-table",{ref:"professionalRoleTable",staticClass:"professional-role-list__body__list__table pbl-table",attrs:{data:e.tableData}},[n("el-table-column",{attrs:{align:"center",label:"成员编号","min-width":"100",prop:"no",fixed:""}}),n("el-table-column",{attrs:{align:"center",label:"成员姓名","min-width":"70",prop:"name"}}),n("el-table-column",{attrs:{align:"center",label:"头像","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-avatar",{key:e.row._id,attrs:{size:30,src:e.row.busUserAvatar}})]}}],null,!1,2513768409)}),n("el-table-column",{attrs:{align:"center",label:"联系方式","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.mobile))]}}],null,!1,1667001181)},[n("template",{slot:"header"},[n("span",[n("span",[e._v(" 联系方式")]),n("el-tooltip",{staticClass:"item color-576277",attrs:{effect:"dark",content:"电话转诊等类似业务将会呼叫该联系方式",placement:"top"}},[n("i",{staticClass:"el-icon-info"})])],1)])],2),n("el-table-column",{attrs:{align:"center",label:"性别","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.gender))]}}],null,!1,1848824258)}),"consult"===e.pageType?n("el-table-column",{attrs:{align:"center",label:"问诊配置","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.single_ask_price_info,(function(a,i){return n("span",{key:i},[e._v("\n              "+e._s(e.sectionOffice(a.department,"",!0))+"（￥"+e._s(e.fenToYuan(a.price))+"）\n              "),i<t.row.single_ask_price_info.length-1?n("span",[e._v(",")]):e._e()])}))}}],null,!1,3608004548)}):e._e(),"dietician"!==e.userFdType&&"consult"!==e.pageType?n("el-table-column",{attrs:{align:"center",label:"科室","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.sectionOffice(t.row.department,"",!0)))]}}],null,!1,1285602695)}):e._e(),n("el-table-column",{attrs:{align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("el-switch",{class:!0===t.row.server.is_on_server?"online-style":"offline-style",attrs:{value:t.row.server.is_on_server,width:60,"active-text":(t.row.server.is_on_server,""),"inactive-text":!0===t.row.server.is_on_server?"上线":"下线","inactive-color":"#C0C4CC",disabled:e.switchBtnStatus},on:{change:function(n){return e.changeOnlineStatusFun(t.row,t.row.server.is_on_server)}}})],1)]}}],null,!1,2635020930)},[n("template",{slot:"header"},[n("span",[e._v(e._s(e.serverStatus))])])],2),"familyDoctor"===e.pageType?n("el-table-column",{attrs:{align:"center",label:"",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v("\n              "+e._s(t.row.server.current_num)),n("span",[e._v("/")]),e._v(e._s(t.row.server.upper_limit)+"\n            ")])]}}],null,!1,518371008)},[n("template",{slot:"header"},[n("span",[e._v("服务资源占用情况")]),n("el-tooltip",{staticClass:"item color-576277",attrs:{effect:"dark",content:"当前服务资源占用量/服务上限值",placement:"top"}},[n("i",{staticClass:"el-icon-info"})])],1)],2):e._e(),n("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleEdit(t)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleDelete(t)}}},[e._v("删除")])],1)]}}],null,!1,771226627)})],1),n("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[n("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,"page-sizes":e.pageSizes,"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"update:currentPage":function(t){return e.$set(e.page,"currentPage",t)},"update:current-page":function(t){return e.$set(e.page,"currentPage",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e()]),e.delTipShow?n("tip",{attrs:{"tip-center":!0,"btn-text":"确认删除","has-footer":!0,"show-cancel-btn":!0},on:{btnHandle:e.btnDelTipSubmitFun},model:{value:e.delTipShow,callback:function(t){e.delTipShow=t},expression:"delTipShow"}},[n("section",{staticClass:"center",attrs:{slot:"content"},slot:"content"},[e._v("\n      删除后，该成员将从"+e._s(e.systemRole(e.userFdType,""))+"列表中移除，确认删除吗？\n    ")])]):e._e(),n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.onlineDialogVisible,"before-close":e.cancelOnlineChangeFun,width:"30%",center:""},on:{"update:visible":function(t){e.onlineDialogVisible=t}}},[n("span",{staticClass:"align-center"},[e._v(e._s(e.dialogContent))]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancelOnlineChangeFun}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmChangeOnlineStatus}},[e._v(e._s(e.dialogConfirmBtnTxt))])],1)])],1)}),r=[],l=n("db72"),o=(n("96cf"),n("3b8d")),c=n("bb80"),u=n("9039"),d=n("2b0e"),p=n("8975"),f=n("0680"),h=d["default"].filter("gender"),m={components:{Tip:u["a"]},props:{userFdType:{type:String,default:"doctor"},addLoading:{type:Boolean,default:!1},pageType:{type:String,default:""}},data:function(){return{departmentByPage:"",department:"",dialogTitle:"上线提示",dialogConfirmBtnTxt:"确认上线",dialogContent:"",onlineDialogVisible:!1,onlineTip:"",singleAskOnlineTip:"",offlineTip:"",singleAskOfflineTip:"",activeId:"",is_on_server:"",searchName:"",delTipShow:!1,switchBtnStatus:!1,tableData:[],delId:"",page:{total:0,pageSize:10,currentPage:1},pageSizes:[10,50,100],serverStatus:""}},watch:{userFdType:function(){this.handleReset(),this.handleSearch()},addLoading:function(){this.handleSearch()},pageType:function(e,t){this.init()}},created:function(){this.init()},methods:{sectionOffice:f["d"],genderFilter:h,systemRole:f["h"],fenToYuan:p["fenToYuan"],init:function(){this.pageType=this.pageType,this.pageType&&(this.serverStatus="consult"===this.pageType?"问诊服务状态":"服务状态",this.departmentByPage=this.sectionOffice("","arr","consult"!==this.pageType),this.department="",this.searchName="",this.handleSearch())},setTip:function(e){this.onlineTip="上线后，"+e+"将拥有签约用户的权限，确认上线吗？",this.singleAskOnlineTip="上线后，"+e+"将拥有向用户提供单次问诊服务的权限，确认上线吗？",this.offlineTip="下线后，"+e+"将不可以签约用户，确认下线吗？",this.singleAskOfflineTip="下线后，用户将无法购买"+e+"的单次问诊服务，确认下线吗？"},cancelOnlineChangeFun:function(){this.onlineDialogVisible=!1},changeOnlineStatusFun:function(e,t){this.onlineDialogVisible=!0,this.activeId=e._id,this.setTip(e.name),t&&"false"!==t?(this.is_on_server=!1,this.dialogTitle="下线提示",this.dialogContent="consult"===this.pageType?this.singleAskOfflineTip:this.offlineTip,this.dialogConfirmBtnTxt="确认下线"):(this.is_on_server=!0,this.dialogTitle="上线提示",this.dialogContent="consult"===this.pageType?this.singleAskOnlineTip:this.onlineTip,this.dialogConfirmBtnTxt="确认上线")},confirmChangeOnlineStatus:function(){var e=this;if(this.activeId){var t={};t="consult"===this.pageType?{single_ask_status:this.is_on_server}:{status:this.is_on_server};var n="consult"===this.pageType?c["a"]:c["m"];n(this.activeId,t).then((function(t){e.$message.success("修改状态成功"),e.onlineDialogVisible=!1,e.handleSearch()}))}},setTableData:function(e){var t=this,n=e.list;this.tableData=[],this.tableData=n.map((function(e,n){return{_id:e._id?e._id:"",id:e.no?e.no:"",name:e.name,busUserAvatar:e.avatar?e.avatar:"",gender:e.gender?h(e.gender):"未选择",server:{is_on_server:"consult"===t.pageType?e.single_ask_status:e.is_on_server?e.is_on_server:"false",current_num:e.fd_resource_curr?e.fd_resource_curr:"0",upper_limit:e.fd_resource?e.fd_resource:"0"},mobile:e.mobile,single_ask_price_info:e.single_ask_price_info?e.single_ask_price_info:"",single_ask_status:!!e.single_ask_status&&e.single_ask_status,department:e.department,no:e.no}}))},setPage:function(e){var t=e.page;this.page.total=t.total},handleSearch:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t||{},n.bus_role=this.userFdType?this.userFdType:"doctor",n.pageSize=this.page.pageSize,n.currentPage=this.page.currentPage,this.searchName&&(n.name=this.searchName),this.department&&(n.department=this.department),"consult"!==this.pageType){e.next=17;break}return n.single_ask_bus_role=n.bus_role,delete n.bus_role,e.next=11,Object(c["k"])(n);case 11:a=e.sent,i=a.data,this.setTableData(Object(l["a"])({},i)),this.setPage(Object(l["a"])({},i)),e.next=23;break;case 17:return e.next=19,Object(c["h"])(n);case 19:s=e.sent,r=s.data,this.setTableData(Object(l["a"])({},r)),this.setPage(Object(l["a"])({},r));case 23:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleReset:function(){this.searchName="",this.department="",this.page.pageSize=10,this.page.currentPage=1,this.handleSearch()},handleSearchByName:function(){this.page.pageSize=10,this.page.currentPage=1,this.handleSearch()},handleEdit:function(e){var t=e.row;"consult"===this.pageType?this.$router.push({name:"singleAskRoleEdit",params:{id:t._id,role:this.userFdType}}):this.$router.push({name:"professionalRoleEdit",params:{id:t._id,role:this.userFdType}})},handleDelete:function(e){var t=e.row;e.$index;this.delTipShow=!0,this.delId=t._id},btnDelTipSubmitFun:function(){var e=this,t="consult"===this.pageType?c["e"]:c["d"];t(this.delId).then((function(t){e.$message.success("删除成功"),e.delTipShow=!1,e.handleSearch()}))},handleCurrentChange:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.page.currentPage=t,this.handleSearch();case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSizeChange:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.page.pageSize=t,this.handleSearch();case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},g=m,_=(n("201b6"),n("b109"),n("2877")),v=Object(_["a"])(g,s,r,!1,null,"140a743b",null),b=v.exports,y={components:{List:b},data:function(){return{addLoading:!1,activeName:"doctor",tabArr:Object(f["h"])("",!0),addMembers:[],members:[],loading:!1,pageType:""}},watch:{activeName:function(){window.localStorage.setItem("activeName",this.activeName),this.addMembers=[]},"$route.path":function(e){this.getLocalActiveName(),this.getPageType()}},created:function(){this.getLocalActiveName(),this.getPageType()},beforeRouteLeave:function(e,t,n){"professionalRoleEdit"===e.name&&("new"===e.params.id?e.meta.title="新增成员":e.meta.title="编辑成员"),n()},methods:{systemRole:f["h"],getPageType:function(){var e=this;this.pageType="",setTimeout((function(){e.pageType=-1!==e.$route.path.indexOf("consultation")?"consult":"familyDoctor"}),400)},addMemberByPage:function(){"consult"===this.pageType?this.$router.push({name:"singleAskRoleEdit",params:{id:"new",role:this.activeName}}):this.$router.push({name:"professionalRoleEdit",params:{id:"new",role:this.activeName}})},getLocalActiveName:function(){null!=window.localStorage.getItem("activeName")&&(this.activeName=window.localStorage.getItem("activeName")?window.localStorage.getItem("activeName"):"doctor")}}},T=y,w=(n("41ce"),n("f688"),Object(_["a"])(T,a,i,!1,null,"342d7641",null));t["default"]=w.exports},"201b6":function(e,t,n){"use strict";var a=n("b299"),i=n.n(a);i.a},"41ce":function(e,t,n){"use strict";var a=n("985f"),i=n.n(a);i.a},5118:function(e,t,n){(function(e){var a="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(i.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new s(i.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("24aa"))},"562d":function(e,t,n){},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var a,i=1,s={},r=!1,l=e.document,o=Object.getPrototypeOf&&Object.getPrototypeOf(e);o=o&&o.setTimeout?o:e,"[object process]"==={}.toString.call(e.process)?f():h()?m():e.MessageChannel?g():l&&"onreadystatechange"in l.createElement("script")?_():v(),o.setImmediate=c,o.clearImmediate=u}function c(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return s[i]=r,a(i),i++}function u(e){delete s[e]}function d(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a);break}}function p(e){if(r)setTimeout(p,0,e);else{var t=s[e];if(t){r=!0;try{d(t)}finally{u(e),r=!1}}}}function f(){a=function(e){t.nextTick((function(){p(e)}))}}function h(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function m(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&p(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;p(t)},a=function(t){e.port2.postMessage(t)}}function _(){var e=l.documentElement;a=function(t){var n=l.createElement("script");n.onreadystatechange=function(){p(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function v(){a=function(e){setTimeout(p,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("24aa"),n("4362"))},"985f":function(e,t,n){e.exports={menuText:"#17233D",menuActiveText:"#409EFF",subMenuActiveText:"#17233D",menuBg:"#FEFEFE",menuHover:"#ECF4FF",subMenuBg:"#FEFEFE",subMenuHover:"#ECF4FF",sideBarWidth:"240px"}},b109:function(e,t,n){"use strict";var a=n("562d"),i=n.n(a);i.a},b299:function(e,t,n){},f688:function(e,t,n){"use strict";var a=n("0373"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-7227e061.8939a6fd.js.map