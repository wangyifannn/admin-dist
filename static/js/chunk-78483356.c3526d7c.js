(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78483356"],{"04eb":function(e,t,n){"use strict";var a=n("5a15"),i=n.n(a);i.a},"0e5f":function(e,t,n){"use strict";var a=n("c4de"),i=n.n(a);i.a},5118:function(e,t,n){(function(e){var a="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(i.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new s(i.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("24aa"))},"5a15":function(e,t,n){},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var a,i=1,s={},r=!1,l=e.document,o=Object.getPrototypeOf&&Object.getPrototypeOf(e);o=o&&o.setTimeout?o:e,"[object process]"==={}.toString.call(e.process)?f():p()?h():e.MessageChannel?g():l&&"onreadystatechange"in l.createElement("script")?b():v(),o.setImmediate=c,o.clearImmediate=u}function c(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return s[i]=r,a(i),i++}function u(e){delete s[e]}function d(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a);break}}function m(e){if(r)setTimeout(m,0,e);else{var t=s[e];if(t){r=!0;try{d(t)}finally{u(e),r=!1}}}}function f(){a=function(e){t.nextTick((function(){m(e)}))}}function p(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function h(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&m(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;m(t)},a=function(t){e.port2.postMessage(t)}}function b(){var e=l.documentElement;a=function(t){var n=l.createElement("script");n.onreadystatechange=function(){m(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function v(){a=function(e){setTimeout(m,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("24aa"),n("4362"))},b415:function(e,t,n){},c4de:function(e,t,n){},cb59:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-students"},[n("search",{on:{searchList:e.searchList}}),n("list-info",{ref:"listInfo",on:{showAddAdmin:function(t){e.addAdminShow=!0},searchList:e.searchList}}),e.addAdminShow?n("tip",{attrs:{"btn-text":"确定","has-footer":!1},model:{value:e.addAdminShow,callback:function(t){e.addAdminShow=t},expression:"addAdminShow"}},[n("section",{staticClass:"center",attrs:{slot:"content"},slot:"content"},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleAdmin,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"选择学员",prop:"admin"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.ruleAdmin.admin,callback:function(t){e.$set(e.ruleAdmin,"admin",t)},expression:"ruleAdmin.admin"}},e._l(e.userList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1),n("el-form-item",{staticClass:"sure"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")])],1)],1)],1)]):e._e()],1)},i=[],s=(n("96cf"),n("3b8d")),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("el-form",{attrs:{"label-position":"left","label-width":"100px",model:e.condition,inline:""}},[n("el-form-item",{staticClass:"search-item",attrs:{label:"学员名称"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入姓名"},model:{value:e.condition.name,callback:function(t){e.$set(e.condition,"name",t)},expression:"condition.name"}})],1),e.isOpen?[n("el-form-item",{staticClass:"search-item",attrs:{label:"首次登录时间"}},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.condition.time,callback:function(t){e.$set(e.condition,"time",t)},expression:"condition.time"}})],1),n("el-form-item",{staticClass:"search-item",attrs:{label:"当前阶段"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.condition.stage,callback:function(t){e.$set(e.condition,"stage",t)},expression:"condition.stage"}},e._l(e.stageList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{staticClass:"search-item",attrs:{label:"阶段状态"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.condition.stage_status,callback:function(t){e.$set(e.condition,"stage_status",t)},expression:"condition.stage_status"}},e._l(e.stateList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{staticClass:"search-item",attrs:{label:"钉钉ID"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入钉钉ID"},model:{value:e.condition.user_id,callback:function(t){e.$set(e.condition,"user_id",t)},expression:"condition.user_id"}})],1)]:e._e(),n("el-form-item",{staticClass:"search-item",attrs:{label:"计划名称"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入计划名称"},model:{value:e.condition.plan_name,callback:function(t){e.$set(e.condition,"plan_name",t)},expression:"condition.plan_name"}})],1),n("el-form-item",[n("el-button",{staticClass:"select-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1),n("el-button",{staticClass:"arrow",attrs:{type:"text"},on:{click:function(t){e.isOpen=!e.isOpen}}},[e._v("\n      "+e._s(e.isOpen?"收起":"展开")+"\n      "),n("i",{class:e.isOpen?"el-icon-arrow-up":"el-icon-arrow-down",staticStyle:{"font-size":"16px",color:"#0085FF"}})])],2)],1)},l=[],o={data:function(){return{condition:{name:"",stage:"",time:["",""],stage_status:"",user_id:"",plan_name:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},stageList:[{value:"",label:"全部"},{value:-1,label:"试岗阶段"},{value:0,label:"第一阶段"},{value:1,label:"第二阶段"},{value:"-2",label:"轮岗阶段"},{value:2,label:"第三阶段"},{value:3,label:"第四阶段"},{value:4,label:"第五阶段"},{value:5,label:"第六阶段"}],stateList:[{value:"",label:"全部"},{value:"doing",label:"正在进行"},{value:"exam",label:"待考试"},{value:"eliminate",label:"淘汰"},{value:"delay",label:"延期"},{value:"pass",label:"通过"}],isOpen:!1,stage:"",state:""}},methods:{onSubmit:function(){this.$emit("searchList",this.condition)}}},c=o,u=(n("0e5f"),n("2877")),d=Object(u["a"])(c,r,l,!1,null,"01cead7b",null),m=d.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"students-list-info"},[n("div",{staticClass:"title"},[n("div",[e._v("学员列表")]),n("el-button",{attrs:{type:"primary"},on:{click:e.showAdd}},[e._v("选择学员")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"empty-text":e.hasListInfo}},[n("el-table-column",{attrs:{fixed:"",prop:"num",label:"序号","min-width":"100",align:"center"}}),n("el-table-column",{attrs:{prop:"id",label:"钉钉ID","min-width":"160",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"学员姓名","min-width":"120",align:"center"}}),n("el-table-column",{attrs:{prop:"first_login_time",label:"首次登录时间","min-width":"120",align:"center"}}),n("el-table-column",{attrs:{prop:"avatar",label:"头像","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-avatar",{attrs:{size:30,src:e.row.avatar}})]}}])}),n("el-table-column",{attrs:{prop:"stage",label:"当前阶段","min-width":"120",align:"center"}}),n("el-table-column",{attrs:{prop:"stage_status",label:"阶段状态","min-width":"120",align:"center"}}),n("el-table-column",{attrs:{prop:"plan_name",label:"使用计划","min-width":"120",align:"center"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleClick(t.row)}}},[e._v("查看")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.delShow=!0,e.rowInfo=t.row}}},[e._v("删除")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.assessment(t.row)}}},[e._v("去考核")]),"待考试"!==t.row.stage_status||t.row.is_commented?e._e():n("span",{staticClass:"tip-spot"})]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[12,18,24],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("el-dialog",{attrs:{title:"删除提示",visible:e.delShow,width:"30%",center:"",top:"30vh"},on:{"update:visible":function(t){e.delShow=t}}},[n("p",{staticClass:"center"},[e._v("删除后，该学员信息将不再保留，请确定是否删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},p=[],h=(n("28a5"),n("7f7f"),n("b415"),n("f296")),g={data:function(){return{list:[],currentPage:1,delShow:!1,pageSize:12,count:0,rowInfo:"",hasListInfo:"暂无数据",workShiftShow:!1}},computed:{getStageStatus:function(){return function(e){return"doing"===e?"正在进行":"exam"===e?"待考试":"eliminate"===e?"淘汰":"delay"===e?"延期":"pass"===e?"通过":void 0}},getStage:function(){return function(e,t){if(e===t)return"轮岗阶段";if(-1===e)return"试岗阶段";if(e<t){if(0===e)return"第一阶段";if(1===e)return"第二阶段";if(2===e)return"第三阶段";if(3===e)return"第四阶段";if(4===e)return"第五阶段";if(5===e)return"第六阶段"}if(e>t){if(e-=t,0===e)return"第二阶段";if(1===e)return"第三阶段";if(2===e)return"第四阶段";if(3===e)return"第五阶段";if(4===e)return"第六阶段";if(5===e)return"第七阶段"}}}},created:function(){this.$route.query.type?this.getList({stage:this.$route.query.type,stage_status:"exam"}):this.getList()},methods:{handleClick:function(e){this.$router.push("/learning-admin/studentsList/students-detail/".concat(e.admin_id))},assessment:function(e){this.$router.push("/learning-admin/studentsList/ph-ex-result/".concat(e.admin_id))},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},confirm:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["p"])(this.rowInfo.user_id);case 2:return t=e.sent,n=t.data,n&&n.result&&this.$message({message:"删除成功",type:"success"}),e.next=7,this.$emit("searchList");case 7:this.delShow=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showAdd:function(){this.$emit("showAddAdmin")},getList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t?(this.hasListInfo="暂无数据，请重新输入关键词查询",n={pageSize:this.pageSize,name:t.name||void 0,started_at:t.time?t.time[0]:"",ended_at:t.time?t.time[1]:"",user_id:t.user_id||void 0,stage_status:t.stage_status||void 0,plan_name:t.plan_name||void 0,page:this.currentPage,stage:t.stage||void 0}):(this.hasListInfo="暂无数据",n={pageSize:this.pageSize,page:this.currentPage}),e.next=3,Object(h["kb"])(n);case 3:a=e.sent,i=a.data,i&&(i.list.length?(this.list=i.list.map((function(e,t){return{num:t+1,id:e.user_id,name:e.name,first_login_time:e.first_login_time.split("T")[0],avatar:e.admin?e.admin.avatar:"",stage:s.getStage(e.stage,e.plan?e.plan.job_rotation_position:""),stage_status:s.getStageStatus(e.stage_status),user_id:e._id,admin_id:e.admin?e.admin._id:"",plan_name:e.plan_name||"/",is_commented:e.is_commented}})),this.workShiftShow=this.list.some((function(e){return"exam"===e.stage_status})),this.count=i.count):this.list=i.list);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},b=g,v=(n("04eb"),Object(u["a"])(b,f,p,!1,null,"269bdfe0",null)),_=v.exports,w=n("9039"),y={components:{Search:m,ListInfo:_,Tip:w["a"]},data:function(){return{addAdminShow:!1,userList:[],ruleAdmin:{admin:""},rules:{admin:[{required:!0,message:"请选择管理员",trigger:"change"}]}}},watch:{addAdminShow:function(){this.addAdminShow||(this.ruleAdmin.admin="")}},mounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["nb"])();case 2:t=e.sent,n=t.data,n&&n.length&&(this.userList=n);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{btnAddAdminShow:function(){this.addAdminShow=!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=12;break}return e.next=3,Object(h["f"])({admin:t.ruleAdmin.admin});case 3:if(a=e.sent,i=a.data,i.result){e.next=7;break}return e.abrupt("return",t.$message({message:i.message,type:"error"}));case 7:return e.next=9,t.$refs["listInfo"].getList();case 9:t.addAdminShow=!1,e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},searchList:function(e){this.$refs["listInfo"].getList(e)}}},k=y,x=(n("ea1f"),Object(u["a"])(k,a,i,!1,null,"d35aa97e",null));t["default"]=x.exports},ea1f:function(e,t,n){"use strict";var a=n("f3be"),i=n.n(a);i.a},f3be:function(e,t,n){}}]);
//# sourceMappingURL=chunk-78483356.c3526d7c.js.map