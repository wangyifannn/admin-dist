{"version":3,"sources":["webpack:///./src/views/system-settings/recipes/components/RecipesTemplate.vue?96c3","webpack:///./src/libs/arrayUtils.js","webpack:///./src/views/system-settings/recipes/components/RecipesTemplate.vue?eb4a","webpack:///src/views/system-settings/recipes/components/RecipesTemplate.vue","webpack:///./src/views/system-settings/recipes/components/RecipesTemplate.vue?02f5","webpack:///./src/views/system-settings/recipes/components/RecipesTemplate.vue","webpack:///./src/utils/recipeBgOpts.js","webpack:///./src/libs/jsTypeUtil.js","webpack:///./src/api/upload.js","webpack:///./node_modules/handsontable/node_modules/moment/locale sync ^\\.\\/.*$"],"names":["deepCope","obj","JSON","parse","stringify","is1dArray","isArray","some","item","Object","is2dArray","every","arr","getEff2dArrayByCols","target2dArray","cols","Error","$cols","reduce","acc","Math","max","Number","getArrayTailNaEIndex","fillEmptyArr","Array","apply","length","map","filter","row","Boolean","concat","slice","i","arrayAssign1d","target1dArrays","args","arg","reverseArgs","reverse","index","splice","arrayAssign2d","target2dArrays","oneAssign2dArr","eleArr","isEqual1dArray","a1dArray","b1dArray","toString","console","error","isEqual2dArray","firstArray","second2dArray","ele","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","form","rules","pageType","staticStyle","model","value","callback","$$v","$set","expression","_v","_s","title","bg_type","duration","required","message","trigger","curHotTableData","minRows","maxRows","description","on","handleSave","publish","_e","style","width","paddingTop","backgroundImage","curRecipeBgOpt","recipeHeadBg","dietician","name","effHtData","domProps","staticRenderFns","baseArr","components","CHotTable","CTable","HtmlToImage","props","type","String","default","data","publishUrl","$store","state","user","templateId","recipesId","baseRecipeTableData","curRecBgOpts","recipeBgOpts","watch","handler","deep","durationInit","recipeDurChangeHandle","val","computed","created","$route","query","id","methods","publishRecipes","res","code","$refs","validate","valid","recipeBgFilterOpts","durationToTableData","1","2","component","recipeBg","isType","prototype","call","oss","request","url","method","getImageMeta","postObject","ossData","key","file","onProgress","FormData","append","OSSAccessKeyId","policy","Signature","headers","onUploadProgress","indexOf","meta","videoMeta","size","extname","filename","a","split","join","b","substring","search","upload","random","floor","fileName","Date","getTime","fileType","path","prefix","webpackContext","req","webpackContextResolve","__webpack_require__","e","keys","resolve","module","exports"],"mappings":"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","file":"static/js/chunk-0b65174f.04d1065b.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipesTemplate.vue?vue&type=style&index=0&id=1c1c0398&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipesTemplate.vue?vue&type=style&index=0&id=1c1c0398&scoped=true&lang=scss&\"","import { isArray } from '@/libs/jsTypeUtil'\r\n\r\n// 深拷贝\r\nconst deepCope = obj => {\r\n  return JSON.parse(JSON.stringify(obj))\r\n}\r\n\r\n/**\r\n * 一维并且每个元素都不是引用类型数组的判断\r\n * @param {any} obj\r\n */\r\nconst is1dArray = obj => {\r\n  return isArray(obj) && !obj.some(item => item instanceof Object)\r\n}\r\n\r\n/**\r\n * 严格二维数组的判断\r\n * @param {any} obj\r\n */\r\nconst is2dArray = obj => {\r\n  return isArray(obj) && obj.every(arr => is1dArray(arr))\r\n}\r\n\r\n// 暂时觉得下面两个函数 （isEff1dArray, isEff2dArray）通过了测试，但是含义不明，暂时不推荐使用\r\n/**\r\n * 有效的一维数组的判断\r\n * @param {any} obj\r\n */\r\nconst isEff1dArray = obj => {\r\n  return (\r\n    isArray(obj) &&\r\n    obj.length > 0 &&\r\n    obj.some(\r\n      item =>\r\n        item !== '' && item !== undefined && JSON.stringify(item) !== 'null'\r\n    )\r\n  )\r\n}\r\n\r\n/**\r\n * 有效的二维数组的判断\r\n * @param {any} obj\r\n */\r\nconst isEff2dArray = obj => {\r\n  return isArray(obj) && obj.length > 0 && obj.every(item => isEff1dArray(item))\r\n}\r\n\r\n/**\r\n * 判断二维数组内部最小ele === ''\r\n * @param {any} obj\r\n */\r\nconst isNullStr2dArray = obj => {\r\n  return (\r\n    isArray(obj) &&\r\n    obj.length > 0 &&\r\n    obj.every(\r\n      item => isArray(item) && item.length > 0 && item.every(ele => ele === '')\r\n    )\r\n  )\r\n}\r\n\r\n/**\r\n * 通过 cols 获取二维数组 Effective\r\n * @param {[string[]]} target2dArray\r\n * @param {number} cols\r\n */\r\nconst getEff2dArrayByCols = (target2dArray, cols) => {\r\n  if (!is2dArray(target2dArray))\r\n    throw new Error('params target2dArray is not a strict 2dArray')\r\n  const $cols =\r\n    cols ||\r\n    target2dArray.reduce(\r\n      (acc, item) => Math.max(acc, Number(getArrayTailNaEIndex(item) + 1)),\r\n      0\r\n    )\r\n  const fillEmptyArr = Array.apply(null, { length: $cols }).map(item => '')\r\n  return target2dArray\r\n    .filter(row => row.some(item => Boolean(item)))\r\n    .map(row => row.concat(fillEmptyArr).slice(0, $cols))\r\n}\r\n\r\n/**\r\n * 获取数组尾部不是空\r\n * [1, 2, 3, 4, '', undefined] => 4\r\n * @param {string[]} arr\r\n */\r\nconst getArrayTailNaEIndex = arr => {\r\n  let i = arr.length - 1\r\n  while (i > -1) {\r\n    if (arr[i]) return i\r\n    else if (i === 0) {\r\n      return false\r\n    } else i--\r\n  }\r\n  return false\r\n}\r\n\r\n/**\r\n * 一维度数组的assign\r\n * @param {[[]]} target2dArrays [1dArray,...]\r\n */\r\nconst arrayAssign1d = (...target1dArrays) => {\r\n  const args = deepCope(target1dArrays)\r\n  if (args.some(arg => !isArray(arg)))\r\n    throw new Error('type of oneArg is not array')\r\n  const reverseArgs = args.reverse()\r\n  return reverseArgs.reduce((acc, item, index) => {\r\n    if (index === 0) return acc.concat(item)\r\n    else {\r\n      if (acc.length >= item.length) return acc\r\n      else {\r\n        item.splice(0, acc.length, ...acc)\r\n        return item\r\n      }\r\n    }\r\n  }, [])\r\n}\r\n\r\n/**\r\n * 当前仅仅处理严格的二维数组\r\n * @param {} target2dArrays [2dArray,...]\r\n */\r\nconst arrayAssign2d = (...target2dArrays) => {\r\n  var args = deepCope(target2dArrays)\r\n  if (args.some(arg => !is2dArray(arg)))\r\n    throw new Error('one of target2dArrays is not a strict 2dArray')\r\n  const reverseArgs = args.reverse()\r\n  return reverseArgs.reduce((acc, item, index) => {\r\n    if (index === 0) return acc.concat(item)\r\n    else {\r\n      const oneAssign2dArr = acc.map((eleArr, index) =>\r\n        arrayAssign1d(item[index] || [], eleArr)\r\n      )\r\n      if (acc.length < item.length) {\r\n        item.splice(0, oneAssign2dArr.length, ...oneAssign2dArr)\r\n        return item\r\n      }\r\n      return oneAssign2dArr\r\n    }\r\n  }, [])\r\n}\r\n\r\n/**\r\n * 判断两个一维数组是否相等\r\n * @param {[string]} a1dArray\r\n * @param {[string]} b1dArray\r\n */\r\nconst isEqual1dArray = (a1dArray, b1dArray) => {\r\n  if (!is1dArray(a1dArray) || !is1dArray(b1dArray)) {\r\n    console.error('传入的数组不是 1dArray')\r\n    return false\r\n  }\r\n  return a1dArray.toString() === b1dArray.toString()\r\n}\r\n\r\n/**\r\n * 判断两个二维数组是否相等\r\n * @param {[[string]]} firstArray\r\n * @param {[[string]]} second2dArray\r\n */\r\nconst isEqual2dArray = (firstArray, second2dArray) => {\r\n  if (!is2dArray(firstArray) || !is2dArray(second2dArray)) {\r\n    console.error('传入的数组不是 2dArray')\r\n    return false\r\n  }\r\n  if (firstArray.length !== second2dArray.length) return false\r\n  return firstArray.every((ele, index) => {\r\n    return isEqual1dArray(ele, second2dArray[index])\r\n  })\r\n}\r\n\r\nexport {\r\n  deepCope,\r\n  is1dArray,\r\n  is2dArray,\r\n  isEff1dArray,\r\n  isEff2dArray,\r\n  isNullStr2dArray,\r\n  isEqual1dArray,\r\n  isEqual2dArray,\r\n  getEff2dArrayByCols,\r\n  getArrayTailNaEIndex,\r\n  arrayAssign1d,\r\n  arrayAssign2d\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recipe-add\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"180px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"模板名称：\",\"prop\":\"title\"}},[(_vm.pageType !== 'check')?_c('el-input',{staticStyle:{\"width\":\"70%\"},attrs:{\"maxlength\":\"50\",\"show-word-limit\":\"\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}}):_c('span',[_vm._v(_vm._s(_vm.form.title))])],1),_c('el-form-item',{attrs:{\"label\":\"选择背景图：\",\"prop\":\"bg_type\"}},[(_vm.pageType !== 'check')?_c('el-radio-group',{model:{value:(_vm.form.bg_type),callback:function ($$v) {_vm.$set(_vm.form, \"bg_type\", $$v)},expression:\"form.bg_type\"}},[_c('el-radio',{attrs:{\"label\":\"A\"}}),_c('el-radio',{attrs:{\"label\":\"B\"}})],1):_c('span',[_vm._v(_vm._s(_vm.form.bg_type))])],1),_c('el-form-item',{attrs:{\"label\":\"食谱时长：\",\"prop\":\"duration\"}},[(_vm.pageType !== 'check')?_c('el-select',{model:{value:(_vm.form.duration),callback:function ($$v) {_vm.$set(_vm.form, \"duration\", $$v)},expression:\"form.duration\"}},[_c('el-option',{attrs:{\"label\":\"周\",\"value\":1}}),_c('el-option',{attrs:{\"label\":\"月\",\"value\":2}})],1):_c('span',[_vm._v(_vm._s(_vm.form.duration === 1 ? '周' : '月'))])],1),_c('el-form-item',{attrs:{\"label\":\"表格：\",\"rules\":[{ required: true, message: '请填写', trigger: 'blur' }]}},[_c('c-hot-table',{attrs:{\"height\":300,\"readonly\":_vm.pageType === 'check'},model:{value:(_vm.curHotTableData),callback:function ($$v) {_vm.curHotTableData=$$v},expression:\"curHotTableData\"}})],1),_c('el-form-item',{attrs:{\"label\":\"注释：\",\"prop\":\"description\"}},[(_vm.pageType !== 'check')?_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4, maxRows: 10 },\"maxlength\":\"1000\",\"show-word-limit\":\"\"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}}):_c('span',[_vm._v(_vm._s(_vm.form.description))])],1),(_vm.pageType !== 'check')?_c('el-form-item',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"保存\")]),_c('el-button',{on:{\"click\":_vm.publish}},[_vm._v(\"发布\")])],1)]):_vm._e()],1),_c('div',{staticClass:\"recipes-image\"},[_c('HtmlToImage',{ref:\"htmlToImage\",staticClass:\"recipe-preview\"},[_c('div',{staticClass:\"recipe\",style:({\n          width: '640px',\n          paddingTop: '20px',\n          backgroundImage: (\"url(\" + (_vm.curRecipeBgOpt().recipeBg) + \")\")\n        })},[_c('img',{staticClass:\"recipe__header-img\",attrs:{\"width\":\"100%\",\"src\":_vm.curRecipeBgOpt().recipeHeadBg,\"alt\":\"加载失败\"}}),_c('div',{staticClass:\"recipe__body\"},[_c('div',{staticClass:\"recipe__body__header\"},[_c('span',{staticClass:\"recipe__body__header__title\"},[_vm._v(_vm._s(_vm.form.title))]),_c('span',{staticClass:\"recipe__body__header__sign\"},[_vm._v(\"十月呵护营养师\"+_vm._s(_vm.form.dietician && _vm.form.dietician.name))])]),_c('c-table',{attrs:{\"data\":_vm.effHtData}}),_c('div',{staticClass:\"recipe__body__notes\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.form.description)}})])],1)])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"recipe-add\">\r\n    <el-form ref=\"form\" :model=\"form\" label-width=\"180px\" :rules=\"rules\">\r\n      <el-form-item label=\"模板名称：\" prop=\"title\">\r\n        <el-input\r\n          v-if=\"pageType !== 'check'\"\r\n          v-model=\"form.title\"\r\n          maxlength=\"50\"\r\n          show-word-limit\r\n          style=\"width: 70%\"\r\n        />\r\n        <span v-else>{{ form.title }}</span>\r\n      </el-form-item>\r\n      <el-form-item label=\"选择背景图：\" prop=\"bg_type\">\r\n        <el-radio-group v-if=\"pageType !== 'check'\" v-model=\"form.bg_type\">\r\n          <el-radio label=\"A\" />\r\n          <el-radio label=\"B\" />\r\n        </el-radio-group>\r\n        <span v-else>{{ form.bg_type }}</span>\r\n      </el-form-item>\r\n      <el-form-item label=\"食谱时长：\" prop=\"duration\">\r\n        <el-select v-if=\"pageType !== 'check'\" v-model=\"form.duration\">\r\n          <el-option label=\"周\" :value=\"1\" />\r\n          <el-option label=\"月\" :value=\"2\" />\r\n        </el-select>\r\n        <span v-else>{{ form.duration === 1 ? '周' : '月' }}</span>\r\n      </el-form-item>\r\n      <el-form-item\r\n        label=\"表格：\"\r\n        :rules=\"[{ required: true, message: '请填写', trigger: 'blur' }]\"\r\n      >\r\n        <c-hot-table\r\n          v-model=\"curHotTableData\"\r\n          :height=\"300\"\r\n          :readonly=\"pageType === 'check'\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"注释：\" prop=\"description\">\r\n        <el-input\r\n          v-if=\"pageType !== 'check'\"\r\n          v-model=\"form.description\"\r\n          type=\"textarea\"\r\n          :autosize=\"{ minRows: 4, maxRows: 10 }\"\r\n          maxlength=\"1000\"\r\n          show-word-limit\r\n        />\r\n        <span v-else>{{ form.description }}</span>\r\n      </el-form-item>\r\n      <el-form-item v-if=\"pageType !== 'check'\">\r\n        <div style=\"text-align: center\">\r\n          <el-button type=\"primary\" @click=\"handleSave\">保存</el-button>\r\n          <el-button @click=\"publish\">发布</el-button>\r\n        </div>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div class=\"recipes-image\">\r\n      <HtmlToImage ref=\"htmlToImage\" class=\"recipe-preview\">\r\n        <div\r\n          class=\"recipe\"\r\n          :style=\"{\r\n            width: '640px',\r\n            paddingTop: '20px',\r\n            backgroundImage: `url(${curRecipeBgOpt().recipeBg})`\r\n          }\"\r\n        >\r\n          <img\r\n            class=\"recipe__header-img\"\r\n            width=\"100%\"\r\n            :src=\"curRecipeBgOpt().recipeHeadBg\"\r\n            alt=\"加载失败\"\r\n          />\r\n          <div class=\"recipe__body\">\r\n            <div class=\"recipe__body__header\">\r\n              <span class=\"recipe__body__header__title\">{{ form.title }}</span>\r\n              <span class=\"recipe__body__header__sign\"\r\n                >十月呵护营养师{{ form.dietician && form.dietician.name }}</span\r\n              >\r\n            </div>\r\n            <c-table :data=\"effHtData\" />\r\n            <div class=\"recipe__body__notes\">\r\n              <div v-html=\"form.description\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </HtmlToImage>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CHotTable from '@/components/ChotTable/CHotTable'\r\nimport CTable from '@/components/Ctable/CTable'\r\nimport HtmlToImage from '@/components/html2image/HtmlToImage'\r\nimport { getEff2dArrayByCols, arrayAssign2d } from '@/libs/arrayUtils'\r\nimport Handsontable from 'handsontable'\r\nimport { recipeBgOpts } from '@/utils/recipeBgOpts.js'\r\nimport {\r\n  createRecipes,\r\n  getRecipesDetail,\r\n  updateRecipes,\r\n  publishRecipes\r\n} from '@/api/recipes'\r\n\r\nimport { upload } from '@/api/upload'\r\nconst weekArr = (baseArr => {\r\n  return baseArr.concat(\r\n    Array.apply(null, { length: 31 - baseArr.length }).reduce(\r\n      acc => acc.concat(''),\r\n      []\r\n    )\r\n  )\r\n})(['周一', '周二', '周三', '周四', '周五', '周六', '周日'])\r\nconst monthArr = Array.apply(null, { length: 31 }).reduce(\r\n  (acc, item, index) => acc.concat([['第' + (index + 1) + '天']]),\r\n  []\r\n)\r\nexport default {\r\n  name: 'RecipesTemplate',\r\n  components: {\r\n    CHotTable,\r\n    CTable,\r\n    HtmlToImage\r\n  },\r\n  props: {\r\n    pageType: {\r\n      type: String,\r\n      default: 'add'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      // 发布时传给后台的url\r\n      publishUrl: '',\r\n      dietician: this.$store.state.user.name,\r\n      // 从模版列表页面router带过来的模板id\r\n      templateId: '',\r\n      // 当前食谱id,发布食谱的时候需要用\r\n      recipesId: '',\r\n      // 表单验证规则\r\n      rules: {\r\n        title: [{ required: true, message: '请输入食谱名称', trigger: 'blur' }],\r\n        bg_type: [\r\n          { required: true, message: '请选择背景图', trigger: 'change' }\r\n        ],\r\n        duration: [\r\n          { required: true, message: '请选择食谱时长', trigger: 'change' }\r\n        ],\r\n        description: [\r\n          { required: true, message: '请填写注释', trigger: 'blur' }\r\n        ]\r\n      },\r\n      form: {\r\n        title: '',\r\n        bg_type: 'A',\r\n        duration: 1,\r\n        description: ''\r\n      },\r\n      curHotTableData: Handsontable.helper.createEmptySpreadsheetData(31, 8),\r\n      baseRecipeTableData: [\r\n        ['食谱表', '7:00', '9:30', '12:00', '15:00', '18:00', '21:00']\r\n      ],\r\n      effHtData: [],\r\n      curRecBgOpts: recipeBgOpts\r\n    }\r\n  },\r\n  watch: {\r\n    curHotTableData: {\r\n      handler: function(val) {\r\n        this.effHtData = getEff2dArrayByCols(val)\r\n      },\r\n      deep: true\r\n    },\r\n    duration(val) {\r\n      this.durationInit()\r\n      this.recipeDurChangeHandle(val)\r\n    }\r\n  },\r\n  computed: {\r\n    duration() {\r\n      return this.form.duration\r\n    }\r\n  },\r\n  created() {\r\n    if (this.pageType === 'add') {\r\n      this.durationInit()\r\n      this.recipeDurChangeHandle(1)\r\n    } else {\r\n      // 请求食谱模版的详情\r\n      this.templateId = this.$route.query.id\r\n      getRecipesDetail(this.templateId).then(res => {\r\n        this.form = res.data\r\n        // 对后端数据错误的兼容性处理，旧食谱数据没有duration字段，给默认值1\r\n        if (!this.form.duration) {\r\n          this.form.duration = 1\r\n        }\r\n        this.curHotTableData = res.data.content\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击保存\r\n    async handleSave() {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          this.form.content = this.effHtData\r\n          if (this.pageType === 'add' && !this.recipesId) {\r\n            createRecipes(this.form).then(res => {\r\n              if (res.code === 20000) {\r\n                this.recipesId = res.data._id\r\n                this.templateId = this.recipesId\r\n                this.$message.success('保存成功')\r\n              }\r\n            })\r\n          } else {\r\n            updateRecipes(this.templateId, this.form).then(res => {\r\n              if (res.code === 20000) {\r\n                this.recipesId = res.data._id\r\n                this.$message.success('更新成功')\r\n              }\r\n            })\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 发布食谱\r\n    publishRecipes(id) {\r\n      publishRecipes(id).then(res => {\r\n        if (res.code === 20000) {\r\n          this.$message.success('发布成功')\r\n          this.$router.back(-1)\r\n        }\r\n      })\r\n    },\r\n    // 点击发布\r\n    publish() {\r\n      if (this.recipesId) {\r\n        this.publishRecipes(this.recipesId)\r\n      } else {\r\n        this.$refs.form.validate(valid => {\r\n          if (valid) {\r\n            this.form.content = this.effHtData\r\n            if (this.pageType === 'add') {\r\n              createRecipes(this.form).then(res => {\r\n                if (res.code === 20000) {\r\n                  this.recipesId = res.data._id\r\n                  this.publishRecipes(this.recipesId)\r\n                }\r\n              })\r\n            } else {\r\n              updateRecipes(this.templateId, this.form).then(res => {\r\n                if (res.code === 20000) {\r\n                  this.recipesId = res.data._id\r\n                  this.publishRecipes(this.recipesId)\r\n                }\r\n              })\r\n            }\r\n          } else {\r\n            return false\r\n          }\r\n        })\r\n      }\r\n    },\r\n    // 获取图片链接\r\n    async getRecipeUrl(fileName) {\r\n      const imageFile = await this.$refs.htmlToImage.htmlToCanvas(true)\r\n      imageFile.name = fileName\r\n      const { url } = await upload(imageFile, progress => {})\r\n      this.publishUrl = url\r\n      return url\r\n    },\r\n    curRecipeBgOpt() {\r\n      const recipeBgFilterOpts = this.curRecBgOpts.filter(\r\n        opt => opt.type === this.form.bg_type\r\n      )\r\n      return recipeBgFilterOpts.length === 1 ? recipeBgFilterOpts[0] : {}\r\n    },\r\n    recipeDurChangeHandle(value) {\r\n      this.curHotTableData = arrayAssign2d(\r\n        this.curHotTableData,\r\n        this.durationToTableData[value]\r\n      )\r\n    },\r\n    durationInit() {\r\n      this.durationToTableData = {\r\n        1: arrayAssign2d(this.baseRecipeTableData, [\r\n          [],\r\n          ...weekArr.map(ele => [ele])\r\n        ]),\r\n        2: arrayAssign2d(this.baseRecipeTableData, [[], ...monthArr])\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/styles/recipes/recipes.scss';\r\n.recipe-add {\r\n  padding-right: 180px;\r\n  .recipes-image {\r\n    margin-left: 420px;\r\n    width: 640px;\r\n  }\r\n  .recipe__body__notes {\r\n    white-space: pre-line;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipesTemplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipesTemplate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RecipesTemplate.vue?vue&type=template&id=1c1c0398&scoped=true&\"\nimport script from \"./RecipesTemplate.vue?vue&type=script&lang=js&\"\nexport * from \"./RecipesTemplate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecipesTemplate.vue?vue&type=style&index=0&id=1c1c0398&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c1c0398\",\n  null\n  \n)\n\nexport default component.exports","export const recipeBgOpts = [\r\n  {\r\n    type: 'A',\r\n    recipeBg:\r\n      'https://pic1.baobaohehu.com/fd/chat/5b286b6471d886154b417389/20190315173403272BG-02.jpg',\r\n    recipeHeadBg:\r\n      'https://pic1.baobaohehu.com/fd/chat/5b286b6471d886154b417389/20190315173403272mother-header.png'\r\n  },\r\n  {\r\n    type: 'B',\r\n    recipeBg:\r\n      'https://pic1.baobaohehu.com/fd/chat/5b286b6471d886154b417389/20190315172908007BG-01.jpg',\r\n    recipeHeadBg:\r\n      'https://pic1.baobaohehu.com/fd/chat/5b286b6471d886154b417389/20190315172908007baby-header.png'\r\n  }\r\n]\r\n","function isType(type) {\r\n  return function(obj) {\r\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']'\r\n  }\r\n}\r\n\r\nvar isObject = isType('Object')\r\nvar isString = isType('String')\r\nvar isArray = Array.isArray || isType('Array')\r\nvar isFunction = isType('Function')\r\n\r\nexport { isObject, isString, isArray, isFunction }\r\n","import request from '@/utils/request'\r\nexport const oss = () => {\r\n  return request({\r\n    url: '/oss/auth',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const getImageMeta = url => {\r\n  return request({\r\n    url: url + '?x-oss-process=image/info',\r\n    method: 'get'\r\n  })\r\n}\r\nexport const postObject = async ({ oss: ossData, key, file, onProgress }) => {\r\n  const data = new FormData()\r\n  data.append('OSSAccessKeyId', ossData.OSSAccessKeyId)\r\n  data.append('success_action_status', 200)\r\n  data.append('policy', ossData.policy)\r\n  data.append('Signature', ossData.Signature)\r\n  data.append('key', key)\r\n  data.append('file', file)\r\n  let url = 'https://pic1.baobaohehu.com/'\r\n  await request({\r\n    url,\r\n    method: 'post',\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    },\r\n    onUploadProgress: onProgress || null,\r\n    data\r\n  })\r\n  url = url + key\r\n  let meta\r\n  if (file.type.indexOf('image') > -1) {\r\n    meta = await getImageMeta(url)\r\n  } else if (file.type.indexOf('video') > -1) {\r\n    meta = {\r\n      ...file.videoMeta,\r\n      size: file.size\r\n    }\r\n  } else if (file.type.indexOf('audio') > -1) {\r\n    meta = {\r\n      size: file.size,\r\n      type: file.type\r\n    }\r\n  } else {\r\n    throw new Error(\r\n      '当前上传的类型不是image或者video；当前上传的类型是' + file.type\r\n    )\r\n  }\r\n  return {\r\n    url,\r\n    meta: meta\r\n  }\r\n}\r\n// 获取文件后缀名\r\nexport const extname = filename => {\r\n  if (!filename || typeof filename !== 'string') {\r\n    return false\r\n  }\r\n  const a = filename\r\n    .split('')\r\n    .reverse()\r\n    .join('')\r\n  const b = a\r\n    .substring(0, a.search(/\\./))\r\n    .split('')\r\n    .reverse()\r\n    .join('')\r\n  return b\r\n}\r\n/**\r\n * 封装下oss获取跟上传\r\n * @param file\r\n * @param onProgress\r\n * @returns {Promise.<*>}\r\n */\r\nexport const upload = async (file, onProgress) => {\r\n  const { data } = await oss()\r\n  const random = Math.floor(Math.random() * (100 - 1)) + 1\r\n  let fileName = new Date().getTime()\r\n  const fileType = extname(file.name)\r\n  fileName = fileName + random + '.' + fileType\r\n  const key = `${data.path}/${data.prefix}/${fileName}`\r\n  const res = await postObject({ oss: data, key, file, onProgress })\r\n  return res\r\n}\r\n","var map = {\n\t\"./af\": \"c00a\",\n\t\"./af.js\": \"c00a\",\n\t\"./ar\": \"c97e\",\n\t\"./ar-dz\": \"0162\",\n\t\"./ar-dz.js\": \"0162\",\n\t\"./ar-kw\": \"fae4\",\n\t\"./ar-kw.js\": \"fae4\",\n\t\"./ar-ly\": \"aa71\",\n\t\"./ar-ly.js\": \"aa71\",\n\t\"./ar-ma\": \"5d88\",\n\t\"./ar-ma.js\": \"5d88\",\n\t\"./ar-sa\": \"a10a\",\n\t\"./ar-sa.js\": \"a10a\",\n\t\"./ar-tn\": \"152f\",\n\t\"./ar-tn.js\": \"152f\",\n\t\"./ar.js\": \"c97e\",\n\t\"./az\": \"54cd\",\n\t\"./az.js\": \"54cd\",\n\t\"./be\": \"3dd4\",\n\t\"./be.js\": \"3dd4\",\n\t\"./bg\": \"a802\",\n\t\"./bg.js\": \"a802\",\n\t\"./bm\": \"7cd9\",\n\t\"./bm.js\": \"7cd9\",\n\t\"./bn\": \"7151\",\n\t\"./bn.js\": \"7151\",\n\t\"./bo\": \"323a\",\n\t\"./bo.js\": \"323a\",\n\t\"./br\": \"3138\",\n\t\"./br.js\": \"3138\",\n\t\"./bs\": \"acbc\",\n\t\"./bs.js\": \"acbc\",\n\t\"./ca\": \"0876\",\n\t\"./ca.js\": \"0876\",\n\t\"./cs\": \"0aef\",\n\t\"./cs.js\": \"0aef\",\n\t\"./cv\": \"8be7\",\n\t\"./cv.js\": \"8be7\",\n\t\"./cy\": \"6764\",\n\t\"./cy.js\": \"6764\",\n\t\"./da\": \"7612\",\n\t\"./da.js\": \"7612\",\n\t\"./de\": \"4da8\",\n\t\"./de-at\": \"976e\",\n\t\"./de-at.js\": \"976e\",\n\t\"./de-ch\": \"686e\",\n\t\"./de-ch.js\": \"686e\",\n\t\"./de.js\": \"4da8\",\n\t\"./dv\": \"39df\",\n\t\"./dv.js\": \"39df\",\n\t\"./el\": \"4c94\",\n\t\"./el.js\": \"4c94\",\n\t\"./en-au\": \"4415\",\n\t\"./en-au.js\": \"4415\",\n\t\"./en-ca\": \"499b\",\n\t\"./en-ca.js\": \"499b\",\n\t\"./en-gb\": \"4e86\",\n\t\"./en-gb.js\": \"4e86\",\n\t\"./en-ie\": \"7c7e\",\n\t\"./en-ie.js\": \"7c7e\",\n\t\"./en-nz\": \"f766\",\n\t\"./en-nz.js\": \"f766\",\n\t\"./eo\": \"8135\",\n\t\"./eo.js\": \"8135\",\n\t\"./es\": \"6ebc\",\n\t\"./es-do\": \"e481\",\n\t\"./es-do.js\": \"e481\",\n\t\"./es-us\": \"d75c\",\n\t\"./es-us.js\": \"d75c\",\n\t\"./es.js\": \"6ebc\",\n\t\"./et\": \"e662\",\n\t\"./et.js\": \"e662\",\n\t\"./eu\": \"65b7\",\n\t\"./eu.js\": \"65b7\",\n\t\"./fa\": \"0028\",\n\t\"./fa.js\": \"0028\",\n\t\"./fi\": \"5fd1\",\n\t\"./fi.js\": \"5fd1\",\n\t\"./fo\": \"72f4\",\n\t\"./fo.js\": \"72f4\",\n\t\"./fr\": \"6e81\",\n\t\"./fr-ca\": \"c471\",\n\t\"./fr-ca.js\": \"c471\",\n\t\"./fr-ch\": \"f797\",\n\t\"./fr-ch.js\": \"f797\",\n\t\"./fr.js\": \"6e81\",\n\t\"./fy\": \"d8b9\",\n\t\"./fy.js\": \"d8b9\",\n\t\"./gd\": \"94ef\",\n\t\"./gd.js\": \"94ef\",\n\t\"./gl\": \"c74b\",\n\t\"./gl.js\": \"c74b\",\n\t\"./gom-latn\": \"5601\",\n\t\"./gom-latn.js\": \"5601\",\n\t\"./gu\": \"2a3d1\",\n\t\"./gu.js\": \"2a3d1\",\n\t\"./he\": \"9669\",\n\t\"./he.js\": \"9669\",\n\t\"./hi\": \"e85f\",\n\t\"./hi.js\": \"e85f\",\n\t\"./hr\": \"bf5e\",\n\t\"./hr.js\": \"bf5e\",\n\t\"./hu\": \"9901\",\n\t\"./hu.js\": \"9901\",\n\t\"./hy-am\": \"012e\",\n\t\"./hy-am.js\": \"012e\",\n\t\"./id\": \"ba8c\",\n\t\"./id.js\": \"ba8c\",\n\t\"./is\": \"c6c1\",\n\t\"./is.js\": \"c6c1\",\n\t\"./it\": \"6101\",\n\t\"./it.js\": \"6101\",\n\t\"./ja\": \"f2b8\",\n\t\"./ja.js\": \"f2b8\",\n\t\"./jv\": \"d9e8\",\n\t\"./jv.js\": \"d9e8\",\n\t\"./ka\": \"4d4c\",\n\t\"./ka.js\": \"4d4c\",\n\t\"./kk\": \"b770\",\n\t\"./kk.js\": \"b770\",\n\t\"./km\": \"b388\",\n\t\"./km.js\": \"b388\",\n\t\"./kn\": \"a056\",\n\t\"./kn.js\": \"a056\",\n\t\"./ko\": \"44157\",\n\t\"./ko.js\": \"44157\",\n\t\"./ky\": \"d2f5\",\n\t\"./ky.js\": \"d2f5\",\n\t\"./lb\": \"01fe\",\n\t\"./lb.js\": \"01fe\",\n\t\"./lo\": \"d759\",\n\t\"./lo.js\": \"d759\",\n\t\"./lt\": \"d47b\",\n\t\"./lt.js\": \"d47b\",\n\t\"./lv\": \"3793\",\n\t\"./lv.js\": \"3793\",\n\t\"./me\": \"b26f\",\n\t\"./me.js\": \"b26f\",\n\t\"./mi\": \"d0b2\",\n\t\"./mi.js\": \"d0b2\",\n\t\"./mk\": \"8357\",\n\t\"./mk.js\": \"8357\",\n\t\"./ml\": \"b4f4\",\n\t\"./ml.js\": \"b4f4\",\n\t\"./mr\": \"96b4\",\n\t\"./mr.js\": \"96b4\",\n\t\"./ms\": \"9bf3\",\n\t\"./ms-my\": \"64f3\",\n\t\"./ms-my.js\": \"64f3\",\n\t\"./ms.js\": \"9bf3\",\n\t\"./mt\": \"44b6\",\n\t\"./mt.js\": \"44b6\",\n\t\"./my\": \"35e88\",\n\t\"./my.js\": \"35e88\",\n\t\"./nb\": \"cd6b\",\n\t\"./nb.js\": \"cd6b\",\n\t\"./ne\": \"ee29\",\n\t\"./ne.js\": \"ee29\",\n\t\"./nl\": \"fd25\",\n\t\"./nl-be\": \"11d4\",\n\t\"./nl-be.js\": \"11d4\",\n\t\"./nl.js\": \"fd25\",\n\t\"./nn\": \"a90d\",\n\t\"./nn.js\": \"a90d\",\n\t\"./pa-in\": \"048e\",\n\t\"./pa-in.js\": \"048e\",\n\t\"./pl\": \"b099\",\n\t\"./pl.js\": \"b099\",\n\t\"./pt\": \"8cc1\",\n\t\"./pt-br\": \"cd1a\",\n\t\"./pt-br.js\": \"cd1a\",\n\t\"./pt.js\": \"8cc1\",\n\t\"./ro\": \"4f7b\",\n\t\"./ro.js\": \"4f7b\",\n\t\"./ru\": \"4a7a\",\n\t\"./ru.js\": \"4a7a\",\n\t\"./sd\": \"441d\",\n\t\"./sd.js\": \"441d\",\n\t\"./se\": \"1e99\",\n\t\"./se.js\": \"1e99\",\n\t\"./si\": \"6c0c\",\n\t\"./si.js\": \"6c0c\",\n\t\"./sk\": \"5234\",\n\t\"./sk.js\": \"5234\",\n\t\"./sl\": \"f896\",\n\t\"./sl.js\": \"f896\",\n\t\"./sq\": \"34ed\",\n\t\"./sq.js\": \"34ed\",\n\t\"./sr\": \"849e\",\n\t\"./sr-cyrl\": \"85d6\",\n\t\"./sr-cyrl.js\": \"85d6\",\n\t\"./sr.js\": \"849e\",\n\t\"./ss\": \"4061\",\n\t\"./ss.js\": \"4061\",\n\t\"./sv\": \"d88f\",\n\t\"./sv.js\": \"d88f\",\n\t\"./sw\": \"e7a7\",\n\t\"./sw.js\": \"e7a7\",\n\t\"./ta\": \"d3b3\",\n\t\"./ta.js\": \"d3b3\",\n\t\"./te\": \"eed5\",\n\t\"./te.js\": \"eed5\",\n\t\"./tet\": \"b816\",\n\t\"./tet.js\": \"b816\",\n\t\"./th\": \"19cc\",\n\t\"./th.js\": \"19cc\",\n\t\"./tl-ph\": \"672a\",\n\t\"./tl-ph.js\": \"672a\",\n\t\"./tlh\": \"3f0d\",\n\t\"./tlh.js\": \"3f0d\",\n\t\"./tr\": \"b6ff\",\n\t\"./tr.js\": \"b6ff\",\n\t\"./tzl\": \"3455\",\n\t\"./tzl.js\": \"3455\",\n\t\"./tzm\": \"4707\",\n\t\"./tzm-latn\": \"022c\",\n\t\"./tzm-latn.js\": \"022c\",\n\t\"./tzm.js\": \"4707\",\n\t\"./uk\": \"6901\",\n\t\"./uk.js\": \"6901\",\n\t\"./ur\": \"bc69\",\n\t\"./ur.js\": \"bc69\",\n\t\"./uz\": \"1d5c\",\n\t\"./uz-latn\": \"1f6a\",\n\t\"./uz-latn.js\": \"1f6a\",\n\t\"./uz.js\": \"1d5c\",\n\t\"./vi\": \"9128\",\n\t\"./vi.js\": \"9128\",\n\t\"./x-pseudo\": \"a886\",\n\t\"./x-pseudo.js\": \"a886\",\n\t\"./yo\": \"1db8\",\n\t\"./yo.js\": \"1db8\",\n\t\"./zh-cn\": \"ed0f\",\n\t\"./zh-cn.js\": \"ed0f\",\n\t\"./zh-hk\": \"b487\",\n\t\"./zh-hk.js\": \"b487\",\n\t\"./zh-tw\": \"1940\",\n\t\"./zh-tw.js\": \"1940\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"e945\";"],"sourceRoot":""}