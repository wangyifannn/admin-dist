(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b939e5e4"],{"38e1":function(t,e,a){"use strict";var s=a("f60f"),r=a.n(s);r.a},"875a":function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return n})),a.d(e,"k",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return u})),a.d(e,"f",(function(){return l})),a.d(e,"h",(function(){return c})),a.d(e,"g",(function(){return d})),a.d(e,"i",(function(){return h})),a.d(e,"j",(function(){return m})),a.d(e,"a",(function(){return g}));var s=a("b775");function r(t){return Object(s["a"])({url:"/growth_info/list",method:"get",params:t})}function n(t){return Object(s["a"])({url:"/growth_info",method:"post",data:t})}function i(t,e){return Object(s["a"])({url:"/growth_info/"+t,method:"put",data:e})}function o(t){return Object(s["a"])({url:"/growth_info",method:"delete",data:t})}function u(t){return Object(s["a"])({url:"/growth_info/"+t,method:"get"})}function l(t){return Object(s["a"])({url:"/growth_info/"+t+"/status",method:"put"})}function c(t){return Object(s["a"])({url:"/family_member/in_server_list",method:"get",params:t})}function d(t){return Object(s["a"])({url:"baby_growth_info/growth",method:"get",params:t})}function h(t){return Object(s["a"])({url:"baby_growth_info/detail/"+t,method:"get"})}function m(t){return Object(s["a"])({url:"baby_growth_info/send/"+t,method:"get"})}function g(t){return Object(s["a"])({url:"baby_growth_info/content",method:"post",data:t})}},dac4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"see-details"},[a("el-row",{staticClass:"user-info"},[a("el-col",{staticStyle:{"max-width":"80px"},attrs:{span:4}},[a("el-avatar",{attrs:{src:t.babyInfo.user&&t.babyInfo.user.avatar}})],1),a("el-col",{attrs:{span:20}},[a("span",{staticClass:"item-title"},[t._v("用户名称：")]),a("span",{staticClass:"item-text"},[t._v(t._s(t.babyInfo.user&&t.babyInfo.user.nickname)+"  "),t.replace?a("svg-icon",{attrs:{"icon-class":"replace"}}):t._e()],1)])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"item-title"},[t._v("宝宝：")]),a("span",{staticClass:"item-text"},[t._v(t._s(t.babyInfo.name))]),a("span",{staticClass:"item-title",staticStyle:{"margin-left":"10px"}},[t._v("宝宝月龄：")]),a("span",{staticClass:"item-text"},[t._v(t._s(t.babyInfo.birthday))])])],1),a("el-tabs",{staticClass:"professional-role__header__tabs",staticStyle:{"margin-top":"30px"},on:{"tab-click":t.getActiveList},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabArr,(function(e){var s=e.label,r=e.name,n=e.num;return a("el-tab-pane",{key:r,attrs:{name:r}},[a("span",{staticClass:"professional-role__header__tabs__slot-label",attrs:{slot:"label"},slot:"label"},[n>0?a("el-badge",{staticClass:"item",attrs:{value:n}}):t._e(),t._v(t._s(s))],1)])})),1),a("el-table",{staticStyle:{width:"100%","min-width":"400px"},attrs:{data:t.tableData,"empty-text":"暂无数据"}},[a("el-table-column",{attrs:{width:"chat"===t.pageType?"60px":"110px",prop:"monthAge",label:"测试月龄",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"发育量表名称",align:"center",width:"chat"===t.pageType?"110px":"250px"}}),a("el-table-column",{attrs:{prop:"status",label:"当前状态",align:"center",width:"chat"===t.pageType?"100px":"150px"}}),"health"===t.pageType?a("el-table-column",{attrs:{label:"最近操作时间",width:"220px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("formatTime")(new Date(e.row.operateTime)))+"\n      ")]}}],null,!1,648558294)}):t._e(),"health"===t.pageType?a("el-table-column",{attrs:{prop:"name",align:"center",label:"医生建议"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.suggestion?e.row.suggestion:"暂无数据")+"\n      ")]}}],null,!1,135623844)}):t._e(),a("el-table-column",{attrs:{label:"操作",width:"chat"===t.pageType?"100px":"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row?[a("el-badge",{staticClass:"dot-badge",attrs:{"is-dot":e.row.status&&"待发送"===e.row.status&&"hm"===t.$store.state.user.bus_role||e.row.status&&"待反馈"===e.row.status||e.row.status&&"反馈已保存"===e.row.status&&"doctor"===t.$store.state.user.bus_role}},[e.row.status&&"待测试"!==e.row.status||"已完成"!==e.row.status?a("el-button",{attrs:{type:"text",size:"small",disabled:!t.isMyUser},on:{click:function(a){t.sendClick(t.getOperation(e.row.status),e.row)}}},[t._v(t._s(t.getOperation(e.row.status)))]):t._e()],1),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.seeDetail(e.row)}}},[t._v("查看")])]:void 0}}],null,!0)})],1),a("el-dialog",{attrs:{title:"发送发育量表提醒",visible:t.growDialogVisible,width:"400px",center:"",top:"30vh",modal:!1},on:{"update:visible":function(e){t.growDialogVisible=e}}},[a("span",{staticStyle:{"line-height":"24px"}},[t._v("操作成功后，您将发送【"+t._s(t.rowInfo.name)+"】给【"+t._s(t.babyInfo.name)+"】，如果确认无误，请单击确认发送")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{padding:"6px 15px",height:"32px"},attrs:{type:"primary"},on:{click:t.confirmSend}},[t._v("确认发送")])],1)])],1)},r=[],n=(a("96cf"),a("3b8d")),i=(a("7f7f"),a("db72")),o=a("875a"),u=a("2f62"),l={props:{pageType:{type:String,default:"health"},member:{type:String,default:""}},data:function(){return{replace:!1,activeName:"all",tableData:[],allDataArr:[],testedArr:[],suggestedArr:[],babyInfo:{},statusText:"",rowInfo:{},tabArr:[{label:"全部",name:"all",num:0},{label:"医生已反馈",name:"suggested",num:0},{label:"已测",name:"tested",num:0}],growDialogVisible:!1}},computed:Object(i["a"])({},Object(u["c"])(["isMyUser"]),{getStatus:function(){return function(t){return"un_send"===t?"未发送":"pre_send"===t?"待发送":"send"===t?"待测试":"tested"===t?"待反馈":"save"===t?"反馈已保存":"suggested"===t?"已完成":void 0}},getOperation:function(){return function(t){return"未发送"===t||"待发送"===t?"发送":"待反馈"===t?"填写反馈":"反馈已保存"===t?"编辑反馈":void 0}},isHasUser:function(){return function(t){return t[this.$store.state.user.bus_role]===this.$store.state.user.id}}}),created:function(){this.getGrowthDetail(),this.$route.params.id&&window.localStorage.setItem("paramsID",this.$route.params.id)},watch:{member:function(){this.getGrowthDetail()}},methods:{getActiveList:function(){var t=this.activeName;this.tableData="all"===t?this.allDataArr:"suggested"===t?this.suggestedArr:this.testedArr},seeDetail:function(t){this.statusText=t.status,"growListDetail"===this.$route.name?(this.statusText=t.status,this.$router.push({name:"growStatusDetail",params:{id:t.id},query:{status:this.statusText}})):(this.$store.state.chat.growthId=t.id,this.$emit("setLookStatus",t.id))},getGrowthDetail:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["g"])({member:this.$route.params.id||this.member,needSort:"health"===this.pageType});case 2:e=t.sent,a=e.data,s=e.code,2e4===s&&(this.replace=a.baby.is_replace,this.babyInfo=a.baby,this.suggestedArr=[],this.testedArr=[],this.allDataArr=[],a.list&&a.list.length?(a.list.map((function(t){t.status&&"suggested"===t.status?r.suggestedArr.push({monthAge:t.month_age,name:t.name,status:r.getStatus(t.status),id:t._id,reminded_at:t.reminded_at,suggestion:t.suggest_content,operateTime:t.operateTime}):t.status&&"tested"===t.status&&r.testedArr.push({monthAge:t.month_age,name:t.name,status:r.getStatus(t.status),id:t._id,reminded_at:t.reminded_at,suggestion:t.suggest_content,operateTime:t.operateTime}),r.allDataArr.push({monthAge:t.month_age,name:t.name,status:r.getStatus(t.status),id:t._id,reminded_at:t.reminded_at,suggestion:t.suggest_content,operateTime:t.operateTime})})),this.tableData=this.suggestedArr):this.tableData=[],this.getActiveList());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sendClick:function(t,e){if(this.statusText=e.status,"hm"!==this.$store.state.user.bus_role&&"发送"===t||"doctor"!==this.$store.state.user.bus_role&&"发送"!==t)return this.$message.warning("没有操作权限");"发送"===t?(this.rowInfo=e,this.growDialogVisible=!0):this.$router.push({name:"growStatusDetail",params:{id:e.id},query:{status:this.statusText}})},confirmSend:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["j"])(this.rowInfo.id);case 2:e=t.sent,a=e.data,s=e.code,2e4===s&&a.result?(this.$message.success("发送成功"),this.getGrowthDetail(),this.growDialogVisible=!1):this.$message.error(a.message);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},beforeRouteLeave:function(t,e,a){"未发送"!==this.statusText&&"待发送"!==this.statusText&&"待测试"!==this.statusText||(t.meta.title="未发送"),"待反馈"===this.statusText&&(t.meta.title="待反馈"),"反馈已保存"===this.statusText&&(t.meta.title="填写反馈"),"已完成"===this.statusText&&(t.meta.title="已完成"),a()}},c=l,d=(a("38e1"),a("2877")),h=Object(d["a"])(c,s,r,!1,null,"5c71082a",null);e["default"]=h.exports},f60f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-b939e5e4.147b83b5.js.map