(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08061ad0"],{"3c95":function(t,e,a){},"5cf0":function(t,e,a){"use strict";var r=a("687b"),n=a.n(r);n.a},"5ec3":function(t,e,a){"use strict";var r=a("9fc2"),n=a.n(r);n.a},"687b":function(t,e,a){t.exports={menuText:"#17233D",menuActiveText:"#409EFF",subMenuActiveText:"#17233D",menuBg:"#FEFEFE",menuHover:"#ECF4FF",subMenuBg:"#FEFEFE",subMenuHover:"#ECF4FF",sideBarWidth:"240px"}},7538:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("el-form",{ref:"searchTemplateForm",staticClass:"search__form",attrs:{"label-position":"left","label-width":"76px",model:t.formData}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"套餐编号",prop:"id"}},[a("el-input",{attrs:{placeholder:"请输入套餐编号",size:"small",clearable:""},model:{value:t.formData.no,callback:function(e){t.$set(t.formData,"no",t._n(e))},expression:"formData.no"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"套餐名称"}},[a("el-input",{attrs:{placeholder:"请输入套餐名称",size:"small",clearable:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"现价区间","label-width":"90px"}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"最低价",size:"small",clearable:""},model:{value:t.formData.price_start,callback:function(e){t.$set(t.formData,"price_start",t._n(e))},expression:"formData.price_start"}})],1),a("el-col",{attrs:{span:2}},[a("span",{staticStyle:{"margin-left":"6px"}},[t._v("至")])]),a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"最高价",size:"small",clearable:""},model:{value:t.formData.price_end,callback:function(e){t.$set(t.formData,"price_end",t._n(e))},expression:"formData.price_end"}})],1)],1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择套餐状态",size:"small",clearable:""},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},t._l(t.selectOptsMaps.saleStatusTypes,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择套餐类型",size:"small",clearable:""},model:{value:t.formData.department,callback:function(e){t.$set(t.formData,"department",e)},expression:"formData.department"}},t._l(t.getDepartment("","arr"),(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:4}},[a("ConsultType",{attrs:{placeholder:"请选择咨询方式",label:"咨询方式"},model:{value:t.formData.ask_mode,callback:function(e){t.$set(t.formData,"ask_mode",e)},expression:"formData.ask_mode"}})],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建日期"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","prefix-icon":"el-icon-date","default-time":["12:00:00"],size:"small",clearable:""},model:{value:t.formData.createTime,callback:function(e){t.$set(t.formData,"createTime",e)},expression:"formData.createTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"首次上架时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetimerange","prefix-icon":"el-icon-date","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00"],size:"small",clearable:""},model:{value:t.formData.firstOnlineTime,callback:function(e){t.$set(t.formData,"firstOnlineTime",e)},expression:"formData.firstOnlineTime"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleSearch}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.handleReset}},[t._v("重置")])],1)],1),a("el-row",{attrs:{gutter:40}})],1)],1)},n=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:t.label,prop:t.prop,rules:t.rules}},[a("el-select",{attrs:{value:t.value,placeholder:t.placeholder,clearable:"",size:t.size,disabled:t.disabled},on:{change:t.onValueChange}},t._l(t.$store.state.dictionary.productTypes,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}},[t._v(t._s(e.label))])})),1)],1)},i=[],s={props:{size:{type:String,default:"small"},label:{type:String,default:"咨询方式"},placeholder:{type:String,default:"请选择"},value:[String,Boolean],moduleName:{type:String,default:""},prop:{type:String,default:""},rules:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},methods:{onValueChange:function(t){this.$emit("input",t)}}},o=s,c=a("2877"),u=Object(c["a"])(o,l,i,!1,null,null,null),d=u.exports,p=a("0680"),f={no:"",title:"",ask_mode:"",status:"",createTime:[],firstOnlineTime:[],price_start:"",price_end:""},m={props:{localFormData:{type:Object,default:function(){}},selectOptsMaps:{type:Object,required:!1,default:function(){return{nameTypes:[],durationTypes:[],createUserTypes:[],priceType:[],saleStatusTypes:[{label:"上架",value:1},{label:"未上架",value:0}]}}}},components:{ConsultType:d},data:function(){var t=function(t,e,a){setTimeout((function(){e<0?a(new Error("编号必须大于0")):a()}),1e3)};return{formData:{},searchTemplateForm:{id:[{validator:t,trigger:"blur"}]}}},watch:{},created:function(){this.formData=Object.assign({},f,this.localFormData)},methods:{getDepartment:p["b"],handleSearch:function(){var t=this;this.$refs["searchTemplateForm"].validate((function(e){if(!e)return!1;var a={};t.formData.no&&(a.no=t.formData.no),t.formData.title&&(a.title=t.formData.title),t.formData.ask_mode&&(a.ask_mode=t.formData.ask_mode),t.formData.department&&(a.department=t.formData.department),""!==t.formData.price_start&&(a.price_start=100*t.formData.price_start),""!==t.formData.price_end&&(a.price_end=100*t.formData.price_end),""!==t.formData.status&&(a.status=t.formData.status),t.formData.createTime&&t.formData.createTime.length>0&&(a.created_time_start=t.formData.createTime[0],a.created_time_end=t.formData.createTime[1]),t.formData.firstOnlineTime&&t.formData.firstOnlineTime.length>0&&(a.first_online_start=t.formData.firstOnlineTime[0],a.first_online_end=t.formData.firstOnlineTime[1]),t.$emit("search",{searchParams:a})}))},handleReset:function(){this.formData=Object.assign({},f),this.handleSearch()}}},h=m,_=(a("8f4b"),a("5ec3"),Object(c["a"])(h,r,n,!1,null,"071de918",null));e["a"]=_.exports},"8f4b":function(t,e,a){"use strict";var r=a("3c95"),n=a.n(r);n.a},"9fc2":function(t,e,a){},a463:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-list"},[a("div",{staticClass:"order-list__search"},[a("el-button",{staticClass:"order-list__search__collapse-btn",attrs:{type:"text"},on:{click:function(e){t.searchFormShow=!t.searchFormShow}}},[t._v("\n      "+t._s(t.searchFormShowText)+"\n      "),a("i",{staticClass:"el-icon--right",class:t.searchFormShow?"el-icon-arrow-up":"el-icon-arrow-down"})]),a("el-collapse-transition",[a("search-form",{directives:[{name:"show",rawName:"v-show",value:t.searchFormShow,expression:"searchFormShow"}],ref:"searchForm",attrs:{"cur-order-status":"all"===t.curTabName?"":t.curTabName,"local-form-data":t.LocalFormData},on:{search:t.handleSearch}})],1)],1),a("div",{staticClass:"add"},[a("el-row",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.AddMeal}},[t._v("\n        新增套餐\n      ")]),a("el-button",{staticClass:"float-right",attrs:{type:"text"},on:{click:function(e){return t.historyVersion("all")}}},[t._v("\n        查看套餐历史版本\n      ")])],1)],1),a("div",{staticClass:"adminuser-list__body"},[a("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[t._v("套餐列表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{"header-row-style":t.getHeadStyle,data:t.tableData,border:"","default-sort":{prop:"in_service_user_num"},"empty-text":"暂无数据，请尝试输入其他关键字"}},[a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{align:"center",fixed:"",prop:"no",label:"套餐编号",width:"100"}}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{align:"center",fixed:"",prop:"title",label:"套餐名称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title+e.row.sub_title))]}}])}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{align:"center",fixed:"",prop:"title",label:"套餐类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.getDepartment(e.row.department,""))+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"服务周期",align:"center","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(t.parseDuration(e.row.duration))+"个月 ")])]}}])}),a("el-table-column",{attrs:{label:"咨询方式",align:"center","min-width":"100",prop:"ask_mode"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("productType")(e.row.ask_mode))+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"price","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("fenToYuan")(e.row.price))+"\n        ")]}}])},[a("template",{slot:"header"},[a("span",[t._v("现价（元）")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top",content:"购买套餐时，实际购买价格以此优惠价进行计算，原价仅做展示"}},[a("i",{staticClass:"el-icon-info"})])],1)],2),a("el-table-column",{attrs:{align:"center","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(a.contract_counts.enabled)+"/"+t._s(a.contract_counts.waiting)+"/"+t._s(a.contract_counts.total)+"\n        ")]}}])},[a("template",{slot:"header"},[a("span",[t._v("签约订单情况")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top",content:"服务中订单/待服务订单/所有订单数"}},[a("i",{staticClass:"el-icon-info"})])],1)],2),a("el-table-column",{attrs:{align:"center",prop:"create_user",label:"创建人","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(a.creator.name)+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"first_online_at",label:"首次上架时间","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[r.first_online_at?a("span",[t._v("\n              "+t._s(t._f("formatTime")(new Date(r.first_online_at)))+"\n            ")]):a("span",[t._v("未上架")])])]}}])}),a("el-table-column",{attrs:{label:"状态",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("\n            "+t._s(e.row.status?"已上架":"已下架")+"\n          ")]),e.row.status?a("p",{staticStyle:{color:"#f8747f",cursor:"pointer"},on:{click:function(a){return t.standUpAndDown(e.row)}}},[t._v("\n            立即下架\n          ")]):a("p",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(a){return t.standUpAndDown(e.row)}}},[t._v("\n            立即上架\n          ")])]}}])}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{align:"center",prop:"created_at",label:"创建时间","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("formatTime")(new Date(e.row.first_created_at)))+"\n        ")]}}])}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{align:"center",prop:"version",label:"当前版本","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("\n            "+t._s(e.row.version)+"\n          ")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.historyVersion(e.row.batch_id)}}},[t._v("\n            历史版本\n          ")])]}}])}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClickEdit(e.row)}}},[t._v("\n            编辑")])]}}])}),a("template",{slot:"empty"},[a("div",{staticClass:"table-empty"},[t._v("\n          暂无数据，请尝试输入其他关键字\n        ")])])],2),a("div",{staticClass:"adminuser-list__body__pagination"},[a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":t.pageSizes,"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.putawayDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.putawayDialogVisible=e}}},[a("span",[t._v(t._s(t.dialogContent))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.putawayDialogVisible=!1}}},[t._v("取 消")]),t.same_name_service_id?a("el-button",{attrs:{type:"primary"},on:{click:t.replaceSaleFun}},[t._v(t._s(t.dialogConfirmBtnTxt))]):a("el-button",{attrs:{type:"primary"},on:{click:t.confirmShangjia}},[t._v(t._s(t.dialogConfirmBtnTxt))])],1)])],1)},n=[],l=(a("96cf"),a("3b8d")),i=a("db72"),s=(a("7f7f"),a("f1c9")),o=a("7538"),c=a("c1df"),u=a.n(c),d=a("0680"),p={components:{SearchForm:o["a"]},data:function(){return{searchVal:{},dialogTitle:"上架提示",dialogConfirmBtnTxt:"确认上架",dialogContent:"",putawayDialogVisible:!1,LocalFormData:{},selectOptsMaps:{},curTabName:"all",searchFormShow:!0,page:{total:0,pageSize:10,currentPage:1},pageSizes:[10,50,100],tableData:[],same_name_service_id:"",activeId:"",changedStatus:""}},computed:{searchFormShowText:function(){return this.searchFormShow?"收起":"展开搜索条件"}},created:function(){this.handlerGetList()},beforeRouteLeave:function(t,e,a){"FdServiceEdit"===t.name&&(t.meta.title="编辑套餐"),a()},methods:{getDepartment:d["b"],parseDuration:function(t){return Math.round(u.a.duration(t).asMonths())},historyVersion:function(t){this.$router.push({path:"/fd-setting/FdServiceType/versionHistory",query:{id:t}})},standUpAndDown:function(t,e){this.putawayDialogVisible=!0,this.activeId=t._id,this.changedStatus=!t.status,t.status?(this.changedStatus=!1,this.dialogTitle="下架提示",this.dialogContent="下架后，"+t.title+"将不可销售，确认下架吗？",this.dialogConfirmBtnTxt="确认下架"):(this.changedStatus=!0,this.dialogTitle="上架提示",this.dialogContent="上架后，"+t.title+"将进入线上销售，确认上架吗？",this.dialogConfirmBtnTxt="确认上架")},confirmShangjia:function(){var t=this,e={status:this.changedStatus};this.activeId&&Object(s["b"])(this.activeId,e).then((function(e){var a=t.changedStatus?"上架":"下架";t.$message.success(a+"成功"),t.putawayDialogVisible=!1,t.handlerGetList(t.$refs.searchForm.formData)}))},AddMeal:function(){this.$router.push({name:"FdServiceAdd"})},handleSearch:function(t){this.searchVal=t.searchParams,this.page.pageSize=10,this.page.currentPage=1,this.handlerGetList(this.searchVal)},handlerGetList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(i["a"])({},e);a.pageSize=this.page.pageSize,a.currentPage=this.page.currentPage,Object(s["d"])(a).then((function(e){t.tableData=e.data.list,t.page.total=e.data.page.total}))},handleCurrentChange:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.page.currentPage=e,this.handlerGetList(this.searchVal);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleSizeChange:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.page.currentPage=1,this.page.pageSize=e,this.handlerGetList(this.searchVal);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getHeadStyle:function(){return{fontSize:"14px",color:"#17233D",letterSpacing:0}},handlerClickHistory:function(t){this.$router.push({path:"/medical-service/FdServiceType/".concat(t._id,"/editHistory?name=").concat(encodeURIComponent(t.name),"&id=").concat(t._id,"&duration=").concat(t.duration,"&price=").concat(t.price)})},handleClickEdit:function(t){this.$router.push({name:"FdServiceEdit",params:{id:t._id,type:"update"}})}}},f=p,m=(a("5cf0"),a("d604"),a("2877")),h=Object(m["a"])(f,r,n,!1,null,"69448d00",null);e["default"]=h.exports},d604:function(t,e,a){"use strict";var r=a("d91e"),n=a.n(r);n.a},d91e:function(t,e,a){},f1c9:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"c",(function(){return c}));var r=a("b775");function n(t){return Object(r["a"])({url:"/fd/products",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/fd/products",method:"post",data:t})}function i(t,e){return Object(r["a"])({url:"/fd_service_type/services",method:"get",params:e})}function s(t,e){return Object(r["a"])({url:"/fd/products/".concat(t,"/status"),method:"put",data:e})}function o(t,e){return Object(r["a"])({url:"/fd/products/".concat(t),method:"put",data:e})}function c(t){return Object(r["a"])({url:"/fd/products/".concat(t),method:"get"})}}}]);
//# sourceMappingURL=chunk-08061ad0.448db6a5.js.map