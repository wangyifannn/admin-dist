{"version":3,"sources":["webpack:///./src/views/crm/getFiled.js","webpack:///./src/views/crm/customer/add/related.vue?0217","webpack:///./src/api/crmManage.js","webpack:///./src/views/crm/customer/add/components/Step.vue?9eb9","webpack:///src/views/crm/customer/add/components/Step.vue","webpack:///./src/views/crm/customer/add/components/Step.vue?06d1","webpack:///./src/views/crm/customer/add/components/Step.vue","webpack:///./src/views/crm/customer/add/related.vue?374a","webpack:///./src/views/crm/customer/add/components/RelatedSearch.vue?f760","webpack:///src/views/crm/customer/add/components/RelatedSearch.vue","webpack:///./src/views/crm/customer/add/components/RelatedSearch.vue?4cf1","webpack:///./src/views/crm/customer/add/components/RelatedSearch.vue","webpack:///./src/views/crm/customer/add/components/RelatedTable.vue?bdb9","webpack:///src/views/crm/customer/add/components/RelatedTable.vue","webpack:///./src/views/crm/customer/add/components/RelatedTable.vue?ce7c","webpack:///./src/views/crm/customer/add/components/RelatedTable.vue","webpack:///src/views/crm/customer/add/related.vue","webpack:///./src/views/crm/customer/add/related.vue?8e33","webpack:///./src/views/crm/customer/add/related.vue","webpack:///./src/api/order.js"],"names":["getField","str","field","getFormField","cstr","form","getCustomerStoreList","params","request","url","method","data","getRelated","getRelatedInfoById","id","getCustomerInfoById","addCustomer","updateCustomer","customerRelatedUser","getOrderList","getCustomerInfo","followCustomer","getCustomerPath","getSupervisors","changeSupervisor","getFollowers","cancelRelative","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","activeStep","staticRenderFns","props","type","Number","default","component","on","searchFun","userId","_e","linkCustomer","_v","searchParams","searchFlag","setSearchFlag","ref","formData","formItem","searchSubmit","reset","customerListForm","showFormBorder","showTitle","labelWidth","labelPositon","style","column","btnStyle","hasSubmit","btnRight","cancleShow","submitText","cancleText","optionsVal","String","moduleName","components","MyForm","created","formInit","methods","$emit","val","row","directives","name","rawName","value","expression","operation","tableData","currentPage","pageSize","total","relatedCustomer","handleSizeChange","handleCurrentChange","scopedSlots","_u","key","fn","slotProps","_id","avatar","_s","nickname","nowPage","show","fixed","size","width","minWidth","label","btns","loading","MyTable","fieldInit","getRelatedList","Object","Boolean","watch","gender","forEach","item","$router","push","path","query","relative_id","$route","index","setTableData","list","map","current_page","page_size","searchForm","RelatedTable","Step","refreshRelated","activeTrade","getOrderOpts","getOrderNames","getOrderStatus","getOrderType","checkExport","getOrderDetail","closeTrade","getOrderProcess","applyRefund","getRemark","addRemark"],"mappings":"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","file":"static/js/chunk-44f33514.475b56d4.js","sourcesContent":["import field from './tableColumn.json'\r\nimport form from './myForm.json'\r\n/**\r\n *获取模块字段\r\n *\r\n * @export\r\n * @param {*} str\r\n * @returns\r\n */\r\nexport function getField(str) {\r\n  return field[str]\r\n}\r\n/**\r\n *获取form字段\r\n *\r\n * @export\r\n * @param {*} str\r\n * @returns\r\n */\r\nexport function getFormField(str, cstr) {\r\n  return form[str][cstr]\r\n}\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./related.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./related.vue?vue&type=style&index=0&lang=scss&\"","import request from '@/utils/request'\r\n// 客户管理相关api\r\n// 列表\r\nexport function getCustomerStoreList(params) {\r\n  return request({\r\n    url: '/crm/customer/list',\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n// 获取关联列表\r\nexport function getRelated(params) {\r\n  return request({\r\n    url: '/crm/user/list',\r\n    method: 'get',\r\n    params: params\r\n  })\r\n}\r\n// 获取系统关联用户的详细信息\r\nexport function getRelatedInfoById(id) {\r\n  return request({\r\n    url: `/crm/user/${id}`,\r\n    method: 'get',\r\n    params: id\r\n  })\r\n}\r\n// 获取录入的客户的详细信息\r\nexport function getCustomerInfoById(id) {\r\n  return request({\r\n    url: `/crm/customer/${id}/detail`,\r\n    method: 'get',\r\n    params: id\r\n  })\r\n}\r\n// 新增客户\r\nexport function addCustomer(params) {\r\n  return request({\r\n    url: '/crm/customer',\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n// 修改客户\r\nexport function updateCustomer(params, id) {\r\n  return request({\r\n    url: `/crm/customer/${id}/update`,\r\n    method: 'put',\r\n    data: params\r\n  })\r\n}\r\n//\r\nexport function customerRelatedUser(params, id) {\r\n  return request({\r\n    url: `/crm/customer/${id}/relative`,\r\n    method: 'put',\r\n    data: params\r\n  })\r\n}\r\n// 编辑\r\nexport function putSourceChannel(params, type) {\r\n  const url =\r\n    type === 'status'\r\n      ? `/crm/basic/source_channel/${params._id}/status`\r\n      : `/crm/basic/source_channel/${params._id}`\r\n  return request({\r\n    url: url,\r\n    method: 'put',\r\n    data: params\r\n  })\r\n}\r\n// 获取来源渠道option\r\nexport function getSourceChannelOption(params) {\r\n  return request({\r\n    url: `/crm/basic/source_channel/options`,\r\n    method: 'get',\r\n    params: params\r\n  })\r\n}\r\n// 列表\r\nexport function getSourceChannelList(params) {\r\n  return request({\r\n    url: '/crm/basic/source_channel/list',\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n\r\n// 运营动作\r\n// 新增\r\nexport function addOpratorAction(params) {\r\n  return request({\r\n    url: '/crm/basic/opration_action',\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n// 编辑\r\nexport function putOpratorAction(params, type) {\r\n  const url =\r\n    type === 'status'\r\n      ? `/crm/basic/opration_action/${params._id}/status`\r\n      : `/crm/basic/opration_action/${params._id}`\r\n  return request({\r\n    url: url,\r\n    method: 'put',\r\n    data: params\r\n  })\r\n}\r\n// 获取选项\r\nexport function getOpratorActionOption(params) {\r\n  return request({\r\n    url: `crm/basic/opration_action/options`,\r\n    method: 'get',\r\n    params: params\r\n  })\r\n}\r\n// 列表\r\nexport function getOpratorActionlList(params) {\r\n  return request({\r\n    url: '/crm/basic/opration_action/list',\r\n    method: 'get',\r\n    params: params\r\n  })\r\n}\r\n\r\n// 客户订单列表\r\nexport function getOrderList(id, params) {\r\n  return request({\r\n    url: `/crm/customer/${id}/orders`,\r\n    method: 'get',\r\n    params: params\r\n  })\r\n}\r\n\r\n// 获取客户简要信息\r\nexport function getCustomerInfo(id) {\r\n  return request({\r\n    url: `/crm/customer/${id}/brief_info`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 跟进用户\r\nexport function followCustomer(id, params) {\r\n  return request({\r\n    url: `/crm/customer/${id}/path`,\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n// 获取用户轨迹\r\nexport function getCustomerPath(id, params = {}) {\r\n  return request({\r\n    url: `/crm/customer/${id}/path/list`,\r\n    method: 'get',\r\n    params: params\r\n  })\r\n}\r\n// 获取负责人\r\nexport function getSupervisors() {\r\n  return request({\r\n    url: '/crm/basic/customer/supervisor/options',\r\n    method: 'get'\r\n  })\r\n}\r\n// 更换负责人\r\nexport function changeSupervisor(params) {\r\n  return request({\r\n    url: '/crm/customer/change_supervisor',\r\n    method: 'put',\r\n    data: params\r\n    // mock: true\r\n  })\r\n}\r\n// 获取跟进人\r\nexport function getFollowers(id) {\r\n  return request({\r\n    url: `/crm/customer/${id}/creator_options`,\r\n    method: 'get'\r\n    // mock: true\r\n  })\r\n}\r\n\r\n// 取消关联\r\nexport function cancelRelative(id) {\r\n  return request({\r\n    url: `/crm/customer/${id}/cancel_relative`,\r\n    method: 'put'\r\n    // mock: true\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',{staticClass:\"step-box margin-bottom-30\"},[_c('el-steps',{attrs:{\"space\":200,\"align-center\":\"\",\"active\":_vm.activeStep,\"finish-status\":\"success\"}},[_c('el-step',{attrs:{\"title\":\"关联客户\"}}),_c('el-step',{attrs:{\"title\":\"完善客户信息\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-row class=\"step-box margin-bottom-30\">\r\n      <el-steps\r\n        :space=\"200\"\r\n        align-center\r\n        :active=\"activeStep\"\r\n        finish-status=\"success\"\r\n      >\r\n        <el-step title=\"关联客户\"></el-step>\r\n        <el-step title=\"完善客户信息\"></el-step>\r\n      </el-steps>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {}\r\n  },\r\n  props: {\r\n    activeStep: {\r\n      type: Number,\r\n      default: 1\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Step.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Step.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Step.vue?vue&type=template&id=5e3acdc4&\"\nimport script from \"./Step.vue?vue&type=script&lang=js&\"\nexport * from \"./Step.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"customer__box\"},[_c('el-row',{staticClass:\"step-box margin-bottom-30\"},[_c('Step',{attrs:{\"activeStep\":1}})],1),_c('el-row',{staticClass:\"margin-top-20\"},[_c('searchForm',{on:{\"searchFun\":_vm.searchFun}})],1),(!_vm.userId)?_c('el-button',{staticClass:\"margin-bottom-30\",attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.linkCustomer}},[_vm._v(\"\\n    无法查找到客户\\n  \")]):_vm._e(),_c('RelatedTable',{attrs:{\"searchParams\":_vm.searchParams,\"searchFlag\":_vm.searchFlag},on:{\"searchFlag\":_vm.setSearchFlag}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('MyForm',{ref:\"customerSearchForm\",attrs:{\"form\":_vm.form,\"formData\":_vm.formData,\"formItem\":_vm.formItem},on:{\"submit\":_vm.searchSubmit,\"resetForm\":_vm.reset}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <MyForm\r\n    :form=\"form\"\r\n    ref=\"customerSearchForm\"\r\n    :formData=\"formData\"\r\n    :formItem=\"formItem\"\r\n    @submit=\"searchSubmit\"\r\n    @resetForm=\"reset\"\r\n  ></MyForm>\r\n</template>\r\n<script>\r\nimport { getFormField } from '../../../getFiled'\r\nimport MyForm from '@/components/MyForm'\r\n\r\nexport default {\r\n  data() {\r\n    // 表单配置\r\n    var customerListForm = {\r\n      showFormBorder: false,\r\n      showTitle: false,\r\n      ref: 'customerSearchForm',\r\n      labelWidth: '120px',\r\n      labelPositon: 'right',\r\n      style: 'notprepend',\r\n      column: 3,\r\n      btnStyle: 'inline',\r\n      hasSubmit: true,\r\n      btnRight: true,\r\n      cancleShow: true,\r\n      submitText: '搜索',\r\n      cancleText: '重置'\r\n    }\r\n    return {\r\n      searchParams: {},\r\n      formItem: [],\r\n      formData: {},\r\n      form: customerListForm\r\n    }\r\n  },\r\n  props: {\r\n    optionsVal: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    moduleName: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  components: {\r\n    MyForm\r\n  },\r\n  created() {\r\n    this.formInit()\r\n  },\r\n  methods: {\r\n    searchSubmit(val) {\r\n      this.$emit('searchFun', val)\r\n    },\r\n    formInit(row) {\r\n      this.formItem = getFormField('customerRelatedSearch', 'item')\r\n      this.formData = row ? row : getFormField('customerRelatedSearch', 'data')\r\n    },\r\n    reset() {\r\n      this.$emit('searchFun')\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RelatedSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RelatedSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RelatedSearch.vue?vue&type=template&id=645b8261&\"\nimport script from \"./RelatedSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./RelatedSearch.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('MyTable',{attrs:{\"size\":\"mini\",\"stripe\":false,\"border\":true,\"multiple\":false,\"outlineBorder\":false,\"operation\":_vm.operation,\"column\":_vm.column,\"data\":_vm.tableData,\"currentPage\":_vm.currentPage,\"pageSize\":_vm.pageSize,\"total\":_vm.total},on:{\"relatedCustomer\":_vm.relatedCustomer,\"handleSizeChange\":_vm.handleSizeChange,\"handleCurrentChange\":_vm.handleCurrentChange},scopedSlots:_vm._u([{key:\"nickname\",fn:function(slotProps){return [_c('div',[_c('el-avatar',{key:slotProps.row._id,attrs:{\"src\":slotProps.row.avatar}}),_c('p',[_vm._v(\"\\n          \"+_vm._s(slotProps.row.nickname)+\"\\n        \")])],1)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-loading=\"loading\">\r\n    <MyTable\r\n      size=\"mini\"\r\n      :stripe=\"false\"\r\n      :border=\"true\"\r\n      :multiple=\"false\"\r\n      :outlineBorder=\"false\"\r\n      :operation=\"operation\"\r\n      :column=\"column\"\r\n      :data=\"tableData\"\r\n      :currentPage=\"currentPage\"\r\n      :pageSize=\"pageSize\"\r\n      :total=\"total\"\r\n      @relatedCustomer=\"relatedCustomer\"\r\n      @handleSizeChange=\"handleSizeChange\"\r\n      @handleCurrentChange=\"handleCurrentChange\"\r\n    >\r\n      <template v-slot:nickname=\"slotProps\">\r\n        <div>\r\n          <el-avatar\r\n            :key=\"slotProps.row._id\"\r\n            :src=\"slotProps.row.avatar\"\r\n          ></el-avatar>\r\n          <p>\r\n            {{ slotProps.row.nickname }}\r\n          </p>\r\n        </div>\r\n      </template>\r\n    </MyTable>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getField } from '../../../getFiled'\r\nimport MyTable from '@/components/MyTable'\r\nimport { gender } from '@/filters'\r\nimport { getRelated } from '@/api/crmManage'\r\nexport default {\r\n  data() {\r\n    // 表格操作配置\r\n    var operation = {\r\n      nowPage: 'relatedTable',\r\n      show: true,\r\n      fixed: false,\r\n      size: 'mini',\r\n      width: 80,\r\n      minWidth: 100,\r\n      label: '操作',\r\n      btns: [\r\n        {\r\n          type: 'text',\r\n          size: 'mini',\r\n          content: '关联客户',\r\n          icon: '',\r\n          handle: 'relatedCustomer',\r\n          class: 'button-operator'\r\n        }\r\n      ]\r\n    }\r\n    return {\r\n      userId: '',\r\n      column: [],\r\n      loading: false,\r\n      formItem: [],\r\n      formData: {},\r\n      tableData: [],\r\n      pageSize: 10,\r\n      currentPage: 1,\r\n      total: 0,\r\n      operation: operation // 操作按钮\r\n    }\r\n  },\r\n  components: {\r\n    MyTable\r\n  },\r\n  created() {\r\n    this.fieldInit()\r\n    this.getRelatedList()\r\n  },\r\n  props: {\r\n    searchParams: {\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n    searchFlag: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  watch: {\r\n    searchFlag(val) {\r\n      if (val === true) {\r\n        this.getRelatedList()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    gender,\r\n    fieldInit() {\r\n      // 获取字段\r\n      var column = getField('relatedList')\r\n      column.forEach(item => {\r\n        if (!!item.width && item.width != 'auto') {\r\n          item.width = '300'\r\n        }\r\n      })\r\n      this.column = column\r\n    },\r\n    // 关联客户\r\n    relatedCustomer(row) {\r\n      this.$router.push({\r\n        path: `/crm/customer/${this.$route.meta.name}/add`,\r\n        query: {\r\n          relative_id: row._id,\r\n          userId: this.$route.query.userId\r\n        }\r\n      })\r\n    },\r\n    // 分页切换\r\n    handleCurrentChange(index) {\r\n      this.currentPage = index\r\n      this.getRelatedList()\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.getRelatedList()\r\n    },\r\n    setTableData({ list }) {\r\n      this.tableData = list.map((item, index) => ({\r\n        user_id: item.user_id ? item.user_id : '',\r\n        _id: item._id ? item._id : index,\r\n        userId: item.id ? item.id : '',\r\n        avatar: item.avatar ? item.avatar : '',\r\n        nickname: item.nickname ? item.nickname : '',\r\n        area: item.area ? item.area : '',\r\n        mobile: item.mobile ? item.mobile : '',\r\n        gender: item.gender ? gender(item.gender) : '',\r\n        weixin: item.weixin ? item.weixin : '',\r\n        is_relative: item.is_relative ? item.is_relative : '',\r\n        last_order_created_at:\r\n          item.last_order && item.last_order.created_at\r\n            ? this.formatTime(item.last_order.created_at)\r\n            : '-',\r\n        last_order: item.last_order ? item.last_order : '',\r\n        lastLoginTime: item.last_login_time\r\n          ? this.formatTime(item.last_login_time)\r\n          : '-'\r\n      }))\r\n    },\r\n    getRelatedList() {\r\n      const pageAttr = {\r\n        current_page: this.currentPage,\r\n        page_size: this.pageSize\r\n      }\r\n      this.loading = true\r\n      const params = Object.assign({}, pageAttr, this.searchParams)\r\n      getRelated(params)\r\n        .then(res => {\r\n          this.$emit('searchFlag', false)\r\n          this.loading = false\r\n          if (res) {\r\n            this.total = res.data.count\r\n            this.setTableData(res.data)\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.loading = false\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RelatedTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RelatedTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RelatedTable.vue?vue&type=template&id=0d38b337&\"\nimport script from \"./RelatedTable.vue?vue&type=script&lang=js&\"\nexport * from \"./RelatedTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"customer__box\">\r\n    <!-- 步骤条 -->\r\n    <el-row class=\"step-box margin-bottom-30\">\r\n      <Step :activeStep=\"1\"></Step>\r\n    </el-row>\r\n    <el-row class=\"margin-top-20\">\r\n      <searchForm @searchFun=\"searchFun\"></searchForm>\r\n    </el-row>\r\n    <el-button\r\n      type=\"primary\"\r\n      size=\"mini\"\r\n      v-if=\"!userId\"\r\n      class=\"margin-bottom-30\"\r\n      @click=\"linkCustomer\"\r\n    >\r\n      无法查找到客户\r\n    </el-button>\r\n    <RelatedTable\r\n      :searchParams=\"searchParams\"\r\n      @searchFlag=\"setSearchFlag\"\r\n      :searchFlag=\"searchFlag\"\r\n    >\r\n    </RelatedTable>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Step from './components/Step'\r\nimport searchForm from './components/RelatedSearch'\r\nimport RelatedTable from './components/RelatedTable'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchParams: {},\r\n      userId: this.$route.query.userId,\r\n      searchFlag: false\r\n    }\r\n  },\r\n  components: {\r\n    searchForm,\r\n    RelatedTable,\r\n    Step\r\n  },\r\n  created() {},\r\n  methods: {\r\n    setSearchFlag(val) {\r\n      this.searchFlag = val\r\n    },\r\n    refreshRelated() {\r\n      this.searchParams = this.searchParams ? this.searchParams : {}\r\n      this.setSearchFlag(true)\r\n    },\r\n    linkCustomer(id) {\r\n      this.$router.push({\r\n        path: `/crm/customer/${this.$route.meta.name}/add`,\r\n        query: {\r\n          relative_id: ''\r\n        }\r\n      })\r\n    },\r\n    searchFun(val) {\r\n      this.searchParams = val ? val : {}\r\n      this.setSearchFlag(true)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.customer__box {\r\n  .step-box {\r\n    margin: 0 auto;\r\n    width: 48%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./related.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./related.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./related.vue?vue&type=template&id=a4647b0c&\"\nimport script from \"./related.vue?vue&type=script&lang=js&\"\nexport * from \"./related.vue?vue&type=script&lang=js&\"\nimport style0 from \"./related.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\nexport function activeTrade(id) {\r\n  return request({\r\n    url: `/fd/contract/${id}/active`,\r\n    method: 'put'\r\n  })\r\n}\r\nexport function getOrderOpts() {\r\n  return request({\r\n    url: 'order/basic/options',\r\n    method: 'get'\r\n  })\r\n}\r\nexport function getOrderNames() {\r\n  return request({\r\n    url: `/order/basic/order_name/options`,\r\n    method: 'get'\r\n  })\r\n}\r\nexport function getfdStatus() {\r\n  return request({\r\n    url: `/order/basic/fd_status/options`,\r\n    method: 'get'\r\n  })\r\n}\r\nexport function getOrderStatus() {\r\n  return request({\r\n    url: '/order/basic/order_status/options',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function getOrderType() {\r\n  return request({\r\n    url: '/order/basic/order_type/options',\r\n    method: 'get'\r\n  })\r\n}\r\n// /weapp_scene/options\r\nexport function getOrderScene() {\r\n  return request({\r\n    url: '/order/basic/weapp_scene/options',\r\n    method: 'get'\r\n  })\r\n}\r\nexport function orderExport(data) {\r\n  return request({\r\n    url: '/order/data_export',\r\n    method: 'get',\r\n    data\r\n  })\r\n}\r\nexport function checkExport(data) {\r\n  return request({\r\n    url: '/order/check_export',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\nexport function getOrderDetail(id) {\r\n  return request({\r\n    url: `/order/${id}/detail`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function closeTrade(id, data) {\r\n  return request({\r\n    url: `/order/${id}/close`,\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\nexport function getOrderProcess() {\r\n  return request({\r\n    url: '/order/process_numbers',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function getOrderList(params) {\r\n  return request({\r\n    url: '/order/list',\r\n    method: 'post',\r\n    data: params\r\n  })\r\n}\r\n\r\nexport function getOrderListParams() {\r\n  return request({\r\n    url: '/order/filter',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function applyRefund(id, data) {\r\n  return request({\r\n    url: `/order/${id}/refund`,\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\n// 获取订单备注\r\n\r\nexport function getRemark(params) {\r\n  return request({\r\n    url: `/order/log`,\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n// 添加订单备注\r\n\r\nexport function addRemark(data) {\r\n  return request({\r\n    url: `/order/log`,\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n"],"sourceRoot":""}