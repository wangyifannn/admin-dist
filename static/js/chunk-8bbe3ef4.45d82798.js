(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8bbe3ef4"],{2770:function(t,e,a){"use strict";var n=a("a710"),r=a.n(n);r.a},"5ac1":function(t,e,a){},"68f4":function(t,e,a){t.exports={menuText:"#17233D",menuActiveText:"#409EFF",subMenuActiveText:"#17233D",menuBg:"#FEFEFE",menuHover:"#ECF4FF",subMenuBg:"#FEFEFE",subMenuHover:"#ECF4FF",sideBarWidth:"240px"}},"7bf7":function(t,e,a){},a710:function(t,e,a){},b7be:function(t,e,a){"use strict";a.d(e,"h",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"i",(function(){return s})),a.d(e,"j",(function(){return i})),a.d(e,"k",(function(){return l})),a.d(e,"g",(function(){return c})),a.d(e,"f",(function(){return u})),a.d(e,"e",(function(){return d})),a.d(e,"a",(function(){return p})),a.d(e,"d",(function(){return f})),a.d(e,"c",(function(){return m}));var n=a("b775");function r(t){return Object(n["a"])({url:"/trade/quanyi",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/trade/quanyi",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/trade/quanyi/".concat(t),method:"get"})}function i(t,e){return Object(n["a"])({url:"/trade/quanyi/".concat(t),method:"put",data:e})}function l(t,e){return Object(n["a"])({url:"/trade/quanyi/".concat(t,"/status"),method:"put",data:e})}function c(t){return Object(n["a"])({url:"/discount_coupon/list",method:"get",params:t})}function u(){return Object(n["a"])({url:"/discount_coupon/filter",method:"get"})}function d(){return Object(n["a"])({url:"/discount_coupon/create_info",method:"get"})}function p(t){return Object(n["a"])({url:"/discount_coupon",method:"post",data:t})}function f(t){return Object(n["a"])({url:"discount_coupon/".concat(t,"/create_qrcode"),method:"put"})}function m(t){return Object(n["a"])({url:"/discount_coupon/"+t._id+"/change_status",method:"put",data:t})}},b908:function(t,e,a){"use strict";var n=a("f414"),r=a.n(n);r.a},bc95:function(t,e,a){"use strict";var n=a("7bf7"),r=a.n(n);r.a},cdf8:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-list"},[a("div",{staticClass:"order-list__search"},[a("el-button",{staticClass:"order-list__search__collapse-btn",attrs:{type:"text"},on:{click:function(e){t.searchFormShow=!t.searchFormShow}}},[t._v("\n      "+t._s(t.searchFormShowText)+"\n      "),a("i",{staticClass:"el-icon--right",class:t.searchFormShow?"el-icon-arrow-up":"el-icon-arrow-down"})]),a("el-collapse-transition",[a("search-form",{directives:[{name:"show",rawName:"v-show",value:t.searchFormShow,expression:"searchFormShow"}],attrs:{"cur-order-status":"all"===t.curTabName?"":t.curTabName,"local-form-data":t.LocalFormData},on:{search:t.handleSearch}})],1)],1),a("div",{staticClass:"add"},[a("el-row",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.AddMeal}},[t._v("\n        新增权益\n      ")])],1)],1),a("div",{staticClass:"adminuser-list__body"},[a("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[t._v("权益列表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{"header-row-style":t.getHeadStyle,data:t.tableData,border:"","default-sort":{prop:"in_service_user_num"},"empty-text":"暂无数据，请尝试输入其他关键字"}},[a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{align:"center",prop:"no",label:"权益编号",width:"80"}}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{align:"center",prop:"name",label:"权益名称",width:"120"}}),a("el-table-column",{attrs:{label:"权益类型",align:"center","min-width":"100",prop:"ask_mode"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("rightsType")(e.row.type))+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"price","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.rightsDetail(e.row))+"\n        ")]}}])},[a("template",{slot:"header"},[a("span",[t._v("权益内容")])])],2),a("el-table-column",{attrs:{align:"center","min-width":"280"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(t.getProductList(a.scope_product))+"\n        ")]}}])},[a("template",{slot:"header"},[a("span",[t._v("适用套餐")])])],2),a("el-table-column",{attrs:{align:"center",prop:"create_user",label:"适用人群","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(t._f("scopeUser")(a.scope_user))+"\n        ")]}}])}),a("el-table-column",{key:"8",attrs:{align:"center",label:"状态","min-width":"100",prop:"isOnServer"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-switch",{class:!0===e.row.status?"online-style":"offline-style",attrs:{value:e.row.status,width:60,"active-text":(e.row.status,""),"inactive-text":!0===e.row.status?"上线":"下线","inactive-color":"#C0C4CC"},on:{change:function(a){return t.changeOnlineStatusFun(e.row,e.row.status)}}})],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"create_user",label:"创建人","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(a.creator.name)+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"创建时间","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("formatTime")(new Date(e.row.first_created_at)))+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small",disabled:e.row.status},on:{click:function(a){return t.handleClickEdit(e.row)}}},[t._v("\n            编辑")])]}}])}),a("template",{slot:"empty"},[a("div",{staticClass:"table-empty"},[t._v("\n          暂无数据，请尝试输入其他关键字\n        ")])])],2),a("div",{staticClass:"adminuser-list__body__pagination"},[a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":t.pageSizes,"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.putawayDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.putawayDialogVisible=e}}},[a("span",[t._v(t._s(t.dialogContent))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.putawayDialogVisible=!1}}},[t._v("取 消")]),t.same_name_service_id?a("el-button",{attrs:{type:"primary"},on:{click:t.replaceSaleFun}},[t._v(t._s(t.dialogConfirmBtnTxt))]):a("el-button",{attrs:{type:"primary"},on:{click:t.confirmShangjia}},[t._v(t._s(t.dialogConfirmBtnTxt))])],1)])],1)},r=[],o=(a("96cf"),a("3b8d")),s=a("db72"),i=(a("7f7f"),a("b7be")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("el-form",{ref:"searchTemplateForm",attrs:{"label-position":"left","label-width":"76px",model:t.formData}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"权益名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入权益名称",size:"small",clearable:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",t._n(e))},expression:"formData.name"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"权益类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择权益类型",size:"small",clearable:""},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.$store.state.dictionary.rightsType,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("product-select",{attrs:{prop:"scope_user"},model:{value:t.formData.scope_product,callback:function(e){t.$set(t.formData,"scope_product",e)},expression:"formData.scope_product"}})],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"适用人群",prop:"scope_user"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择适用人群",size:"small",clearable:""},model:{value:t.formData.scope_user,callback:function(e){t.$set(t.formData,"scope_user",e)},expression:"formData.scope_user"}},t._l(t.$store.state.dictionary.scopeUser,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","prefix-icon":"el-icon-date","default-time":["12:00:00"],size:"small",clearable:""},model:{value:t.formData.createTime,callback:function(e){t.$set(t.formData,"createTime",e)},expression:"formData.createTime"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择套餐状态",size:"small",clearable:""},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},t._l(t.selectOptsMaps.saleStatusTypes,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleSearch}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.handleReset}},[t._v("重置")])],1)],1),a("el-row",{attrs:{gutter:40}})],1)],1)},c=[],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group-select"},[a("el-form-item",{attrs:{label:t.label,prop:t.prop,rules:t.rules}},[a("el-select",{attrs:{value:t.value,placeholder:t.placeholder,disabled:t.readonly,size:"small",multiple:"",clearable:""},on:{change:t.onValueChange}},t._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}},[t._v(t._s(e.label))])})),1)],1)],1)},d=[],p=a("f1c9"),f={data:function(){return{optionValue:"",options:[]}},props:{optionsData:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},selectDisable:{type:Boolean,default:!1},value:{type:Array,default:function(){return[]}},moduleName:{type:String,default:"适用套餐"},label:{type:String,default:"适用套餐"},prop:{type:String,default:""},rules:{type:Array,default:function(){return[]}},filterOption:{type:String,default:""},placeholder:{type:String,default:"请选择适用套餐"}},watch:{value:function(t){this.optionValue=t}},mounted:function(){this.optionsData.length?this.options=this.optionsData:this.getGroups()},methods:{getGroups:function(){var t=this,e={show_history:0};Object(p["d"])(e).then((function(e){var a=e.data.list;t.options=a.map((function(t){return{value:t.batch_id,label:t.title}}))}))},onValueChange:function(t){this.$emit("input",t)}}},m=f,h=(a("b908"),a("2877")),b=Object(h["a"])(m,u,d,!1,null,null,null),g=b.exports,_={name:"",type:"",scope_user:[],scope_product:[],createTime:[]},v={props:{localFormData:{type:Object,default:function(){}},selectOptsMaps:{type:Object,required:!1,default:function(){return{nameTypes:[],durationTypes:[],createUserTypes:[],priceType:[],saleStatusTypes:[{label:"上线",value:1},{label:"下线",value:0}]}}}},components:{ProductSelect:g},data:function(){var t=function(t,e,a){setTimeout((function(){e<0?a(new Error("编号必须大于0")):a()}),1e3)};return{formData:{},searchTemplateForm:{id:[{validator:t,trigger:"blur"}]}}},watch:{},created:function(){this.formData=Object.assign({},_,this.localFormData)},methods:{handleSearch:function(){var t=this;this.$refs["searchTemplateForm"].validate((function(e){if(!e)return!1;var a={};t.formData.name&&(a.name=t.formData.name),t.formData.type&&(a.type=t.formData.type),t.formData.scope_user.length>0&&(a.scope_user=t.formData.scope_user.join(",")),t.formData.scope_product.length>0&&(a.scope_product=t.formData.scope_product.join(",")),""!==t.formData.status&&(a.status=t.formData.status),t.formData.createTime&&t.formData.createTime.length>0&&(a.first_created_start=t.formData.createTime[0],a.first_created_end=t.formData.createTime[1]),t.$emit("search",{searchParams:a})}))},handleReset:function(){this.formData=Object.assign({},_),this.handleSearch()}}},y=v,w=(a("2770"),a("dc61"),Object(h["a"])(y,l,c,!1,null,"8c21c242",null)),D=w.exports,S={components:{SearchForm:D},data:function(){return{searchVal:{},dialogTitle:"上架提示",dialogConfirmBtnTxt:"确认上架",dialogContent:"",putawayDialogVisible:!1,LocalFormData:{},selectOptsMaps:{},curTabName:"all",searchFormShow:!0,page:{total:0,pageSize:10,currentPage:1},pageSizes:[10,50,100],tableData:[],same_name_service_id:"",activeId:"",changedStatus:""}},computed:{searchFormShowText:function(){return this.searchFormShow?"收起":"展开搜索条件"}},created:function(){this.handlerGetList()},beforeRouteLeave:function(t,e,a){"RightsAdd"===t.name&&"update"===t.params.type&&(t.meta.title="编辑权益"),a()},methods:{rightsDetail:function(t){return"PRICE"===t.discount_mode?"优惠".concat((t.discount_value/100).toFixed(2),"元"):"PERCENT"===t.discount_mode?"".concat((t.discount_value/100).toFixed(2),"折"):""},getProductList:function(t){var e=t.map((function(t){return t.title+" "+t.sub_title}));return e.join(",")},changeOnlineStatusFun:function(t,e){this.putawayDialogVisible=!0,this.activeId=t._id,this.changedStatus=!t.status,t.status?(this.changedStatus=!1,this.dialogTitle="下线提示",this.dialogContent=t.name+"将下线，确认下线吗？",this.dialogConfirmBtnTxt="确认下线"):(this.changedStatus=!0,this.dialogTitle="上下线提示",this.dialogContent=t.name+"将上线，确认上线吗？",this.dialogConfirmBtnTxt="确认上线")},confirmShangjia:function(){var t=this,e={status:this.changedStatus};this.activeId&&Object(i["k"])(this.activeId,e).then((function(e){t.$message.success("操作成功"),t.putawayDialogVisible=!1,t.handlerGetList()}))},AddMeal:function(){this.$router.push({name:"RightsAdd",params:{id:"new",type:"add"}})},handleSearch:function(t){this.searchVal=t.searchParams,this.page.pageSize=10,this.page.currentPage=1,this.handlerGetList(this.searchVal)},handlerGetList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(s["a"])({},e);a.pageSize=this.page.pageSize,a.currentPage=this.page.currentPage,Object(i["h"])(a).then((function(e){t.tableData=e.data.list,t.page.total=e.data.page.total}))},handleCurrentChange:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.page.currentPage=e,this.handlerGetList(this.searchVal);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleSizeChange:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.page.currentPage=1,this.page.pageSize=e,this.handlerGetList(this.searchVal);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getHeadStyle:function(){return{fontSize:"14px",color:"#17233D",letterSpacing:0}},handleClickEdit:function(t){this.$router.push({name:"RightsAdd",params:{id:t._id,type:"update"}})}}},T=S,C=(a("dc53"),a("bc95"),Object(h["a"])(T,n,r,!1,null,"21b6ac68",null));e["default"]=C.exports},dc53:function(t,e,a){"use strict";var n=a("68f4"),r=a.n(n);r.a},dc61:function(t,e,a){"use strict";var n=a("5ac1"),r=a.n(n);r.a},f1c9:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return i})),a.d(e,"f",(function(){return l})),a.d(e,"c",(function(){return c}));var n=a("b775");function r(t){return Object(n["a"])({url:"/fd/products",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/fd/products",method:"post",data:t})}function s(t,e){return Object(n["a"])({url:"/fd_service_type/services",method:"get",params:e})}function i(t,e){return Object(n["a"])({url:"/fd/products/".concat(t,"/status"),method:"put",data:e})}function l(t,e){return Object(n["a"])({url:"/fd/products/".concat(t),method:"put",data:e})}function c(t){return Object(n["a"])({url:"/fd/products/".concat(t),method:"get"})}},f414:function(t,e,a){}}]);
//# sourceMappingURL=chunk-8bbe3ef4.45d82798.js.map