(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-429d4f84"],{"02e9":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"question-test"},[t.questionList.length?[s("h4",{staticClass:"title"},[t._v(t._s(t.$route.query.title))]),s("div",{staticClass:"time",class:"testAnswer"===this.$route.name?"end-time":""},[s("p",{staticClass:"second",class:"testAnswer"!==this.$route.name?"start-second":""},[t._v("\n        考试用时："+t._s(t.getTime(t.mtsUserRecord.exam_start_at,t.mtsUserRecord.exam_end_at))+"分钟\n      ")]),"testAnswer"===this.$route.name?s("p",{staticClass:"score"},[t._v("\n        分数："+t._s(t.mtsUserRecord.score||0)+"分\n      ")]):t._e(),"testAnswer"===this.$route.name?s("p",{staticClass:"error"},[t._v("\n        错题数："+t._s(t.errorNum)+"个\n      ")]):t._e()]),s("p",{staticClass:"tip-sign"},[t._v("\n      不定项选择题 (共"+t._s(t.questionList.length)+"道题，每题"+t._s(parseInt(100/t.questionList.length)||0)+"分)\n    ")]),s("div",{staticClass:"question-list"},t._l(t.questionList,(function(e,n){return s("div",{key:n,staticClass:"item"},[s("p",{staticClass:"stem"},[t._v("\n          "+t._s(n+1)+".\n          "),s("span",{domProps:{innerHTML:t._s(e.stem)}})]),"checkbox"===e.type?s("el-checkbox-group",{attrs:{size:"small",disabled:"testAnswer"===t.$route.name},model:{value:t.answers[n],callback:function(e){t.$set(t.answers,n,e)},expression:"answers[idx]"}},t._l(e.options,(function(r){return s("el-checkbox",{key:r.index,class:t.getResultColor(r.index,n),attrs:{label:r.index},on:{change:function(s){return t.setOptions(r.index,n,e._id,e)}}},["error"===t.getResultColor(r.index,n)?s("svg",{staticClass:"icon test-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-btn-pic-closex-copy"}})]):t._e(),"success"===t.getResultColor(r.index,n)?s("svg",{staticClass:"icon test-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-ico-jkda-xzx"}})]):t._e(),s("span",[t._v(t._s(r.index+1))]),t._v(".\n            "),s("span",{domProps:{innerHTML:t._s(r.item)}})])})),1):t._e(),"radio"===e.type?s("el-radio-group",{attrs:{size:"small",disabled:"testAnswer"===t.$route.name},model:{value:t.answers[n],callback:function(e){t.$set(t.answers,n,e)},expression:"answers[idx]"}},t._l(e.options,(function(r,i){return s("el-radio",{key:i,class:t.getResultColor(i,n),attrs:{label:i},on:{change:function(s){return t.setOptions(i,n,e._id)}}},["error"===t.getResultColor(r.index,n)?s("svg",{staticClass:"icon test-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-btn-pic-closex-copy"}})]):t._e(),"success"===t.getResultColor(r.index,n)?s("svg",{staticClass:"icon test-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-ico-jkda-xzx"}})]):t._e(),s("span",[t._v(t._s(i+1))]),t._v(".\n            "),s("span",{domProps:{innerHTML:t._s(r.item)}})])})),1):t._e()],1)})),0),s("div",{staticClass:"commit-btn"},["test"===t.$route.name?s("el-button",{attrs:{type:"primary"},on:{click:t.commitQuestion}},[t._v("提交")]):t._e(),"testAnswer"===t.$route.name?s("el-button",{on:{click:t.reTest}},[t._v("重新测试")]):t._e(),"testAnswer"===t.$route.name?s("el-button",{on:{click:t.finishTest}},[t._v("完成")]):t._e()],1)]:t._e(),t.noTest?s("no-enterprise"):t._e()],2)},r=[],i=(s("6b54"),s("28a5"),s("96cf"),s("3b8d")),a=(s("ac4d"),s("8a81"),s("ac6a"),s("7f7f"),s("f296")),o=s("ffc2"),u=s("fd0b"),c={components:{NoEnterprise:o["a"]},data:function(){return{questionList:[],minute:0,timer:null,options:[],mtsUserRecord:{},questions:[],errorNum:0,answers:[],noTest:!1,reQuestionList:"",isReset:!1}},computed:{getTime:function(){return function(t,e){if(t&&e){var s=new Date(e).getTime()-new Date(t).getTime();return s=s/1e3/60,Math.ceil(Math.abs(s))}return this.minute}},getResultColor:function(){return function(t,e){if(this.isReset)return"";if(t=parseInt(t),e=parseInt(e),"testAnswer"!==this.$route.name||!this.questionList[e])return"";var s=!0,n=!1,r=void 0;try{for(var i,a=this.questionList[e].standard_answers[Symbol.iterator]();!(s=(i=a.next()).done);s=!0){var o=i.value;if(parseInt(o)===t)return"success"}}catch(m){n=!0,r=m}finally{try{s||null==a.return||a.return()}finally{if(n)throw r}}var u=!0,c=!1,l=void 0;try{for(var h,d=this.questionList[e].answers[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var f=h.value;if(t===parseInt(f))return"error"}}catch(m){c=!0,l=m}finally{try{u||null==d.return||d.return()}finally{if(c)throw l}}}}},watch:{questionList:{handler:function(t,e){console.log(t,e)},immediate:!0}},created:function(){"testAnswer"!==this.$route.name&&this.getQuestion(),"testAnswer"===this.$route.name&&this.getTestResult(),this.$store.state.study.start_test_time=new Date},mounted:function(){var t=this;"test"===this.$route.name&&(this.timer=setInterval((function(){t.minute++}),6e4))},methods:{commitQuestion:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,n,r,i,o,c,l,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.options.length===this.questionList.length){t.next=2;break}return t.abrupt("return",this.$message({message:"请做完题目后再提交",type:"error"}));case 2:e=!0,s=!1,n=void 0,t.prev=5,r=this.options[Symbol.iterator]();case 7:if(e=(i=r.next()).done){t.next=14;break}if(o=i.value,o&&o.id){t.next=11;break}return t.abrupt("return",this.$message({message:"请做完题目后再提交",type:"error"}));case 11:e=!0,t.next=7;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](5),s=!0,n=t.t0;case 20:t.prev=20,t.prev=21,e||null==r.return||r.return();case 23:if(t.prev=23,!s){t.next=26;break}throw n;case 26:return t.finish(23);case 27:return t.finish(20);case 28:return this.isReset=!1,t.next=31,Object(a["i"])({catalog:this.$route.params.id,questions:this.options,started_at:Object(u["a"])(this.$store.state.study.start_study_time||new Date),exam_start_at:Object(u["a"])(this.$store.state.study.start_test_time||new Date),exam_end_at:new Date});case 31:if(c=t.sent,l=c.data,h=c.code,2e4!==h||!l){t.next=38;break}return t.next=37,this.getTestResult();case 37:this.$router.push({name:"testAnswer",params:{id:this.$route.params.id},query:{title:this.$route.query.title}});case 38:case"end":return t.stop()}}),t,this,[[5,16,20,28],[21,,23,27]])})));function e(){return t.apply(this,arguments)}return e}(),getQuestion:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["F"])({catalog:this.$route.params.id,type:"choice"});case 2:e=t.sent,s=e.data,n=e.code,2e4===n&&s.result&&(this.questionList=s.list,this.reQuestionList=JSON.stringify(s.list),0===this.questionList.length&&(this.noTest=!0),this.answers=s.list.map((function(){return[]})));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setOptions:function(t,e,s){this.options[e]={id:s,answers:this.answers[e].toString().split(",").map((function(t){return parseInt(t)}))}},getTestResult:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["S"])(this.$route.params.id);case 2:for(r in e=t.sent,s=e.code,n=e.data,2e4===s&&n.result&&(this.mtsUserRecord=n.mtsUserRecord,this.questionList=n.questions.map((function(t){return{stem:t.stem,options:t.standard_options,type:t.type,difficult:t.difficult,answers:t.answers,standard_answers:t.standard_answers}})),this.errorNum=n.questions.filter((function(t){return"error"===t.status})).length),this.questions)this.options.push({error:this.questions[r].answers,success:this.questions[r].standard_answers});case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),finishTest:function(){"catalog"!==this.mtsUserRecord.lesson_column?this.$router.push("/study/corporate-culture/"+this.mtsUserRecord.lesson_column):this.$router.push("/study/stage")},reTest:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isReset=!0,this.mtsUserRecord={},this.options=[],t.next=5,this.getQuestion();case 5:return t.next=7,this.$router.push("/study/test/".concat(this.$route.params.id,"?title=").concat(this.$route.query.title));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},beforeRouteLeave:function(t,e,s){this.timer=null,s()}},l=c,h=(s("17c4"),s("cd19"),s("2877")),d=Object(h["a"])(l,n,r,!1,null,"2a9c7a18",null);e["default"]=d.exports},"17c4":function(t,e,s){"use strict";var n=s("c722"),r=s.n(n);r.a},"71d8":function(t,e,s){},"968a":function(t,e,s){"use strict";var n=s("c44c"),r=s.n(n);r.a},c44c:function(t,e,s){},c722:function(t,e,s){},cd19:function(t,e,s){"use strict";var n=s("71d8"),r=s.n(n);r.a},fd0b:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"c",(function(){return r})),s.d(e,"b",(function(){return i}));var n=function(t){var e=t.getFullYear(),s=t.getMonth()+1,n=t.getDate(),r=t.getHours(),i=t.getMinutes(),a=t.getSeconds();return s<10&&(s="0"+s),"".concat(e,"-").concat(s,"-").concat(n," ").concat(r,":").concat(i,":").concat(a)},r=function(t){var e=t.start,s=t.end,n=t.time;if(!e&&!s&&!n)return"0天0小时0分钟";n||(n=new Date(s)-new Date(e));var r=Math.floor(n/864e5),i=n%864e5,a=Math.floor(i/36e5),o=i%36e5,u=Math.ceil(o/6e4);return r+"天"+a+"小时"+u+"分钟"},i=function(t){var e=new Date(t),s="-",n=":",r=e.getMonth()+1,i=e.getDate();r>=1&&r<=9&&(r="0"+r),i>=0&&i<=9&&(i="0"+i);var a=e.getFullYear()+s+r+s+i+" "+e.getHours()+n+e.getMinutes()+n+e.getSeconds();return-1!==a.indexOf("NaN")?"/":a}},ffc2:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"no-enterprise"},[s("div",{staticClass:"tip-img center"},[s("img",{attrs:{src:"https://pic1.baobaohehu.com/fd/admin_v3/5d7f5f5c1c03121b82179aee//20200217173713291/1581932233007.png"}})])])}],i={},a=i,o=(s("968a"),s("2877")),u=Object(o["a"])(a,n,r,!1,null,"5c4f06eb",null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-429d4f84.93a40e52.js.map