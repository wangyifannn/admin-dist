{"version":3,"sources":["webpack:///./src/views/learning-admin/frame-admin/index.vue?b1c6","webpack:///./src/views/learning-admin/common.js","webpack:///./src/assets/frameAdmin.png","webpack:///./src/views/learning-admin/frame-admin/index.vue?fe07","webpack:///src/views/learning-admin/frame-admin/index.vue","webpack:///./src/views/learning-admin/frame-admin/index.vue?b89c","webpack:///./src/views/learning-admin/frame-admin/index.vue"],"names":["numberTranseferCharAt","n","arrNum","s","i","length","parseInt","charAt","setTreeDataTitle","list","level","$index","res","levelTitleFn","levelKey","index","Error","forEach","item","_item","JSON","parse","stringify","children","data","ptitle","title","push","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","frameAdminData","isSearch","staticStyle","attrs","nativeOn","$event","inputChange","model","value","callback","$$v","inputVal","expression","on","serachData","_v","addFirstCategory","_e","defaultProps","scopedSlots","_u","key","fn","ref","node","_s","label","type","addSecondAndThird","edit","remove","dialogTitle","centerDialogVisible","closeDialog","formData","rules","dialogTypeName","$set","_n","slot","submitForm","staticRenderFns","name","components","sort","summary","content","showEmptyImg","created","getFrameList","mounted","methods","titleName","getMaxSort","id","parent_id","isADD","secondThird","$refs","formName","resetFields","validate","tips","$confirm","confirmButtonText","cancelButtonText","center","search","setTimeout","handleSizeChange","handleCurrentChange","component"],"mappings":"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","file":"static/js/chunk-2639ad42.38c61628.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=9de07b64&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=9de07b64&lang=scss&scoped=true&\"","export function numberTranseferCharAt(n) {\r\n  const arrNum = ['一', '二', '三', '四', '五', '六', '七', '八', '九', '十']\r\n  // 设置中文转化\r\n  let s = ''\r\n  n = '' + n // 数字转为字符串\r\n  for (let i = 0; i < n.length; i++) {\r\n    s += arrNum[parseInt(n.charAt(i))]\r\n  }\r\n  if (s.length === 2) {\r\n    // 两位数的时候\r\n    // 如果个位数是0的时候，令改成十\r\n    if (s.charAt(1) === arrNum[0]) {\r\n      s = s.charAt(0) + arrNum[10]\r\n      // 如果是一十改成十\r\n      if (s === arrNum[1] + arrNum[10]) {\r\n        s = arrNum[10]\r\n      }\r\n    } else if (s.charAt(0) === arrNum[1]) {\r\n      // 如果十位数是一的话改成十\r\n      s = arrNum[10] + s.charAt(1)\r\n    }\r\n  }\r\n  return s\r\n}\r\nexport function setTreeDataTitle(list, level = 1, $index = 0) {\r\n  const res = []\r\n  const levelTitleFn = (levelKey => {\r\n    switch (levelKey) {\r\n      case 1:\r\n        return numberTranseferCharAt\r\n      case 2:\r\n        return index => 1 + index\r\n      case 3:\r\n        return index => $index + 1 + '.' + (1 + index)\r\n      default:\r\n        throw new Error('超过3级')\r\n    }\r\n  })(level)\r\n  list.forEach((item, index) => {\r\n    const _item = JSON.parse(JSON.stringify(item))\r\n    delete _item.children\r\n    const data = {\r\n      ...item,\r\n      ptitle: levelTitleFn(index) + ' ' + item.title\r\n    }\r\n    if (item.children && item.children.length > 0) {\r\n      data.children = setTreeDataTitle(item.children, level + 1, index)\r\n    }\r\n    res.push(data)\r\n  })\r\n  return res\r\n}\r\n// 新的方法\r\n// function setItemTitile(data) {\r\n//   data.forEach((item, index) => {\r\n//     if (item.num === 'second') {\r\n//       item.ptitle = index + 1 + '  ' + item.title\r\n//       if (item.children !== undefined) {\r\n//         item.children.map(sub => {\r\n//           sub.pIndex = index + 1\r\n//         })\r\n//       }\r\n//     } else if (item.num === 'third') {\r\n//       item.ptitle = item.pIndex + '.' + (index + 1) + '  ' + item.title\r\n//     }\r\n\r\n//     if (item.children !== undefined) {\r\n//       this.setItem(item.children)\r\n//     }\r\n//   })\r\n// }\r\n// export function setTreeDataTitle(treeData) {\r\n//   if (treeData) {\r\n//     treeData.forEach((item, index) => {\r\n//       item.ptitle = numberTranseferCharAt(index) + ' ' + item.title\r\n//       if (item.children !== undefined) {\r\n//         setItemTitile(item.children)\r\n//       }\r\n//     })\r\n//   }\r\n// }\r\n","module.exports = __webpack_public_path__ + \"static/img/frameAdmin.8d546622.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"learning-admin\"},[_c('div',{staticClass:\"learning-admin-frame\"},[((_vm.frameAdminData && _vm.frameAdminData.length > 0) || _vm.isSearch)?_c('div',{staticClass:\"search-box\"},[_c('div',{staticClass:\"search\"},[_c('el-input',{staticStyle:{\"width\":\"220px\"},attrs:{\"clearable\":\"\",\"placeholder\":\"请输入查找关键词\",\"size\":\"small\"},nativeOn:{\"keyup\":function($event){return _vm.inputChange($event)}},model:{value:(_vm.inputVal),callback:function ($$v) {_vm.inputVal=$$v},expression:\"inputVal\"}}),_c('el-button',{staticClass:\"search-box-button\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.serachData()}}},[_vm._v(\"查询\")])],1),_c('el-button',{staticClass:\"search-box-button\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.addFirstCategory()}}},[_vm._v(\"添加\")])],1):_vm._e(),((_vm.frameAdminData && _vm.frameAdminData.length > 0) || _vm.isSearch)?_c('div',{staticClass:\"learning-admin-frame-tree\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"框架管理\")]),_c('el-tree',{attrs:{\"data\":_vm.frameAdminData,\"props\":_vm.defaultProps,\"node-key\":\"id\",\"default-expand-all\":\"\",\"expand-on-click-node\":false,\"empty-text\":\"暂无内容，请重新输入关键词查询\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_c('span',{staticClass:\"handle-btns\"},[(node.data.type !== 'third')?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function () { return _vm.addSecondAndThird(node, data, '添加'); }}},[_vm._v(\"\\n              添加\\n            \")]):_vm._e(),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function () { return _vm.edit(node, data, '编辑'); }}},[_vm._v(\"\\n              编辑\\n            \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function () { return _vm.remove(node, data); }}},[_vm._v(\"\\n              删除\\n            \")])],1)])}}],null,false,46316624)})],1):_vm._e()]),(_vm.frameAdminData && _vm.frameAdminData.length === 0 && !_vm.isSearch)?_c('div',{staticClass:\"learning-admin-empty\"},[_c('div',{staticClass:\"learning-admin-empty-img\",on:{\"click\":function($event){return _vm.addFirstCategory()}}},[_c('img',{attrs:{\"src\":require(\"../../../assets/frameAdmin.png\"),\"alt\":\"\"}}),_c('el-button',{staticClass:\"learning-admin-empty-btn\",attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"去添加\")])],1)]):_vm._e(),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.centerDialogVisible,\"width\":\"35%\",\"center\":\"\",\"top\":\"25vh\"},on:{\"update:visible\":function($event){_vm.centerDialogVisible=$event},\"close\":function($event){return _vm.closeDialog('formData')}}},[_c('el-form',{ref:\"formData\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-width\":\"110px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.dialogTypeName + '级类目名称',\"prop\":\"title\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"maxlength\":\"15\",\"show-word-limit\":\"\",\"placeholder\":\"请输入课程名称\"},model:{value:(_vm.formData.title),callback:function ($$v) {_vm.$set(_vm.formData, \"title\", $$v)},expression:\"formData.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"显示顺序\",\"prop\":\"sort\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入阿拉伯数字，如1，2…\"},model:{value:(_vm.formData.sort),callback:function ($$v) {_vm.$set(_vm.formData, \"sort\", _vm._n($$v))},expression:\"formData.sort\"}})],1),(_vm.dialogTypeName === '二')?_c('el-form-item',{attrs:{\"label\":\"章节导言\",\"prop\":\"summary\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"请输入导言内容\",\"maxlength\":\"300\",\"show-word-limit\":\"\"},model:{value:(_vm.formData.summary),callback:function ($$v) {_vm.$set(_vm.formData, \"summary\", $$v)},expression:\"formData.summary\"}})],1):_vm._e(),(_vm.dialogTypeName === '二')?_c('el-form-item',{attrs:{\"label\":\"重点内容\",\"prop\":\"content\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":6,\"placeholder\":\"请输入导言内容\",\"maxlength\":\"2000\",\"show-word-limit\":\"\"},model:{value:(_vm.formData.content),callback:function ($$v) {_vm.$set(_vm.formData, \"content\", $$v)},expression:\"formData.content\"}})],1):_vm._e()],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.submitForm('formData')}}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"learning-admin\">\r\n    <div class=\"learning-admin-frame\">\r\n      <div\r\n        v-if=\"(frameAdminData && frameAdminData.length > 0) || isSearch\"\r\n        class=\"search-box\"\r\n      >\r\n        <div class=\"search\">\r\n          <el-input\r\n            v-model=\"inputVal\"\r\n            clearable\r\n            placeholder=\"请输入查找关键词\"\r\n            style=\"width:220px;\"\r\n            size=\"small\"\r\n            @keyup.native=\"inputChange\"\r\n          />\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            class=\"search-box-button\"\r\n            @click=\"serachData()\"\r\n            >查询</el-button\r\n          >\r\n        </div>\r\n        <el-button\r\n          type=\"primary\"\r\n          class=\"search-box-button\"\r\n          size=\"small\"\r\n          @click=\"addFirstCategory()\"\r\n          >添加</el-button\r\n        >\r\n      </div>\r\n      <div\r\n        v-if=\"(frameAdminData && frameAdminData.length > 0) || isSearch\"\r\n        class=\"learning-admin-frame-tree\"\r\n      >\r\n        <div class=\"title\">框架管理</div>\r\n        <el-tree\r\n          :data=\"frameAdminData\"\r\n          :props=\"defaultProps\"\r\n          node-key=\"id\"\r\n          default-expand-all\r\n          :expand-on-click-node=\"false\"\r\n          empty-text=\"暂无内容，请重新输入关键词查询\"\r\n        >\r\n          <span slot-scope=\"{ node, data }\" class=\"custom-tree-node\">\r\n            <span>{{ node.label }}</span>\r\n            <span class=\"handle-btns\">\r\n              <el-button\r\n                v-if=\"node.data.type !== 'third'\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n                @click=\"() => addSecondAndThird(node, data, '添加')\"\r\n              >\r\n                添加\r\n              </el-button>\r\n              <el-button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                @click=\"() => edit(node, data, '编辑')\"\r\n              >\r\n                编辑\r\n              </el-button>\r\n              <el-button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                @click=\"() => remove(node, data)\"\r\n              >\r\n                删除\r\n              </el-button>\r\n            </span>\r\n          </span>\r\n        </el-tree>\r\n      </div>\r\n    </div>\r\n    <div\r\n      v-if=\"frameAdminData && frameAdminData.length === 0 && !isSearch\"\r\n      class=\"learning-admin-empty\"\r\n    >\r\n      <div class=\"learning-admin-empty-img\" @click=\"addFirstCategory()\">\r\n        <img src=\"../../../assets/frameAdmin.png\" alt=\"\" />\r\n        <el-button type=\"primary\" class=\"learning-admin-empty-btn\" size=\"small\"\r\n          >去添加</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <!-- 添加编辑对话框 -->\r\n    <el-dialog\r\n      :title=\"dialogTitle\"\r\n      :visible.sync=\"centerDialogVisible\"\r\n      width=\"35%\"\r\n      center\r\n      top=\"25vh\"\r\n      @close=\"closeDialog('formData')\"\r\n    >\r\n      <el-form\r\n        ref=\"formData\"\r\n        :model=\"formData\"\r\n        :rules=\"rules\"\r\n        label-width=\"110px\"\r\n      >\r\n        <el-form-item :label=\"dialogTypeName + '级类目名称'\" prop=\"title\">\r\n          <el-input\r\n            v-model=\"formData.title\"\r\n            type=\"text\"\r\n            maxlength=\"15\"\r\n            show-word-limit\r\n            placeholder=\"请输入课程名称\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"显示顺序\" prop=\"sort\">\r\n          <el-input\r\n            v-model.number=\"formData.sort\"\r\n            placeholder=\"输入阿拉伯数字，如1，2…\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-if=\"dialogTypeName === '二'\"\r\n          label=\"章节导言\"\r\n          prop=\"summary\"\r\n        >\r\n          <el-input\r\n            v-model=\"formData.summary\"\r\n            type=\"textarea\"\r\n            :rows=\"4\"\r\n            placeholder=\"请输入导言内容\"\r\n            maxlength=\"300\"\r\n            show-word-limit\r\n          />\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-if=\"dialogTypeName === '二'\"\r\n          label=\"重点内容\"\r\n          prop=\"content\"\r\n        >\r\n          <el-input\r\n            v-model=\"formData.content\"\r\n            type=\"textarea\"\r\n            :rows=\"6\"\r\n            placeholder=\"请输入导言内容\"\r\n            maxlength=\"2000\"\r\n            show-word-limit\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click.native=\"submitForm('formData')\"\r\n          >确定</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport '../common.scss'\r\nimport {\r\n  getList,\r\n  addFrame,\r\n  putFrame,\r\n  deleFrame,\r\n  maxSort\r\n} from '@/api/learningAdmin'\r\nimport { setTreeDataTitle } from '../common.js'\r\nexport default {\r\n  name: 'LearningAdminFrame',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      inputVal: '',\r\n      dialogTitle: '添加',\r\n      dialogTypeName: '一',\r\n      centerDialogVisible: false,\r\n      frameAdminData: null,\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'ptitle'\r\n      },\r\n      rules: {\r\n        title: [{ required: true, message: '您输入的内容有误，请重新输入' }],\r\n        sort: [\r\n          { required: true, message: '您输入的内容有误，请重新输入' },\r\n          { type: 'number', message: '输入阿拉伯数字，如1，2…' }\r\n        ],\r\n        summary: [{ required: true, message: '您输入的内容有误，请重新输入' }],\r\n        content: [{ required: true, message: '您输入的内容有误，请重新输入' }]\r\n      },\r\n      formData: {\r\n        title: '',\r\n        sort: 1,\r\n        summary: '',\r\n        content: ''\r\n      },\r\n      arrNum: ['一', '二', '三', '四', '五', '六', '七', '八', '九', '十'],\r\n      isSearch: false,\r\n      showEmptyImg: false\r\n    }\r\n  },\r\n  created() {\r\n    this.getFrameList()\r\n    if (this.frameAdminData && this.frameAdminData.length === 0) {\r\n      this.showEmptyImg = true\r\n    }\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    addSecondAndThird(node, data, titleName) {\r\n      this.dialogTitle = titleName\r\n      if (data.type === 'first') {\r\n        this.dialogTypeName = '二'\r\n      } else if (data.type === 'second') {\r\n        this.dialogTypeName = '三'\r\n      }\r\n      if (this.isSearch) {\r\n        this.getMaxSort(data.id)\r\n      } else {\r\n        if (data.children && data.children.length) {\r\n          this.formData.sort = data.children[data.children.length - 1].sort + 1\r\n        } else {\r\n          this.formData.sort = 1\r\n        }\r\n      }\r\n\r\n      if (data.id) {\r\n        this.formData.parent_id = data.id\r\n      }\r\n      this.isADD = true\r\n      this.secondThird = true\r\n      this.centerDialogVisible = true\r\n      this.formData.title = ''\r\n      this.formData.content = ''\r\n      this.formData.summary = ''\r\n    },\r\n    // 编辑类目\r\n    edit(node, data, titleName) {\r\n      this.dialogTitle = titleName\r\n      this.formData.title = data.title\r\n      this.formData.sort = data.sort\r\n      if (data.summary) {\r\n        this.formData.summary = data.summary\r\n      }\r\n      if (data.content) {\r\n        this.formData.content = data.content\r\n      }\r\n      if (data.type === 'first') {\r\n        this.dialogTypeName = '一'\r\n      } else if (data.type === 'second') {\r\n        this.dialogTypeName = '二'\r\n      } else if (data.type === 'third') {\r\n        this.dialogTypeName = '三'\r\n      }\r\n      this.formData.id = data.id\r\n      this.isADD = false\r\n      this.centerDialogVisible = true\r\n    },\r\n    async getFrameList(data) {\r\n      const res = await getList(data)\r\n      if (res) {\r\n        this.frameAdminData = setTreeDataTitle(res.data.list)\r\n      }\r\n    },\r\n    // 添加一级类目\r\n    async addFirstCategory() {\r\n      this.dialogTypeName = '一'\r\n      if (this.isSearch) {\r\n        this.getMaxSort(0)\r\n      } else {\r\n        if (this.frameAdminData && this.frameAdminData.length === 0) {\r\n          this.formData.sort = this.frameAdminData.length + 1\r\n        }\r\n        if (this.frameAdminData && this.frameAdminData.length > 0) {\r\n          this.formData.sort =\r\n            this.frameAdminData[this.frameAdminData.length - 1].sort + 1\r\n        }\r\n      }\r\n\r\n      this.isADD = true\r\n      this.secondThird = false\r\n      this.centerDialogVisible = true\r\n      this.formData.title = ''\r\n    },\r\n    async getMaxSort(id) {\r\n      const data = {\r\n        id: id\r\n      }\r\n      const res = await maxSort(data)\r\n      this.formData.sort = res.data.sort + 1\r\n    },\r\n    // 关闭dialog 重制表单域\r\n    closeDialog(formName) {\r\n      this.$refs[formName].resetFields()\r\n    },\r\n    // 提交数据\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(async valid => {\r\n        if (valid) {\r\n          this.addEditFun()\r\n          this.centerDialogVisible = false\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    async addEditFun() {\r\n      const data = {\r\n        title: this.formData.title,\r\n        sort: this.formData.sort\r\n      }\r\n      if (this.formData.summary) {\r\n        data.summary = this.formData.summary\r\n      }\r\n      if (this.formData.content) {\r\n        data.content = this.formData.content\r\n      }\r\n      if (this.isADD) {\r\n        if (this.formData.parent_id && this.secondThird) {\r\n          data.parent_id = this.formData.parent_id\r\n        }\r\n        const resData = await addFrame(data)\r\n        if (resData.data.result) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '添加成功!'\r\n          })\r\n        } else {\r\n          this.$confirm(resData.data.message, '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            center: true\r\n          })\r\n        }\r\n      } else {\r\n        if (this.formData.id) {\r\n          data.id = this.formData.id\r\n        }\r\n        const resData = await putFrame(data)\r\n        if (resData.code === 20000) {\r\n          if (resData.data.result) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '编辑成功!'\r\n            })\r\n          } else {\r\n            this.$confirm('该类目下信息正在被使用，不可以编辑', '提示', {\r\n              confirmButtonText: '确定',\r\n              cancelButtonText: '取消',\r\n              center: true\r\n            })\r\n          }\r\n        }\r\n      }\r\n      await this.getFrameList()\r\n    },\r\n    // 删除类目\r\n    remove(node, data) {\r\n      let tips = ''\r\n      if (\r\n        (data.type === 'first' || data.type === 'second') &&\r\n        data.children &&\r\n        data.children.length > 0\r\n      ) {\r\n        tips =\r\n          '该类目下包含子类目，删除后该类目下所有信息将不再保留，请确认是否删除？'\r\n      }\r\n      if (\r\n        (data.type === 'first' || data.type === 'second') &&\r\n        data.children &&\r\n        data.children.length === 0\r\n      ) {\r\n        tips = '删除后，该类目下信息将不在保留,请确定是否删除'\r\n      }\r\n      if (data.type === 'third') {\r\n        tips = '删除后，该类目下信息将不在保留,请确定是否删除'\r\n      }\r\n      const query = {\r\n        id: data.id\r\n      }\r\n      this.$confirm(tips, '删除提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        center: true\r\n      })\r\n        .then(async () => {\r\n          const res = await deleFrame(query)\r\n          if (res.code === 20000) {\r\n            if (res.data.result) {\r\n              await this.getFrameList()\r\n              this.$message({\r\n                type: 'success',\r\n                message: '删除成功!'\r\n              })\r\n            } else {\r\n              this.$confirm(res.data.message, '删除提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                center: true\r\n              })\r\n            }\r\n          }\r\n        })\r\n        .catch(() => {})\r\n    },\r\n    serachData() {\r\n      const data = {\r\n        search: this.inputVal\r\n      }\r\n      this.getFrameList(data)\r\n      this.isSearch = true\r\n    },\r\n    inputChange(e) {\r\n      setTimeout(() => {\r\n        if (this.inputVal === '') {\r\n          this.getFrameList()\r\n          this.isSearch = false\r\n        }\r\n      })\r\n    },\r\n    handleSizeChange(e) {},\r\n    handleCurrentChange(e) {}\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.learning-admin {\r\n  .learning-admin-frame {\r\n    .learning-admin-frame-tree {\r\n      padding: 30px 20px;\r\n      border: 1px solid #ebeef5;\r\n    }\r\n    .custom-tree-node {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      padding-right: 8px;\r\n      font-size: 14px;\r\n      flex: 1;\r\n      .handle-btns {\r\n        display: none;\r\n      }\r\n      &:hover {\r\n        .handle-btns {\r\n          display: block;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .learning-admin-empty {\r\n    display: block;\r\n    .learning-admin-empty-img {\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      margin-top: -204px;\r\n      margin-left: -282px;\r\n      width: 570px;\r\n      img {\r\n        width: 100%;\r\n      }\r\n      .learning-admin-empty-btn {\r\n        margin-top: 60px;\r\n        margin-left: 173px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=9de07b64&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=9de07b64&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9de07b64\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}