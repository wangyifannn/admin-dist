(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ff311f5","chunk-333f921d","chunk-6d887106","chunk-333f921d","chunk-b939e5e4","chunk-2a4a4f78"],{"0152":function(e,t,a){"use strict";var s=a("33eb"),r=a.n(s);r.a},"0831":function(e,t,a){"use strict";var s=a("f467"),r=a.n(s);r.a},"0945":function(e,t,a){},"09d0":function(e,t,a){},"09f5":function(e,t,a){},"0e08":function(e,t,a){},"0f00":function(e,t,a){},"117b":function(e,t,a){},"17e4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chanke_health_file_detail"},[a("div",[a("span",{staticStyle:{"vertical-align":"middle",display:"inline-block"}},[a("el-avatar",{attrs:{size:"medium",src:e.userInfo.avatar}})],1),a("span",{staticClass:"margin-right-30"},[e._v(" 用户："+e._s(e.userInfo.nickname)+" ")]),a("div",{class:e.memberId?"wrap":"no_wrap"},[a("span",{staticClass:"margin-right-30"},[e._v(" 患者姓名："+e._s(e.member.name)+" ")]),a("span",[e._v(" 当前阶段："+e._s(e.curStageTxt(e.cur_stage))+" ")])])]),a("el-tabs",{staticStyle:{"margin-top":"20px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"basic_info"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("基本信息")]),a("div",{staticClass:"patient_info"},[a("div",[a("span",{staticClass:"span-key"},[e._v("患者姓名：")]),a("span",{staticClass:"span-val"},[e._v("\n            "+e._s(e.member.name)+"\n          ")])]),a("div",[a("span",{staticClass:"span-key"},[e._v("出生日期：")]),a("span",{staticClass:"span-val"},[e._v("\n            "+e._s(e._f("formatTime")(new Date(e.member.birthday),"{y}-{m}-{d}"))+"\n          ")])]),a("div",[a("span",{staticClass:"span-key"},[e._v("年龄： ")]),a("span",{staticClass:"span-val"},[e._v("\n            "+e._s(e.member.age_of_month_value.year)+"岁\n          ")])]),a("div",[a("span",{staticClass:"span-key"},[e._v("职业： ")]),a("span",{staticClass:"span-val"},[e._v("\n            "+e._s(e.member.chanke.profession||"--")+"\n          ")])])]),a("basicInfoForm",{attrs:{basicInfo:e.chankeBasicInfo,dataChange:e.dataChange,memberId:e.memberId,pageType:e.pageType,btnDisabled:!("hm"===e.role)},on:{dataChange:e.setDataChange,submitSuccess:e.getDetail}})],1),a("el-tab-pane",{attrs:{name:"byz"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("svg-icon",{directives:[{name:"show",rawName:"v-show",value:"byz"===e.cur_stage,expression:"cur_stage === 'byz'"}],attrs:{"icon-class":"select"}}),e._v("\n        备孕中\n      ")],1),a("byzForm",{attrs:{byzInfo:e.byzInfo,btnDisabled:!("byz"===e.cur_stage&&"hm"===e.role)},on:{byzSubmit:e.formSubmit}})],1),a("el-tab-pane",{attrs:{name:"hyz"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("svg-icon",{directives:[{name:"show",rawName:"v-show",value:"hyz"===e.cur_stage,expression:"cur_stage === 'hyz'"}],attrs:{"icon-class":"select"}}),e._v("\n        怀孕中")],1),a("hyzForm",{attrs:{hyzInfo:e.hyzInfo,btnDisabled:!("hyz"===e.cur_stage&&"hm"===e.role)},on:{hyzSubmit:e.formSubmit}})],1),a("el-tab-pane",{attrs:{name:"crq"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("svg-icon",{directives:[{name:"show",rawName:"v-show",value:"crq"===e.cur_stage,expression:"cur_stage === 'crq'"}],attrs:{"icon-class":"select"}}),e._v("\n        产褥期")],1),a("crqForm",{attrs:{crqInfo:e.crqInfo,btnDisabled:!("crq"===e.cur_stage&&"hm"===e.role)},on:{crqSubmit:e.formSubmit}})],1)],1)],1)},r=[],n=a("db72"),i=a("7b1f"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fileDeatil_answer_box"},[a("div",{staticClass:"fileDeatil_form_box"},[a("div",{staticClass:"fileDeatil_form_item"},[a("MyForm",{ref:"healthfileForm",attrs:{form:e.fileDeatilFormAttr,formItem:e.formItem,formData:e.formData},on:{submit:e.getsubmit}},[a("fksssForm",{ref:"fksssForm",attrs:{slot:"fksss",fksssData:e.formData.fuke_showshu_historys},on:{removeFksss:e.removeFksssFun,addFksss:e.addFksssData},slot:"fksss"}),a("sxsForm",{ref:"sxsForm",attrs:{slot:"sxs",sxsData:e.formData.shuxue_historys},on:{addSxs:e.addSxsData,removeSxs:e.removeSxsFun},slot:"sxs"}),a("ycsForm",{ref:"ycsForm",attrs:{slot:"ycs",ycsData:e.formData.yc_historys},on:{addYcs:e.addYcsData,removeYcs:e.removeYcsFun},slot:"ycs"}),a("div",{staticClass:"align-left fontsize-12 color-orange",attrs:{slot:"updateInfo"},slot:"updateInfo"},[e._v("\n          最近保存时间："+e._s(e.formatTime(e.formData.update_at))),a("br"),e._v("\n          修改人："+e._s(e.formData.update_user)+"\n        ")])],1)],1)])])},l=[],c=(a("ac6a"),a("63d4")),u={};(function(e){var t={item:[{type:"radio",name:"is_schedule",value:"",width:"100%",label:"月经史(月经是否规律)：",show:!0,options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:[{required:!0,message:"请选择月经史（月经是否规律）",trigger:"blur"}]},{cascaderItem:["is_schedule"],cascaderValue:!0,type:"inputnumber",name:"period_start",value:"",colSpan:6,width:"100%",min:1,max:100,label:"周期：",unit:"天",show:!0,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{cascaderItem:["is_schedule"],cascaderValue:!0,type:"inputnumber",name:"period_end",value:"",colSpan:18,width:"100%",min:1,max:100,label:"至",unit:"天",show:!0},{cascaderItem:["is_schedule"],cascaderValue:!0,type:"inputnumber",name:"duration_start",value:"",colSpan:6,width:"100%",unit:"天",min:1,max:20,label:"每次持续：",show:!0,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{cascaderItem:["is_schedule"],cascaderValue:!0,type:"inputnumber",name:"duration_end",value:"",colSpan:18,min:1,max:20,width:"100%",label:"至",unit:"天",show:!0},{cascaderItem:["is_schedule"],cascaderValue:!0,type:"radio",name:"measure",value:"",width:"100%",label:"月经量：",show:!0,options:[{value:"too_much",label:"过多"},{value:"much",label:"多"},{value:"middle",label:"中"},{value:"little",label:"少"},{value:"too_little",label:"过少"}],rules:[{required:!0,message:"请选择月经量",trigger:"blur"}]},{cascaderItem:["is_schedule"],cascaderValue:!0,type:"html",name:"yjtip",value:'<div class="align-left fontsize-12 color-999">针对月经量过多过少给用户的温馨提示：</br>月经过多：80ml就是过多，如果用卫生巾的量评估，大概每1-2个小时就浸透一大片的卫生巾或卫生棉；</br>月经过少：月经量少于20ml为过少，如果用卫生巾的量评估，一片夜用卫生巾浸满的时候血量大概为20-31ml。</div>',width:"100%",label:"",show:!0},{cascaderItem:["is_schedule"],cascaderValue:!1,type:"textarea",maxlength:100,showlimit:!0,name:"measure_desc",value:"",width:"100%",label:"说明：",show:!0,placeholder:"请输入",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{type:"radio",name:"has_past_history",value:"",width:"100%",label:"既往史：",show:!0,options:[{value:!0,label:"有"},{value:!1,label:"无"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{type:"checkbox",cascaderItem:["has_past_history"],cascaderValue:!0,name:"past_historys",value:"",width:"100%",label:"",options:[{value:"xzb",label:"心脏病"},{value:"szjb",label:"肾脏疾病"},{value:"gzjb",label:"肝脏疾病"},{value:"gxy",label:"高血压"},{value:"px",label:"贫血"},{value:"tnb",label:"糖尿病"},{value:"yg",label:"乙肝"},{value:"other",label:"其他"}],show:!0,rules:[{required:!0,message:"请选择",trigger:"blur"}]},{cascaderItem:["past_historys"],cascaderValue:"other",type:"textarea",maxlength:100,showlimit:!0,name:"past_other_desc",value:"",width:"100%",label:"说明：",show:!0,placeholder:"请输入",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{type:"radio",name:"has_family_history",value:"",width:"100%",label:"家族史：",show:!0,options:[{value:!0,label:"有"},{value:!1,label:"无"}],rules:[{required:!1,message:"请选择",trigger:"blur"}]},{type:"checkbox",cascaderItem:["has_family_history"],cascaderValue:!0,name:"family_historys",value:"",width:"100%",label:"",options:[{value:"ycxjb",label:"遗传性疾病史"},{value:"jsb",label:"精神病史"},{value:"other",label:"其他"}],show:!0,rules:[{required:!0,message:"请选择",trigger:"blur"}]},{cascaderItem:["family_historys"],cascaderValue:"other",type:"textarea",maxlength:100,showlimit:!0,name:"family_other_desc",value:"",width:"100%",label:"说明：",show:!0,placeholder:"请输入",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{type:"radio",name:"has_personal_history",value:"",width:"100%",label:"个人史：",show:!0,options:[{value:!0,label:"有"},{value:!1,label:"无"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{type:"checkbox",cascaderItem:["has_personal_history"],cascaderValue:!0,name:"personal_historys",value:"",width:"100%",label:"",options:[{value:"yj",label:"饮酒"},{value:"xy",label:"吸烟"},{value:"fyyw",label:"服用药物"},{value:"jcydyhwz",label:"接触有毒有害物质"},{value:"jcfsx",label:"接触放射线"},{value:"other",label:"其他"}],show:!0,rules:[{required:!0,message:"请选择",trigger:"blur"}]},{cascaderItem:["personal_historys"],cascaderValue:"other",type:"textarea",maxlength:100,showlimit:!0,name:"personal_other_desc",value:"",width:"100%",label:"说明：",show:!0,placeholder:"请输入",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{type:"radio",name:"has_fuke_shoushu_history",value:"",width:"100%",label:"妇科手术史：",show:!0,options:[{value:!0,label:"有"},{value:!1,label:"无"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{show:!0,type:"slot",cascaderItem:["has_fuke_shoushu_history"],cascaderValue:!0,slotName:"fksss"},{type:"radio",name:"has_ywgm_history",value:"",width:"100%",label:"药物过敏史：",show:!0,options:[{value:!0,label:"有"},{value:!1,label:"无"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{cascaderItem:["has_ywgm_history"],cascaderValue:!0,type:"text",maxlength:50,showlimit:!0,name:"ywgm_desc",value:"",width:"100%",label:"过敏药物：",show:!0,placeholder:"请输入",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{type:"radio",name:"has_shuxue_history",value:"",width:"100%",label:"输血史：",show:!0,options:[{value:!0,label:"有"},{value:!1,label:"无"}],rules:[{required:!1,message:"请选择",trigger:"blur"}]},{show:!0,cascaderItem:["has_shuxue_history"],cascaderValue:!0,type:"slot",slotName:"sxs"},{type:"radio",name:"has_yc_history",value:"",width:"100%",label:"孕产史：",show:!0,options:[{value:!0,label:"有"},{value:!1,label:"无"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{show:!0,type:"slot",cascaderItem:["has_yc_history"],cascaderValue:!0,slotName:"ycs"},{type:"radio",name:"has_baby",value:"",width:"100%",label:"现子女情况：",show:!0,options:[{value:!0,label:"有"},{value:!1,label:"无"}],rules:[{required:!1,message:"请选择现子女情况",trigger:"blur"}]},{cascaderItem:["has_baby"],cascaderValue:!0,type:"inputnumber",name:"boy_num",value:"",width:"100%",label:"男：",show:!0,colSpan:7,min:0,max:5,rules:[{required:!0,message:"请输入0-5的整数",trigger:"blur"}]},{cascaderItem:["has_baby"],cascaderValue:!0,type:"inputnumber",name:"girl_num",value:"",width:"100%",min:0,max:5,colSpan:7,label:"女：",show:!0,rules:[{required:!0,message:"请输入0-5的整数",trigger:"blur"}]},{show:!0,type:"slot",slotName:"updateInfo"}],data:{is_schedule:"",period_start:"",period_end:"",yjtip:"",duration_start:"",duration_end:"",measure:"",measure_desc:"",has_past_history:!1,past_historys:[],past_other_desc:"",has_family_history:"",family_historys:[],family_other_desc:"",has_personal_history:"",personal_historys:[],personal_other_desc:"",has_fuke_shoushu_history:!1,has_shuxue_history:"",shuxue_historys:[{desc:"",at:""}],has_yc_history:"",yc_historys:[{hy_at:"",is_gwy:"",fenmian_status:"",fenmian_at:"",fenmian_mode:"",is_ceqie:""}],fuke_showshu_historys:[{name:"",at:""}],has_ywgm_history:"",ywgm_desc:"",update_at:"",update_user:""}};e.form=t})(u);var m=u,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fksss_box"},[e.fksssData.length?a("div",[e._l(e.fksssData,(function(t,s){return a("el-row",{key:s+"baby"},[a("div",{staticClass:"fksss_form_box"},[a("div",{staticClass:"form_item"},[s>0?a("i",{staticClass:"el-icon-close close_baby_icon",on:{click:function(t){return e.removeFksss(s)}}}):e._e(),a("MyForm",{attrs:{myRef:"fksssForm",form:e.fksssFormAttr,formItem:e.formItem,formData:t}})],1)])])})),a("el-row",[a("p",{staticClass:"add_answer_btn",on:{click:function(t){return e.addFksssFun()}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加\n      ")])])],2):e._e()])},h=[],p={};(function(e){var t={item:[{type:"text",name:"name",labelWidth:"60px",value:"",width:"100%",label:"手术名称",maxlength:50,showlimit:!0,show:!0,rules:[{required:!0,message:"请输入",trigger:"blur"}]},{name:"at",value:"",width:"100%",label:"手术日期",labelWidth:"60px",show:!0,showBefore:!0,type:"date",placeholder:"请选择手术日期",rules:[{required:!0,message:"请选择手术日期",trigger:"blur"}]}],data:{fuke_showshu_historys:[{name:"",at:""}]}};e.form=t})(p);var b=p,f={props:{fksssData:{type:Array,default:function(){return[]}}},data:function(){var e={showFormBorder:!1,showTitle:!1,labelWidth:"90px",labelPositon:"right",style:"notprepend",column:1,hasSubmit:!1,btnRight:!0,userId:"",relativeId:"",cancleShow:!1,submitText:"确认提交",cancleText:""};return{fksssFormAttr:e,formItem:[]}},components:{MyForm:c["a"]},created:function(){this.formInit()},methods:{submitForm:function(){var e=this;this.$refs["fksssForm"].validate((function(t){if(!t)return!1;e.$emit("submit",e.formData)}))},formInit:function(e,t){this.formItem=b.form.item},addFksssFun:function(){this.$emit("addFksss")},removeFksss:function(e){this.$emit("removeFksss",e)}}},y=f,g=(a("e405"),a("2877")),_=Object(g["a"])(y,d,h,!1,null,null,null),v=_.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sxs_box"},[e.sxsData.length?a("div",[e._l(e.sxsData,(function(t,s){return a("el-row",{key:s+"sxs"},[a("div",{staticClass:"sxs_form_box"},[a("div",{staticClass:"form_item"},[s>0?a("i",{staticClass:"el-icon-close close_baby_icon",on:{click:function(t){return e.removesxs(s)}}}):e._e(),a("MyForm",{attrs:{myRef:"sxsForm",form:e.sxsFormAttr,formItem:e.formItem,formData:t}})],1)])])})),a("el-row",[a("p",{staticClass:"add_answer_btn",on:{click:function(t){return e.addsxsFun()}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加\n      ")])])],2):e._e()])},x=[],F={};(function(e){var t={item:[{type:"text",name:"desc",labelWidth:"80px",value:"",width:"100%",label:"输血情况",maxlength:50,showlimit:!0,show:!0,colSpan:11,rules:[{required:!0,message:"请输入",trigger:"blur"}]},{name:"at",value:"",width:"100%",label:"输血日期",labelWidth:"80px",colSpan:10,show:!0,type:"date",placeholder:"请选择输血日期",pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},rules:[{required:!0,message:"请选择输血日期",trigger:"blur"}]}],data:{fksssItem:[{desc:"",at:""}]}};e.form=t})(F);var k=F,C={props:{sxsData:{type:Array,default:function(){return[]}}},data:function(){var e={showFormBorder:!1,showTitle:!1,labelWidth:"90px",labelPositon:"right",style:"notprepend",column:1,hasSubmit:!1,btnRight:!0,userId:"",relativeId:"",cancleShow:!1,submitText:"确认提交",cancleText:""};return{sxsFormAttr:e,formItem:[]}},components:{MyForm:c["a"]},created:function(){this.formInit()},methods:{formInit:function(e,t){this.formItem=k.form.item},addsxsFun:function(){this.$emit("addSxs")},removesxs:function(e){this.$emit("removeSxs",e)}}},j=C,D=(a("a7c9"),Object(g["a"])(j,w,x,!1,null,null,null)),I=D.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ycs_box"},[e.ycsData.length?a("div",[e._l(e.ycsData,(function(t,s){return a("el-row",{key:s+"baby"},[a("div",{staticClass:"ycs_form_box"},[a("div",{staticClass:"form_item"},[s>0?a("i",{staticClass:"el-icon-close close_baby_icon",on:{click:function(t){return e.removeycs(s)}}}):e._e(),a("MyForm",{attrs:{myRef:"ycsForm",form:e.ycsFormAttr,formItem:e.formItem,formData:t}})],1)])])})),a("el-row",[a("p",{staticClass:"add_answer_btn",on:{click:function(t){return e.addycsFun()}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加\n      ")])])],2):e._e()])},T=[],S={};(function(e){var t={item:[{name:"hy_at",value:"",width:"100%",label:"怀孕日期",labelWidth:"80px",colSpan:10,show:!0,type:"date",placeholder:"请选择怀孕日期",pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},rules:[{required:!0,message:"请选择怀孕日期",trigger:"blur"}]},{type:"radio",name:"is_gwy",value:"",width:"100%",label:"宫外孕:",show:!0,options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{type:"radio",name:"fenmian_status",value:"",width:"100%",label:"分娩情况:",show:!0,options:[{value:"normal",label:"正常"},{value:"zaochan",label:"早产"},{value:"liuchan",label:"流产"},{value:"yinchan",label:"引产"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{name:"fenmian_at",value:"",width:"100%",label:"分娩日期",labelWidth:"80px",cascaderItem:["fenmian_status"],cascaderType:"array",cascaderValue:["normal","zaochan"],colSpan:10,show:!0,type:"date",placeholder:"请选择分娩日期",showBefore:!0,rules:[{required:!0,message:"请选择分娩日期",trigger:"blur"}]},{name:"fenmian_mode",value:"",width:"100%",label:"分娩方式",labelWidth:"80px",colSpan:10,show:!0,cascaderType:"array",cascaderItem:["fenmian_status"],cascaderValue:["normal","zaochan"],type:"select",placeholder:"请选择分娩方式",options:[{label:"阴道分娩",value:"ydfm"},{label:"剖宫产",value:"pgc"}],rules:[{required:!0,message:"请填写分娩情况",trigger:"blur"}]},{type:"radio",name:"is_ceqie",cascaderItem:["fenmian_mode"],cascaderValue:"ydfm",value:"",width:"100%",label:"是否侧切:",show:!0,options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]}]};e.form=t})(S);var $=S,O={props:{ycsData:{type:Array,default:function(){return[]}}},data:function(){var e={showFormBorder:!1,showTitle:!1,labelWidth:"90px",labelPositon:"right",style:"notprepend",column:1,hasSubmit:!1,btnRight:!0,userId:"",relativeId:"",cancleShow:!1,submitText:"确认提交",cancleText:""};return{ycsFormAttr:e,formItem:[]}},components:{MyForm:c["a"]},watch:{},created:function(){this.formInit()},methods:{formInit:function(e,t){this.formItem=$.form.item,console.log(this.formItem)},addycsFun:function(){this.$emit("addYcs")},removeycs:function(e){this.$emit("removeYcs",e)}}},A=O,q=(a("6056"),Object(g["a"])(A,z,T,!1,null,null,null)),N=q.exports,B=a("2ef0"),R=a.n(B),M={props:{memberId:{type:String,default:""},basicInfo:{type:Object,default:function(){}},dataChange:{type:Boolean,default:!1},pageType:{type:String,default:""},btnDisabled:{type:Boolean,default:!1}},data:function(){var e={showFormBorder:!1,showTitle:!1,ref:"healthfileForm",labelWidth:"120px",labelPositon:"right",style:"notprepend",column:1,hasSubmit:!0,userId:"",relativeId:"",cancleShow:!1,submitText:"修改并保存",cancleText:""};return{fileDeatilFormAttr:e,fksssFormValid:!1,ycsFormValid:!1,sxsFormValid:!1,formItem:[],formData:{}}},components:{MyForm:c["a"],fksssForm:v,ycsForm:N,sxsForm:I},watch:{basicInfo:{handler:function(e){this.dataChange&&(this.formInit(),this.getData())},deep:!0},btnDisabled:function(e){this.fileDeatilFormAttr.submitDisabled=e}},created:function(){this.formInit(),this.fileDeatilFormAttr.submitDisabled=this.btnDisabled},methods:{addSxsData:function(){var e={desc:"",at:""};this.formData.shuxue_historys.push(e)},addFksssData:function(){var e={name:"",at:""};this.formData.fuke_showshu_historys.push(e)},addYcsData:function(){var e={hy_at:"",is_gwy:"",fenmian_status:"",fenmian_at:"",fenmian_mode:"",is_ceqie:""};this.formData.yc_historys.push(e)},getData:function(){var e=Object.assign({},this.formData,this.basicInfo.yuejing,this.basicInfo.chanke_history,this.basicInfo.baby_info);this.basicInfo.chanke_history&&this.basicInfo.chanke_history.yc_historys||(e.yc_historys=[{hy_at:"",is_gwy:"",fenmian_status:"",fenmian_at:"",fenmian_mode:"",is_ceqie:""}]),this.basicInfo.chanke_history&&this.basicInfo.chanke_history.shuxue_historys||(e.shuxue_historys=[{desc:"",at:""}]),this.basicInfo.chanke_history&&this.basicInfo.chanke_history.fuke_showshu_historys||(e.fuke_showshu_historys=[{name:"",at:""}]),e.update_user=this.basicInfo.update_user,e.update_at=this.basicInfo.update_at,this.formData=e,this.$emit("dataChange",!1)},removeFksssFun:function(e){this.formData.fuke_showshu_historys=R.a.remove(this.formData.fuke_showshu_historys,(function(t,a){return!(a===e)}))},removeSxsFun:function(e){this.formData.shuxue_historys=R.a.remove(this.formData.shuxue_historys,(function(t,a){return!(a===e)}))},removeYcsFun:function(e){this.formData.yc_historys=R.a.remove(this.formData.yc_historys,(function(t,a){return!(a===e)}))},formInit:function(e,t){this.formItem=m.form.item,"chat"===this.pageType&&(this.formItem[1].colSpan=18,this.formItem[2].colSpan=18,this.formItem[3].colSpan=18,this.formItem[4].colSpan=18),this.formData=m.form.data},ycsValid:function(){var e=this.$refs.ycsForm.$children,t=this;e.length?R()(e).forEach((function(e,a){var s=e.$children&&e.$children.length?e.$children[0].$refs:"";s&&s.ycsForm&&s.ycsForm.validate((function(e){t.ycsFormValid=!!e}))})):t.ycsFormValid=!0},fksssValid:function(){var e=this.$refs.fksssForm.$children,t=this;e.length?R()(e).forEach((function(e,a){var s=e.$children&&e.$children.length?e.$children[0].$refs:"";s&&s.fksssForm&&s.fksssForm.validate((function(e){t.fksssFormValid=!!e}))})):t.fksssFormValid=!0},sxsValid:function(){var e=this.$refs.sxsForm.$children,t=this;e.length?R()(e).forEach((function(e,a){var s=e.$children&&e.$children.length?e.$children[0].$refs:"";s&&s.sxsForm&&s.sxsForm.validate((function(e){t.sxsFormValid=!!e}))})):t.sxsFormValid=!0},getsubmit:function(e){var t=this;if(this.formData.has_fuke_shoushu_history?this.fksssValid():this.fksssFormValid=!0,this.fksssFormValid)if(this.formData.has_shuxue_history?this.sxsValid():this.sxsFormValid=!0,this.sxsFormValid)if(this.formData.has_yc_history?this.ycsValid():this.ycsFormValid=!0,this.ycsFormValid){var a=this.formData,s=this.formData,r=this.formData,n={yuejing:a,baby_info:r,chanke_history:s,update_key:"chanke_basic_info"},o=this.$route.params.id||this.memberId||this.basicInfo.member.id;Object(i["z"])(o,n).then((function(e){t.$message({type:"success",message:"修改并保存成功"}),t.$route.params.id||t.$store.dispatch("chat/getActivedUserInfo",{babyId:t.$store.state.chat.activedBabyId}),t.$emit("submitSuccess")}))}else this.$message.error("请填写孕产史");else this.$message.error("请填写输血史");else this.$message.error("请填写妇科手术史")}}},L=M,V=(a("e1de"),Object(g["a"])(L,o,l,!1,null,null,null)),E=V.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"byz_form"},[a("MyForm",{ref:"byzForm",attrs:{form:e.form,formData:e.formData,formItem:e.formItem},on:{submit:e.byzSubmit,resetForm:e.reset}},[a("div",{staticClass:"align-left fontsize-12 color-orange",attrs:{slot:"updateInfo"},slot:"updateInfo"},[e._v("\n      最近保存时间："+e._s(e.formatTime(e.formData.update_at))),a("br"),e._v("\n      修改人："+e._s(e.formData.update_user)+"\n    ")])])],1)},P=[],U=a("af7d"),W={data:function(){var e={showFormBorder:!1,showTitle:!1,ref:"byzForm",labelWidth:"150px",labelPositon:"right",style:"notprepend",column:1,hasSubmit:!0,btnRight:!1,cancleShow:!1,submitText:"修改并保存",cancleText:""};return{searchParams:{},formItem:[],formData:{},form:e}},props:{byzInfo:{type:Object,default:function(){}},btnDisabled:{type:Boolean,default:!1}},watch:{byzInfo:{handler:function(e){this.formInit(),this.getData()},deep:!0},btnDisabled:function(e){this.form.submitDisabled=e},"formData.is_checked":function(e){this.formItem[4].show=!1!==e&&this.formData.has_unusual_status},"formData.has_unusual_status":function(e){this.formItem[4].show=this.formData.has_unusual_status}},components:{MyForm:c["a"]},created:function(){this.formInit(),this.form.submitDisabled=this.btnDisabled},methods:{getData:function(){var e=Object.assign({},this.byzInfo);this.formData=e},byzSubmit:function(e){this.$emit("byzSubmit",e)},formInit:function(e){this.formItem=Object(U["b"])("byzForm","item"),this.formData=e||Object(U["b"])("byzForm","data")},reset:function(){this.$emit("searchFun")}}},G=W,Y=(a("aaff"),Object(g["a"])(G,H,P,!1,null,"f090e75e",null)),J=Y.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hyz_form"},[a("MyForm",{ref:"hyzForm",attrs:{form:e.form,formData:e.formData,formItem:e.formItem},on:{submit:e.submit,resetForm:e.reset}},[a("div",{staticClass:"align-left fontsize-12 color-orange",attrs:{slot:"updateInfo"},slot:"updateInfo"},[e._v("\n      最近保存时间："+e._s(e.formatTime(e.formData.update_at))),a("br"),e._v("\n      修改人："+e._s(e.formData.update_user)+"\n    ")])])],1)},Q=[],X={data:function(){var e={showFormBorder:!1,showTitle:!1,ref:"hyzForm",labelWidth:"140px",labelPositon:"right",style:"notprepend",column:1,hasSubmit:!0,btnRight:!1,cancleShow:!1,submitText:"修改并保存",cancleText:""};return{searchParams:{},formItem:[],formData:{},form:e}},props:{hyzInfo:{type:Object,default:function(){}},btnDisabled:{type:Boolean,default:!1}},watch:{hyzInfo:{handler:function(e){this.formInit(),this.getData()},deep:!0},btnDisabled:function(e){this.form.submitDisabled=this.btnDisabled}},components:{MyForm:c["a"]},created:function(){this.formInit(),this.form.submitDisabled=this.btnDisabled},methods:{getData:function(){var e=Object.assign({},this.hyzInfo);this.formData=e},submit:function(e){this.$emit("hyzSubmit",e)},formInit:function(e){this.formItem=Object(U["b"])("hyzForm","item"),this.formData=e||Object(U["b"])("hyzForm","data")},reset:function(){this.$emit("searchFun")}}},Z=X,ee=(a("2c0a"),Object(g["a"])(Z,K,Q,!1,null,"4785988f",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crq_form"},[a("MyForm",{ref:"crqForm",attrs:{form:e.form,formData:e.formData,formItem:e.formItem},on:{submit:e.submit,resetForm:e.reset}},[a("div",{staticClass:"align-left fontsize-12 color-orange",attrs:{slot:"updateInfo"},slot:"updateInfo"},[e._v("\n      最近保存时间："+e._s(e.formatTime(e.formData.update_at))),a("br"),e._v("\n      修改人："+e._s(e.formData.update_user)+"\n    ")])])],1)},se=[],re={data:function(){var e={showFormBorder:!1,showTitle:!1,ref:"crqForm",labelWidth:"150px",labelPositon:"right",style:"notprepend",column:1,hasSubmit:!0,btnRight:!1,cancleShow:!1,submitText:"修改并保存",cancleText:""};return{searchParams:{},formItem:[],formData:{},form:e}},props:{crqInfo:{type:Object,default:function(){}},btnDisabled:{type:Boolean,default:!1}},components:{MyForm:c["a"]},created:function(){this.formInit(),this.form.submitDisabled=this.btnDisabled},watch:{crqInfo:{handler:function(e){this.formInit(),this.getData()},deep:!0},btnDisabled:function(e){this.form.submitDisabled=e}},methods:{getData:function(){var e=Object.assign({},this.crqInfo);this.formData=e},submit:function(e){this.$emit("crqSubmit",e)},formInit:function(e){this.formItem=Object(U["b"])("crqForm","item"),this.formData=e||Object(U["b"])("crqForm","data")},reset:function(){this.$emit("searchFun")}}},ne=re,ie=(a("0152"),Object(g["a"])(ne,ae,se,!1,null,"30c0057d",null)),oe=ie.exports,le=a("8975"),ce=a("2f62"),ue={props:{memberId:{type:String,default:""},department:{type:String,default:""},pageType:{type:String,default:""}},computed:Object(n["a"])({},Object(ce["c"])(["role"])),data:function(){return{activeName:"basic_info",cur_stage:"",userInfo:"",chankeBasicInfo:{},member:{remark:"",name:"",age:"",avatar:"",age_of_month_value:{year:""},chanke:{profession:""}},byzInfo:{},hyzInfo:{},crqInfo:{},dataChange:!1}},components:{basicInfoForm:E,byzForm:J,hyzForm:te,crqForm:oe},created:function(){this.getDetail()},watch:{activeName:function(){this.getDetail()},memberId:function(e,t){e!==t&&this.getDetail()}},methods:{setDataChange:function(e){this.dataChange=e},getDetail:function(){var e=this;(this.$route.params.id||this.memberId)&&(this.memberId&&"chanke"!==this.department||Object(i["o"])(this.$route.params.id||this.memberId,"chanke_"+this.activeName).then((function(t){t&&(e.member=t.data.member,e.userInfo=t.data.user_info,e.cur_stage=t.data.cur_stage,"basic_info"===e.activeName?(e.chankeBasicInfo=t.data.chanke_basic_info,e.dataChange=!0):"byz"===e.activeName?e.byzInfo=t.data.chanke_byz:"hyz"===e.activeName?e.hyzInfo=t.data.chanke_hyz:e.crqInfo=t.data.chanke_crq)})))},curStageTxt:le["curStageTxt"],formSubmit:function(e){var t=this,a={update_key:"chanke_"+this.activeName};a=Object.assign({},a,e);var s=this.memberId||this.$route.params.id;Object(i["z"])(s,a).then((function(e){t.$message({type:"success",message:"修改并保存成功"}),t.$route.params.id||t.$store.dispatch("chat/getActivedUserInfo",{babyId:t.$store.state.chat.activedBabyId}),t.getDetail()}))}}},me=ue,de=(a("eb95"),Object(g["a"])(me,s,r,!1,null,"2329a705",null));t["default"]=de.exports},"208d":function(e,t,a){"use strict";var s=a("8703"),r=a.n(s);r.a},"215c":function(e,t,a){},"271d":function(e,t,a){"use strict";var s=a("31ce"),r=a.n(s);r.a},"27f3":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return h})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return m}));a("6b54");var s=a("75fc"),r=(a("c5f6"),a("8090")),n=function(e){return JSON.parse(JSON.stringify(e))},i=function(e){return Object(r["a"])(e)&&!e.some((function(e){return e instanceof Object}))},o=function(e){return Object(r["a"])(e)&&e.every((function(e){return i(e)}))},l=function(e,t){if(!o(e))throw new Error("params target2dArray is not a strict 2dArray");var a=t||e.reduce((function(e,t){return Math.max(e,Number(c(t)+1))}),0),s=Array.apply(null,{length:a}).map((function(e){return""}));return e.filter((function(e){return e.some((function(e){return Boolean(e)}))})).map((function(e){return e.concat(s).slice(0,a)}))},c=function(e){var t=e.length-1;while(t>-1){if(e[t])return t;if(0===t)return!1;t--}return!1},u=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=n(t);if(i.some((function(e){return!Object(r["a"])(e)})))throw new Error("type of oneArg is not array");var o=i.reverse();return o.reduce((function(e,t,a){return 0===a?e.concat(t):e.length>=t.length?e:(t.splice.apply(t,[0,e.length].concat(Object(s["a"])(e))),t)}),[])},m=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=n(t);if(r.some((function(e){return!o(e)})))throw new Error("one of target2dArrays is not a strict 2dArray");var i=r.reverse();return i.reduce((function(e,t,a){if(0===a)return e.concat(t);var r=e.map((function(e,a){return u(t[a]||[],e)}));return e.length<t.length?(t.splice.apply(t,[0,r.length].concat(Object(s["a"])(r))),t):r}),[])},d=function(e,t){return i(e)&&i(t)?e.toString()===t.toString():(console.error("传入的数组不是 1dArray"),!1)},h=function(e,t){return o(e)&&o(t)?e.length===t.length&&e.every((function(e,a){return d(e,t[a])})):(console.error("传入的数组不是 2dArray"),!1)}},"2c0a":function(e,t,a){"use strict";var s=a("09f5"),r=a.n(s);r.a},"2c4d":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var s=[{type:"A",recipeBg:"https://pic1.baobaohehu.com/fd/chat/5b286b6471d886154b417389/20190315173403272BG-02.jpg",recipeHeadBg:"https://pic1.baobaohehu.com/fd/chat/5b286b6471d886154b417389/20190315173403272mother-header.png"},{type:"B",recipeBg:"https://pic1.baobaohehu.com/fd/chat/5b286b6471d886154b417389/20190315172908007BG-01.jpg",recipeHeadBg:"https://pic1.baobaohehu.com/fd/chat/5b286b6471d886154b417389/20190315172908007baby-header.png"}]},"2c79":function(e,t,a){},"2d64":function(e,t,a){},"2edf":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"baby-box cursor-pointer",class:e.activedBaby.family_member&&e.babyDetail.family_member&&e.babyDetail.family_member._id===e.activedBaby.family_member._id?"active_baby":"",on:{click:function(t){return e.handleBaby(e.babyDetail)}}},[e.babyDetail.is_asking?a("div",{staticClass:"consulting"},[e._v("\n    咨询中\n  ")]):e._e(),a("el-row",{staticClass:"baby-collapse"},[a("el-col",{attrs:{span:-1!==e.pathName.indexOf("diagnose")?6:3}},[a("div",{staticClass:"baby-avatar",style:{backgroundImage:"url("+e.babyDetail.family_member.avatar+")"}})]),a("el-col",{staticClass:"clearfix baby-collapse-right",attrs:{span:17}},[a("p",{staticClass:"float-left name"},[e._v(e._s(e.babyDetail.family_member.name))]),a("p",{staticClass:"float-right"},[a("my-copy",{attrs:{copyKey:e.babyDetail.family_member.name}}),e.department?e._e():a("i",{staticClass:"cursor-pointer margin-left-10",class:e.showDetail?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:e.showDetailFun}})],1)])],1),a("div",{staticClass:"baby-info-box"},[a("el-row",{staticClass:"clearfix"},[a("el-col",{staticClass:"baby-id",attrs:{span:11}},[a("span",[e._v("ID：")]),a("span",{staticClass:"span-val"},[e._v(e._s(e.babyDetail.family_member.id))])]),a("el-col",{style:-1!==e.pathName.indexOf("diagnose")?"margin-left:5px":"margin-left:0px",attrs:{span:9}},[a("my-copy",{staticClass:"float-right",attrs:{copyKey:e.babyDetail.family_member.id}})],1)],1),a("ServiceInfo",{attrs:{serviceInfo:e.babyDetail.fd_contract_info,department:e.babyDetail.family_member.type,fdProduct:e.babyDetail.fd_product}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showDetail,expression:"showDetail"}]},[a("BabyCard",{attrs:{isShow:e.showDetail,department:e.babyDetail.family_member.type,babyDetail:e.babyDetail}})],1)],1)],1)},r=[],n=a("db72"),i=a("2f62"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShow?a("div",{staticClass:"baby-info-card"},[e.userInfoItem.length?a("div",e._l(e.userInfoItem,(function(t,s){return a("div",{key:s},[t.show?a("span",[t.label?a("span",[e._v(e._s(t.label))]):e._e(),t.value?a("span",{staticClass:"span-val"},[e._v("\n          "+e._s(t.value)+"\n        ")]):e._e(),t.html?a("p",{staticClass:"span-val",domProps:{innerHTML:e._s(t.html)}}):e._e()]):e._e()])})),0):e._e(),a("div",{staticClass:"margin-top-10"},[a("span",{staticClass:"add_remark_btn",class:"hm"!==e.role?"notAllow":"",on:{click:e.showAddTextareaFun}},[e._v(e._s(e.tipContent)+"备注（内部可见、不限字数）")])]),e.haveRemark&&!e.showAddTextarea?a("div",[e.remark?a("p",{staticClass:"remark_text"},[e._v(e._s(e.remark))]):e._e(),e.remarkCreatedAt?a("p",{staticClass:"created_at"},[e._v("\n      "+e._s(e.formatTime(e.remarkCreatedAt))+"\n    ")]):e._e()]):e._e(),e.showAddTextarea?a("div",{staticClass:"clearfix"},[a("el-input",{attrs:{type:"textarea",rows:"4","aria-placeholder":"请填写备注信息"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),a("el-button",{staticClass:"float-right margin-top-10",attrs:{type:"primary",size:"mini"},on:{click:e.saveRemarkFun}},[e._v("保存")])],1):e._e()]):e._e()},l=[],c=a("802d"),u=a("7a26"),m=a("8975"),d={name:"BabyInfoCard",props:{babyDetail:{type:Object,deault:function(){}},isShow:{type:Boolean,default:!1},department:{type:String,default:"erke"}},data:function(){return{userInfoItem:[],showAddTextarea:!1,tipContent:"",remark:"",remarkCreatedAt:"",haveRemark:""}},computed:Object(n["a"])({},Object(i["c"])({role:"role"})),watch:{babyDetail:{handler:function(){this.init()},deep:!0},isShow:function(){this.init()}},created:function(){this.init()},methods:{fenmianModeTxt:m["fenmianModeTxt"],feedModeTxt:m["feedModeTxt"],getChankeInfo:u["b"],init:function(){this.isShow&&(this.initCard(),"chanke"===this.department?this.getChankeData(this.babyDetail):this.getErkeData(this.babyDetail))},curStageTxt:m["curStageTxt"],booleanToTxt:m["booleanToTxt"],measureToTxt:m["measureToTxt"],getErkeData:function(e){this.userInfoItem=[];var t="",a=e.family_member;if(a.health_record&&a.health_record.baby_detail_info){var s=a.health_record.baby_detail_info.wyfs;s&&s.length&&(t=s.join("，"))}else t="未知";var r=[{show:!0,label:"性别：",value:1===a.gender?"男":2===a.gender?"女":"未知"},{show:!0,label:"出生孕周：",value:a.gestational_weeks||0===a.gestational_weeks?a.gestational_weeks+"周"+a.gestational_days+"天":""},{show:!0,label:"出生日期：",value:this.formatTime(a.birthday,"{y}-{m}-{d}")},{show:!0,label:"月龄：",value:a.age_of_month},{show:!0,label:"喂养方式：",value:t}];this.userInfoItem=r},getChankeData:function(e){this.userInfoItem=[];var t=e.family_member,a=t.chanke?t.chanke.cur_stage:t.cur_stage,s=e.health_record?e.health_record:t.health_record;if(s){var r=Object.assign({},s.chanke_basic_info.yuejing,s.chanke_basic_info.chanke_history,s.chanke_byz,s.chanke_hyz,s.chanke_crq);this.userInfoItem=this.getChankeInfo(a,r,"","",!0)}},initCard:function(){var e=this.babyDetail.family_member;this.showAddTextarea=!1,this.haveRemark=e&&e.remark?e.remark.content:"",this.remark=e&&e.remark?e.remark.content:"",this.remark&&(this.remarkCreatedAt=e.remark.created_at),this.tipContent=this.haveRemark?"修改":"添加"},showAddTextareaFun:function(){"hm"===this.role&&(this.showAddTextarea=!0)},hideAddTextareaFun:function(){this.showAddTextarea=!1},saveRemarkFun:function(){var e=this;if(this.remark){var t=this.babyDetail.family_member._id;Object(c["a"])(t,{remark:this.remark}).then((function(t){t&&t.data.result&&(e.hideAddTextareaFun(),e.haveRemark=!0,e.remark=t.data.remark.content,e.remarkCreatedAt=t.data.remark.created_at,e.tipContent="修改",-1!==e.$route.path.indexOf("diagnose")&&e.$store.dispatch("chat/getActivedUserInfo"));var a="保存";e.$message({type:t.data.result?"success":"error",message:t.data.result?a+"成功":a+"失败"})}))}else this.$message({type:"warning",message:"备注不能为空"})}}},h=d,p=a("2877"),b=Object(p["a"])(h,o,l,!1,null,null,null),f=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.serviceInfo?a("div",[a("p",{staticClass:"margin-top-20 margin-bottom-6"},[e._v("\n    套餐信息\n  ")]),e._v("\n  生效中的套餐："+e._s(e.fdProduct?e.fdProduct.name:"-")+"\n  "),a("el-tooltip",{staticClass:"package",attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"package-detail"},["chanke"!==e.department?a("div",[e._v("\n          绑定医生："+e._s(e.serviceInfo.doctor?e.serviceInfo.doctor.name:"无")+"\n        ")]):e._e(),"chanke"!==e.department?a("div",[e._v("\n          绑定营养师："+e._s(e.serviceInfo.dietician?e.serviceInfo.dietician.name:"无")+"\n        ")]):e._e(),a("div",[e._v("\n          "+e._s("chanke"===e.department?"绑定产科医生：":"绑定健康管理师：")+"\n          "+e._s(e.serviceInfo.hm?e.serviceInfo.hm.name:"无")+"\n        ")]),a("p",{staticClass:"color-blue",staticStyle:{margin:"10px 0 0"}},[e._v("\n          当前套餐中咨询转诊余量：\n        ")]),e.serviceTransfer.length?a("div",e._l(e.serviceTransfer,(function(t,s){return a("div",{key:s},[e.serverFilter(t).key?a("p",[a("span",{staticStyle:{display:"inline-block","min-width":"150px"}},[e._v("\n                "+e._s(e.serverFilter(t).key)+"：\n              ")]),a("span",[e._v(" "+e._s(e.serviceInfo[t]))])]):e._e()])})),0):e._e(),a("div",[a("p",{staticStyle:{margin:"10px 0 0"}},[e._v("套餐包含其他服务：")]),e._l(e.serviceInfo.service_items,(function(t,s){return a("span",{key:"service_items"+s},[e._v("\n            "+e._s(t))])}))],2)])]),a("i",{staticClass:"el-icon-info"})]),a("div",[e._v("\n    服务有效期：\n    "+e._s(e.formatTime(e.serviceInfo.started_at,"{y}-{m}-{d}")||"无")+"到"+e._s(e.formatTime(e.serviceInfo.ended_at,"{y}-{m}-{d}")||"无")+"\n  ")])],1):e._e()},g=[],_={props:{serviceInfo:{type:Object,default:function(){}},fdProduct:{type:Object,default:function(){}},department:{type:String,default:"erke"}},data:function(){return{serviceTransferNull:!0,serviceTransfer:[]}},created:function(){this.getServiceByDepartment()},watch:{department:function(e){this.getServiceByDepartment()}},methods:{getServiceByDepartment:function(){"chanke"===this.department?this.serviceTransfer=["total","month","common_text_total","common_text_month","common_voice_total","common_voice_month"]:"erke"===this.department&&(this.serviceTransfer=["total","month","doctor_text_total","doctor_text_month","dietician_text_total","dietician_text_month","doctor_voice_month","doctor_voice_total"])},serverFilter:function(e){var t={key:""};switch(e){case"total":"chanke"===this.department?t.key="产科医生咨询总次数":t.key="咨询总次数";break;case"month":"chanke"===this.department?t.key="本月产科医生咨询次数":t.key="本月咨询次数";break;case"doctor_text_total":t.key="图文转诊医生总次数";break;case"doctor_text_month":t.key="本月图文转诊医生次数";break;case"dietician_text_total":t.key="图文转诊营养师总次数";break;case"dietician_text_month":t.key="本月图文转诊营养师次数";break;case"doctor_voice_month":t.key="本月电话转诊医生次数";break;case"doctor_voice_total":t.key="电话转诊医生总次数";break;case"common_text_total":t.key="图文转诊其他医生总次数";break;case"common_text_month":t.key="本月图文转诊其他医生次数";break;case"common_voice_total":t.key="电话转诊其他医生总次数";break;case"common_voice_month":t.key="本月电话转诊其他医生次数";break;default:return t}return t}}},v=_,w=Object(p["a"])(v,y,g,!1,null,null,null),x=w.exports,F=a("ed08"),k={components:{BabyCard:f,ServiceInfo:x},props:{babyDetail:{type:Object,default:function(){}},department:{type:String,default:""},isShow:{type:Boolean,default:!1}},data:function(){return{showDetail:!1,pathName:window.location.pathname}},watch:{"babyDetail.is_asking":function(e){!0===e&&(this.showDetail=!0)},isShow:function(e){this.showDetail=e},activedBabyId:function(e,t){t===this.babyDetail.family_member._id&&this.saveDataToLocal(t,this.showDetail);var a=Object(F["i"])("babyInfo"+e);if(a){var s=JSON.parse(a);this.showDetail=s.showDetail}else this.showDetail=!1}},computed:Object(n["a"])({},Object(i["c"])(["activedBaby","activedBabyId"])),created:function(){this.babyDetail.is_asking&&(this.showDetail=!0),this.showDetail=this.isShow},methods:{saveDataToLocal:function(e,t){var a=e,s={babyId:a,showDetail:t,remark:""},r=JSON.stringify(s);Object(F["j"])("babyInfo"+a,r)},showDetailFun:function(){this.showDetail=!this.showDetail},handleBaby:function(e){if(!this.department){var t={clickTag:"baby",session_id:e.session_id,userId:"",babyId:e.family_member?e.family_member._id:""};this.$store.dispatch("setCustomerInfo",t)}}}},C=k,j=(a("6c2c"),Object(p["a"])(C,s,r,!1,null,null,null));t["a"]=j.exports},3056:function(e,t,a){"use strict";var s=a("2d64"),r=a.n(s);r.a},"31ce":function(e,t,a){},"33b7":function(e,t,a){"use strict";var s=a("3523"),r=a.n(s);r.a},"33eb":function(e,t,a){},3523:function(e,t,a){},"38e1":function(e,t,a){"use strict";var s=a("f60f"),r=a.n(s);r.a},"3acd":function(e,t,a){"use strict";a.d(t,"i",(function(){return r})),a.d(t,"l",(function(){return n})),a.d(t,"m",(function(){return i})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"o",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"k",(function(){return m})),a.d(t,"f",(function(){return d})),a.d(t,"e",(function(){return h})),a.d(t,"h",(function(){return p})),a.d(t,"n",(function(){return b})),a.d(t,"c",(function(){return f})),a.d(t,"j",(function(){return y})),a.d(t,"b",(function(){return g}));var s=a("b775");function r(e){return Object(s["a"])({url:"/crm/customer/list",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/crm/user/list",method:"get",params:e})}function i(e){return Object(s["a"])({url:"/crm/user/".concat(e),method:"get",params:e})}function o(e){return Object(s["a"])({url:"/crm/customer/".concat(e,"/detail"),method:"get",params:e})}function l(e){return Object(s["a"])({url:"/crm/customer",method:"post",data:e})}function c(e,t){return Object(s["a"])({url:"/crm/customer/".concat(t,"/update"),method:"put",data:e})}function u(e,t){return Object(s["a"])({url:"/crm/customer/".concat(t,"/relative"),method:"put",data:e})}function m(e,t){return Object(s["a"])({url:"/crm/customer/".concat(e,"/orders"),method:"get",params:t})}function d(e){return Object(s["a"])({url:"/crm/customer/".concat(e,"/brief_info"),method:"get"})}function h(e,t){return Object(s["a"])({url:"/crm/customer/".concat(e,"/path"),method:"post",data:t})}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])({url:"/crm/customer/".concat(e,"/path/list"),method:"get",params:t})}function b(){return Object(s["a"])({url:"/crm/basic/customer/supervisor/options",method:"get"})}function f(e){return Object(s["a"])({url:"/crm/customer/change_supervisor",method:"put",data:e})}function y(e){return Object(s["a"])({url:"/crm/customer/".concat(e,"/creator_options"),method:"get"})}function g(e){return Object(s["a"])({url:"/crm/customer/".concat(e,"/cancel_relative"),method:"put"})}},"3bc1":function(e,t,a){"use strict";var s=a("2c79"),r=a.n(s);r.a},"3f52":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer-info"},["chat"!==e.pageType?a("div",[a("p",{staticClass:"color-black margin-right-10 margin-bottom-10"},[e._v("用户信息")])]):e._e(),a("el-row",{staticClass:"clearfix",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:"chat"===e.pageType?6:3}},[a("el-avatar",{key:e.user.user_id,attrs:{size:"large",src:e.user.avatar}})],1),a("el-col",{attrs:{span:"chat"===e.pageType?14:15}},[e.remarkEditable?a("input",{directives:[{name:"model",rawName:"v-model",value:e.remarkName,expression:"remarkName"},{name:"myfocus",rawName:"v-myfocus"}],staticStyle:{width:"100px"},domProps:{value:e.remarkName},on:{blur:e.onRemarkBlur,input:function(t){t.target.composing||(e.remarkName=t.target.value)}}}):a("div",{staticStyle:{"font-size":"14px",color:"#17233D"},attrs:{title:e.edit&&"hm"===e.role?"双击修改备注名":""},on:{dblclick:function(t){return e.editRemark(e.user)}}},[a("span",[e._v("\n          "+e._s(e.user.name||"-")+"\n        ")])]),a("el-row",[a("span",{staticClass:"span-key"},[e._v("ID：")]),a("span",{staticClass:"span-val"},[e._v(e._s(e.user.user_id||"-"))])])],1),a("el-col",{attrs:{span:4}},[a("my-copy",{staticClass:"float-right",attrs:{copyKey:e.user.name}}),a("my-copy",{staticClass:"float-right",attrs:{copyKey:e.user.user_id}})],1)],1),a("el-row",{staticStyle:{margin:"6px 0"},attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:18}},[a("span",{staticClass:"span-key"},[e._v("昵称：")]),e._v(e._s(e.user.nickname||e.user.nick_name||"-")+"\n    ")]),a("my-copy",{staticClass:"float-right",style:"chat"!==e.pageType?"margin-right:11px":"",attrs:{copyKey:e.user.nickname||e.user.nick_name}})],1),a("el-row",[a("div",[a("span",{staticClass:"add_remark_btn",class:"hm"!==e.role?"notAllow":"",on:{click:e.showAddTextareaFun}},[e._v(e._s(e.tipContent)+"备注（最多50字）")])]),e.haveRemark&&!e.showAddTextarea?a("div",[e.remark?a("p",{staticClass:"remark_text"},[e._v(e._s(e.remark))]):e._e(),e.user.remark&&e.user.remark.created_at?a("p",{staticClass:"created_at"},[e._v("\n        "+e._s(e.formatTime(e.user.remark.created_at))+"\n      ")]):e._e()]):e._e(),e.showAddTextarea?a("div",{staticClass:"clearfix"},[a("el-input",{attrs:{type:"textarea",rows:"3",maxlength:"50","show-word-limit":"","aria-placeholder":"请填写备注信息"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),a("el-button",{staticClass:"float-right margin-top-10",attrs:{type:"primary",size:"mini"},on:{click:e.saveRemarkFun}},[e._v("保存")])],1):e._e()])],1)},r=[],n=(a("7f7f"),a("96cf"),a("3b8d")),i=a("db72"),o=a("2f62"),l=a("802d"),c=a("18e9"),u={name:"UserInfo",props:{user:{type:Object,default:function(){}},pageType:{type:String,default:"chat"}},data:function(){return{showAddTextarea:!1,tipContent:"",remark:"",haveRemark:"",remarkEditable:!1,remarkName:"",edit:!0}},components:{MyCopy:c["a"]},computed:Object(i["a"])({},Object(o["c"])(["role","userInfo","activedUserId"])),watch:{role:function(){this.edit="hm"===this.role},user:function(e){this.remark=e&&e.remark?e.remark.content:"",this.haveRemark=e&&e.remark?e.remark.content:"",this.tipContent=this.haveRemark?"修改":"添加",this.hideAddTextareaFun();var t=window.localStorage.getItem("editStatus"+this.activedUserId),a=window.localStorage.getItem("user"+this.activedUserId+"remark");!0===t&&(this.showAddTextareaFun(),this.remark=a)},showAddTextarea:function(e){e?(window.localStorage.setItem("editStatus"+this.activedUserId,e),window.localStorage.setItem("user"+this.activedUserId+"remark",this.remark)):(window.localStorage.removeItem("editStatus"+this.activedUserId),window.localStorage.removeItem("user"+this.activedUserId+"remark"))}},created:function(){},methods:{changeChatUserRemarkFun:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={remark:t?"":this.remark,remark_name:t||""},e.next=3,Object(l["b"])(this.user._id,a);case 3:s=e.sent,r=s.data,this.$message({type:r.result?"success":"error",message:r.result?"保存成功":r.message}),r&&r.result&&(t||(this.hideAddTextareaFun(),this.haveRemark=!0,this.tipContent="修改"),-1!==this.$route.path.indexOf("diagnose")&&this.$store.dispatch("chat/getActivedUserInfo"),this.$emit("updateInfo"));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),showAddTextareaFun:function(){"hm"===this.role&&(this.showAddTextarea=!0)},hideAddTextareaFun:function(){this.showAddTextarea=!1},saveRemarkFun:function(){this.remark?this.changeChatUserRemarkFun():this.$message({type:"warning",message:"备注不能为空"})},editRemark:function(e){"hm"===this.role&&this.edit&&(this.remarkEditable=!0,this.remarkName=e.name)},onRemarkBlur:function(){this.remarkEditable=!1,this.changeChatUserRemarkFun(this.remarkName)}}},m=u,d=(a("6068"),a("2877")),h=Object(d["a"])(m,s,r,!1,null,"01fd87a9",null);t["a"]=h.exports},"408a":function(e,t,a){},"4ed2":function(e,t,a){"use strict";var s=a("c50f"),r=a.n(s);r.a},"57ee":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"file-detail"},[!e.babyId||e.isChatPage?a("div",{staticClass:"baby-info"},[a("el-avatar",{attrs:{size:32,src:e.babyInfo.user&&e.babyInfo.avatar}}),a("span",{staticClass:"user-name"},[e._v("用户： "+e._s(e.babyInfo.user.name)+"  "),e.replace?a("svg-icon",{attrs:{"icon-class":"replace"}}):e._e()],1),a("span",{staticClass:"baby-name"},[e._v("宝宝： "+e._s(e.babyInfo.name))])],1):e._e(),a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"新生儿基本信息",name:"first"}},[a("newborn",{attrs:{isMyUser:e.isMyUser,isChatPage:e.isChatPage,newborn:e.newborn,"baby-info":e.babyInfo,"baby-id":!!e.babyId}})],1),a("el-tab-pane",{attrs:{label:"母亲孕期情况",name:"second"}},[a("pregnancy-situation",{attrs:{isMyUser:e.isMyUser,pregnancy:e.pregnancy,"baby-id":!!e.babyId}})],1),a("el-tab-pane",{attrs:{label:"家庭个人资料",name:"third"}},[a("personal-information",{attrs:{isMyUser:e.isMyUser,person:e.person,"baby-id":!!e.babyId}})],1)],1)],1)},r=[],n=(a("96cf"),a("3b8d")),i=a("db72"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"newbornForm",staticClass:"demo-newbornForm newborn-form",attrs:{model:e.newbornForm,rules:e.rules,"label-width":"110px"}},[e.babyId?e._e():a("el-form-item",{attrs:{label:"宝宝乳名：",prop:"name"}},[a("el-input",{attrs:{maxlength:"5","show-word-limit":"",placeholder:"请输入"},model:{value:e.newbornForm.name,callback:function(t){e.$set(e.newbornForm,"name",t)},expression:"newbornForm.name"}})],1),a("el-form-item",{attrs:{label:"宝宝性别：",prop:"gender"}},[a("el-radio-group",{model:{value:e.newbornForm.gender,callback:function(t){e.$set(e.newbornForm,"gender",t)},expression:"newbornForm.gender"}},[a("el-radio",{attrs:{label:"1"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),a("el-form-item",{attrs:{label:"民族：",prop:"famous"}},[a("el-input",{attrs:{maxlength:"10","show-word-limit":"",placeholder:"请输入"},model:{value:e.newbornForm.famous,callback:function(t){e.$set(e.newbornForm,"famous",t)},expression:"newbornForm.famous"}})],1),a("el-form-item",{attrs:{label:"出生日期：",prop:"birthday"}},[a("el-input",{attrs:{disabled:""},model:{value:e.newbornForm.birthday,callback:function(t){e.$set(e.newbornForm,"birthday",t)},expression:"newbornForm.birthday"}})],1),a("el-form-item",{attrs:{label:"宝宝月龄：",prop:"monthAge"}},[a("el-input",{attrs:{disabled:""},model:{value:e.newbornForm.monthAge,callback:function(t){e.$set(e.newbornForm,"monthAge",t)},expression:"newbornForm.monthAge"}})],1),a("el-form-item",{attrs:{label:"预产期：",prop:"pregnancy_ended_at"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:e.getAgeMonth},model:{value:e.newbornForm.pregnancy_ended_at,callback:function(t){e.$set(e.newbornForm,"pregnancy_ended_at",t)},expression:"newbornForm.pregnancy_ended_at"}})],1),a("el-form-item",{attrs:{label:"出生孕周：",prop:"csyz"}},[a("el-input",{attrs:{placeholder:"请输入0-42的整数"},on:{input:function(t){return e.getNewNum(t,"gestational_weeks")},keyup:function(e){return e.replace(/^(0+)|[^\d]+/g,"")}},model:{value:e.newbornForm.gestational_weeks,callback:function(t){e.$set(e.newbornForm,"gestational_weeks",t)},expression:"newbornForm.gestational_weeks"}}),e._v("   周   \n    "),a("el-input",{attrs:{placeholder:"请输入0-6的整数"},on:{input:function(t){return e.getNewNum(t,"gestational_days")},keyup:function(e){return e.replace(/^(0+)|[^\d]+/g,"")}},model:{value:e.newbornForm.gestational_days,callback:function(t){e.$set(e.newbornForm,"gestational_days",t)},expression:"newbornForm.gestational_days"}}),e._v("   天\n  ")],1),a("el-form-item",{attrs:{label:"是否早产：",prop:"sfzc"}},[a("el-radio-group",{model:{value:e.newbornForm.sfzc,callback:function(t){e.$set(e.newbornForm,"sfzc",t)},expression:"newbornForm.sfzc"}},[a("el-radio",{attrs:{label:"否"}}),a("el-radio",{attrs:{label:"是"}})],1),"是"===e.newbornForm.sfzc?a("el-form",{staticClass:"demo-newbornForm",staticStyle:{"margin-top":"20px"},attrs:{model:e.newbornForm,rules:e.rules,"label-width":"180px"}},[a("el-form-item",{staticClass:"m-b-20",attrs:{label:"矫正月龄：",prop:"jzyl"}},[a("el-input",{attrs:{disabled:""},model:{value:e.newbornForm.jzyl,callback:function(t){e.$set(e.newbornForm,"jzyl",t)},expression:"newbornForm.jzyl"}})],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"住院天数：",prop:"zyts"}},[a("el-input",{attrs:{placeholder:"请输入自然数"},on:{input:function(t){return e.getNewNum(t,"zyts")},keyup:function(e){return e.replace(/^(0+)|[^\d]+/g,"")}},model:{value:e.newbornForm.zyts,callback:function(t){e.$set(e.newbornForm,"zyts",t)},expression:"newbornForm.zyts"}})],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"住院时是否静脉营养：",prop:"sfjmyy"}},[a("el-radio-group",{model:{value:e.newbornForm.sfjmyy,callback:function(t){e.$set(e.newbornForm,"sfjmyy",t)},expression:"newbornForm.sfjmyy"}},[a("el-radio",{attrs:{label:"否"}}),a("el-radio",{attrs:{label:"是"}})],1),"是"===e.newbornForm.sfjmyy?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"sfjmyyDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.sfjmyyDescription,callback:function(t){e.$set(e.newbornForm,"sfjmyyDescription",t)},expression:"newbornForm.sfjmyyDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"是否使用呼吸机：",prop:"sfsyhxj"}},[a("el-radio-group",{model:{value:e.newbornForm.sfsyhxj,callback:function(t){e.$set(e.newbornForm,"sfsyhxj",t)},expression:"newbornForm.sfsyhxj"}},[a("el-radio",{attrs:{label:"否"}}),a("el-radio",{attrs:{label:"是"}})],1),"是"===e.newbornForm.sfsyhxj?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"sfsyhxjDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.sfsyhxjDescription,callback:function(t){e.$set(e.newbornForm,"sfsyhxjDescription",t)},expression:"newbornForm.sfsyhxjDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",staticStyle:{"max-width":"980px"},attrs:{label:"眼底筛查结果：",prop:"ydscjg"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.ydscjg,callback:function(t){e.$set(e.newbornForm,"ydscjg",t)},expression:"newbornForm.ydscjg"}}),a("div",{staticClass:"upload-image"},[e.newbornForm.imageUrl?a("div",{staticClass:"img"},[a("img",{attrs:{width:"100%",height:"100%",src:e.newbornForm.imageUrl,alt:"筛查结果"}}),a("i",{staticClass:"el-icon-error",on:{click:function(t){e.newbornForm.imageUrl=""}}})]):a("div",{staticClass:"img-box"},[a("i",{staticClass:"el-icon-circle-plus-outline"}),a("p",[e._v("上传图片")])])]),a("el-upload",{staticClass:"upload-demo",attrs:{action:"","http-request":e.uploadFunc,"before-upload":e.beforeAvatarUpload,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"晶状体后纤维增生性眼病：",prop:"jzthxwzsxyb"}},[a("el-radio-group",{model:{value:e.newbornForm.jzthxwzsxyb,callback:function(t){e.$set(e.newbornForm,"jzthxwzsxyb",t)},expression:"newbornForm.jzthxwzsxyb"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1)],1),a("el-form-item",{staticStyle:{"margin-top":"20px","max-width":"980px"},attrs:{label:"其它：",prop:"sfzcOther"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.sfzcOther,callback:function(t){e.$set(e.newbornForm,"sfzcOther",t)},expression:"newbornForm.sfzcOther"}})],1)],1):e._e()],1),a("el-form-item",{attrs:{label:"宝宝胎数：",prop:"bbts"}},[a("el-radio-group",{model:{value:e.newbornForm.bbts,callback:function(t){e.$set(e.newbornForm,"bbts",t)},expression:"newbornForm.bbts"}},[a("el-radio",{attrs:{label:"一胎"}}),a("el-radio",{attrs:{label:"二胎"}}),a("el-radio",{attrs:{label:"多胎"}})],1)],1),a("el-form-item",{attrs:{label:"出生体重：",prop:"cstz"}},[a("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.setNumber(t,"tz")},blur:function(t){return e.toFixedNum(t,"tz")},change:function(t){return e.toFixedNum(t,"tz")}},model:{value:e.newbornForm.cstz,callback:function(t){e.$set(e.newbornForm,"cstz",t)},expression:"newbornForm.cstz"}}),e._v("   kg\n  ")],1),a("el-form-item",{attrs:{label:"出生身长：",prop:"cssc"}},[a("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.setNumber(t,"sc")},blur:function(t){return e.toFixedNum(t,"tz")},change:function(t){return e.toFixedNum(t,"sc")}},model:{value:e.newbornForm.cssc,callback:function(t){e.$set(e.newbornForm,"cssc",t)},expression:"newbornForm.cssc"}}),e._v("   cm\n  ")],1),a("el-form-item",{attrs:{label:"出身头围：",prop:"cstw"}},[a("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.setNumber(t,"tw")},blur:function(t){return e.toFixedNum(t,"tz")},change:function(t){return e.toFixedNum(t,"tw")}},model:{value:e.newbornForm.cstw,callback:function(t){e.$set(e.newbornForm,"cstw",t)},expression:"newbornForm.cstw"}}),e._v("   cm\n  ")],1),a("el-form-item",{attrs:{label:"出生有无异常：",prop:"csywyc"}},[a("el-radio-group",{model:{value:e.newbornForm.csywyc,callback:function(t){e.$set(e.newbornForm,"csywyc",t)},expression:"newbornForm.csywyc"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.newbornForm.csywyc?a("el-form",{staticClass:"demo-newbornForm",staticStyle:{"margin-top":"20px"},attrs:{model:e.newbornForm,rules:e.rules,"label-width":"170px"}},[a("el-form-item",{staticClass:"m-b-20",attrs:{label:"Apgar评分：",prop:"apgar"}},[a("p",{staticClass:"minute"},[e._v("\n          1分钟   "),a("el-input",{attrs:{placeholder:"请输入正整数"},on:{input:function(t){return e.getInteger(t,"one")},keyup:function(e){return e.replace(/^(0+)|[^\d]+/g,"")}},model:{value:e.newbornForm.apgar.one,callback:function(t){e.$set(e.newbornForm.apgar,"one",t)},expression:"newbornForm.apgar.one"}})],1),a("p",{staticClass:"minute"},[e._v("\n          5分钟   "),a("el-input",{attrs:{placeholder:"请输入正整数"},on:{input:function(t){return e.getInteger(t,"five")},keyup:function(e){return e.replace(/^(0+)|[^\d]+/g,"")}},model:{value:e.newbornForm.apgar.five,callback:function(t){e.$set(e.newbornForm.apgar,"five",t)},expression:"newbornForm.apgar.five"}})],1),a("p",{staticClass:"minute"},[e._v("\n          10分钟   "),a("el-input",{attrs:{placeholder:"请输入正整数"},on:{input:function(t){return e.getInteger(t,"ten")},keyup:function(e){return e.replace(/^(0+)|[^\d]+/g,"")}},model:{value:e.newbornForm.apgar.ten,callback:function(t){e.$set(e.newbornForm.apgar,"ten",t)},expression:"newbornForm.apgar.ten"}})],1)]),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"生后窒息：",prop:"shzx"}},[a("el-radio-group",{model:{value:e.newbornForm.shzx,callback:function(t){e.$set(e.newbornForm,"shzx",t)},expression:"newbornForm.shzx"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.newbornForm.shzx?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"程度：",prop:"shzxcd"}},[a("el-radio-group",{model:{value:e.newbornForm.shzxcd,callback:function(t){e.$set(e.newbornForm,"shzxcd",t)},expression:"newbornForm.shzxcd"}},[a("el-radio",{attrs:{label:"轻"}}),a("el-radio",{attrs:{label:"中"}}),a("el-radio",{attrs:{label:"重度"}})],1)],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"颅内出血：",prop:"lncx"}},[a("el-radio-group",{model:{value:e.newbornForm.lncx,callback:function(t){e.$set(e.newbornForm,"lncx",t)},expression:"newbornForm.lncx"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.newbornForm.lncx?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"程度：",prop:"lncxcd"}},[a("el-radio-group",{model:{value:e.newbornForm.lncxcd,callback:function(t){e.$set(e.newbornForm,"lncxcd",t)},expression:"newbornForm.lncxcd"}},[a("el-radio",{attrs:{label:"轻"}}),a("el-radio",{attrs:{label:"中"}}),a("el-radio",{attrs:{label:"重度"}})],1)],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"宫内窘迫：",prop:"gnjp"}},[a("el-radio-group",{model:{value:e.newbornForm.gnjp,callback:function(t){e.$set(e.newbornForm,"gnjp",t)},expression:"newbornForm.gnjp"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1)],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"新生儿黄疸：",prop:"xsehd"}},[a("el-radio-group",{model:{value:e.newbornForm.xsehd,callback:function(t){e.$set(e.newbornForm,"xsehd",t)},expression:"newbornForm.xsehd"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.newbornForm.xsehd?[a("el-form-item",{staticClass:"description-way",staticStyle:{"margin-top":"20px","max-width":"980px"},attrs:{label:"诊断方法：",prop:"hdzdff"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.hdzdff,callback:function(t){e.$set(e.newbornForm,"hdzdff",t)},expression:"newbornForm.hdzdff"}})],1),a("el-form-item",{staticClass:"description-way",staticStyle:{"margin-top":"20px","max-width":"980px"},attrs:{label:"治疗方法：",prop:"hdzlff"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.hdzlff,callback:function(t){e.$set(e.newbornForm,"hdzlff",t)},expression:"newbornForm.hdzlff"}})],1)]:e._e()],2),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"呼吸窘迫综合征(RDS)：",prop:"RDS"}},[a("el-radio-group",{model:{value:e.newbornForm.RDS,callback:function(t){e.$set(e.newbornForm,"RDS",t)},expression:"newbornForm.RDS"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1)],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"贫血：",prop:"anemia"}},[a("el-radio-group",{model:{value:e.newbornForm.anemia,callback:function(t){e.$set(e.newbornForm,"anemia",t)},expression:"newbornForm.anemia"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.newbornForm.anemia?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"anemiaDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.anemiaDescription,callback:function(t){e.$set(e.newbornForm,"anemiaDescription",t)},expression:"newbornForm.anemiaDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"惊厥：",prop:"horror"}},[a("el-radio-group",{model:{value:e.newbornForm.horror,callback:function(t){e.$set(e.newbornForm,"horror",t)},expression:"newbornForm.horror"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.newbornForm.horror?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"horrorDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.horrorDescription,callback:function(t){e.$set(e.newbornForm,"horrorDescription",t)},expression:"newbornForm.horrorDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"感染：",prop:"infection"}},[a("el-radio-group",{model:{value:e.newbornForm.infection,callback:function(t){e.$set(e.newbornForm,"infection",t)},expression:"newbornForm.infection"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.newbornForm.infection?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"infectionDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.infectionDescription,callback:function(t){e.$set(e.newbornForm,"infectionDescription",t)},expression:"newbornForm.infectionDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"出生缺陷：",prop:"csqx"}},[a("el-radio-group",{model:{value:e.newbornForm.csqx,callback:function(t){e.$set(e.newbornForm,"csqx",t)},expression:"newbornForm.csqx"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.newbornForm.csqx?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"csqxDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.csqxDescription,callback:function(t){e.$set(e.newbornForm,"csqxDescription",t)},expression:"newbornForm.csqxDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"听力筛查：",prop:"tlsc"}},[a("el-radio-group",{model:{value:e.newbornForm.tlsc,callback:function(t){e.$set(e.newbornForm,"tlsc",t)},expression:"newbornForm.tlsc"}},[a("el-radio",{attrs:{label:"正常"}}),a("el-radio",{attrs:{label:"异常"}})],1),"异常"===e.newbornForm.tlsc?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"tlscDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.tlscDescription,callback:function(t){e.$set(e.newbornForm,"tlscDescription",t)},expression:"newbornForm.tlscDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"新生儿筛查(足跟血)：",prop:"zgx"}},[a("el-radio-group",{model:{value:e.newbornForm.zgx,callback:function(t){e.$set(e.newbornForm,"zgx",t)},expression:"newbornForm.zgx"}},[a("el-radio",{attrs:{label:"正常"}}),a("el-radio",{attrs:{label:"异常"}})],1),"异常"===e.newbornForm.zgx?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"zgxDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.zgxDescription,callback:function(t){e.$set(e.newbornForm,"zgxDescription",t)},expression:"newbornForm.zgxDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",staticStyle:{"margin-top":"20px","max-width":"970px"},attrs:{label:"其它：",prop:"cswycOther"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.cswycOther,callback:function(t){e.$set(e.newbornForm,"cswycOther",t)},expression:"newbornForm.cswycOther"}})],1)],1):e._e()],1),a("el-form-item",{attrs:{label:"喂养方式：",prop:"wyfs"}},[a("el-checkbox-group",{model:{value:e.newbornForm.wyfs,callback:function(t){e.$set(e.newbornForm,"wyfs",t)},expression:"newbornForm.wyfs"}},[a("el-checkbox",{attrs:{label:"母乳",name:"mr"}}),a("el-checkbox",{attrs:{label:"母乳+强化剂",name:"mrqhj"}}),a("el-checkbox",{attrs:{label:"配方奶粉",name:"pfnf"}}),a("el-checkbox",{attrs:{label:"混合喂养",name:"hhwy"}}),a("el-checkbox",{attrs:{label:"辅食",name:"fs"}})],1),a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"wyfsDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.wyfsDescription,callback:function(t){e.$set(e.newbornForm,"wyfsDescription",t)},expression:"newbornForm.wyfsDescription"}})],1)],1),a("el-form-item",{attrs:{label:"疫苗接种：",prop:"ymjz"}},[a("el-radio-group",{model:{value:e.newbornForm.ymjz,callback:function(t){e.$set(e.newbornForm,"ymjz",t)},expression:"newbornForm.ymjz"}},[a("el-radio",{attrs:{label:"按时"}}),a("el-radio",{attrs:{label:"未按时"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"请上传疫苗本：",prop:"uploadVaccine"}},[a("div",{staticClass:"upload-image-list"},[e._l(e.newbornForm.imageUrlList,(function(t,s){return a("div",{key:s,staticClass:"img"},[a("img",{attrs:{width:"100%",height:"100%",src:t,alt:"疫苗本"}}),a("i",{staticClass:"el-icon-error",on:{click:function(t){return e.removeImg(s)}}})])})),a("div",{staticClass:"img-box"},[a("i",{staticClass:"el-icon-circle-plus-outline"}),a("p",[e._v("最多10张")])])],2),a("el-upload",{staticClass:"upload-demo",attrs:{action:"","http-request":e.uploadListFunc,"before-upload":e.beforeAvatarUpload,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary",disabled:e.newbornForm.imageUrlList.length>=10}},[e._v("上传图片")])],1),"未按时"===e.newbornForm.ymjz?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"ymjzDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.newbornForm.ymjzDescription,callback:function(t){e.$set(e.newbornForm,"ymjzDescription",t)},expression:"newbornForm.ymjzDescription"}})],1):e._e()],1)],1),!e.babyId||e.isMyUser?a("el-form-item",{staticClass:"confirm"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("newbornForm")}}},[e._v("修改并保存")])],1):e._e()],1)},l=[],c=(a("c5f6"),a("7f7f"),a("91b6")),u=a("7b1f"),m={props:{newborn:{type:[Object,String],default:""},babyInfo:{type:[Object,String],default:""},babyId:{type:Boolean,default:!1},isMyUser:{type:Boolean,default:!1},isChatPage:{type:Boolean,default:!1}},data:function(){return{newbornForm:{name:"",gender:"",famous:"",birthday:"",monthAge:"",pregnancy_ended_at:"",gestational_weeks:"",gestational_days:"",sfzc:"",jzyl:"",zyts:"",sfjmyy:"",sfjmyyDescription:"",sfsyhxj:"",sfsyhxjDescription:"",ydscjg:"",jzthxwzsxyb:"",sfzcOther:"",bbts:"",cstz:"",cssc:"",cstw:"",csywyc:"",apgar:{one:"",five:"",ten:""},shzx:"",shzxcd:"",lncx:"",lncxcd:"",gnjp:"",xsehd:"",hdzdff:"",hdzlff:"",RDS:"",anemia:"",anemiaDescription:"",horror:"",horrorDescription:"",infection:"",infectionDescription:"",csqx:"",csqxDescription:"",tlsc:"",tlscDescription:"",zgx:"",zgxDescription:"",cswycOther:"",wyfs:[],wyfsDescription:"",ymjz:"",ymjzDescription:"",imageUrl:"",imageUrlList:[]},rules:{name:[{required:!0,message:"请输入宝宝姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}]}}},watch:{newborn:function(){this.newborn&&(this.newbornForm={name:this.newborn.name||"",gender:this.newborn.gender||"",famous:this.newborn.famous||"",birthday:this.newborn.birthday||"",monthAge:this.newborn.monthAge||"",pregnancy_ended_at:this.newborn.pregnancy_ended_at||"",gestational_weeks:this.babyInfo.gestational_weeks||this.newborn.gestational_weeks,gestational_days:this.babyInfo.gestational_days||this.newborn.gestational_days,sfzc:this.newborn.sfzc||"",jzyl:this.newborn.jzyl||"",zyts:this.newborn.zyts||"",sfjmyy:this.newborn.sfjmyy||"",sfjmyyDescription:this.newborn.sfjmyyDescription||"",sfsyhxj:this.newborn.sfsyhxj||"",sfsyhxjDescription:this.newborn.sfsyhxjDescription||"",ydscjg:this.newborn.ydscjg||"",jzthxwzsxyb:this.newborn.jzthxwzsxyb||"",sfzcOther:this.newborn.sfzcOther||"",bbts:this.newborn.bbts||"",cstz:this.newborn.cstz||"",cssc:this.newborn.cssc||"",cstw:this.newborn.cstw||"",csywyc:this.newborn.csywyc||"",apgar:{one:this.newborn.apgar?this.newborn.apgar.one:"",five:this.newborn.apgar?this.newborn.apgar.five:"",ten:this.newborn.apgar?this.newborn.apgar.ten:""},shzx:this.newborn.shzx||"",shzxcd:this.newborn.shzxcd||"",lncx:this.newborn.lncx||"",lncxcd:this.newborn.lncxcd||"",gnjp:this.newborn.gnjp||"",xsehd:this.newborn.xsehd||"",hdzdff:this.newborn.hdzdff||"",hdzlff:this.newborn.hdzlff||"",RDS:this.newborn.RDS||"",anemia:this.newborn.anemia||"",anemiaDescription:this.newborn.anemiaDescription||"",horror:this.newborn.horror||"",horrorDescription:this.newborn.horrorDescription||"",infection:this.newborn.infection||"",infectionDescription:this.newborn.infectionDescription||"",csqx:this.newborn.csqx||"",csqxDescription:this.newborn.csqxDescription||"",tlsc:this.newborn.tlsc||"",tlscDescription:this.newborn.tlscDescription||"",zgx:this.newborn.zgx||"",zgxDescription:this.newborn.zgxDescription||"",cswycOther:this.newborn.cswycOther||"",wyfs:this.newborn.wyfs||[],wyfsDescription:this.newborn.wyfsDescription||"",ymjz:this.newborn.ymjz||"",ymjzDescription:this.newborn.ymjzDescription||"",imageUrl:this.newborn.imageUrl||"",imageUrlList:this.newborn.imageUrlList||[]}),this.newbornForm.pregnancy_ended_at&&this.getAgeMonth({day:this.newbornForm.pregnancy_ended_at})},babyInfo:function(){this.babyInfo&&(this.newbornForm.birthday=this.babyInfo.birthday?this.formatTime(this.babyInfo.birthday,"{y}-{m}-{d}"):"",this.newbornForm.monthAge=this.babyInfo.age_of_month,this.newbornForm.name=this.babyInfo.name,this.newbornForm.gender=this.babyInfo.gender+"")}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=22;break}return"否"===t.newbornForm.sfzc&&(t.newbornForm.jzyl="",t.newbornForm.zyts="",t.newbornForm.sfjmyy="",t.newbornForm.sfjmyyDescription="",t.newbornForm.sfsyhxj="",t.newbornForm.sfsyhxjDescription="",t.newbornForm.ydscjg="",t.newbornForm.jzthxwzsxyb="",t.newbornForm.sfzcOther="",t.newbornForm.imageUrl=""),"否"===t.newbornForm.sfjmyy&&(t.newbornForm.sfjmyyDescription=""),"否"===t.newbornForm.sfsyhxj&&(t.newbornForm.sfsyhxjDescription=""),"无"===t.newbornForm.csywyc&&(t.newbornForm.apgar={one:"",five:"",ten:""},t.newbornForm.shzx="",t.newbornForm.shzxcd="",t.newbornForm.lncx="",t.newbornForm.lncxcd="",t.newbornForm.gnjp="",t.newbornForm.xsehd="",t.newbornForm.hdzdff="",t.newbornForm.hdzlff="",t.newbornForm.RDS="",t.newbornForm.anemia="",t.newbornForm.anemiaDescription="",t.newbornForm.horror="",t.newbornForm.horrorDescription="",t.newbornForm.infection="",t.newbornForm.infectionDescription="",t.newbornForm.csqx="",t.newbornForm.csqxDescription="",t.newbornForm.tlsc="",t.newbornForm.tlscDescription="",t.newbornForm.zgx="",t.newbornForm.zgxDescription="",t.newbornForm.cswycOther=""),"无"===t.newbornForm.shzx&&(t.newbornForm.shzxcd=""),"无"===t.newbornForm.lncx&&(t.newbornForm.lncxcd=""),"无"===t.newbornForm.xsehd&&(t.newbornForm.hdzdff="",t.newbornForm.hdzlff=""),"无"===t.newbornForm.anemia&&(t.newbornForm.anemiaDescription=""),"无"===t.newbornForm.horror&&(t.newbornForm.horrorDescription=""),"无"===t.newbornForm.infection&&(t.newbornForm.infectionDescription=""),"无"===t.newbornForm.csqx&&(t.newbornForm.csqxDescription=""),"异常"===t.newbornForm.tlsc&&(t.newbornForm.tlscDescription=""),"未按时"===t.newbornForm.ymjz&&(t.newbornForm.ymjzDescription=""),e.next=16,Object(u["y"])({baby_id:t.$route.params.id||t.$store.state.chat.activedBabyId,baby_detail_info:t.newbornForm});case 16:s=e.sent,r=s.data,n=s.code,2e4===n?r.result&&t.$message({type:"success",message:"保存成功"}):t.$message({message:r.message,type:"error"}),e.next=23;break;case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},setNumber:function(e,t){"tz"===t&&(Number(e)||(this.newbornForm.cstz="")),"sc"===t&&(Number(e)||(this.newbornForm.cssc="")),"tw"===t&&(Number(e)||(this.newbornForm.cstw=""))},toFixedNum:function(e,t){e&&("tz"===t&&Number(e)&&(this.newbornForm.cstz=Number(e).toFixed(1)),"sc"===t&&Number(e)&&(this.newbornForm.cssc=Number(e).toFixed(1)),"tw"===t&&Number(e)&&(this.newbornForm.cstw=Number(e).toFixed(1)))},uploadFunc:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.newbornForm.imageUrlList.length>=10||!this.isMyUser&&this.isChatPage)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["c"])(t.file,(function(e){}));case 4:a=e.sent,this.newbornForm.imageUrl=a.url;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadListFunc:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(10!==this.newbornForm.imageUrlList.length&&(this.isMyUser||!this.isChatPage)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["c"])(t.file,(function(e){}));case 4:a=e.sent,this.newbornForm.imageUrlList.push(a.url);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),beforeAvatarUpload:function(e){if(this.isMyUser&&this.isChatPage&&this.newbornForm.imageUrlList.length<10||!this.isChatPage&&this.newbornForm.imageUrlList.length<10){var t=["image/jpeg","image/jpg","image/png"].indexOf(e.type)>=0,a=e.size/1024/1024<5;return t||this.$message.error("上传图片只能是 JPG或PNG 格式!"),a||this.$message.error("上传图片大小不能超过 5MB!"),t&&a}},removeImg:function(e){this.newbornForm.imageUrlList.splice(e,1)},getNewNum:function(e,t){parseInt(e)||0===parseInt(e)?"gestational_weeks"===t&&parseInt(e)>42?this.newbornForm[t]=42:"gestational_days"===t&&parseInt(e)>6?this.newbornForm[t]=6:this.newbornForm[t]=parseInt(e):this.newbornForm[t]=""},getInteger:function(e,t){"zyts"!==t||!parseInt(e)&&0!==parseInt(e)?parseInt(e)||0===parseInt(e)?this.newbornForm.apgar[t]=parseInt(e):this.newbornForm.apgar[t]="":this.newbornForm.zyts=parseInt(e)},getAgeMonth:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["j"])({day:this.newbornForm.pregnancy_ended_at});case 2:t=e.sent,a=t.code,s=t.data,2e4===a&&(this.newbornForm.jzyl=s.age_of_month_str);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=m,h=(a("33b7"),a("2877")),p=Object(h["a"])(d,o,l,!1,null,"777d4380",null),b=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personal-information"},[a("el-form",{ref:"personForm",staticClass:"demo-personForm person-form",attrs:{model:e.personForm,rules:e.rules,"label-width":"130px"}},[e._l(e.personForm,(function(t,s){return[a("div",{key:s},[a("h2",{staticClass:"mother"},[e._v(e._s("mother"===s?"母亲":"父亲"))]),e.babyId?e._e():a("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[a("el-input",{attrs:{maxlength:"5","show-word-limit":"",placeholder:"请输入"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("el-form-item",{attrs:{label:"出生日期：",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.birthday,callback:function(a){e.$set(t,"birthday",a)},expression:"item.birthday"}})],1),a("el-form-item",{attrs:{label:"民族：",prop:"famous"}},[a("el-input",{attrs:{maxlength:"10","show-word-limit":"",placeholder:"请输入"},model:{value:t.famous,callback:function(a){e.$set(t,"famous",a)},expression:"item.famous"}})],1),a("el-form-item",{attrs:{label:"身高：",prop:"height"}},[a("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.setNumber(t,s,"height")},change:function(t){return e.toFixedNum(t,s,"height")}},model:{value:t.height,callback:function(a){e.$set(t,"height",a)},expression:"item.height"}}),e._v("   kg\n        ")],1),a("el-form-item",{attrs:{label:"体重：",prop:"bodyWeight"}},[a("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.setNumber(t,s,"bodyWeight")},change:function(t){return e.toFixedNum(t,s,"bodyWeight")}},model:{value:t.bodyWeight,callback:function(a){e.$set(t,"bodyWeight",a)},expression:"item.bodyWeight"}}),e._v("   kg\n        ")],1),a("el-form-item",{attrs:{label:"血型：",prop:"bloodGroup"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.bloodGroup,callback:function(a){e.$set(t,"bloodGroup",a)},expression:"item.bloodGroup"}}),e._v("   型\n        ")],1),a("el-form-item",{attrs:{label:"现居住地：",prop:"address"}},[a("el-cascader",{attrs:{size:"large",options:e.options},on:{change:e.handleChange},model:{value:t.address,callback:function(a){e.$set(t,"address",a)},expression:"item.address"}})],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"家族遗传史：",prop:"jzycs"}},[a("el-radio-group",{model:{value:t.jzycs,callback:function(a){e.$set(t,"jzycs",a)},expression:"item.jzycs"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===t.jzycs?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"jzycsDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:t.jzycsDescription,callback:function(a){e.$set(t,"jzycsDescription",a)},expression:"item.jzycsDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"既往史：",prop:"jws"}},[a("el-radio-group",{model:{value:t.jws,callback:function(a){e.$set(t,"jws",a)},expression:"item.jws"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===t.jws?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"jwsDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:t.jwsDescription,callback:function(a){e.$set(t,"jwsDescription",a)},expression:"item.jwsDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"烟酒嗜好：",prop:"yjsh"}},[a("el-radio-group",{model:{value:t.yjsh,callback:function(a){e.$set(t,"yjsh",a)},expression:"item.yjsh"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===t.yjsh?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"yjshDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:t.yjshDescription,callback:function(a){e.$set(t,"yjshDescription",a)},expression:"item.yjshDescription"}})],1):e._e()],1)],1)]})),!e.babyId||e.isMyUser?a("el-form-item",{staticClass:"confirm"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("personForm")}}},[e._v("修改并保存")])],1):e._e()],2)],1)},y=[],g=a("ef6c"),_={props:{person:{type:[Object,String],default:""},babyId:{type:Boolean,default:!1},isMyUser:{type:Boolean,default:!1}},data:function(){return{personForm:{mother:{title:"母亲",name:"",birthday:"",famous:"",height:"",bodyWeight:"",bloodGroup:"",address:[],jzycs:"",jzycsDescription:"",jws:"",jwsDescription:"",yjsh:"",yjshDescription:""},father:{title:"父亲",name:"",birthday:"",famous:"",height:"",bodyWeight:"",bloodGroup:"",address:[],jzycs:"",jzycsDescription:"",jws:"",jwsDescription:"",yjsh:"",yjshDescription:""}},rules:{},options:[{label:"国外",value:"国外"},{label:"国内",value:"国内",children:g["regionData"]}]}},watch:{person:function(){this.person.mother&&(this.personForm.mother=this.person.mother,this.personForm.father=this.person.father)}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=15;break}return"无"===t.personForm.mother.jzycs&&(t.personForm.mother.jzycsDescription=""),"无"===t.personForm.mother.jws&&(t.personForm.mother.jwsDescription=""),"无"===t.personForm.mother.yjsh&&(t.personForm.mother.yjshDescription=""),"无"===t.personForm.father.jzycs&&(t.personForm.father.jzycsDescription=""),"无"===t.personForm.father.jws&&(t.personForm.father.jwsDescription=""),"无"===t.personForm.father.yjsh&&(t.personForm.father.yjshDescription=""),e.next=9,Object(u["y"])({baby_id:t.$route.params.id||t.$store.state.chat.activedBabyId,family_info:t.personForm});case 9:s=e.sent,r=s.data,n=s.code,2e4===n?r.result&&t.$message({type:"success",message:"保存成功"}):t.$message({message:r.message,type:"error"}),e.next=16;break;case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleChange:function(e){},setNumber:function(e,t,a){Number(e)||(this.personForm[t][a]="")},toFixedNum:function(e,t,a){e&&Number(e)&&(this.personForm[t][a]=Number(e).toFixed(1))}}},v=_,w=(a("5ae7"),Object(h["a"])(v,f,y,!1,null,"15a1c98a",null)),x=w.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"pregnancyForm",staticClass:"demo-pregnancyForm pregnancy-form",attrs:{model:e.pregnancyForm,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"分娩方式：",prop:"fmfs"}},[a("el-radio-group",{model:{value:e.pregnancyForm.fmfs,callback:function(t){e.$set(e.pregnancyForm,"fmfs",t)},expression:"pregnancyForm.fmfs"}},[a("el-radio",{attrs:{label:"自然分娩"}}),a("el-radio",{attrs:{label:"剖宫产"}})],1),a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"fmfsDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.pregnancyForm.fmfsDescription,callback:function(t){e.$set(e.pregnancyForm,"fmfsDescription",t)},expression:"pregnancyForm.fmfsDescription"}})],1)],1),a("el-form-item",{attrs:{label:"羊水情况：",prop:"ysqk"}},[a("el-radio-group",{model:{value:e.pregnancyForm.ysqk,callback:function(t){e.$set(e.pregnancyForm,"ysqk",t)},expression:"pregnancyForm.ysqk"}},[a("el-radio",{attrs:{label:"清亮"}}),a("el-radio",{attrs:{label:"浑浊"}})],1)],1),a("el-form-item",{attrs:{label:"孕前体重：",prop:"yqtz"}},[a("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.setNumber(t,"yqtz")},change:function(t){return e.toFixedNum(t,"yqtz")}},model:{value:e.pregnancyForm.yqtz,callback:function(t){e.$set(e.pregnancyForm,"yqtz",t)},expression:"pregnancyForm.yqtz"}}),e._v("   kg\n  ")],1),a("el-form-item",{attrs:{label:"分娩时体重：",prop:"fmstz"}},[a("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.setNumber(t,"fmstz")},change:function(t){return e.toFixedNum(t,"fmstz")}},model:{value:e.pregnancyForm.fmstz,callback:function(t){e.$set(e.pregnancyForm,"fmstz",t)},expression:"pregnancyForm.fmstz"}}),e._v("   kg\n  ")],1),a("el-form-item",{attrs:{label:"孕期有无异常：",prop:"yqywyc"}},[a("el-radio-group",{model:{value:e.pregnancyForm.yqywyc,callback:function(t){e.$set(e.pregnancyForm,"yqywyc",t)},expression:"pregnancyForm.yqywyc"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.pregnancyForm.yqywyc?a("el-form",{staticClass:"demo-pregnancyForm pregnancy-form",attrs:{model:e.pregnancyForm,rules:e.rules,"label-width":"90px"}},[a("el-form-item",{staticClass:"m-b-20",attrs:{label:"孕期产检：",prop:"yqcj"}},[a("el-radio-group",{model:{value:e.pregnancyForm.yqcj,callback:function(t){e.$set(e.pregnancyForm,"yqcj",t)},expression:"pregnancyForm.yqcj"}},[a("el-radio",{attrs:{label:"正常"}}),a("el-radio",{attrs:{label:"异常"}})],1),"异常"===e.pregnancyForm.yqcj?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"yqcjDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.pregnancyForm.yqcjDescription,callback:function(t){e.$set(e.pregnancyForm,"yqcjDescription",t)},expression:"pregnancyForm.yqcjDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"贫血：",prop:"anemia"}},[a("el-radio-group",{model:{value:e.pregnancyForm.anemia,callback:function(t){e.$set(e.pregnancyForm,"anemia",t)},expression:"pregnancyForm.anemia"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.pregnancyForm.anemia?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"anemiaDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.pregnancyForm.anemiaDescription,callback:function(t){e.$set(e.pregnancyForm,"anemiaDescription",t)},expression:"pregnancyForm.anemiaDescription"}})],1):e._e()],1),a("el-form-item",{attrs:{label:"并发症：",prop:"bfz"}},[a("el-checkbox-group",{model:{value:e.pregnancyForm.bfz,callback:function(t){e.$set(e.pregnancyForm,"bfz",t)},expression:"pregnancyForm.bfz"}},[a("el-checkbox",{attrs:{label:"妊娠期糖尿病",name:"rmqtnb"}}),a("el-checkbox",{attrs:{label:"妊娠期高血压",name:"rmqgxy"}}),a("el-checkbox",{attrs:{label:"甲状腺功能亢进症",name:"jzxgnkjz"}}),a("el-checkbox",{attrs:{label:"甲状腺功能减退症",name:"jzxgnjtz"}}),a("el-checkbox",{attrs:{label:"妊娠期合并胆汁淤积症",name:"dzyjz"}}),a("el-checkbox",{attrs:{name:"other"}},[e._v("\n            其它\n            "),a("el-input",{model:{value:e.pregnancyForm.bfzOther,callback:function(t){e.$set(e.pregnancyForm,"bfzOther",t)},expression:"pregnancyForm.bfzOther"}})],1)],1)],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"药物干预：",prop:"ywgy"}},[a("el-radio-group",{model:{value:e.pregnancyForm.ywgy,callback:function(t){e.$set(e.pregnancyForm,"ywgy",t)},expression:"pregnancyForm.ywgy"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.pregnancyForm.ywgy?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"ywgyDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.pregnancyForm.ywgyDescription,callback:function(t){e.$set(e.pregnancyForm,"ywgyDescription",t)},expression:"pregnancyForm.ywgyDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",attrs:{label:"接触有害物质：",prop:"jcyhwz"}},[a("el-radio-group",{model:{value:e.pregnancyForm.jcyhwz,callback:function(t){e.$set(e.pregnancyForm,"jcyhwz",t)},expression:"pregnancyForm.jcyhwz"}},[a("el-radio",{attrs:{label:"无"}}),a("el-radio",{attrs:{label:"有"}})],1),"有"===e.pregnancyForm.jcyhwz?a("el-form-item",{staticClass:"description",staticStyle:{"margin-top":"20px"},attrs:{label:"说明：",prop:"jcyhwzDescription"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.pregnancyForm.jcyhwzDescription,callback:function(t){e.$set(e.pregnancyForm,"jcyhwzDescription",t)},expression:"pregnancyForm.jcyhwzDescription"}})],1):e._e()],1),a("el-form-item",{staticClass:"m-b-20",staticStyle:{"margin-top":"20px","max-width":"970px"},attrs:{label:"其它：",prop:"yqywycOther"}},[a("el-input",{staticClass:"des-input",attrs:{placeholder:"请输入",type:"textarea",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.pregnancyForm.yqywycOther,callback:function(t){e.$set(e.pregnancyForm,"yqywycOther",t)},expression:"pregnancyForm.yqywycOther"}})],1)],1):e._e()],1),!e.babyId||e.isMyUser?a("el-form-item",{staticClass:"confirm"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("pregnancyForm")}}},[e._v("修改并保存")])],1):e._e()],1)},k=[],C={props:{pregnancy:{type:[Object,String],default:""},babyId:{type:Boolean,default:!1},isMyUser:{type:Boolean,default:!1}},data:function(){return{pregnancyForm:{fmfs:"",fmfsDescription:"",ysqk:"",yqtz:"",fmstz:"",yqywyc:"",yqcj:"",yqcjDescription:"",anemia:"",anemiaDescription:"",bfz:[],bfzOther:"",ywgy:"",ywgyDescription:"",jcyhwz:"",jcyhwzDescription:"",yqywycOther:""},rules:{}}},watch:{pregnancy:function(){this.pregnancy&&(this.pregnancyForm={fmfs:this.pregnancy.fmfs||"",fmfsDescription:this.pregnancy.fmfsDescription||"",ysqk:this.pregnancy.ysqk||"",yqtz:this.pregnancy.yqtz||"",fmstz:this.pregnancy.fmstz||"",yqywyc:this.pregnancy.yqywyc||"",yqcj:this.pregnancy.yqcj||"",yqcjDescription:this.pregnancy.yqcjDescription||"",anemia:this.pregnancy.anemia||"",anemiaDescription:this.pregnancy.anemiaDescription||"",bfz:this.pregnancy.bfz||[],bfzOther:this.pregnancy.bfzOther||"",ywgy:this.pregnancy.ywgy||"",ywgyDescription:this.pregnancy.ywgyDescription||"",jcyhwz:this.pregnancy.jcyhwz||"",jcyhwzDescription:this.pregnancy.jcyhwzDescription||"",yqywycOther:this.pregnancy.yqywycOther||""})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}return"无"===t.pregnancyForm.yqywyc&&(t.pregnancyForm.yqcj="",t.pregnancyForm.yqcjDescription="",t.pregnancyForm.anemia="",t.pregnancyForm.anemiaDescription="",t.pregnancyForm.bfz=[],t.pregnancyForm.bfzOther="",t.pregnancyForm.ywgy="",t.pregnancyForm.ywgyDescription="",t.pregnancyForm.jcyhwz="",t.pregnancyForm.jcyhwzDescription="",t.pregnancyForm.yqywycOther=""),"正常"===t.pregnancyForm.yqcj&&(t.pregnancyForm.yqcjDescription=""),"无"===t.pregnancyForm.anemia&&(t.pregnancyForm.anemiaDescription=""),"无"===t.pregnancyForm.ywgy&&(t.pregnancyForm.ywgyDescription=""),"无"===t.pregnancyForm.jcyhwz&&(t.pregnancyForm.jcyhwzDescription=""),e.next=8,Object(u["y"])({baby_id:t.$route.params.id||t.$store.state.chat.activedBabyId,mather_pregnancy_info:t.pregnancyForm});case 8:s=e.sent,r=s.data,n=s.code,2e4===n?r.result&&t.$message({type:"success",message:"保存成功"}):t.$message({message:r.message,type:"error"}),e.next=15;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},setNumber:function(e,t){Number(e)||(this.pregnancyForm[t]="")},toFixedNum:function(e,t){e&&Number(e)&&(this.pregnancyForm[t]=Number(e).toFixed(1))}}},j=C,D=(a("9ca1"),Object(h["a"])(j,F,k,!1,null,"3e649434",null)),I=D.exports,z=a("2f62"),T={components:{Newborn:b,PersonalInformation:x,PregnancySituation:I},computed:Object(i["a"])({},Object(z["c"])(["activedBabyId","isMyUser"])),props:{babyId:{type:String,default:""},isChatPage:{type:Boolean,default:!1},getInfo:{type:Boolean,default:!0}},data:function(){return{activeName:"first",replace:!1,newborn:{},pregnancy:{},person:{},babyInfo:{user:{}}}},watch:{babyId:function(){this.getHealthFile()}},created:function(){this.getHealthFile()},methods:{getHealthFile:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.getInfo||this.babyId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(u["n"])({baby:this.babyId||this.$route.params.id||this.activedBabyId});case 4:t=e.sent,a=t.data,s=t.code,2e4===s&&(this.newborn=a.baby_detail_info,this.pregnancy=a.mather_pregnancy_info,this.person=a.family_info,this.babyInfo=a.family_member,this.replace=a.is_replace);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},S=T,$=(a("fc3c"),Object(h["a"])(S,s,r,!1,null,"6fc12d1c",null));t["default"]=$.exports},"5a04":function(e,t,a){},"5ae7":function(e,t,a){"use strict";var s=a("d48b"),r=a.n(s);r.a},6056:function(e,t,a){"use strict";var s=a("d496"),r=a.n(s);r.a},6068:function(e,t,a){"use strict";var s=a("c2c8"),r=a.n(s);r.a},"61ae":function(e,t,a){},"63d9":function(e,t,a){},"6c2c":function(e,t,a){"use strict";var s=a("0945"),r=a.n(s);r.a},"6dcb":function(e,t,a){"use strict";var s=a("7e74"),r=a.n(s);r.a},"7a26":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return u}));var s=a("2ef0"),r=a.n(s),n=a("4360"),i=a("8975");function o(){return{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}],disabledDate:function(e){var t=(new Date).getTime();return e>t}}}function l(e){var t=e.event,a=e.bus_role;switch(e.type){case"over_time_send_suggestion":return{bgColor:"#FFFFFF",iconType:"icon-fsdz",color:"#0085FF",border:"1px solid #0085FF"};case"round_append":return{bgColor:"#FFFFFF",iconType:"icon-round_append",color:"#67CA39",border:"1px solid #67CA39"};case"admin_end":return{bgColor:"#FFFFFF",iconType:"icon-admin_end",color:"#ED3645",border:"1px solid #ED3645"};case"text_answer":return{bgColor:"#FFFFFF",iconType:"iconhushi",color:"#FF8181",border:"1px solid #FF8181"};case"system":return"error"===t?{bgColor:"#ED3645",iconType:"icon-setting-fill",border:"1px solid #ED3645"}:"warning"===t?{bgColor:"#FFB718",iconType:"icon-setting-fill",border:"1px solid #FFB718"}:"end"===t?{bgColor:"#979797",iconType:"icon-setting-fill",border:"1px solid #979797"}:"transfer_auto_accept"===t?{bgColor:"#67CA39",iconType:"icon-setting-fill",border:"1px solid #67CA39"}:{};case"system-info":return"error"===t?{bgColor:"#ED3645",iconType:"icon-setting-fill",borderColor:"#FFFFFF"}:"warning"===t?{bgColor:"#FFB718",iconType:"icon-setting-fill",borderColor:"#FFFFFF"}:"end"===t?{bgColor:"#979797",iconType:"icon-setting-fill",borderColor:"#FFFFFF"}:{};case"user_ask":return{bgColor:"#FFFFFF",iconType:"icon-signal-fill",color:"#0085FF",border:"1px solid #0085FF"};case"round_apply_transfer":return{bgColor:"#FFFFFF",iconType:"icon-signal-fill",color:"#0085FF",border:"1px solid #0085FF"};case"user_end":return{bgColor:"#FFFFFF",iconType:"el-icon-user-solid",color:"#979797",border:"1px solid #979797"};case"voice_transfer_answer":return{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"};case"text_transfer_answer":return"doctor"===a?{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"}:"dietician"===a?{bgColor:"#fff",iconType:"icon-yingyangshi1",color:"#FFB718",border:"1px solid #FFB718"}:{};case"transfer_apply":return{bgColor:"#FFFFFF",iconType:"iconhushi",color:"#FF8181",border:"1px solid #FF8181"};case"transfer_start":return{bgColor:"#FFFFFF",iconType:"iconhushi",color:"#FF8181",border:"1px solid #FF8181"};case"transfer_accept":return"doctor"===a?{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"}:"dietician"===a?{bgColor:"#fff",iconType:"icon-yingyangshi1",color:"#FFB718",border:"1px solid #FFB718"}:{};case"transfer_reject":return"doctor"===a?{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"}:"dietician"===a?{bgColor:"#fff",iconType:"icon-yingyangshi1",color:"#FFB718",border:"1px solid #FFB718"}:{};case"voice_transfer_end":return{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#999",border:"1px solid #999"};case"user_transfer":return{bgColor:"#FFFFFF",iconType:"icon-signal-fill",color:"#0085FF",border:"1px solid #0085FF"};case"iconicon-ysdaiban":return{bgColor:"#FFFFFF",iconType:"iconicon-ysdaiban",color:"#0085FF",border:"1px solid #0085FF"};default:return{}}}function c(e){if(n["a"].state.chat.serviceItem){var t=n["a"].state.chat.serviceItem;if("transfer"===e&&t.length){for(var a=!1,s=0;s<t.length;s++)if(-1!==t[s].indexOf(e))return a=!0,a;return a}var i=r.a.indexOf(t,e);return i=-1!==i,i}}function u(e,t,a,s,r){var n="y-m-d",o=[{show:!0,label:"当前阶段：",value:Object(i["curStageTxt"])(e)},{show:!0,label:"月经史（月经是否规律）：",value:Object(i["booleanToTxt"])(t.is_schedule)},{show:!t.is_schedule&&t.measure_desc,label:"",html:'<span class="color-999">'+t.measure_desc+"</span>",value:""},{show:t.is_schedule,label:"月经周期：",value:t&&t.period_start?t.period_start+"天 至 "+t.period_end+"天":"-"},{show:t.is_schedule,label:"每次持续：",value:t&&t.duration_start?t.duration_start+"天 至 "+t.duration_end+"天":"-"},{show:t.is_schedule,label:"月经量：",value:t&&t.measure?this.measureToTxt(t.measure):"-"},{show:"byz"===e,label:"备孕开始日期：",value:r?this.formatTime(t.started_at,n):t.started_at},{show:"byz"===e,label:"备孕时长：",value:t.bysc},{show:"byz"===e,label:"是否做过孕前检查：",value:Object(i["booleanToTxt"])(t.is_checked)},{show:"byz"===e&&t.is_checked,label:"检查是否有异常：",value:Object(i["booleanToTxt"])(t.has_unusual_status)},{show:"byz"===e&&t.is_checked&&t.has_unusual_status,label:"",html:'<span class="color-999">'+t.unusual_desc+"</span>",value:""},{show:"hyz"===e,label:"末次月经日期：",value:r?this.formatTime(t.last_yuejing_at,n):t.last_yuejing_at},{show:"hyz"===e,label:"预产期：",value:r?this.formatTime(t.yuchan_at,n):t.yuchan_at},{show:"hyz"===e,label:"孕周：",value:t.gestational_weeks?t.gestational_weeks+"周"+t.gestational_days+"天":""},{show:"hyz"===e,label:"是否孕育过有缺陷的宝宝：",value:Object(i["booleanToTxt"])(t.has_unusual_baby)},{show:"hyz"===e&&t.has_unusual_baby,label:"",html:'<span class="color-999">'+t.unusual_baby_desc+"</span>",value:""},{show:"hyz"===e,label:"既往妊娠综合症：",value:Object(i["booleanToTxt"])(t.has_renshen_history,"has")},{show:"hyz"===e&&t.has_renshen_history,label:"",html:'<span class="color-999">'+t.renshen_desc+"</span>",value:""},{show:"crq"===e,label:"分娩日期：",value:r?this.formatTime(t.fenmian_at,n):t.fenmian_at},{show:"crq"===e,label:"分娩方式：",value:Object(i["fenmianModeTxt"])(t.fenmian_mode)},{show:"crq"===e&&"ydfm"===t.fenmian_mode,label:"是否侧切：",value:Object(i["booleanToTxt"])(t.is_ceqie)},{show:"crq"===e,label:"本次产后喂养方式：",value:Object(i["feedModeTxt"])(t.feed_mode)},{show:!!s,label:a?"":"症状描述：",value:"",html:s?s.msg_content.content:""}];return o}},"7b32":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"drawer"},[a("div",{class:e.maskClass,on:{click:e.closeByMask}}),a("div",{staticClass:"main",class:e.mainClass,style:e.mainStyle},[a("div",{staticClass:"drawer-head"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.closable,expression:"!closable"}],staticClass:"close-btn-right",on:{click:e.closeByButton}},[a("i",{staticClass:"el-icon-arrow-left"})]),a("span",[e._v(e._s(e.title)+"\n        "),e.title?a("span",{staticStyle:{color:"#2d8cf0"}},[e._v("\n          "+e._s("咨询中的用户"===e.title?e.askingCustomerList.length:"转诊中的用户"===e.title?e.transferCustomerList.length:e.waitingCustomerList.length)+"\n        ")]):e._e()]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.closable,expression:"closable"}],staticClass:"close-btn",on:{click:e.closeByButton}},[a("i",{staticClass:"el-icon-close"})])]),a("div",{staticClass:"drawer-body"},[e._t("default")],2)])])},r=[],n=a("db72"),i=a("2f62"),o={props:{direction:{type:String,default:"right"},display:{type:Boolean},title:{type:String,default:"标题"},closable:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},width:{type:String,default:"400px"},inner:{type:Boolean,default:!0}},computed:Object(n["a"])({},Object(i["c"])(["waitingCustomerList","askingCustomerList","transferCustomerList"]),{maskClass:function(){return{"mask-show":this.mask&&this.display,"mask-hide":!(this.mask&&this.display),inner:this.inner}},mainClass:function(){return{"main-show":this.display,"main-hide":!this.display,inner:this.inner}},mainStyle:function(){return{width:this.width,right:this.display?"0":"".concat("right"===this.direction?"+":"-").concat(this.width)}}}),mounted:function(){if(this.inner){var e=this.$el.parentNode;e.style.position="relative"}},methods:{closeByMask:function(){this.maskClosable&&this.$emit("update:display",!1)},closeByButton:function(){this.$emit("update:display",!1),this.$emit("closeDrawer")}}},l=o,c=(a("3bc1"),a("2877")),u=Object(c["a"])(l,s,r,!1,null,"72c21063",null);t["a"]=u.exports},"7e74":function(e,t,a){},8090:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("6b54");function s(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}s("Object"),s("String");var r=Array.isArray||s("Array");s("Function")},8124:function(e,t,a){},"85a6":function(e,t,a){"use strict";var s=a("eb11"),r=a.n(s);r.a},8703:function(e,t,a){},8722:function(e){e.exports={healthFileTableSearch:{item:[{type:"text",name:"baby_name",value:"",placeholder:"请输入患者姓名",width:"100%",label:"患者姓名：",show:!0,colSpan:6,rules:[]},{type:"text",name:"baby_id",value:"",placeholder:"请输入患者ID",width:"100%",label:"患者ID：",colSpan:6,show:!0,rules:[]},{type:"select",value:"",placeholder:"请选择",show:!0,label:"患者当前阶段：",options:[{label:"备孕中",value:"byz"},{label:"怀孕中",value:"hyz"},{label:"产褥期",value:"crq"}],name:"cur_stage"},{type:"text",name:"user_name",value:"",placeholder:"请输入用户昵称或备注名",width:"100%",label:"用户：",show:!0,colSpan:6,rules:[]},{type:"text",name:"user_id",value:"",placeholder:"请输入用户ID",width:"100%",label:"用户ID：",colSpan:6,show:!0,rules:[]},{type:"servicePackage",value:"",show:!0,label:"当前服务套餐：",placeholder:"请选择",colSpan:7,name:"fd_service_type"},{type:"btn",colSpan:5,show:!0}],data:{baby_name:"",baby_id:"",cur_stage:"",user_name:"",user_id:"",fd_service_type:""}},byzForm:{item:[{type:"date",name:"started_at",value:"",placeholder:"选择日期",width:"100%",label:"备孕开始日期：",show:!0,showBefore:!1,rules:[{required:!0,message:"请选择",trigger:"blur"}]},{type:"tipRow",label:"备孕时长：",name:"bysc",show:!0,value:""},{type:"radio",name:"is_checked",value:"",width:"100%",label:"是否做过孕前检查：",show:!0,options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:[{required:!0,message:"请选择是否做过孕前检查",trigger:"blur"}]},{type:"radio",name:"has_unusual_status",cascaderItem:["is_checked"],cascaderValue:!0,value:"",width:"100%",label:"检查是否有异常：",show:!0,options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:[{required:!0,message:"请选择检查是否有异常",trigger:"blur"}]},{type:"textarea",name:"unusual_desc",cascaderItem:["has_unusual_status"],cascaderValue:!0,value:"",width:"100%",label:"说明：",placeholder:"请输入",minlength:"0",maxlength:"100",showLimit:!0,show:!0,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{show:!0,type:"slot",slotName:"updateInfo"}],data:{started_at:"",bysc:"",is_checked:"",has_unusual_status:!1,unusual_desc:"",update_at:"",update_user:""}},hyzForm:{item:[{type:"date",name:"last_yuejing_at",value:"",placeholder:"选择日期",width:"100%",label:"末次月经日期：",show:!0,showBefore:!0,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{type:"date",name:"yuchan_at",value:"",placeholder:"选择日期",width:"100%",label:"预产期：",show:!0,showAfter:!1,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{type:"inputnumber",name:"gestational_weeks",value:"",colSpan:12,width:"100%",label:"孕周：",unit:"周",min:0,max:42,show:!0,rules:[{required:!0,message:"请填写",trigger:"blur"}]},{type:"inputnumber",name:"gestational_days",value:"",min:1,max:6,colSpan:12,width:"100%",label:"",unit:"天",show:!0},{type:"radio",name:"has_unusual_baby",value:"",width:"100%",label:"是否孕育过有出生缺陷的宝宝：",show:!0,options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{type:"textarea",name:"unusual_baby_desc",cascaderItem:["has_unusual_baby"],cascaderValue:!0,value:"",width:"100%",label:"说明：",placeholder:"请输入",minlength:"0",maxlength:"100",showLimit:!0,show:!0,rules:[{required:!0,message:"填写",trigger:"blur"}]},{type:"radio",name:"has_renshen_history",value:"",width:"100%",label:"既往有妊娠合并症：",show:!0,options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{type:"textarea",name:"renshen_desc",cascaderItem:["has_renshen_history"],cascaderValue:!0,value:"",width:"100%",label:"说明：",placeholder:"请输入",minlength:"0",maxlength:"100",showLimit:!0,show:!0,rules:[{required:!0,message:"请选择检查是否有异常",trigger:"blur"}]},{show:!0,type:"slot",slotName:"updateInfo"}],data:{last_yuejing_at:"",yuchan_at:"",gestational_weeks:"",gestational_days:"",has_unusual_baby:"",unusual_baby_desc:"",has_renshen_history:"",renshen_desc:"",update_at:"",update_user:""}},crqForm:{item:[{type:"date",name:"fenmian_at",value:"",placeholder:"选择日期",width:"100%",label:"本次生产分娩日期：",show:!0,showBefore:!0,rules:[]},{type:"select",label:"分娩方式：",name:"fenmian_mode",value:"",width:"100%",show:!0,placeholder:"请选择分娩方式",options:[{label:"阴道分娩",value:"ydfm"},{label:"剖宫产",value:"pgc"}],rules:[{required:!0,message:"请填写分娩情况",trigger:"blur"}]},{type:"radio",name:"is_ceqie",cascaderItem:["fenmian_mode"],cascaderValue:"ydfm",value:"",width:"100%",label:"是否侧切：",show:!0,options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{type:"radio",name:"feed_mode",value:"",width:"100%",label:"本次产后喂养方式：",show:!0,options:[{value:"muru",label:"母乳喂养"},{value:"rengong",label:"人工喂养"},{value:"mix",label:"混合喂养"}],rules:[{required:!0,message:"请选择",trigger:"blur"}]},{show:!0,type:"slot",slotName:"updateInfo"}],data:{fenmian_at:"",fenmian_mode:"",is_ceqie:"",feed_mode:"",update_at:"",update_user:""}}}},"875a":function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"k",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return m})),a.d(t,"i",(function(){return d})),a.d(t,"j",(function(){return h})),a.d(t,"a",(function(){return p}));var s=a("b775");function r(e){return Object(s["a"])({url:"/growth_info/list",method:"get",params:e})}function n(e){return Object(s["a"])({url:"/growth_info",method:"post",data:e})}function i(e,t){return Object(s["a"])({url:"/growth_info/"+e,method:"put",data:t})}function o(e){return Object(s["a"])({url:"/growth_info",method:"delete",data:e})}function l(e){return Object(s["a"])({url:"/growth_info/"+e,method:"get"})}function c(e){return Object(s["a"])({url:"/growth_info/"+e+"/status",method:"put"})}function u(e){return Object(s["a"])({url:"/family_member/in_server_list",method:"get",params:e})}function m(e){return Object(s["a"])({url:"baby_growth_info/growth",method:"get",params:e})}function d(e){return Object(s["a"])({url:"baby_growth_info/detail/"+e,method:"get"})}function h(e){return Object(s["a"])({url:"baby_growth_info/send/"+e,method:"get"})}function p(e){return Object(s["a"])({url:"baby_growth_info/content",method:"post",data:e})}},"88ae":function(e,t,a){e.exports=a.p+"static/img/pause.06cf94c2.png"},8981:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"extend_wrap"},[a("el-tabs",{attrs:{stretch:!0},model:{value:e.activeInfo,callback:function(t){e.activeInfo=t},expression:"activeInfo"}},["chat"!==e.pageType?a("el-tab-pane",{attrs:{label:"基本信息",name:"basicInfo"}},[a("basic-info",{staticStyle:{padding:"0 10px"},attrs:{"baby-id":e.babyId}})],1):e._e(),"erke"===e.department?a("el-tab-pane",{attrs:{label:"内部共享备注",name:"sharingNotes"}},[a("sharing-notes",{attrs:{"baby-id":e.babyId}})],1):e._e(),"erke"===e.department&&e.ifHasServer("baby_growth")?a("el-tab-pane",{attrs:{name:"growsList"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("el-badge",{staticClass:"grow-dot",attrs:{"is-dot":e.count}},[e._v("\n          发育量表\n        ")])],1),"growsList"===e.activeInfo?a("scroll-box",{attrs:{"box-height":810}},[a("see-detail",{directives:[{name:"show",rawName:"v-show",value:!e.isSee,expression:"!isSee"}],attrs:{member:e.babyId,"page-type":"chat"},on:{setLookStatus:e.setLookStatus}}),e.isSee?a("status-detail",{attrs:{showBtn:e.isSee},on:{return:function(t){return e.setLookStatus(!1)}}}):e._e()],1):e._e()],1):e._e(),a("el-tab-pane",{attrs:{label:"健康档案",name:"healthHistory"}},["healthHistory"===e.activeInfo?a("scroll-box",{attrs:{"box-height":810}},["erke"===e.department?a("file-detail",{staticStyle:{padding:"0 10px"},attrs:{"baby-id":e.babyId,isChatPage:!0}}):e._e(),"chanke"===e.department?a("healthfileDetail",{attrs:{pageType:"chat",department:e.department,memberId:e.babyId}}):e._e()],1):e._e()],1),a("el-tab-pane",{attrs:{label:"咨询历史",name:"consultHistory"}},["consultHistory"===e.activeInfo?a("case-history",{attrs:{department:e.department,"baby-id":e.babyId,lastAskId:e.lastAskId}}):e._e()],1)],1)],1)},r=[],n=(a("96cf"),a("3b8d")),i=a("db72"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"extend_basic_info"},[a("userInfo",{attrs:{pageType:"health",user:e.userInfo},on:{updateInfo:e.getBasicInfoById}}),a("p",{staticClass:"margin-top-20 margin-bottom-6",staticStyle:{color:"#576277"}},[e._v("\n    "+e._s(e.title)+"信息\n    "),e.data.family_member.is_replace?a("svg-icon",{attrs:{"icon-class":"replace"}}):e._e()],1),a("babyInfo",{attrs:{isShow:!0,babyDetail:e.data,department:e.department}})],1)},l=[],c=a("3f52"),u=a("2edf"),m=a("802d"),d={name:"basicInfo",components:{userInfo:c["a"],babyInfo:u["a"]},props:{babyId:{type:String,default:""}},data:function(){return{userInfo:{},healthRecord:{},contractInfo:{},data:{family_member:{}},department:"",title:""}},watch:{babyId:function(){this.getBasicInfoById()}},created:function(){this.getBasicInfoById()},methods:{getBasicInfoById:function(){var e=this;this.babyId&&Object(m["d"])(this.babyId).then((function(t){t&&t.data&&(e.userInfo=t.data.user_info,e.userInfo.is_replace=t.data.family_member_info.is_replace,e.contractInfo=t.data.contract_info,e.healthRecord=t.data.health_record,e.department=t.data.family_member_info.type,t.data.family_member=t.data.family_member_info,t.data.chanke={cur_stage:t.data.family_member_info.cur_stage},t.data.remark=t.data.family_member_info.remark,t.data._id=t.data.family_member_info._id,e.title="chanke"===e.department?"产科患者":"儿科","erke"===e.department&&(t.data.health_record={baby_detail_info:{wyfs:""}}),t.data.family_member_info.family_member||(t.data.family_member_info.family_member=t.data.family_member_info),t.data.fd_contract_info=t.data.contract_info,t.data.fd_product=t.data.contract_info.fd_product_info,e.data=t.data)}))}}},h=d,p=(a("ab54"),a("2877")),b=Object(p["a"])(h,o,l,!1,null,"857dbce2",null),f=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"history-container"},[a("el-tabs",{attrs:{type:"card",stretch:!0},on:{"tab-click":e.setType},model:{value:e.consultType,callback:function(t){e.consultType=t},expression:"consultType"}},[e._l(e.consultTypeArr,(function(e,t){return a("el-tab-pane",{key:t,attrs:{size:"mini",label:e.label,name:e.name}})})),"disease"===e.consultType?a("div",[a("el-tabs",{attrs:{type:"card",stretch:!0},on:{"tab-click":e.resetDrawerShow},model:{value:e.historyType,callback:function(t){e.historyType=t},expression:"historyType"}},[a("el-tab-pane",{attrs:{label:"近三段（初诊 + 复诊）",name:"recent"}},[a("case-history-recent",{attrs:{department:e.department,"recent-history":e.recentHistory}})],1),a("el-tab-pane",{attrs:{label:"所有",name:"all"}},[a("case-history-all",{ref:"caseHistoryAll",attrs:{"baby-id":e.babyId,department:e.department,questionType:"disease",sessionLastAsk:e.lastAskId}})],1)],1)],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"disease"!==e.consultType,expression:"consultType !== 'disease'"}]},[a("case-history-all",{ref:e.consultType,attrs:{"baby-id":e.babyId,department:e.department,questionType:e.consultType,sessionLastAsk:e.lastAskId}})],1)],2)],1)},g=[],_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{overflow:"auto"},style:{height:e.extendRecentHistoryHeight}},[a("chat-history",{attrs:{title:"",display:e.displayChat,inner:!0,width:e.drawerWidth,mask:!1,direction:"left"},on:{"update:display":function(t){e.displayChat=t}}},[a("div",[a("msg-card",{attrs:{"msg-list":e.messageList}})],1)]),e._l(e.recentHistory,(function(t){return a("div",{key:t._id,staticClass:"recent-history-card"},[a("div",{staticClass:"time-range"},[e._v("\n      "+e._s(e._f("formatTime")(new Date(t.start_at)))+"\n       到 \n      "+e._s(e._f("formatTime")(new Date(t.end_at)))+"\n    ")]),e._l(t.list,(function(t){return a("div",{key:t._id,staticClass:"talk-container"},[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.openDetail(t)}}},[a("div",{staticClass:"talk-title"},[a("div",{staticClass:"text"},[a("div",[e._v("\n              "+e._s(e._f("formatTime")(new Date(t.created_at),"y-m-d"))+"\n            ")]),"disease"==t.question_type?a("div",{staticClass:"align-right margin-right-10"},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("疾病护理类")]),e._v("\n              "+e._s(t.ask_type)+"\n            ")]):a("div",{staticClass:"align-right margin-right-10"},[e._v("\n              "+e._s("chanke"===e.department?"其他问题":"其他育儿类")+"\n            ")])]),a("div",{staticClass:"icon"},[a("i",{staticClass:"el-icon-arrow-right",class:{"detail-open":t.open}})])]),a("div",{staticClass:"talk-content"},[t.hm?a("div",[e._v("\n            "+e._s(e.systemRole("hm","",e.department))+"："+e._s(t.hm.name||"")+"\n          ")]):e._e(),t.doctor?a("div",[e._v("医生："+e._s(t.doctor.name||""))]):e._e(),t.dietician?a("div",[e._v("\n            营养师："+e._s(t.dietician.name||"")+"\n          ")]):e._e(),a("div",[e._v("状态： "+e._s(e.resolveStatus(t.status,"")))]),a("div",[e._v("\n            "+e._s(t.suggestion_type?e.suggestType(t.suggestion_type):"叮嘱")+"\n            ： "+e._s(t.suggestion)+"\n          ")])])]),t.open?a("div",{staticClass:"history-detail"},[a("history-detail",{attrs:{"time-line-info":e.currentDetail,"fd-ask":t._id},on:{gotoMessages:e.gotoMessages}})],1):e._e()])}))],2)}))],2)},v=[],w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"detail-container"},[a("monitor",{ref:"monitor",attrs:{"monitor-info":e.monitorInfo,"current-image-url-arr":e.curUrlList}}),e._l(e.timeLineInfo,(function(t){return a("div",{key:t.id,staticClass:"detail-card"},["text_answer"===t.type?a("div",[a("div",{staticClass:"card-title"},[a("div",[e._v(e._s(t.user.name))]),a("div",[e._v("图文接待")])]),a("div",{staticClass:"card-nurse-show"},[a("div",[e._v("状态："+e._s(e.resolveStatus(t.status,"")))]),a("div",[e._v("主诉："+e._s(t.main_ask))]),a("div",[e._v("\n            "+e._s(t.suggestion_type?e.suggestType(t.suggestion_type):"叮嘱")+"\n            ： "+e._s(t.suggestion)+"\n          ")])]),a("div",{staticClass:"card-time"},[e._v("\n          "+e._s(e._f("formatTime")(new Date(t.created_at)))+"\n        ")])]):"user_end"===t.type?a("div",[e._m(0,!0),a("div",{staticClass:"card-time"},[e._v("\n          "+e._s(e._f("formatTime")(new Date(t.created_at)))+"\n        ")])]):"system"===t.type?a("div",[a("div",{staticClass:"card-title"},[a("div",[e._v("系统")]),a("div",[e._v(e._s(t.title))])]),a("div",{staticClass:"card-time"},[e._v("\n          "+e._s(e._f("formatTime")(new Date(t.created_at)))+"\n        ")])]):"user_ask"===t.type?a("div",[e._m(1,!0),a("div",{staticClass:"customer-info"},[a("div",[e._v("症状："+e._s(t.ask_question_desc))]),a("div",[e._v("\n            干预史："+e._s(t.interven_desc?t.interven_desc:"无")+"\n          ")]),a("div",[e._v("\n            资料照片及视频："),0===t.ask_question_report.length?a("span",[e._v("无")]):e._e()]),t.ask_question_report.length>0?a("el-row",{staticStyle:{"margin-top":"20px"}},e._l(t.ask_question_report,(function(s,r){return a("el-col",{key:"meida"+r,attrs:{span:6}},[a("media-display-item",{attrs:{url:s.url,"media-type":s.type,"url-list":t.ask_question_report,"show-media-detail":e.showMediaDetail}})],1)})),1):e._e()],1),a("div",{staticClass:"card-time"},[e._v("\n          "+e._s(e._f("formatTime")(new Date(t.created_at)))+"\n        ")]),a("el-button",{staticClass:"review-chat",attrs:{type:"text"},on:{click:function(t){return e.gotoMessages(e.fdAsk)}}},[e._v("\n          查看聊天记录\n        ")])],1):e._e()])}))],2)])},x=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-title"},[a("div",[e._v("用户")]),a("div",[e._v("选择结束咨询")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-title"},[a("div",[e._v("用户")]),a("div",[e._v("健康咨询")])])}],F=a("afce"),k=a("7962"),C=a("0680"),j={name:"HistoryDetail",components:{MediaDisplayItem:F["a"],Monitor:k["a"]},props:{timeLineInfo:{type:Array,default:function(){return[]}},fdAsk:{type:String,default:""}},data:function(){return{monitorInfo:{},curUrlList:[]}},methods:{resolveStatus:C["c"],suggestType:C["g"],gotoMessages:function(e){this.$emit("gotoMessages",e)},showMediaDetail:function(e,t,a){this.curUrlList=e.filter((function(e){return"image"===e.type})).map((function(e){var t=e.url;return t})),this.monitorInfo={type:t,meta:{url:a}},this.$refs.monitor.show()}}},D=j,I=(a("85a6"),Object(p["a"])(D,w,x,!1,null,"70050d34",null)),z=I.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"drawer"},[a("div",{class:e.maskClass,on:{click:e.closeByMask}}),a("div",{staticClass:"main",class:e.mainClass,style:e.mainStyle},[a("div",{staticClass:"drawer-head"},[a("span",[e._v("   聊天记录")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.closable,expression:"closable"}],staticClass:"close-btn el-icon-close",on:{click:e.closeByButton}})]),a("div",{staticClass:"drawer-body"},[e._t("default")],2)])])},S=[],$={props:{display:{type:Boolean},title:{type:String,default:"标题"},closable:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},width:{type:String,default:"400px"},inner:{type:Boolean,default:!0}},computed:{maskClass:function(){return{"mask-show":this.mask&&this.display,"mask-hide":!(this.mask&&this.display),inner:this.inner}},mainClass:function(){return{"main-show":this.display,"main-hide":!this.display,inner:this.inner}},mainStyle:function(){return{width:this.width,right:this.display?"0":"+".concat(this.width),borderLeft:this.mask?"none":"1px solid #eee"}}},mounted:function(){},methods:{closeByMask:function(){this.maskClosable&&this.$emit("update:display",!1)},closeByButton:function(){this.$emit("update:display",!1)}}},O=$,A=(a("6dcb"),Object(p["a"])(O,T,S,!1,null,"84c34768",null)),q=A.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"refmsgCard",staticClass:"msg-card"},[e.msgList&&e.msgList.length>0?a("div",{staticClass:"infinite-list-wrapper"},[a("div",e._l(e.msgList,(function(t,s){return a("div",{key:s,staticStyle:{"line-height":"30px"}},[a("el-row",{staticClass:"all",attrs:{gutter:24}},[a("el-col",{class:e.searchType+"-right",attrs:{span:24}},[a("p",{staticClass:"color-999 align-left"},[a("span",[e._v(e._s(t.account.name))]),a("span",{staticClass:"fontsize-10 margin-left-20"},[e._v(e._s(e._f("formatTime")(new Date(t.created_at))))])]),"text"===t.message_body.type?a("p",{staticClass:"align-left content"},[e._v("\n              "+e._s(t.message_body&&t.message_body.content)+"\n            ")]):e._e(),t.message_body&&"link"===t.message_body.type?a("div",{staticClass:"align-left content"},[a("p",{staticClass:"link",on:{click:function(a){return e.toURL(t.message_body&&t.message_body.content)}}})]):e._e(),"robot_card"===t.message_body.type||"round_msg"===t.message_body.type?a("div",e._l(t.message_body.content,(function(s,r){return a("div",{key:s.ask_type?s.ask_type+r:r},[a("BoutCard",{attrs:{title:t.message_body.title,reAsk:"re_ask"===t.message_body.content[0].ask_type,boutCard:e.boutCardData(s,t.accountType,r,t.msgOptions),msgTime:t.msgTime},on:{showDetail:e.showDetail}}),r<t.message_body.content.length-1&&"re_ask"!==t.message_body.content[0].ask_type?a("p",{class:t.isSelfSend?"chat_divider":"chat_divider_left"}):e._e()],1)})),0):e._e(),t.message_body&&"voicecard"===t.message_body.type?a("div",{staticStyle:{"padding-bottom":"10px"}},[a("open-card",{attrs:{title:"点击查看通话录音"}},[a("voice-card",{attrs:{msgtime:t.message_body.msgTime,src:t.message_body.url,vduration:t.message_body.duration}})],1)],1):e._e(),t.message_body&&"image"===t.message_body.type?a("div",{staticClass:"image-box",on:{click:function(a){return e.thumbClickFun("image",t.message_body.url)}}},[a("img",{attrs:{src:t.message_body&&t.message_body.url,alt:""}})]):e._e(),t.message_body&&"voice"===t.message_body.type?a("div",{staticClass:"image-box"},[a("open-card",{attrs:{title:"点击查看语音"}},[a("audio",{attrs:{src:t.message_body.url,controls:""}})])],1):e._e(),t.message_body&&"video"===t.message_body.type?a("div",{staticClass:"image-box"},[a("div",{staticClass:"VideoContent",on:{click:function(a){return e.thumbClickFun("video",t.message_body.url)}}},[a("img",{attrs:{src:t.message_body&&t.message_body.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg","data-src":t.message_body&&t.message_body.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg",alt:""}}),a("i",{staticClass:"el-icon-video-play"})])]):e._e(),t.message_body&&"notice"===t.message_body.type?a("div",{staticClass:"align-left"},[a("SystemContent",{staticStyle:{"font-size":"12px","text-align":"left"},attrs:{content:t.message_body&&t.message_body.content}})],1):e._e(),t.message_body&&"card"===t.message_body.type?a("div",[a("open-card",{attrs:{title:"点击查看卡片"}},[a("CardContent",{attrs:{"images-options":t.message_body,baby:t.message_body.content.family_member,symptom:t.message_body.content.ask_question_desc,"has-interven":t.message_body.content.has_interven,"interven-desc":t.message_body.content.interven_desc,"data-arr":t.message_body.content.ask_question_report},on:{showDetail:e.showDetail}})],1)],1):e._e()])],1)],1)})),0)]):a("div",{staticStyle:{"text-align":"center",color:"#5a5e66"}},[e._v("\n    咨询记录\n  ")]),a("monitor",{ref:"monitor",attrs:{"monitor-info":e.monitorInfo,"current-image-url-arr":e.curUploadUrlList}})],1)},B=[],R=a("8975"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[!1===e.showCard?a("div",{staticStyle:{"font-size":"12px",color:"#576277",cursor:"pointer"},on:{click:function(t){e.showCard=!0}}},[e._v("\n    "+e._s(e.title)+"\n  ")]):a("div",{staticStyle:{"font-size":"12px",color:"#576277",cursor:"pointer"},on:{click:function(t){e.showCard=!1}}},[e._v("\n    关闭查看\n  ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showCard,expression:"showCard"}]},[e._t("default")],2)])},L=[],V={name:"OpenCard",props:{title:{type:String,default:""}},data:function(){return{showCard:!1}}},E=V,H=Object(p["a"])(E,M,L,!1,null,null,null),P=H.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"SystemContent"},[a("p",{staticStyle:{"margin-bottom":"8px"}},[e._v(e._s(e.createdAt))]),a("el-row",[a("p",{directives:[{name:"show",rawName:"v-show",value:"systemInfo"==e.msgType,expression:"msgType == 'systemInfo'"}]},[a("span",[e._v(e._s(e.content))])]),a("p",{directives:[{name:"show",rawName:"v-show",value:"systemWarnning"==e.msgType,expression:"msgType == 'systemWarnning'"}],staticClass:"systemWarnning"},[e._v("\n      "+e._s(e.content)+"\n    ")])])],1)},W=[],G={name:"SystemContent",props:{content:{type:String,default:"超过十分钟"},createdAt:{type:String,default:""},msgType:{type:String,default:"systemInfo"}}},Y=G,J=(a("4ed2"),Object(p["a"])(Y,U,W,!1,null,"5a23442a",null)),K=J.exports,Q=a("92f3"),X=a("d679"),Z=a("c1a0"),ee={components:{SystemContent:K,CardContent:X["a"],Monitor:k["a"],VoiceCard:Z["a"],OpenCard:P,BoutCard:Q["a"]},props:{searchType:{type:String,default:"all"},msgList:{type:Array,default:function(){return[]}}},watch:{msgList:function(){console.log("msgList==",this.msgList)}},data:function(){return{monitorInfo:{},curUploadUrlList:[],imageArr:[]}},created:function(){},methods:{boutCardData:R["boutCardData"],showDetail:function(e){this.thumbClickFun(e.mediaType,e.meidiaUrl)},thumbClickFun:function(e,t){this.monitorInfo={type:e,meta:{url:t}},this.curUploadUrlList.push(t),this.$refs.monitor.show()},toURL:function(e){e&&window.open(e)}}},te=ee,ae=(a("208d"),Object(p["a"])(te,N,B,!1,null,"ea4d6944",null)),se=ae.exports,re=a("2f62"),ne=a("d800"),ie=a("c443"),oe={name:"CaseHistoryRecent",components:{HistoryDetail:z,ChatHistory:q,MsgCard:se},props:{recentHistory:{type:Array,default:function(){return[]}},department:{type:String,default:""}},data:function(){return{currentDetail:[],displayChat:!1,messageList:[],drawerWidth:"100%"}},computed:{extendRecentHistoryHeight:function(){return"chat"===this.$store.state.babyExtend.pageType?"710px":"650px"}},methods:Object(i["a"])({systemRole:C["h"],resolveStatus:C["c"],suggestType:C["g"],gotoMessages:function(e){var t=this;"chat"===this.$store.state.babyExtend.pageType?this.goFdAsk(e):(this.messageList=[],this.displayChat=!0,Object(ie["d"])(e).then((function(e){t.messageList=e.data.list})))},openDetail:function(e){var t=this;!1===e.open?Object(ne["e"])(e._id).then((function(a){2e4===a.code&&(t.currentDetail=a.data.paths,e.open=!0)})):e.open=!1}},Object(re["b"])({goFdAsk:"goFdAsk"}))},le=oe,ce=(a("a9c7"),Object(p["a"])(le,_,v,!1,null,"03ab5049",null)),ue=ce.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("drawer",{attrs:{title:"",display:e.display,inner:!0,width:e.drawerWidth,mask:!1,direction:"left",closable:!1},on:{"update:display":function(t){e.display=t}}},[a("scroll-box",{attrs:{"box-height":670}},[a("range-history",{attrs:{"range-history":e.relatedHistory,department:e.department},on:{openMessageList:e.openMessageList}})],1)],1),a("chat-history",{attrs:{title:"",display:e.displayChat,inner:!0,width:e.drawerWidth,mask:!1,direction:"left"},on:{"update:display":function(t){e.displayChat=t}}},[a("div",[a("msg-card",{attrs:{"msg-list":e.messageList}})],1)]),a("div",{staticClass:"history-search-container"},[a("div",{staticClass:"history-search-item"},[a("div",{staticClass:"history-search-label"},[e._v("建议叮嘱搜索")]),a("el-input",{staticClass:"history-search-value",attrs:{clearable:"",size:"mini",placeholder:"请输入搜索内容","prefix-icon":"el-icon-search"},on:{input:e.search},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),a("div",{staticClass:"history-search-label"},[e._v("咨询开始时间")]),a("div",{staticClass:"history-search-item"},[a("el-date-picker",{staticClass:"history-search-value",attrs:{format:" yyyy/MM/dd hh:mm:ss","picker-options":e.pickerOptions,size:"mini",type:"datetimerange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},on:{change:e.search},model:{value:e.searchDateRange,callback:function(t){e.searchDateRange=t},expression:"searchDateRange"}})],1)]),e.searchText||e.searchDateRange?e.searchText&&e.allHistory.length>0?a("div",{staticClass:"search-result"},[e._v("\n    "+e._s(e.historyTotalCount)+"条与"),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.searchText))]),e._v("相关内容\n  ")]):0===e.allHistory.length&&e.resultPanelShow?a("div",{staticClass:"search-result"},[e._v("\n    没有找到相关记录\n  ")]):e._e():a("div",{staticClass:"search-result"},[e._v("\n    请输入搜索内容\n  ")]),a("div",{staticClass:"all-history-card"},[a("scroll-box",{attrs:{"box-height":e.extendAllHistoryHeight}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMoreData,expression:"loadMoreData"}],attrs:{"infinite-scroll-immediate":"false"}},e._l(e.allHistory,(function(t,s){return a("div",{key:s},[a("div",{staticClass:"talk-title"},[a("div",{staticClass:"text"},[a("div",[e._v("\n                "+e._s(e._f("formatTime")(new Date(t.created_at)))+"\n              ")]),"disease"==t.question_type?a("div",{staticClass:"align-right margin-right-10"},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("疾病护理类")]),e._v("\n                "+e._s(t.ask_type)+"\n              ")]):a("div",{staticClass:"align-right margin-right-10"},[e._v("\n                "+e._s("chanke"===e.department?"其他问题":"其他育儿类")+"\n              ")])]),a("div",{staticClass:"icon",on:{click:function(a){return e.showDrawerHistory(t)}}},[a("i",{staticClass:"el-icon-arrow-right"})])]),a("div",{staticClass:"talk-content"},[t.hm?a("div",[e._v("\n              "+e._s(e.systemRole("hm","",e.department))+"："+e._s(t.hm.name||"")+"\n            ")]):e._e(),t.dietician?a("div",[e._v("\n              营养师："+e._s(t.dietician.name||"")+"\n            ")]):e._e(),t.doctor?a("div",[e._v("医生："+e._s(t.doctor.name||""))]):e._e(),a("div",[e._v("状态： "+e._s(e.resolveStatus(t.status,"")))]),a("div",[e._v("\n              "+e._s(t.suggestion_type?e.suggestType(t.suggestion_type):"叮嘱")+"\n              ：\n              "),a("span",{domProps:{innerHTML:e._s(e.searchText?e.searchHighlight(t.suggestion,e.searchText):t.suggestion)}})]),a("el-button",{staticClass:"review-chat",attrs:{type:"text"},on:{click:function(a){return e.showDrawerHistory(t)}}},[e._v("\n              查看该段咨询\n            ")])],1)])})),0)])],1)],1)},de=[],he=(a("a481"),a("3b2b"),a("7b32")),pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.rangeHistory,(function(t){return a("div",{key:t._id,staticClass:"case-drawer"},[a("div",{staticClass:"time-range"},[e._v("\n      "+e._s(e._f("formatTime")(new Date(t.start_at)))+"\n      到\n      "+e._s(e._f("formatTime")(new Date(t.end_at)))+"\n    ")]),e._l(t.list,(function(t){return a("div",{key:t._id},[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.openDetail(t)}}},[a("div",{staticClass:"talk-title"},[a("div",{staticClass:"text"},[a("div",[e._v("\n              "+e._s(e._f("formatTime")(new Date(t.created_at),"y-m-d"))+"\n            ")]),"disease"==t.question_type?a("div",{staticClass:"align-right margin-right-10"},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("疾病护理类")]),e._v("\n              "+e._s(t.ask_type)+"\n            ")]):a("div",{staticClass:"align-right margin-right-10"},[e._v("\n              "+e._s("chanke"===e.department?"其他问题":"其他育儿类")+"\n            ")])]),a("div",{staticClass:"icon"},[a("i",{staticClass:"el-icon-arrow-right",class:{"detail-open":t.open}})])]),a("div",{staticClass:"talk-content"},[t.hm?a("div",[e._v("\n            "+e._s(e.systemRole("hm","",e.department))+"："+e._s(t.hm.name)+"\n          ")]):e._e(),t.doctor?a("div",[e._v("医生："+e._s(t.doctor.name))]):e._e(),t.dietician?a("div",[e._v("营养师： "+e._s(t.dietician.name))]):e._e(),a("div",[e._v("状态： "+e._s(e.resolveStatus(t.status,"")))]),a("div",[e._v("\n            "+e._s(t.suggestion_type?e.suggestType(t.suggestion_type):"叮嘱")+"\n            ： "+e._s(t.suggestion)+"\n          ")])])]),t.open?a("div",{staticClass:"history-detail"},[a("history-detail",{attrs:{"time-line-info":e.currentDetail,department:e.department,"fd-ask":t._id},on:{gotoMessages:e.gotoMessages}})],1):e._e()])}))],2)})),0)},be=[],fe={name:"RangeHistory",components:{HistoryDetail:z},props:{rangeHistory:{type:Array,default:function(){return[]}},department:{type:String,default:""}},methods:Object(i["a"])({suggestType:C["g"],systemRole:C["h"],resolveStatus:C["c"]},Object(re["b"])({goFdAsk:"goFdAsk"}),{openDetail:function(e){var t=this;!1===e.open?Object(ne["e"])(e._id).then((function(a){2e4===a.code&&(t.currentDetail=a.data.paths,e.open=!0)})):e.open=!1},gotoMessages:function(e){"chat"===this.$store.state.babyExtend.pageType?this.goFdAsk(e):this.$emit("openMessageList",e)}})},ye=fe,ge=(a("cd3c"),Object(p["a"])(ye,pe,be,!1,null,"6d046261",null)),_e=ge.exports,ve=a("7a26"),we=a("2c97"),xe=a("2ef0"),Fe=a.n(xe),ke={name:"CaseHistoryAll",components:{Drawer:he["a"],RangeHistory:_e,ChatHistory:q,ScrollBox:we["a"],MsgCard:se},props:{babyId:{type:String,default:""},questionType:{type:String,default:""},sessionLastAsk:{type:String,default:""},department:{type:String,default:""}},data:function(){return{displayChat:!1,messageList:[],pickerOptions:Object(ve["a"])(),relatedHistory:[],historyTotalCount:null,allHistory:[],currentDetail:[],pageSize:10,resultPanelShow:!1,searchDateRange:null,searchText:"",display:!1,drawerWidth:"100%"}},computed:{extendAllHistoryHeight:function(){return"chat"===this.$store.state.babyExtend.pageType?570:550}},watch:{questionType:function(){this.resetAllHistory(),this.getHistory()},sessionLastAsk:function(e){this.resetAllHistory(),this.getHistory()}},created:function(){this.resetAllHistory(),this.getHistory()},methods:{systemRole:C["h"],resolveStatus:C["c"],suggestType:C["g"],openMessageList:function(e){var t=this;this.messageList=[],this.displayChat=!0,Object(ie["d"])(e).then((function(e){t.messageList=e.data.list}))},resetAllHistory:function(){this.searchText="",this.searchDateRange=null,this.allHistory=[],this.displayChat=!1,this.resultPanelShow=!1,this.display=!1},search:function(){this.resultPanelShow=!1,this.getRemoteData()},showDrawerHistory:function(e){var t=this,a={last_three:0,fd_ask:e._id};Object(ne["d"])(a).then((function(e){if(2e4===e.code){var a=e.data.map((function(e){return e.list=e.list.map((function(e){return Object(i["a"])({},e,{open:!1})})),e}));t.relatedHistory=a,t.display=!0}}))},searchHighlight:function(e,t){if(e){var a=new RegExp(t,"g"),s='<span style="color: red">'+t+"</span>",r=e.replace(a,s);return r}},getHistory:function(){var e=this,t=this.sessionLastAsk||"";if(t){var a="all"==this.questionType?"":this.questionType,s={question_type:a,fd_ask:t,search_key:this.searchText,page_size:this.pageSize,current_page:1,start_at:this.searchDateRange?this.searchDateRange[0]:"",end_at:this.searchDateRange?this.searchDateRange[1]:""};Object(ne["a"])(s).then((function(t){2e4===t.code&&(e.allHistory=t.data.list,e.historyTotalCount=t.data.count,e.resultPanelShow=!0)}))}else this.allHistory=[]},getRemoteData:Fe.a.debounce((function(){this.historyTotalCount=0,this.pageSize=10,this.getHistory()}),300),loadMoreData:function(){this.pageSize+=1,this.pageSize<=this.historyTotalCount&&this.getHistory()}}},Ce=ke,je=(a("271d"),a("d2ab"),Object(p["a"])(Ce,me,de,!1,null,"7650121d",null)),De=je.exports,Ie={name:"CaseHistory",components:{CaseHistoryRecent:ue,CaseHistoryAll:De},props:{babyId:{type:String,default:""},department:{type:String,default:""},lastAskId:{type:String,default:""}},data:function(){return{consultType:"all",consultTypeArr:[{name:"all",label:"全部"},{name:"disease",label:"疾病护理类"},{name:"other",label:"其他问题"}],displayChat:!1,messageList:[],drawerWidth:"100%",historyType:"recent",recentHistory:[]}},computed:Object(i["a"])({},Object(re["c"])(["babyExtendTab"]),{isRecentHistory:function(){if(this.babyExtendTab&&"consultHistory"===this.babyExtendTab&&"disease"===this.consultType){var e=this.lastAskId||"";return!!e}return!1}}),watch:{isRecentHistory:function(e){if(e){this.historyType="recent",this.recentHistory=[];var t={last_three:1,fd_ask:this.lastAskId};this.getRecentHistory(t)}else this.recentHistory=[]},department:function(){this.consultTypeArr[2].label="chanke"===this.department?"其他问题":"其他育儿类"}},methods:{setType:function(){console.log(this.consultType)},resetDrawerShow:function(){this.$refs.caseHistoryAll.display=!1},getRecentHistory:function(e){var t=this;Object(ne["d"])(e).then((function(e){t.recentHistory=e.data;var a=t.recentHistory.map((function(e){return e.list=e.list.map((function(e){return e=Object(i["a"])({},e,{open:!1}),e})),e}));t.recentHistory=a})).catch((function(e){console.log("获取最近的三段咨询记录"+e)}))}}},ze=Ie,Te=Object(p["a"])(ze,y,g,!1,null,null,null),Se=Te.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"share-notes"},[a("SharingForm",{ref:"sharingForm",attrs:{babyId:e.babyId},on:{showAddForm:e.addVisibleTrue,sharingFormChange:e.sharingFormChange}}),a("AddSharingNotes",{directives:[{name:"show",rawName:"v-show",value:e.addVisible,expression:"addVisible"}],ref:"addSharingNotes",attrs:{babyId:e.babyId},on:{submitNotesSuccess:e.submitNotesSuccess,cancalAdd:e.addVisibleFalse}},[a("template",{slot:"header"},[e._v("\n      "+e._s(e.title)+"\n    ")])],2),e.notesList&&e.notesList.length?a("el-row",[a("scroll-box",{attrs:{"box-height":e.addVisible?300:560}},[a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-immediate":"disabled"}},e._l(e.notesList,(function(t,s){return a("li",{key:s,staticStyle:{"line-height":"30px"}},[a("AddSharingNotes",{attrs:{babyId:e.babyId,showTextareaProps:e.showTextareaArr[s].show,notesContent:t.content,notesId:t._id,editIndex:s},on:{editNotesSuccess:e.editNotesSuccess,cancalAdd:e.addVisibleFalse}},[a("template",{slot:"header"},[e._v("\n              "+e._s(t.admin_user&&t.admin_user.name?t.admin_user.name:"")+"\n              "+e._s(e.formatTime(t.created_at))+"\n            ")]),t.admin_user&&t.admin_user._id&&t.admin_user._id===e.userInfo.id?a("template",{slot:"operator"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showEdit(s)}}},[e._v("\n                修改\n              ")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showDelNotes(t)}}},[e._v("删除")])],1):e._e()],2)],1)})),0)])],1):e._e(),e.notesList&&0!==e.notesList.length?e._e():a("el-row",{staticClass:"no-data"},[e._v("\n    暂无数据\n  ")]),a("el-dialog",{attrs:{title:"删除提示",visible:e.delNotesDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.delNotesDialogVisible=t}}},[a("span",[e._v("删除后该条数据将从共享备注列表中移除，请确认是否继续删除")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.delNotesFun}},[e._v("删除")])],1)])],1)},Oe=[],Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sharing_form"},[a("el-form",{ref:"sharingForm",attrs:{"label-position":"top",model:e.sharingForm}},[a("el-form-item",{attrs:{label:"关键字搜索"}},[a("el-input",{attrs:{size:"mini",clearable:""},on:{input:e.sharingFormChange},model:{value:e.sharingForm.content,callback:function(t){e.$set(e.sharingForm,"content",t)},expression:"sharingForm.content"}})],1),a("el-form-item",{attrs:{label:"人员搜索"}},[a("el-input",{attrs:{clearable:"",size:"mini"},on:{input:e.sharingFormChange},model:{value:e.sharingForm.name,callback:function(t){e.$set(e.sharingForm,"name",t)},expression:"sharingForm.name"}})],1),a("el-form-item",{attrs:{label:"备注时间"}},[a("el-date-picker",{attrs:{size:"mini",clearable:"",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{input:e.sharingFormChange},model:{value:e.sharingForm.createdAt,callback:function(t){e.$set(e.sharingForm,"createdAt",t)},expression:"sharingForm.createdAt"}})],1),a("el-radio-group",{attrs:{size:"mini"},on:{input:e.busRoleChange},model:{value:e.sharingForm.bus_role,callback:function(t){e.$set(e.sharingForm,"bus_role",t)},expression:"sharingForm.bus_role"}},[a("el-radio-button",{attrs:{label:"hm"}},[e._v("健康管理师")]),a("el-radio-button",{attrs:{label:"doctor"}},[e._v("医生")]),a("el-radio-button",{attrs:{label:"dietician"}},[e._v("营养师")]),a("el-radio-button",{attrs:{label:""}},[e._v("全部")])],1),a("el-button",{staticClass:"add_sharing_notes_btn",attrs:{type:"text",disabled:!e.isMyUser},on:{click:e.addSharingNotes}},[e._v("添加")])],1)],1)},qe=[],Ne={data:function(){return{sharingForm:{content:"",name:"",createdAt:"",bus_role:"hm"}}},computed:Object(i["a"])({},Object(re["c"])(["isMyUser"])),methods:{addSharingNotes:function(){this.$emit("showAddForm")},sharingFormChange:function(){this.sharingForm.bus_role="",this.$emit("sharingFormChange",this.sharingForm)},busRoleChange:function(){this.$emit("sharingFormChange",this.sharingForm)}}},Be=Ne,Re=(a("3056"),Object(p["a"])(Be,Ae,qe,!1,null,"167abbf5",null)),Me=Re.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add_notes_form"},[a("el-row",{staticClass:"header",attrs:{gutter:24}},[a("el-col",{staticClass:"title",attrs:{span:16}},[e._t("header")],2),a("el-col",{staticClass:"align-right",attrs:{span:7}},[e._t("operator")],2)],1),e.showTextareaProps?a("el-row",{staticClass:"textarea_row"},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注内容"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),a("el-row",{staticClass:"align-center",staticStyle:{margin:"14px 0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitNotes}},[e._v("\n        保存\n      ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.cancelAdd}},[e._v("\n        取消\n      ")])],1)],1):e._e(),e.showTextareaProps?e._e():a("div",{staticClass:"notes_content"},[e._v("\n    "+e._s(e.notesContent)+"\n  ")])],1)},Ve=[],Ee=(a("c5f6"),a("b775"));function He(e,t){return delete t.created_at,delete t.count,Object(Ee["a"])({url:"/shared_remarks/list/".concat(e),method:"get",params:t})}function Pe(e,t){return Object(Ee["a"])({url:"/shared_remarks/create/".concat(e),method:"post",data:t})}function Ue(e,t){return Object(Ee["a"])({url:"/shared_remarks/edit/".concat(e),method:"put",data:t})}function We(e){return Object(Ee["a"])({url:"/shared_remarks/destroy/".concat(e),method:"DELETE"})}var Ge={props:{showTextareaProps:{type:Boolean,default:!0},notesContent:{type:String,default:""},babyId:{type:String,default:""},notesId:{type:String,default:""},editIndex:{type:Number,default:0}},data:function(){return{content:""}},watch:{showTextareaProps:function(e){e&&(this.content=this.notesContent)}},methods:{submitNotes:function(){var e=this;this.content?this.notesId?Ue(this.notesId,{content:this.content}).then((function(t){t.data.result&&(e.$message.success("更新成功"),e.content="",e.$emit("editNotesSuccess",e.editIndex))})):Pe(this.babyId,{content:this.content}).then((function(t){2e4===t.code&&(e.$message.success("保存成功"),e.content="",e.$emit("submitNotesSuccess"))})):this.$message({type:"warning",message:"备注不能为空"})},cancelAdd:function(){this.$emit("cancalAdd",this.editIndex)}}},Ye=Ge,Je=(a("cbf7"),Object(p["a"])(Ye,Le,Ve,!1,null,"0c4c7229",null)),Ke=Je.exports,Qe={computed:Object(i["a"])({},Object(re["c"])(["bus_role","userInfo"]),{disabled:function(){return this.loading||this.noMore}}),components:{SharingForm:Me,ScrollBox:we["a"],AddSharingNotes:Ke},props:{babyId:{type:String,default:""}},watch:{"defaultSearcheParams.count":function(){this.pageSizes=this.defaultSearcheParams.count%this.defaultSearcheParams.pageSize===0?this.defaultSearcheParams.count/this.defaultSearcheParams.pageSize:this.defaultSearcheParams.count/this.defaultSearcheParams.pageSize+1},babyId:function(){this.notesList=[],this.loadMoreFlag=!1,this.$refs.sharingForm.sharingForm={content:"",name:"",createdAt:"",bus_role:"hm"},this.$refs.addSharingNotes.content="",this.addVisible=!1,this.defaultSearcheParams={currentPage:1,pageSize:10,count:0},this.getNotesList()}},data:function(){return{notesId:"",delNotesDialogVisible:!1,addVisible:!1,notesList:[],title:"添加备注",defaultSearcheParams:{currentPage:1,pageSize:10,count:0},pageSizes:0,loadMoreFlag:!1,showTextareaArr:[],SearcheParams:{content:"",name:"",beginTime:"",endTime:"",bus_role:"hm"},loading:!1,noMore:""}},mounted:function(){this.getNotesList()},methods:{handleClose:function(){this.delNotesDialogVisible=!1},addVisibleTrue:function(){this.addVisible=!0},addVisibleFalse:function(e){this.addVisible=!1,(e||0===e)&&(this.$set(this.showTextareaArr[e],"show",!1),this.$forceUpdate())},showDelNotes:function(e){this.delNotesDialogVisible=!0,this.notesId=e._id},delNotesFun:function(){var e=this;We(this.notesId).then((function(t){t.data.result&&(e.handleClose(),e.notesId="",e.notesList=[],e.loadMoreFlag=!1,e.getNotesList()),e.$message({type:t.data.result?"success":"error",message:t.data.result?"删除成功":"删除失败"})}))},sharingFormChange:function(e){this.SearcheParams=e,this.submitNotesSuccess()},getNotesList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.babyId){e.next=2;break}return e.abrupt("return");case 2:return this.SearcheParams=Object.assign(this.$refs.sharingForm.sharingForm,this.defaultSearcheParams),this.SearcheParams.beginTime=this.SearcheParams.createdAt&&this.SearcheParams.createdAt.length?this.SearcheParams.createdAt[0]:"",this.SearcheParams.endTime=this.SearcheParams.createdAt&&this.SearcheParams.createdAt.length?this.SearcheParams.createdAt[1]:"",e.next=7,He(this.babyId,this.SearcheParams).then((function(e){if(e.data.list){t.loadMoreFlag?t.notesList=t.notesList.concat(e.data.list):t.notesList=e.data.list;for(var a=0;a<t.notesList.length;a++)t.showTextareaArr[a]&&t.showTextareaArr[a].show?t.$set(t.showTextareaArr[a],"show",!1):t.showTextareaArr[a]={show:!1};t.defaultSearcheParams.count=e.data.count,t.defaultSearcheParams.currentPage=e.data.currentPage}}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showEdit:function(e){this.$set(this.showTextareaArr[e],"show",!0),this.$forceUpdate()},editNotesSuccess:function(e){this.submitNotesSuccess()},submitNotesSuccess:function(){this.notesList=[],this.loadMoreFlag=!1,this.defaultSearcheParams={currentPage:1,pageSize:10,count:0},this.getNotesList(),this.addVisible=!1},loadMore:function(){this.defaultSearcheParams.currentPage<=this.pageSizes&&(this.loading=!0,this.defaultSearcheParams.currentPage++,this.loadMoreFlag=!0,this.getNotesList(),this.loading=!1)}}},Xe=Qe,Ze=(a("92cf"),Object(p["a"])(Xe,$e,Oe,!1,null,"836c5e2a",null)),et=Ze.exports,tt=a("57ee"),at=a("17e4"),st=a("dac4"),rt=a("df64"),nt=a("7b1f"),it={components:{basicInfo:f,CaseHistory:Se,SeeDetail:st["default"],StatusDetail:rt["default"],FileDetail:tt["default"],healthfileDetail:at["default"],sharingNotes:et,ScrollBox:we["a"]},props:{babyId:{type:String,default:""},pageType:{type:String,default:"chat"}},data:function(){return{isSee:!1,count:!1,userId:"",babyInfo:{},lastAskId:"",activeInfo:"",department:""}},computed:Object(i["a"])({},Object(re["c"])(["lastAsk","userInfo"])),watch:{babyId:function(e){this.getDetail()},activeInfo:function(e){this.$store.commit("babyExtend/SET_ACTIVEINFO",e)}},created:function(){this.getDetail()},methods:{ifHasServer:ve["c"],getDetail:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.department="",!this.babyId){e.next=5;break}return this.getSendCount(this.babyId),e.next=5,Object(m["c"])(this.babyId).then((function(e){a.babyInfo=e.data,e.data.length&&(a.department=a.babyInfo[0].type,a.lastAskId=e.data[0].last_ask?e.data[0].last_ask:a.lastAsk?a.lastAsk._id:"")}));case 5:t="chat"===this.pageType?"sharingNotes":"basicInfo","chanke"===this.department&&"chat"===this.pageType&&(t="healthHistory"),this.activeInfo=t,this.$store.commit("babyExtend/SET_PAGETYPE",this.pageType),this.$store.commit("babyExtend/SET_ACTIVEINFO",this.activeInfo);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getSendCount:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["r"])({baby:t});case 2:a=e.sent,s=a.data,this.count=!!s.count;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setLookStatus:function(e){this.isSee=!1!==e||e}}},ot=it,lt=(a("0831"),Object(p["a"])(ot,s,r,!1,null,null,null));t["a"]=lt.exports},"8d1f":function(e,t,a){"use strict";var s=a("a482"),r=a.n(s);r.a},9055:function(e,t,a){"use strict";var s=a("5a04"),r=a.n(s);r.a},9118:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"edit-container"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("baby-info-area",{attrs:{"baby-id":e.$route.query.id,"page-type":"recipes"}})],1),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"edit-content"},[a("el-row",{staticClass:"edit-section"},[a("el-col",{staticClass:"edit-form",attrs:{span:24}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"user-info",staticStyle:{"margin-right":"50px"}},[a("div",{staticClass:"user-info-label"},[a("el-avatar",{attrs:{size:"small",src:e.ruleForm.user&&e.ruleForm.user.avatar}}),a("div",[e._v("  用户:")])],1),a("div",[e._v("\n                    "+e._s(e.ruleForm.user&&(e.ruleForm.user.remark_name?e.ruleForm.user.remark_name:e.ruleForm.user.nickname))+"  \n                    "),e.ruleForm.is_replace?a("svg-icon",{attrs:{"icon-class":"replace"}}):e._e()],1)]),a("div",{staticClass:"user-info"},[a("div",{staticClass:"user-info-label"},[a("div",[e._v("  宝宝:")])]),a("div",[e._v("\n                    "+e._s(e.ruleForm.family_member&&e.ruleForm.family_member.name)+"\n                  ")])])]),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"模板名称：",rules:[{required:!0,message:"请填选择模板",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"65%"},on:{change:e.getTemplateDetail},model:{value:e.recipeTemplateId,callback:function(t){e.recipeTemplateId=t},expression:"recipeTemplateId"}},e._l(e.templateDic,(function(e){return a("el-option",{key:e._id,attrs:{label:e.title,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"食谱名称：",prop:"title",rules:[{required:!0,message:"请填写标题",trigger:"blur"}]}},[a("div",{staticStyle:{width:"65%"}},[a("el-input",{attrs:{maxlength:"50","show-word-limit":""},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1)]),a("el-form-item",{attrs:{label:"备注",prop:"desc"}},[a("el-input",{attrs:{autosize:{minRows:5,maxRows:100},type:"textarea",maxlength:"100","show-word-limit":""},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),a("el-form-item",{attrs:{label:"表格",rules:[{required:!0,message:"请填写",trigger:"blur"}]}},[a("c-hot-table",{attrs:{height:300,readonly:!1},model:{value:e.tableContent,callback:function(t){e.tableContent=t},expression:"tableContent"}})],1),a("el-form-item",{attrs:{label:"注释",rules:[{required:!0,message:"请填写",trigger:"blur"}]}},[a("el-input",{attrs:{autosize:{minRows:5,maxRows:100},type:"textarea",maxlength:"1000","show-word-limit":""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),a("el-form-item",[a("div",{staticClass:"button-container"},[a("el-button",{on:{click:e.handleCloseTask}},[e._v("关闭任务")]),a("el-button",{on:{click:e.saveTask}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",loading:e.sendLoading},on:{click:e.sendTask}},[e._v("发送")])],1)])],1)],1)],1)],1),a("div",{staticClass:"recipes-image"},[a("HtmlToImage",{ref:"htmlToImage",staticClass:"recipe-preview"},[a("div",{staticClass:"recipe",style:{backgroundImage:"url("+(e.curRecipeBgOpt()?e.curRecipeBgOpt().recipeBg:"")+")",paddingTop:"20px"}},[a("img",{staticClass:"recipe__header-img",attrs:{width:"100%",src:e.curRecipeBgOpt()?e.curRecipeBgOpt().recipeHeadBg:"",alt:"加载失败"}}),a("div",{staticClass:"recipe__body"},[a("div",{staticClass:"recipe__body__header"},[a("span",{staticClass:"recipe__body__header__title"},[e._v(e._s(e.ruleForm.title))]),a("span",{staticClass:"recipe__body__header__sign"},[e._v("十月呵护营养师"+e._s(e.dietician))])]),a("c-table",{attrs:{data:e.effHtData}}),a("div",{staticClass:"recipe__body__notes"},[a("div",{domProps:{innerHTML:e._s(e.description)}})])],1)])])],1)])],1)],1),a("task-close-dialog",{attrs:{closeDialogVisible:e.closeDialogVisible},on:{closeTask:e.closeTask,closeDialog:function(t){e.closeDialogVisible=!1}}})],1)},r=[],n=(a("96cf"),a("3b8d")),i=a("db72"),o=(a("7f7f"),a("8981")),l=a("f561"),c=a("dc3a"),u=a("c6a9"),m=a("27f3"),d=a("2f62"),h=a("2c4d"),p=a("1e42"),b=a("ed08"),f=a("91b6"),y=a("7afd"),g={name:"Send",components:{BabyInfoArea:o["a"],CHotTable:l["a"],CTable:c["a"],HtmlToImage:u["a"],TaskCloseDialog:y["a"]},data:function(){return{closeDialogVisible:!1,templateId:"",babyId:"",sendLoading:!1,tableContent:[],bgType:"A",description:"",recipeTemplateId:"",curRecBgOpts:h["a"],dietician:this.$store.state.user.name,effHtData:[],ruleForm:{},isSaved:!1,createTaskId:"",dialogVisible:!1,currentTask:{}}},computed:Object(i["a"])({},Object(d["c"])(["selectBaby","templateDic"])),watch:{tableContent:{handler:function(e){this.effHtData=Object(m["c"])(e)},deep:!0}},mounted:function(){this.currentTask=JSON.parse(Object(b["i"])("currentTask")),this.getTemplateDic({show_replace:this.currentTask.is_replace?1:0}),this.getTaskContentFun()},methods:Object(i["a"])({},Object(d["b"])({getTemplateDic:"recipes/getTemplateDic"}),{handleCloseTask:function(){this.closeDialogVisible=!0},closeTask:function(e){var t=this,a={reason:e.closeReasonType,reason_message:e.closeReason};this.closeDialogVisible=!1,Object(p["b"])(this.currentTask._id,a).then((function(e){2e4===e.code&&(t.$message.success("关闭任务成功"),setTimeout((function(){t.$router.push({path:"close",query:{babyId:t.babyId,taskId:t.currentTask._id}})}),2e3))}))},getTaskContentFun:function(){var e=this;Object(p["i"])(this.currentTask._id).then((function(t){if(2e4===t.code){var a=t.data;e.templateId=a.recipe_template._id,e.babyId=a.family_member._id,0===e.currentTask.status?(e.tableContent=a.recipe_template.content,e.bgType=a.recipe_template.bg_type,e.recipeTemplateId=a.recipe_template.title,e.description=a.recipe_template.description,e.ruleForm=a):(e.tableContent=a.content,e.bgType=a.recipe_template.bg_type,e.recipeTemplateId=a.recipe_template.title,e.description=a.description,e.ruleForm=a)}}))},getTemplateDetail:function(e){var t=this;this.templateId=e,Object(p["f"])(e).then((function(e){t.bgType=e.data.bg_type,t.tableContent=e.data.content,t.recipeTemplateId=e.data._id,t.description=e.data.description}))},curRecipeBgOpt:function(){var e=this,t=this.curRecBgOpts.filter((function(t){return t.type===e.bgType}));return 1===t.length?t[0]:{}},getRecipeUrl:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.htmlToImage.htmlToCanvas(!0);case 2:return a=e.sent,a.name=t,e.next=6,Object(f["c"])(a,(function(e){}));case 6:return s=e.sent,r=s.url,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendTask:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.sendLoading=!0,e.getRecipeUrl(e.currentTask._id).then((function(t){var a=e.ruleForm,s=a.title,r=a.desc,n={recipe_template:e.templateId,content:e.tableContent,description:e.description,title:s,desc:r,url:t};Object(p["n"])(e.currentTask._id,2,n).then((function(t){2e4===t.code&&(e.sendLoading=!1,e.$message.success("发送成功"),e.$router.back(-1))})).catch((function(){e.sendLoading=!1}))}))}))},saveTask:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a=e.ruleForm,s=a.title,r=a.desc,n={recipe_template:e.templateId,content:e.tableContent,description:e.description,title:s,desc:r};Object(p["n"])(e.currentTask._id,1,n).then((function(t){2e4===t.code&&e.$message.success("保存成功")}))}))}})},_=g,v=(a("992a"),a("2877")),w=Object(v["a"])(_,s,r,!1,null,"4dfa5f35",null);t["default"]=w.exports},"91b6":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return u}));a("7f7f"),a("386d"),a("28a5");var s=a("db72"),r=(a("96cf"),a("3b8d")),n=a("b775"),i=function(){return Object(n["a"])({url:"/oss/auth",method:"get"})},o=function(e){return Object(n["a"])({url:e+"?x-oss-process=image/info",method:"get"})},l=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,l,c,u,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.oss,r=t.key,i=t.file,l=t.onProgress,c=new FormData,c.append("OSSAccessKeyId",a.OSSAccessKeyId),c.append("success_action_status",200),c.append("policy",a.policy),c.append("Signature",a.Signature),c.append("key",r),c.append("file",i),u="https://pic1.baobaohehu.com/",e.next=11,Object(n["a"])({url:u,method:"post",headers:{"Content-Type":"multipart/form-data"},onUploadProgress:l||null,data:c});case 11:if(u+=r,!(i.type.indexOf("image")>-1)){e.next=18;break}return e.next=15,o(u);case 15:m=e.sent,e.next=27;break;case 18:if(!(i.type.indexOf("video")>-1)){e.next=22;break}m=Object(s["a"])({},i.videoMeta,{size:i.size}),e.next=27;break;case 22:if(!(i.type.indexOf("audio")>-1)){e.next=26;break}m={size:i.size,type:i.type},e.next=27;break;case 26:throw new Error("当前上传的类型不是image或者video；当前上传的类型是"+i.type);case 27:return e.abrupt("return",{url:u,meta:m});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(e){if(!e||"string"!==typeof e)return!1;var t=e.split("").reverse().join(""),a=t.substring(0,t.search(/\./)).split("").reverse().join("");return a},u=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a){var s,r,n,o,u,m,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return s=e.sent,r=s.data,n=Math.floor(99*Math.random())+1,o=(new Date).getTime(),u=c(t.name),o=o+n+"."+u,m="".concat(r.path,"/").concat(r.prefix,"/").concat(o),e.next=11,l({oss:r,key:m,file:t,onProgress:a});case 11:return d=e.sent,e.abrupt("return",d);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},"92cf":function(e,t,a){"use strict";var s=a("e7e2"),r=a.n(s);r.a},"92f3":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bout-card",on:{click:e.goMessageDetail}},[e.title?a("el-row",[a("h5",{staticClass:"card_title",staticStyle:{"min-width":"220px"}},[e._v(e._s(e.title))]),a("p",{staticClass:"divider"})]):e._e(),e._l(e.boutCard,(function(t,s){return a("el-row",{key:"boutItem"+s,attrs:{gutter:24}},[t.show?a("el-col",{attrs:{span:24}},["confirm_text"===t.type?a("div",[a("p",{staticClass:"confirm_text"},[e._v("\n          "+e._s(t.content)+"\n        ")])]):e._e(),"ask_type"===t.type?a("div",[a("p",{staticClass:"divider"}),a("p",{staticClass:"confirm_text"},[a("span",[e._v(" "+e._s(t.content))]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.showTime,expression:"boutItem.showTime"}],staticClass:"float-right create_time"},[e._v("\n            "+e._s(t.time)+"\n          ")])]),a("p",{staticClass:"divider"})]):e._e(),"text"===t.type?a("div",[a("h5",{staticClass:"card_title"},[e._v(e._s(t.title))]),a("div",{staticClass:"text-wrap"},[e._v(e._s(t.content))])]):e._e(),"btn"===t.type?a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-button",{staticClass:"notic_disabled_btn",attrs:{size:"mini",type:"info",disabled:!0}},[e._v("\n          已确认\n        ")])],1):e._e(),"voice"===t.type?a("div",[a("my-audio",{attrs:{msgtime:e.msgTime,src:t.voice.url,vduration:t.voice.duration}})],1):e._e(),t.dataArr&&t.dataArr.length>0?a("div",{staticClass:"data"},e._l(t.dataArr,(function(s,r){return a("div",{key:r,staticClass:"image-and-video"},["image"===s.type?a("img",{attrs:{src:s.url,alt:"",width:"50px"},on:{click:function(a){return e.showMediaDetail(s.url,s.type,t.dataArr)}}}):"video"===s.type?a("div",{staticClass:"video-container"},[a("div",{staticClass:"VideoContent"},[a("img",{attrs:{src:s.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg","data-src":s.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg",alt:""}}),a("i",{staticClass:"el-icon-video-play",on:{click:function(t){return e.showMediaDetail(s.url,"video",[])}}})])]):e._e()])})),0):e._e()],1):e._e()],1)}))],2)},r=[],n=a("2b0e"),i=n["default"].filter("gender"),o={name:"bout-card",components:{},props:{msgTime:{type:String,default:""},boutCard:{type:Array,default:function(){return[]}},hasInterven:{type:Boolean,default:!1},intervenDesc:{type:String,default:""},title:{type:String,default:""}},data:function(){return{currentMediaType:"",currentMediaUrl:"",dialogVisible:!1}},methods:{genderFilter:i,goMessageDetail:function(){this.$emit("goMsgDetail")},showMediaDetail:function(e,t,a){for(var s=[],r=0;r<a.length;r++){var n=a[r];"image"===n.type&&n.url&&s.push(n.url)}var i={mediaType:t,meidiaUrl:e,list:s};this.$emit("showDetail",i)},closeVideoDialog:function(){if("video"===this.currentMediaType){var e=document.getElementById("myVideo");e.pause()}}}},l=o,c=(a("8d1f"),a("2877")),u=Object(c["a"])(l,s,r,!1,null,"130bdd5e",null);t["a"]=u.exports},"92fc":function(e){e.exports={healthFileList:[{prop:"index",label:"序号",fixed:!1,widths:"50",sortable:!1,show:!0},{prop:"member",label:"患者",fixed:!1,widths:"190",type:"slot",sortable:!1,show:!0},{prop:"userInfo",label:"用户",width:"auto",fixed:!1,type:"slot",sortable:!1,show:!0},{prop:"userStage",label:"患者当前阶段",width:"auto",fixed:!1,type:"slot",sortable:!1,show:!0},{prop:"remark",label:"患者备注",width:"auto",fixed:!1,sortable:!1,slot:{header:!0,content:"接诊台患者资料处添加的备注",placement:"top"},show:!0},{prop:"userRemark",label:"用户备注",type:"slot",slot:{header:!0,content:"接诊台用户资料处添加的备注",placement:"top"},width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"servicePackage",label:"当前服务套餐",type:"slot",widths:"170",fixed:!1,sortable:!1,show:!0},{prop:"serviceTime",label:"当前套餐服务时间",type:"slot",widths:"190",fixed:!1,sortable:!1,show:!0}]}},"992a":function(e,t,a){"use strict";var s=a("d4df"),r=a.n(s);r.a},"9ca1":function(e,t,a){"use strict";var s=a("0f00"),r=a.n(s);r.a},a482:function(e,t,a){},a7c9:function(e,t,a){"use strict";var s=a("408a"),r=a.n(s);r.a},a822:function(e,t,a){"use strict";var s=a("f596"),r=a.n(s);r.a},a9c7:function(e,t,a){"use strict";var s=a("b285"),r=a.n(s);r.a},aaff:function(e,t,a){"use strict";var s=a("0e08"),r=a.n(s);r.a},ab54:function(e,t,a){"use strict";var s=a("09d0"),r=a.n(s);r.a},af7d:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var s=a("92fc"),r=a("8722");function n(e){return s[e]}function i(e,t){return r[e][t]}},afce:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["image"===e.mediaType?a("img",{attrs:{src:e.url,alt:"",width:"50px",height:"50px"},on:{click:function(t){return e.showMediaDetail(e.urlList,e.mediaType,e.url)}}}):"video"===e.mediaType?a("div",{staticClass:"video-container"},[a("video",{attrs:{src:e.url,controls:"controls",height:"50",width:"50"}}),a("div",{staticClass:"video-mask",on:{click:function(t){return e.showMediaDetail(e.urlList,e.mediaType,e.url)}}},[a("span",{staticClass:"el-icon-video-play"})])]):e._e()])},r=[],n={name:"MediaDisplayItem",props:{url:{type:String,default:""},mediaType:{type:String,default:""},showMediaDetail:{type:Function,default:function(){}},urlList:{type:Array,default:function(){return[]}}}},i=n,o=(a("c48f"),a("2877")),l=Object(o["a"])(i,s,r,!1,null,"de1d0c06",null);t["a"]=l.exports},b285:function(e,t,a){},c1a0:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"clearfix"},[a("span",{staticClass:"title"},[e._v("通话录音")]),a("span",{staticClass:"float-right"},[e._v(e._s(e.msgtime))])]),a("div",{ref:"wrap",staticClass:"x-audio-wrap",staticStyle:{"min-width":"250px","max-width":"500px"},style:"width:"+e.width+"px"},[a("div",{staticClass:"x-sector",on:{click:e.play}},[a("img",{staticClass:"sound-img",attrs:{src:e.soundImg}})]),a("div",{staticClass:"progress_box"},[a("el-slider",{attrs:{"format-tooltip":e.formatTooltip},on:{change:e.changeProgressValue},model:{value:e.progressValue,callback:function(t){e.progressValue=t},expression:"progressValue"}})],1),a("div",{staticClass:"x-time"},[e._v(e._s(e.duration&&e.showDuration?e.duration:e.text))])])])},r=[],n=a("7618"),i=(a("ac6a"),a("db72")),o=(a("c5f6"),a("2f62")),l={name:"VoiceCard",props:{src:{type:String,default:""},msgtime:{type:String,default:""},text:{type:String,default:""},vduration:{type:Number,default:0},showDuration:{type:Boolean,default:!0}},data:function(){return{width:"",progressValue:0,audio:null,animate:!1,timer:null,duration:null,soundImg:a("df84"),slideLeft:"0",oldvalue:0,audioTime:"",is_moving:!1,sb_bkx:0,sb_bky:0}},computed:Object(i["a"])({},Object(o["c"])(["activedBaby"])),watch:{animate:function(){!1===this.animate?this.soundImg=a("df84"):this.soundImg=a("88ae")},activedBaby:function(){this.audio.pause()}},mounted:function(){var e=this;this.audio=new Audio,this.audio.src=this.src,this.width=this.vduration/6e4*75-25,this.audio.setAttribute("msgtime",this.msgtime),this.audio.addEventListener("canplaythrough",(function(){})),this.audio.onplay=function(){e.timer=setInterval((function(t){e.updateProgress()}),300),e.animate=!0},this.audio.onpause=function(){e.animate=!1,e.timer&&clearInterval(e.timer)},this.audio.onended=function(){e.animate=!1,e.timer&&clearInterval(e.timer)},window.audioList.push(this.audio)},methods:{formatTooltip:function(){var e=0;return this.audio&&this.audio.duration&&(e=this.realFormatSecond(this.audio.duration*this.progressValue/100)),e},changeProgressValue:function(e){this.play(),this.audio.currentTime=parseInt(this.audio.duration*e/100)},play:function(){var e=this;window.audioList.forEach((function(t,a){var s=t.getAttribute("msgtime"),r=e.audio.getAttribute("msgtime");s!==r&&t.pause()})),this.audio.paused?this.audio.play():this.audio.pause()},updateProgress:function(){var e=Math.round(Math.floor(this.audio.currentTime)/Math.floor(this.audio.duration)*100);e-this.oldvalue>0&&(this.oldvalue=e,this.progressValue=e)},realFormatSecond:function(e){var t=Object(n["a"])(e);if("number"===t||"string"===t){e=parseInt(e);var a=Math.floor(e/60);return e-=60*a,("0"+a).slice(-2)+":"+("0"+e).slice(-2)}return"00:00"}}},c=l,u=(a("ff2e"),a("2877")),m=Object(u["a"])(c,s,r,!1,null,"19341bc4",null);t["a"]=m.exports},c2c8:function(e,t,a){},c48f:function(e,t,a){"use strict";var s=a("f9ff"),r=a.n(s);r.a},c50f:function(e,t,a){},c5be:function(e,t,a){},cbf7:function(e,t,a){"use strict";var s=a("dad5"),r=a.n(s);r.a},cd3c:function(e,t,a){"use strict";var s=a("c5be"),r=a.n(s);r.a},d2ab:function(e,t,a){"use strict";var s=a("61ae"),r=a.n(s);r.a},d48b:function(e,t,a){},d496:function(e,t,a){},d4df:function(e,t,a){},d679:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CardContent"},[a("div",[a("el-row",{staticClass:"baby-info",attrs:{gutter:4}},[a("el-col",{attrs:{span:2}},[a("svg-icon",{attrs:{"icon-class":"baby"}})],1),a("el-col",{attrs:{span:22}},[a("p",[e._v("宝宝信息")]),a("div",[e._v("\n          姓名："+e._s(e.baby.name)+"    性别："+e._s(e.genderFilter(e.baby.gender))+"\n             年龄："+e._s(e.baby.age_of_month?e.baby.age_of_month:"未知")+"\n        ")])])],1),a("el-row",{staticClass:"symptom",attrs:{gutter:24}},[a("el-col",{attrs:{span:2}},[a("svg-icon",{attrs:{"icon-class":"yiliaoqixie"}})],1),a("el-col",{attrs:{span:22}},[a("p",[e._v("症状描述")]),a("div",[e._v(e._s(e.symptom))])])],1),a("el-row",{staticClass:"interven",attrs:{gutter:24}},[a("el-col",{attrs:{span:2}},[a("svg-icon",{attrs:{"icon-class":"yao"}})],1),a("el-col",{attrs:{span:22}},[a("p",[e._v("干预史")]),a("div",[e._v(e._s(e.intervenDesc||"无"))])])],1),a("el-row",{staticClass:"data",attrs:{gutter:24}},[a("el-col",{attrs:{span:2}},[a("svg-icon",{attrs:{"icon-class":"tupian"}})],1),a("el-col",{attrs:{span:22}},[a("p",[e._v("资料照片及视频")]),e.dataArr&&e.dataArr.length>0?a("div",e._l(e.dataArr,(function(t,s){return a("div",{key:s,staticClass:"image-and-video"},["image"===t.type?a("img",{attrs:{src:t.url,alt:"",width:"50px"},on:{click:function(a){return e.showMediaDetail(t.url,t.type)}}}):"video"===t.type?a("div",{staticClass:"video-container"},[a("div",{staticClass:"VideoContent"},[a("img",{attrs:{src:t.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg","data-src":t.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg",alt:""}}),a("i",{staticClass:"el-icon-video-play",on:{click:function(a){return e.showMediaDetail(t.url,"video")}}})])]):e._e()])})),0):e._e(),e.dataArr.length<=0?a("p",[e._v("无")]):e._e()])],1)],1)])},r=[],n=a("2b0e"),i=n["default"].filter("gender"),o={name:"CardContent",components:{},props:{baby:{type:Object,default:function(){return{name:"未知",gender:0,age:"未知"}}},symptom:{type:String,default:""},hasInterven:{type:Boolean,default:!1},intervenDesc:{type:String,default:""},dataArr:{type:Array,default:function(){return["http://"]}}},data:function(){return{currentMediaType:"",currentMediaUrl:"",dialogVisible:!1}},methods:{genderFilter:i,showMediaDetail:function(e,t){for(var a=[],s=0;s<this.dataArr.length;s++){var r=this.dataArr[s];"image"===r.type&&r.url&&a.push(r.url)}var n={mediaType:t,meidiaUrl:e,list:a};this.$emit("showDetail",n)},closeVideoDialog:function(){if("video"===this.currentMediaType){var e=document.getElementById("myVideo");e.pause()}}}},l=o,c=(a("a822"),a("2877")),u=Object(c["a"])(l,s,r,!1,null,"7cfbca32",null);t["a"]=u.exports},dac4:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"see-details"},[a("el-row",{staticClass:"user-info"},[a("el-col",{staticStyle:{"max-width":"80px"},attrs:{span:4}},[a("el-avatar",{attrs:{src:e.babyInfo.user&&e.babyInfo.user.avatar}})],1),a("el-col",{attrs:{span:20}},[a("span",{staticClass:"item-title"},[e._v("用户名称：")]),a("span",{staticClass:"item-text"},[e._v(e._s(e.babyInfo.user&&e.babyInfo.user.nickname)+"  "),e.replace?a("svg-icon",{attrs:{"icon-class":"replace"}}):e._e()],1)])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"item-title"},[e._v("宝宝：")]),a("span",{staticClass:"item-text"},[e._v(e._s(e.babyInfo.name))]),a("span",{staticClass:"item-title",staticStyle:{"margin-left":"10px"}},[e._v("宝宝月龄：")]),a("span",{staticClass:"item-text"},[e._v(e._s(e.babyInfo.birthday))])])],1),a("el-tabs",{staticClass:"professional-role__header__tabs",staticStyle:{"margin-top":"30px"},on:{"tab-click":e.getActiveList},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabArr,(function(t){var s=t.label,r=t.name,n=t.num;return a("el-tab-pane",{key:r,attrs:{name:r}},[a("span",{staticClass:"professional-role__header__tabs__slot-label",attrs:{slot:"label"},slot:"label"},[n>0?a("el-badge",{staticClass:"item",attrs:{value:n}}):e._e(),e._v(e._s(s))],1)])})),1),a("el-table",{staticStyle:{width:"100%","min-width":"400px"},attrs:{data:e.tableData,"empty-text":"暂无数据"}},[a("el-table-column",{attrs:{width:"chat"===e.pageType?"60px":"110px",prop:"monthAge",label:"测试月龄",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"发育量表名称",align:"center",width:"chat"===e.pageType?"110px":"250px"}}),a("el-table-column",{attrs:{prop:"status",label:"当前状态",align:"center",width:"chat"===e.pageType?"100px":"150px"}}),"health"===e.pageType?a("el-table-column",{attrs:{label:"最近操作时间",width:"220px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatTime")(new Date(t.row.operateTime)))+"\n      ")]}}],null,!1,648558294)}):e._e(),"health"===e.pageType?a("el-table-column",{attrs:{prop:"name",align:"center",label:"医生建议"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.suggestion?t.row.suggestion:"暂无数据")+"\n      ")]}}],null,!1,135623844)}):e._e(),a("el-table-column",{attrs:{label:"操作",width:"chat"===e.pageType?"100px":"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row?[a("el-badge",{staticClass:"dot-badge",attrs:{"is-dot":t.row.status&&"待发送"===t.row.status&&"hm"===e.$store.state.user.bus_role||t.row.status&&"待反馈"===t.row.status||t.row.status&&"反馈已保存"===t.row.status&&"doctor"===e.$store.state.user.bus_role}},[t.row.status&&"待测试"!==t.row.status||"已完成"!==t.row.status?a("el-button",{attrs:{type:"text",size:"small",disabled:!e.isMyUser},on:{click:function(a){e.sendClick(e.getOperation(t.row.status),t.row)}}},[e._v(e._s(e.getOperation(t.row.status)))]):e._e()],1),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.seeDetail(t.row)}}},[e._v("查看")])]:void 0}}],null,!0)})],1),a("el-dialog",{attrs:{title:"发送发育量表提醒",visible:e.growDialogVisible,width:"400px",center:"",top:"30vh",modal:!1},on:{"update:visible":function(t){e.growDialogVisible=t}}},[a("span",{staticStyle:{"line-height":"24px"}},[e._v("操作成功后，您将发送【"+e._s(e.rowInfo.name)+"】给【"+e._s(e.babyInfo.name)+"】，如果确认无误，请单击确认发送")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{padding:"6px 15px",height:"32px"},attrs:{type:"primary"},on:{click:e.confirmSend}},[e._v("确认发送")])],1)])],1)},r=[],n=(a("96cf"),a("3b8d")),i=(a("7f7f"),a("db72")),o=a("875a"),l=a("2f62"),c={props:{pageType:{type:String,default:"health"},member:{type:String,default:""}},data:function(){return{replace:!1,activeName:"all",tableData:[],allDataArr:[],testedArr:[],suggestedArr:[],babyInfo:{},statusText:"",rowInfo:{},tabArr:[{label:"全部",name:"all",num:0},{label:"医生已反馈",name:"suggested",num:0},{label:"已测",name:"tested",num:0}],growDialogVisible:!1}},computed:Object(i["a"])({},Object(l["c"])(["isMyUser"]),{getStatus:function(){return function(e){return"un_send"===e?"未发送":"pre_send"===e?"待发送":"send"===e?"待测试":"tested"===e?"待反馈":"save"===e?"反馈已保存":"suggested"===e?"已完成":void 0}},getOperation:function(){return function(e){return"未发送"===e||"待发送"===e?"发送":"待反馈"===e?"填写反馈":"反馈已保存"===e?"编辑反馈":void 0}},isHasUser:function(){return function(e){return e[this.$store.state.user.bus_role]===this.$store.state.user.id}}}),created:function(){this.getGrowthDetail(),this.$route.params.id&&window.localStorage.setItem("paramsID",this.$route.params.id)},watch:{member:function(){this.getGrowthDetail()}},methods:{getActiveList:function(){var e=this.activeName;this.tableData="all"===e?this.allDataArr:"suggested"===e?this.suggestedArr:this.testedArr},seeDetail:function(e){this.statusText=e.status,"growListDetail"===this.$route.name?(this.statusText=e.status,this.$router.push({name:"growStatusDetail",params:{id:e.id},query:{status:this.statusText}})):(this.$store.state.chat.growthId=e.id,this.$emit("setLookStatus",e.id))},getGrowthDetail:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["g"])({member:this.$route.params.id||this.member,needSort:"health"===this.pageType});case 2:t=e.sent,a=t.data,s=t.code,2e4===s&&(this.replace=a.baby.is_replace,this.babyInfo=a.baby,this.suggestedArr=[],this.testedArr=[],this.allDataArr=[],a.list&&a.list.length?(a.list.map((function(e){e.status&&"suggested"===e.status?r.suggestedArr.push({monthAge:e.month_age,name:e.name,status:r.getStatus(e.status),id:e._id,reminded_at:e.reminded_at,suggestion:e.suggest_content,operateTime:e.operateTime}):e.status&&"tested"===e.status&&r.testedArr.push({monthAge:e.month_age,name:e.name,status:r.getStatus(e.status),id:e._id,reminded_at:e.reminded_at,suggestion:e.suggest_content,operateTime:e.operateTime}),r.allDataArr.push({monthAge:e.month_age,name:e.name,status:r.getStatus(e.status),id:e._id,reminded_at:e.reminded_at,suggestion:e.suggest_content,operateTime:e.operateTime})})),this.tableData=this.suggestedArr):this.tableData=[],this.getActiveList());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),sendClick:function(e,t){if(this.statusText=t.status,"hm"!==this.$store.state.user.bus_role&&"发送"===e||"doctor"!==this.$store.state.user.bus_role&&"发送"!==e)return this.$message.warning("没有操作权限");"发送"===e?(this.rowInfo=t,this.growDialogVisible=!0):this.$router.push({name:"growStatusDetail",params:{id:t.id},query:{status:this.statusText}})},confirmSend:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["j"])(this.rowInfo.id);case 2:t=e.sent,a=t.data,s=t.code,2e4===s&&a.result?(this.$message.success("发送成功"),this.getGrowthDetail(),this.growDialogVisible=!1):this.$message.error(a.message);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},beforeRouteLeave:function(e,t,a){"未发送"!==this.statusText&&"待发送"!==this.statusText&&"待测试"!==this.statusText||(e.meta.title="未发送"),"待反馈"===this.statusText&&(e.meta.title="待反馈"),"反馈已保存"===this.statusText&&(e.meta.title="填写反馈"),"已完成"===this.statusText&&(e.meta.title="已完成"),a()}},u=c,m=(a("38e1"),a("2877")),d=Object(m["a"])(u,s,r,!1,null,"5c71082a",null);t["default"]=d.exports},dad5:function(e,t,a){},df64:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"status-detail"},[e.showBtn?a("el-button",{staticClass:"float-right",attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.returnList}},[e._v("\n    返回\n  ")]):e._e(),a("div",{staticClass:"user-info"},[a("div",{staticClass:"info-content"},[a("el-avatar",{attrs:{src:e.user.avatar}}),a("p",[a("span",{staticClass:"item-title",staticStyle:{width:"80px"}},[e._v("用户名称：")]),a("span",{staticClass:"item-text"},[e._v(e._s(e.user.nickname))])]),a("p",[a("span",{staticClass:"item-title"},[e._v("宝宝：")]),a("span",{staticClass:"item-text"},[e._v(e._s(e.member.name))])]),a("p",[a("span",{staticClass:"item-title",staticStyle:{width:"80px"}},[e._v("宝宝月龄：")]),a("span",{staticClass:"item-text"},[e._v(e._s(e.member.birthday))])])],1)]),a("div",{staticClass:"card-question"},[a("div",{staticClass:"m-b-20"},[a("span",{staticClass:"item-title"},[e._v("模板名称：")]),a("span",{staticClass:"item-text"},[e._v(e._s(e.name))])]),a("div",{staticClass:"m-b-20"},[a("span",{staticClass:"item-title"},[e._v("测试月龄：")]),a("span",{staticClass:"item-text"},[e._v(e._s(e.monthAge))])]),e._l(e.questions,(function(t,s){return a("el-card",{key:s,staticClass:"m-b-20",attrs:{shadow:"never"}},[a("div",{staticClass:"question m-b-20"},[a("p",{staticClass:"item-title question-title"},[e._v("问题"+e._s(s+1)+"：")]),a("p",{staticClass:"question-text",staticStyle:{"line-height":"16px"}},[e._v("\n          "+e._s(t.question)+"\n        ")])]),a("div",{staticClass:"answer"},[a("span",{staticClass:"item-title answer-title"},[e._v("答案：")]),a("p",e._l(t.answer,(function(t,r){return a("span",{key:t.key,staticClass:"item-text",class:"未发送"!==e.$route.query.status&&e.answers[s]===r?"answer-active":""},[e._v(e._s(t.value))])})),0)])])})),e.submitTime?a("div",{staticClass:"time"},[e._v("\n      "+e._s(e.testTime)+"\n    ")]):e._e(),"save"!==e.status&&"tested"!==e.status||"doctor"!==e.$store.state.user.bus_role?e._e():a("el-form",{ref:"createSuggestForm",attrs:{model:e.suggestForm,rules:e.rules,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"医生建议：",prop:"suggest"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入您的建议",maxlength:"200","show-word-limit":"",resize:"none",rows:4},model:{value:e.suggestForm.suggest,callback:function(t){e.$set(e.suggestForm,"suggest",t)},expression:"suggestForm.suggest"}})],1),"suggested"===e.status||"save"===e.status?a("div",{staticClass:"time",staticStyle:{"margin-bottom":"20px"}},[e._v("\n        "+e._s(e.updateTime)+"\n      ")]):e._e(),"suggested"!==e.status?a("el-form-item",{staticClass:"form-btn"},[a("el-button",{on:{click:function(t){return e.submitForm("createSuggestForm","save")}}},[e._v("保存")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("createSuggestForm","suggested")}}},[e._v("发送")])],1):e._e()],1),"suggested"===e.status?a("div",{staticClass:"m-b-20"},[a("span",{staticClass:"item-title"},[e._v("医生建议：")]),a("span",{staticClass:"item-text"},[e._v(e._s(e.suggestForm.suggest))])]):e._e(),"suggested"===e.status?a("div",{staticClass:"time",staticStyle:{"margin-bottom":"20px"}},[e._v("\n      "+e._s(e.updateTime)+"\n    ")]):e._e()],2)],1)},r=[],n=(a("7f7f"),a("96cf"),a("3b8d")),i=a("875a"),o={props:{showBtn:{type:Boolean,default:!1}},data:function(){return{suggestForm:{suggest:""},rules:{suggest:[{required:!0,message:"内容不能为空"}]},questions:[],member:{},user:{},monthAge:"",name:"",status:"",answers:[],testTime:"",updateTime:""}},computed:{submitTime:function(){return"un_send"!==this.status&&"pre_send"!==this.status&&"send"!==this.status}},created:function(){this.getGrowthStatus()},methods:{returnList:function(){this.$emit("return")},getGrowthStatus:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["i"])(this.$route.params.id||this.$store.state.chat.growthId);case 2:t=e.sent,a=t.data,s=t.code,2e4===s&&a.result&&(this.member=a.growth.member,this.user=a.growth.user,this.questions=a.growth.growth_info&&a.growth.growth_info.questions,this.monthAge=a.growth.month_age,this.name=a.growth.name,this.suggestForm.suggest=a.growth.suggest_content||"",this.status=a.growth.status,this.answers=a.growth.answers||[],this.testTime=this.formatTime(a.growth.tested_at),this.updateTime=this.formatTime(a.growth.updated_at));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(e,t){var a=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(s){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=9;break}return e.next=3,Object(i["a"])({id:a.$route.params.id,content:a.suggestForm.suggest,status:t});case 3:r=e.sent,n=r.data,o=r.code,2e4===o&&(n.result?(a.$message.success(("save"===t?"保存":"发送")+"成功"),a.$router.go(-1)):a.$message.error(n.message)),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},beforeRouteEnter:function(e,t,a){a((function(e){"未发送"!==e.$route.query.status&&"待发送"!==e.$route.query.status&&"待测试"!==e.$route.query.status||(e.$route.meta.title="未发送"),"待反馈"===e.$route.query.status&&(e.$route.meta.title="待反馈"),"反馈已保存"===e.$route.query.status&&(e.$route.meta.title="填写反馈"),"已完成"===e.$route.query.status&&(e.$route.meta.title="已完成")}))}},l=o,c=(a("9055"),a("2877")),u=Object(c["a"])(l,s,r,!1,null,"6f87a4dc",null);t["default"]=u.exports},df84:function(e,t,a){e.exports=a.p+"static/img/play.c0a23e29.png"},e1de:function(e,t,a){"use strict";var s=a("f30a"),r=a.n(s);r.a},e405:function(e,t,a){"use strict";var s=a("8124"),r=a.n(s);r.a},e7e2:function(e,t,a){},e945:function(e,t,a){var s={"./af":"c00a","./af.js":"c00a","./ar":"c97e","./ar-dz":"0162","./ar-dz.js":"0162","./ar-kw":"fae4","./ar-kw.js":"fae4","./ar-ly":"aa71","./ar-ly.js":"aa71","./ar-ma":"5d88","./ar-ma.js":"5d88","./ar-sa":"a10a","./ar-sa.js":"a10a","./ar-tn":"152f","./ar-tn.js":"152f","./ar.js":"c97e","./az":"54cd","./az.js":"54cd","./be":"3dd4","./be.js":"3dd4","./bg":"a802","./bg.js":"a802","./bm":"7cd9","./bm.js":"7cd9","./bn":"7151","./bn.js":"7151","./bo":"323a","./bo.js":"323a","./br":"3138","./br.js":"3138","./bs":"acbc","./bs.js":"acbc","./ca":"0876","./ca.js":"0876","./cs":"0aef","./cs.js":"0aef","./cv":"8be7","./cv.js":"8be7","./cy":"6764","./cy.js":"6764","./da":"7612","./da.js":"7612","./de":"4da8","./de-at":"976e","./de-at.js":"976e","./de-ch":"686e","./de-ch.js":"686e","./de.js":"4da8","./dv":"39df","./dv.js":"39df","./el":"4c94","./el.js":"4c94","./en-au":"4415","./en-au.js":"4415","./en-ca":"499b","./en-ca.js":"499b","./en-gb":"4e86","./en-gb.js":"4e86","./en-ie":"7c7e","./en-ie.js":"7c7e","./en-nz":"f766","./en-nz.js":"f766","./eo":"8135","./eo.js":"8135","./es":"6ebc","./es-do":"e481","./es-do.js":"e481","./es-us":"d75c","./es-us.js":"d75c","./es.js":"6ebc","./et":"e662","./et.js":"e662","./eu":"65b7","./eu.js":"65b7","./fa":"0028","./fa.js":"0028","./fi":"5fd1","./fi.js":"5fd1","./fo":"72f4","./fo.js":"72f4","./fr":"6e81","./fr-ca":"c471","./fr-ca.js":"c471","./fr-ch":"f797","./fr-ch.js":"f797","./fr.js":"6e81","./fy":"d8b9","./fy.js":"d8b9","./gd":"94ef","./gd.js":"94ef","./gl":"c74b","./gl.js":"c74b","./gom-latn":"5601","./gom-latn.js":"5601","./gu":"2a3d1","./gu.js":"2a3d1","./he":"9669","./he.js":"9669","./hi":"e85f","./hi.js":"e85f","./hr":"bf5e","./hr.js":"bf5e","./hu":"9901","./hu.js":"9901","./hy-am":"012e","./hy-am.js":"012e","./id":"ba8c","./id.js":"ba8c","./is":"c6c1","./is.js":"c6c1","./it":"6101","./it.js":"6101","./ja":"f2b8","./ja.js":"f2b8","./jv":"d9e8","./jv.js":"d9e8","./ka":"4d4c","./ka.js":"4d4c","./kk":"b770","./kk.js":"b770","./km":"b388","./km.js":"b388","./kn":"a056","./kn.js":"a056","./ko":"44157","./ko.js":"44157","./ky":"d2f5","./ky.js":"d2f5","./lb":"01fe","./lb.js":"01fe","./lo":"d759","./lo.js":"d759","./lt":"d47b","./lt.js":"d47b","./lv":"3793","./lv.js":"3793","./me":"b26f","./me.js":"b26f","./mi":"d0b2","./mi.js":"d0b2","./mk":"8357","./mk.js":"8357","./ml":"b4f4","./ml.js":"b4f4","./mr":"96b4","./mr.js":"96b4","./ms":"9bf3","./ms-my":"64f3","./ms-my.js":"64f3","./ms.js":"9bf3","./mt":"44b6","./mt.js":"44b6","./my":"35e88","./my.js":"35e88","./nb":"cd6b","./nb.js":"cd6b","./ne":"ee29","./ne.js":"ee29","./nl":"fd25","./nl-be":"11d4","./nl-be.js":"11d4","./nl.js":"fd25","./nn":"a90d","./nn.js":"a90d","./pa-in":"048e","./pa-in.js":"048e","./pl":"b099","./pl.js":"b099","./pt":"8cc1","./pt-br":"cd1a","./pt-br.js":"cd1a","./pt.js":"8cc1","./ro":"4f7b","./ro.js":"4f7b","./ru":"4a7a","./ru.js":"4a7a","./sd":"441d","./sd.js":"441d","./se":"1e99","./se.js":"1e99","./si":"6c0c","./si.js":"6c0c","./sk":"5234","./sk.js":"5234","./sl":"f896","./sl.js":"f896","./sq":"34ed","./sq.js":"34ed","./sr":"849e","./sr-cyrl":"85d6","./sr-cyrl.js":"85d6","./sr.js":"849e","./ss":"4061","./ss.js":"4061","./sv":"d88f","./sv.js":"d88f","./sw":"e7a7","./sw.js":"e7a7","./ta":"d3b3","./ta.js":"d3b3","./te":"eed5","./te.js":"eed5","./tet":"b816","./tet.js":"b816","./th":"19cc","./th.js":"19cc","./tl-ph":"672a","./tl-ph.js":"672a","./tlh":"3f0d","./tlh.js":"3f0d","./tr":"b6ff","./tr.js":"b6ff","./tzl":"3455","./tzl.js":"3455","./tzm":"4707","./tzm-latn":"022c","./tzm-latn.js":"022c","./tzm.js":"4707","./uk":"6901","./uk.js":"6901","./ur":"bc69","./ur.js":"bc69","./uz":"1d5c","./uz-latn":"1f6a","./uz-latn.js":"1f6a","./uz.js":"1d5c","./vi":"9128","./vi.js":"9128","./x-pseudo":"a886","./x-pseudo.js":"a886","./yo":"1db8","./yo.js":"1db8","./zh-cn":"ed0f","./zh-cn.js":"ed0f","./zh-hk":"b487","./zh-hk.js":"b487","./zh-tw":"1940","./zh-tw.js":"1940"};function r(e){var t=n(e);return a(t)}function n(e){var t=s[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id="e945"},eb11:function(e,t,a){},eb95:function(e,t,a){"use strict";var s=a("63d9"),r=a.n(s);r.a},f30a:function(e,t,a){},f467:function(e,t,a){},f596:function(e,t,a){},f60f:function(e,t,a){},f8b7:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"i",(function(){return n})),a.d(t,"h",(function(){return i})),a.d(t,"k",(function(){return o})),a.d(t,"l",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"e",(function(){return m})),a.d(t,"j",(function(){return d})),a.d(t,"g",(function(){return h})),a.d(t,"c",(function(){return p})),a.d(t,"m",(function(){return b})),a.d(t,"b",(function(){return f}));var s=a("b775");function r(e){return Object(s["a"])({url:"/fd/contract/".concat(e,"/active"),method:"put"})}function n(){return Object(s["a"])({url:"order/basic/options",method:"get"})}function i(){return Object(s["a"])({url:"/order/basic/order_name/options",method:"get"})}function o(){return Object(s["a"])({url:"/order/basic/order_status/options",method:"get"})}function l(){return Object(s["a"])({url:"/order/basic/order_type/options",method:"get"})}function c(e){return Object(s["a"])({url:"/order/check_export",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/order/".concat(e,"/detail"),method:"get"})}function m(e,t){return Object(s["a"])({url:"/order/".concat(e,"/close"),method:"put",data:t})}function d(){return Object(s["a"])({url:"/order/process_numbers",method:"get"})}function h(e){return Object(s["a"])({url:"/order/list",method:"post",data:e})}function p(e,t){return Object(s["a"])({url:"/order/".concat(e,"/refund"),method:"put",data:t})}function b(e){return Object(s["a"])({url:"/order/log",method:"get",params:e})}function f(e){return Object(s["a"])({url:"/order/log",method:"post",data:e})}},f9ff:function(e,t,a){},fc3c:function(e,t,a){"use strict";var s=a("215c"),r=a.n(s);r.a},ff2e:function(e,t,a){"use strict";var s=a("117b"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-7ff311f5.811395d8.js.map