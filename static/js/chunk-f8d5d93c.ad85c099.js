(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8d5d93c"],{3115:function(e,t,s){"use strict";var a=s("c271"),r=s.n(a);r.a},"38ca":function(e,t,s){},5534:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-list"},[s("search",{on:{getCourseList:e.getCourseList,getSearch:e.getSearch}}),s("course-list",{ref:"courseList",attrs:{"search-info":e.searchInfo}})],1)},r=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-search"},[s("el-form",{attrs:{"label-position":"left","label-width":"80px",model:e.course,inline:""}},[s("el-form-item",{staticClass:"search-item",attrs:{label:"课程名称"}},[s("el-input",{attrs:{clearable:"",placeholder:"请输入课程名称"},model:{value:e.course.name,callback:function(t){e.$set(e.course,"name",t)},expression:"course.name"}})],1),s("el-form-item",{staticClass:"search-item",attrs:{label:"创建时间"}},[s("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"",clearable:"","range-separator":"-","start-placeholder":"创建时间","end-placeholder":"创建时间","value-format":"yyyy-MM-dd"},model:{value:e.course.time,callback:function(t){e.$set(e.course,"time",t)},expression:"course.time"}})],1),s("el-form-item",{staticClass:"search-item",attrs:{label:"课程类别"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.course.category,callback:function(t){e.$set(e.course,"category",t)},expression:"course.category"}},e._l(e.courseCategory,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("el-form-item",{staticClass:"search-item",attrs:{label:"课程类型"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.course.type,callback:function(t){e.$set(e.course,"type",t)},expression:"course.type"}},e._l(e.courseType,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("el-form-item",[s("el-button",{staticClass:"select-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1)},l=[],i={data:function(){return{course:{name:"",time:["",""],category:"all",type:"all",isSearch:!0},courseCategory:[{value:"all",label:"全部"},{value:"image_text",label:"图文"},{value:"video",label:"视频"},{value:"audio",label:"音频"}],courseType:[{value:"all",label:"全部"},{value:"series_lesson",label:"系列课"},{value:"single_lesson",label:"单节课"}]}},watch:{course:{handler:function(){this.$emit("getSearch",this.course)},deep:!0}},methods:{onSubmit:function(){this.$emit("getCourseList",this.course)}}},o=i,c=(s("3115"),s("2877")),u=Object(c["a"])(o,n,l,!1,null,"f51e7e22",null),d=u.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-list-info"},[s("div",{staticClass:"title"},[s("div",[e._v("课程列表")]),s("el-dropdown",[s("el-button",{attrs:{type:"primary"}},[e._v("\n        添加课程"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{staticStyle:{width:"117px","text-align":"center"},attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("a",{attrs:{href:"/learning-admin/course/series-course"}},[e._v("系列课")])]),s("el-dropdown-item",[s("a",{attrs:{href:"/learning-admin/course/single"}},[e._v("单节课")])])],1)],1)],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"empty-text":e.hasListInfo}},[s("el-table-column",{attrs:{fixed:"",prop:"num",label:"序号","min-width":"120",align:"center"}}),s("el-table-column",{attrs:{prop:"id",label:"编号","min-width":"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{placement:"top-start",trigger:"hover",content:t.row.id}},[s("span",{staticClass:"cell",attrs:{slot:"reference"},domProps:{innerHTML:e._s(t.row.id)},slot:"reference"})])]}}])}),s("el-table-column",{attrs:{prop:"name",label:"课程名称","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{placement:"top-start",trigger:"hover",content:t.row.name}},[s("span",{staticClass:"cell",attrs:{slot:"reference"},domProps:{innerHTML:e._s(t.row.name)},slot:"reference"})])]}}])}),s("el-table-column",{attrs:{prop:"image",label:"课程封面","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-avatar",{attrs:{size:30,src:e.row.image}})]}}])}),s("el-table-column",{attrs:{prop:"courseNum",label:"课程节数","min-width":"120",align:"center"}}),s("el-table-column",{attrs:{prop:"uploadNum",label:"上传节数","min-width":"120",align:"center"}}),s("el-table-column",{attrs:{prop:"courseCategory",label:"课程类别","min-width":"120",align:"center"}}),s("el-table-column",{attrs:{align:"center",label:"创建日期","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatTime")(t.row.created_at,"{y}-{m}-{d}"))+"\n      ")]}}])}),s("el-table-column",{attrs:{prop:"courseType",label:"课程类型","min-width":"120",align:"center"}}),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.isDelShow(t.row)}}},[e._v("删除")]),"series_lesson"===t.row.category?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.editCourse(t.row,"edit")}}},[e._v("编辑")]):e._e(),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.editCourse(t.row)}}},[e._v(e._s("series_lesson"===t.row.category?"去上传":"编辑"))])]}}])})],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[12,18,24],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),s("el-dialog",{attrs:{title:"删除提示",visible:e.delShow,width:"30%",center:"",top:"30vh"},on:{"update:visible":function(t){e.delShow=t}}},[s("div",{staticClass:"center"},[s("p",[e._v("删除后，该课程下所有信息将不再保留，")]),s("p",[e._v("请确定是否删除？")]),s("el-input",{staticClass:"del-input",attrs:{placeholder:"请在输入框输入“删除”"},on:{input:e.setDelStatus},model:{value:e.inputDel,callback:function(t){e.inputDel=t},expression:"inputDel"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.delShow=!1,e.inputDel=""}}},[e._v("取 消")]),s("el-button",{attrs:{type:e.delType,disabled:e.disabledDel},on:{click:e.confirm}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"删除提示",visible:e.delSingleShow,width:"30%",center:"",top:"30vh"},on:{"update:visible":function(t){e.delSingleShow=t}}},[s("div",{staticClass:"center"},[s("p",[e._v("删除后，该课程下所有信息将不再保留，")]),s("p",[e._v("请确定是否删除？")])]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.delSingleShow=!1,e.inputDel=""}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},h=[],g=(s("7f7f"),s("96cf"),s("3b8d")),m=(s("28a5"),s("f296")),f={props:{searchInfo:{type:[Object,String],default:""}},data:function(){return{list:[],currentPage:1,delShow:!1,pageSize:12,count:0,rowInfo:"",hasListInfo:"暂无数据",inputDel:"",disabledDel:!0,delSingleShow:!1,delType:"info"}},computed:{getType:function(){return function(e){e=e?e.split("|"):[];var t=[];return e.indexOf("video")>=0&&t.push("视频"),e.indexOf("audio")>=0&&t.push("音频"),e.indexOf("image_text")>=0&&t.push("图文"),e.length||t.push("未知"),t.join(",")}}},created:function(){this.getCourseList()},methods:{confirm:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["m"])(this.rowInfo.id);case 2:t=e.sent,s=t.data,s&&(s.result?(this.$message({message:"删除成功",type:"success"}),this.getCourseList(),this.delShow=!1,this.delSingleShow=!1,this.inputDel=""):this.$message({message:s.message,type:"error"}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.pageSize=e,this.getCourseList(this.searchInfo)},handleCurrentChange:function(e){this.currentPage=e,this.getCourseList(this.searchInfo)},getCourseList:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var s,a,r,n,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t?(t.isSearch&&(this.currentPage=1),s={started_at:t.time?t.time[0]:"",ended_at:t.time?t.time[1]:"",title:t.name||void 0,category:t.type||void 0,type:t.category||void 0,page:this.currentPage,pageSize:this.pageSize}):s={page:this.currentPage,pageSize:this.pageSize},e.next=3,Object(m["A"])(s);case 3:a=e.sent,r=a.data,n=a.code,2e4===n&&r.list.length?(this.count=r.count,this.list=r.list.map((function(e,t){return{num:(r.page-1)*r.pageSize+t+1,id:e._id,name:e.title,image:e.cover,courseNum:e.total_chapter||1,uploadNum:"series_lesson"===e.category?e.available_chapter:1,category:e.category,lesson_column:e.lesson_column,courseCategory:l.getType(e.type),created_at:e.created_at,courseType:"single_lesson"===e.category?"单节课":"系列课"}}))):this.list=[],0===this.list.length&&(this.hasListInfo="暂无数据，请重新输入关键词");case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setDelStatus:function(){"删除"===this.inputDel?(this.disabledDel=!1,this.delType="primary"):(this.disabledDel=!0,this.delType="info")},editCourse:function(e,t){"series_lesson"===e.category&&"edit"===t?this.$router.push("/learning-admin/course/series-edit/".concat(e.id)):"single_lesson"===e.category?this.$router.push("/learning-admin/course/single-edit/".concat(e.id)):this.$router.push("/learning-admin/course/series-detail/".concat(e.id))},isDelShow:function(e){"series_lesson"===e.category?this.delShow=!0:this.delSingleShow=!0,this.rowInfo=e}}},b=f,v=(s("a37b"),Object(c["a"])(b,p,h,!1,null,"3069510c",null)),y=v.exports,w={components:{Search:d,CourseList:y},data:function(){return{searchInfo:""}},methods:{getCourseList:function(e){this.$refs.courseList.getCourseList(e)},getSearch:function(e){this.searchInfo=e}}},_=w,S=Object(c["a"])(_,a,r,!1,null,null,null);t["default"]=S.exports},a37b:function(e,t,s){"use strict";var a=s("38ca"),r=s.n(a);r.a},c271:function(e,t,s){}}]);
//# sourceMappingURL=chunk-f8d5d93c.ad85c099.js.map