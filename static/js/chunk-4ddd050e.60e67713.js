(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ddd050e"],{"3a1f":function(t,e,a){},64689:function(t,e,a){"use strict";var s=a("3a1f"),i=a.n(s);i.a},"9f12":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"series-detail"},[a("section",{staticClass:"head-detail clearfix"},[a("div",{staticClass:"image",staticStyle:{"min-width":"360px"}},[a("img",{attrs:{src:t.seriesDetail.mtsCatalog.cover,alt:"封面"}})]),a("div",{staticClass:"info"},[a("h4",{staticClass:"info-title"},[t._v(t._s(t.seriesDetail.mtsCatalog.title))]),a("p",{staticClass:"sign"},[t._v("\n        课程类型："+t._s(t.getTypeStr(t.seriesDetail.mtsCatalog.type)||"未知")+"\n      ")]),a("p",{staticClass:"sign"},[t._v("\n        课程节数："+t._s(t.seriesDetail.mtsCatalog.total_chapter)+"节\n      ")]),a("p",{staticClass:"sign flex-wrap clearfix"},[a("span",{staticStyle:{"min-width":"70px"}},[t._v("课程介绍：")]),a("span",[t._v(t._s(t.seriesDetail.mtsCatalog.summary))])])])]),a("div",{staticClass:"list-detail"},[a("el-form",{attrs:{"label-position":"left","label-width":"100px",model:t.course,inline:""}},[a("el-form-item",{staticClass:"search-item",attrs:{label:"上传状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.course.type,callback:function(e){t.$set(t.course,"type",e)},expression:"course.type"}},t._l(t.typeList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{staticClass:"search-item",attrs:{label:"单节课名称"}},[a("el-input",{attrs:{placeholder:"请输入单节课名称"},model:{value:t.course.name,callback:function(e){t.$set(t.course,"name",e)},expression:"course.name"}})],1),a("el-form-item",[a("el-button",{staticClass:"select-btn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1),t.seriesDetail.mtsCatalog&&"catalog"!==t.seriesDetail.mtsCatalog.lesson_column?a("div",{staticClass:"add-course"},[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[t._v("\n            添加单节课"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{staticStyle:{width:"117px","text-align":"center"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("a",{attrs:{href:"javascript:;"},on:{click:t.selectCourse}},[t._v("选择已有")])]),a("el-dropdown-item",[a("a",{attrs:{href:"javascript:;"},on:{click:t.addSingle}},[t._v("重新添加")])])],1)],1)],1):t._e()],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"empty-text":t.hasListInfo}},[a("el-table-column",{attrs:{fixed:"",prop:"num",label:"序号","min-width":"80",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"编号","min-width":"130",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"单节课名称","min-width":"150",align:"center"}}),a("el-table-column",{attrs:{prop:"image",label:"单节课封面","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-avatar",{attrs:{size:30,src:t.row.image}})]}}])}),a("el-table-column",{attrs:{prop:"courseType",label:"单节课类型","min-width":"100",align:"center"}}),a("el-table-column",{attrs:{prop:"uploadStatus",label:"上传状态","min-width":"100",align:"center"}}),a("el-table-column",{attrs:{prop:"creteTime",label:"创建时间","min-width":"120",align:"center"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.delShow=!0,t.rowInfo=e.row}}},[t._v("删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.$router.push("/learning-admin/course/single-edit/"+e.row.id)}}},[t._v("\n            "+t._s("no_uploaded"===e.row.lesson_status?"去上传":"编辑")+"\n          ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[12,18,24],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"删除提示",visible:t.delShow,width:"30%",center:"",top:"30vh"},on:{"update:visible":function(e){t.delShow=e}}},[a("div",{staticClass:"center"},[a("p",[t._v("删除后，该课程下所有信息将不再保留，")]),a("p",[t._v("请确定是否删除？")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)]),a("el-dialog",{staticClass:"set-status",attrs:{title:"选择单节课",visible:t.addCourseShow,width:"30%",center:"",top:"30vh"},on:{"update:visible":function(e){t.addCourseShow=e}}},[a("div",{staticClass:"course-wrap"},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.singleList,(function(t,e){return a("el-option",{key:e,staticClass:"inline-input del-input",attrs:{label:t.title,value:t._id}})})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addCourseShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmCourse}},[t._v("确 定")])],1)])],1)])},i=[],n=(a("96cf"),a("3b8d")),r=(a("7f7f"),a("28a5"),a("f296")),l=a("fd0b"),o={data:function(){return{typeList:[{label:"全部",value:"all"},{label:"未上传",value:"no_uploaded"},{label:"已上传",value:"uploaded"}],course:{type:"all",name:""},seriesDetail:{mtsCatalog:{}},list:[],currentPage:1,delShow:!1,addCourseShow:!1,pageSize:12,count:0,rowInfo:"",hasListInfo:"暂无数据",singleList:[],singleName:"",checkList:[]}},computed:{getType:function(){return function(t){return"video"===t?"视频":"audio"===t?"音频":"image_text"===t?"图文":t?void 0:"未知"}},getTime:function(){return function(t){if(!t)return"";var e=t.split("T");return e[0]+" "+e[1].split(".")[0]}},getStatus:function(){return function(t){return"no_uploaded"===t?"未上传":"uploaded"===t?"已上传":void 0}},getTypeStr:function(){return function(t){var e="";return t&&(-1!==t.indexOf("image_text")&&(e+=" 图文"),-1!==t.indexOf("audio")&&(e+=" 音频"),-1!==t.indexOf("video")&&(e+=" 视频")),e}}},created:function(){this.getSeriesList()},methods:{onSubmit:function(){this.getSeriesList({id:this.$route.params.id,page:this.currentPage,pageSize:this.pageSize,title:this.course.name})},confirm:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["m"])(this.rowInfo.id);case 2:e=t.sent,a=e.data,a&&a.result&&(this.$message({message:"删除成功",type:"success"}),this.getSeriesList(),this.delShow=!1);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSizeChange:function(t){this.pageSize=t,this.getSeriesList()},handleCurrentChange:function(t){this.currentPage=t,this.getSeriesList()},selectCourse:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.addCourseShow=!0,t.next=3,Object(r["N"])({lesson_column:this.seriesDetail.mtsCatalog.lesson_column});case 3:e=t.sent,a=e.code,s=e.data,2e4===a&&(this.singleList=s.list);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),confirmCourse:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.checkList.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(r["e"])({parent_id:this.$route.params.id,ids:this.checkList});case 4:e=t.sent,a=e.data,s=e.code,2e4===s&&a.result&&(this.$message({message:"添加成功",type:"success"}),this.getSeriesList(),this.addCourseShow=!1);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSeriesList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,i,n,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e?("all"!==this.course.type&&(e.lesson_status=this.course.type),a=e):a={id:this.$route.params.id,page:this.currentPage,pageSize:this.pageSize},t.next=3,Object(r["A"])(a);case 3:s=t.sent,i=s.data,n=s.code,2e4===n&&i.result&&(this.seriesDetail=i,this.count=i.count,this.list=i.list.map((function(t,e){return{num:(i.page-1)*i.pageSize+e+1,id:t._id,name:t.title,image:t.cover,lesson_status:t.lesson_status,uploadStatus:o.getStatus(t.lesson_status),courseType:o.getType(t.type),creteTime:Object(l["b"])(t.created_at)}})),0===this.list.length&&e?this.hasListInfo="暂无数据，请重新输入关键词":this.hasListInfo="暂无数据");case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addSingle:function(){this.$router.push("/learning-admin/course/single/".concat(this.$route.params.id))},querySearch:function(t,e){var a=this.singleList,s=t?a.filter(this.createFilter(t)):a;e(s)},handleSelect:function(t){},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}}}},c=o,u=(a("64689"),a("2877")),d=Object(u["a"])(c,s,i,!1,null,"29155464",null);e["default"]=d.exports},fd0b:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return n}));var s=function(t){var e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),i=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return a<10&&(a="0"+a),"".concat(e,"-").concat(a,"-").concat(s," ").concat(i,":").concat(n,":").concat(r)},i=function(t){var e=t.start,a=t.end,s=t.time;if(!e&&!a&&!s)return"0天0小时0分钟";s||(s=new Date(a)-new Date(e));var i=Math.floor(s/864e5),n=s%864e5,r=Math.floor(n/36e5),l=n%36e5,o=Math.ceil(l/6e4);return i+"天"+r+"小时"+o+"分钟"},n=function(t){var e=new Date(t),a="-",s=":",i=e.getMonth()+1,n=e.getDate();i>=1&&i<=9&&(i="0"+i),n>=0&&n<=9&&(n="0"+n);var r=e.getFullYear()+a+i+a+n+" "+e.getHours()+s+e.getMinutes()+s+e.getSeconds();return-1!==r.indexOf("NaN")?"/":r}}}]);
//# sourceMappingURL=chunk-4ddd050e.60e67713.js.map