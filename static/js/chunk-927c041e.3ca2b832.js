(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-927c041e"],{"0e79":function(t,e,s){},"117b":function(t,e,s){},"11b6":function(t,e,s){},1840:function(t,e,s){},1897:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{staticClass:"commit-review",attrs:{gutter:10}},[t.msgs.length?s("el-col",{staticClass:"chat-record"},[s("el-tabs",{staticClass:"health-file",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"聊天记录",name:"msg"}},[s("msg-card",{attrs:{"msg-list":t.msgs,"show-admin":!1}})],1),s("el-tab-pane",{attrs:{label:"健康档案",name:"health"}},[s("health-file",{attrs:{"baby-id":t.babyId,"get-info":!1}})],1)],1)],1):s("div",{staticClass:"no-msg"},[t._v("\n    "+t._s(t.msgTip)+"\n  ")]),s("el-col",{staticClass:"review-info"},[s("div",{staticClass:"rate-info"},[s("p",{staticClass:"rate-item"},[s("span",{staticClass:"rate-text"},[t._v("收集病史：")]),s("el-rate",{attrs:{"allow-half":"",disabled:"SeeReviews"===t.routeName||t.isSubmit},on:{change:t.getScore},model:{value:t.rate.medicalHistory,callback:function(e){t.$set(t.rate,"medicalHistory",e)},expression:"rate.medicalHistory"}})],1),s("p",{staticClass:"rate-item"},[s("span",{staticClass:"rate-text"},[t._v("病因分析：")]),s("el-rate",{attrs:{"allow-half":"",disabled:"SeeReviews"===t.routeName||t.isSubmit},on:{change:t.getScore},model:{value:t.rate.etiologyAnalysis,callback:function(e){t.$set(t.rate,"etiologyAnalysis",e)},expression:"rate.etiologyAnalysis"}})],1),s("p",{staticClass:"rate-item"},[s("span",{staticClass:"rate-text"},[t._v("诊断明确性：")]),s("el-rate",{attrs:{"allow-half":"",disabled:"SeeReviews"===t.routeName||t.isSubmit},on:{change:t.getScore},model:{value:t.rate.diagnosticClarity,callback:function(e){t.$set(t.rate,"diagnosticClarity",e)},expression:"rate.diagnosticClarity"}})],1),s("p",{staticClass:"rate-item"},[s("span",{staticClass:"rate-text"},[t._v("治疗方案：")]),s("el-rate",{attrs:{"allow-half":"",disabled:"SeeReviews"===t.routeName||t.isSubmit},on:{change:t.getScore},model:{value:t.rate.treatmentPrograms,callback:function(e){t.$set(t.rate,"treatmentPrograms",e)},expression:"rate.treatmentPrograms"}})],1),s("p",{staticClass:"rate-item"},[s("span",{staticClass:"rate-text"},[t._v("同理心：")]),s("el-rate",{attrs:{"allow-half":"",disabled:"SeeReviews"===t.routeName||t.isSubmit},on:{change:t.getScore},model:{value:t.rate.empathy,callback:function(e){t.$set(t.rate,"empathy",e)},expression:"rate.empathy"}})],1)]),s("el-divider"),s("p",{staticClass:"overall-ratings"},[t._v("\n      综合得分："),s("span",{staticClass:"score"},[t._v(t._s(t.score))])]),s("el-form",{attrs:{"label-position":"left","label-width":"90px",model:t.reviewInfo}},[s("el-form-item",{attrs:{label:"点评："}},["doctor"!==t.character||t.reviewContent?t._e():s("el-input",{attrs:{type:"textarea",placeholder:"请输入点评内容",maxlength:"500",resize:"none","show-word-limit":""},on:{blur:t.setErrorText},model:{value:t.reviewInfo.content,callback:function(e){t.$set(t.reviewInfo,"content",e)},expression:"reviewInfo.content"}}),t.reviewContent?s("div",{staticClass:"review-content"},[t._v("\n          "+t._s(t.reviewContent)+"\n        ")]):t._e(),s("span",{staticClass:"error"},[t._v(t._s(t.errorReviewText))])],1),t.feedback?s("el-form-item",{attrs:{label:"问题反馈："}},[s("div",{staticClass:"review-content"},[t._v(t._s(t.feedback))])]):t._e(),"human_resource"===t.type&&!t.handlerContent&&"SeeReviews"===t.routeName&&t.feedback?s("el-form-item",{attrs:{label:"处理结果："}},[s("el-input",{staticClass:"process-result",attrs:{type:"textarea",placeholder:"请输入处理结果",maxlength:"200",resize:"none","show-word-limit":"",disabled:t.submitResultDisabled},model:{value:t.reviewInfo.processResult,callback:function(e){t.$set(t.reviewInfo,"processResult",e)},expression:"reviewInfo.processResult"}})],1):t._e(),t.handlerContent&&"SeeReviews"===t.routeName?s("el-form-item",{attrs:{label:"处理结果："}},[s("div",{staticClass:"review-content"},[t._v(t._s(t.handlerContent))])]):t._e(),"doctor"===t.character&&"CommitReview"===t.$route.name?s("el-form-item",{attrs:{label:""}},[s("p",{staticClass:"commit-btn"},[t.isSubmit?t._e():s("el-button",{attrs:{type:"primary"},on:{click:t.commitReview}},[t._v("提交")]),t.isSubmit?s("el-button",{attrs:{type:"primary"},on:{click:t.nextComment}},[t._v("点评下一个")]):t._e(),s("el-button",{attrs:{type:t.isSubmit?"info":"warning",disabled:t.isSubmit},on:{click:t.switchMsg}},[t._v("跳过")])],1)]):t._e(),!t.handlerContent&&"SeeReviews"===t.routeName&&"human_resource"===t.type&&t.feedback?s("el-form-item",{attrs:{label:""}},[s("el-button",{staticStyle:{padding:"6px 20px",height:"32px"},attrs:{type:"primary",disabled:t.submitResultDisabled},on:{click:function(e){t.submitResults=!0}}},[t._v("提交")])],1):t._e(),!t.feedback&&"SeeReviews"===t.routeName&&"hm"===t.character&&t.isFeedbackSuccess?s("el-form-item",{attrs:{label:""}},[s("p",{staticClass:"sign"},[t._v("\n          如果对本次点评有异议，请及时进行\n          "),s("span",{staticClass:"feedback",on:{click:t.openFeedback}},[t._v("\n            反馈\n            "),s("svg",{staticClass:"icon feedback-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconquanju_fankui"}})])])])]):t._e()],1)],1),t.feedbackShow?s("tip",{staticClass:"center",attrs:{"tip-show":t.feedbackShow,"btn-text":"确定","show-cancel-btn":!0,"has-footer":!0,"close-hid":!0,width:"568px",title:"点评问题反馈"},on:{"update:tipShow":function(e){t.feedbackShow=e},"update:tip-show":function(e){t.feedbackShow=e},btnHandle:t.btnFeedbackShow,cancel:function(e){t.feedbackShow=!1,t.feedbackContent=""}}},[s("p",{attrs:{slot:"content"},slot:"content"},[s("el-input",{staticClass:"feedback-textarea",attrs:{type:"textarea",placeholder:"请描述您遇到的问题，200字以内",maxlength:"200",resize:"none","show-word-limit":""},on:{change:t.watchFeedback},model:{value:t.feedbackContent,callback:function(e){t.feedbackContent=e},expression:"feedbackContent"}}),s("span",{staticClass:"error"},[t._v(t._s(t.errorText))])],1)]):t._e(),s("el-dialog",{attrs:{title:"提示",visible:t.submitResults,width:"400px",center:"",top:"30vh"},on:{"update:visible":function(e){t.submitResults=e}}},[s("p",{staticStyle:{"text-align":"center"}},[t._v("提交后，将不能再修改,请确定是否提交？")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.submitResults=!1,t.feedbackContent=""}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.commitResult}},[t._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"提示",visible:t.hasReview,width:"400px",center:"",top:"30vh"},on:{"update:visible":function(e){t.hasReview=e}}},[s("p",{staticStyle:{"text-align":"center"}},[t._v("当前没有可点评的咨询记录，请稍后重试")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.hasReview=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.switchMsg}},[t._v("确 定")])],1)])],1)},i=[],n=(s("96cf"),s("3b8d")),r=(s("7f7f"),s("9039")),o=s("f296"),c=s("fd0b"),l=s("9fbc"),u=s("57ee"),d={name:"CommitReview",components:{Tip:r["a"],MsgCard:l["a"],HealthFile:u["default"]},data:function(){return{rate:{medicalHistory:0,etiologyAnalysis:0,diagnosticClarity:0,treatmentPrograms:0,empathy:0},reviewContent:"",reviewInfo:{content:"",processResult:""},feedbackShow:!1,feedbackContent:"",errorText:"",submitResults:!1,type:this.$store.state.user.mts_user?this.$store.state.user.mts_user.type:"",character:this.$store.state.user.bus_role,routeName:this.$route.name,msgReview:{},score:0,feedback:"",handlerContent:"",startTime:Object(c["b"])(new Date),isSubmit:!1,hasReview:!1,errorReviewText:"",submitResultDisabled:!1,isFeedbackSuccess:!0,msgs:[],activeName:"msg",msgTip:"",fd_ask:{},babyId:""}},created:function(){this.initPage(),console.log(this.$route.name)},methods:{initPage:function(){this.$route.params.id&&"SeeReviews"===this.$route.name?this.getReviewDetail():this.getMsgs()},btnFeedbackShow:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.feedbackContent){t.next=5;break}return this.errorText="反馈内容不能为空",t.abrupt("return");case 5:this.errorText="";case 6:return t.next=8,Object(o["gb"])({id:this.$route.params.id,feed_back:this.feedbackContent});case 8:e=t.sent,s=e.code,a=e.data,2e4===s&&(a.result?(this.$message({message:"提交成功",type:"success"}),this.isFeedbackSuccess=!1,this.feedback=this.feedbackContent):this.$message({message:a.message,type:"error"})),this.feedbackShow=!1;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openFeedback:function(){var t=this.$store.state.user&&this.$store.state.user.userInfo&&this.$store.state.user.userInfo.id;this.msgReview.commentator===t?this.feedbackShow=!0:this.$message({type:"warning",message:"不能反馈其他人"})},watchFeedback:function(t){this.errorText=t?"":"反馈内容不能为空"},getScore:function(){this.score=4*this.rate.medicalHistory+4*this.rate.etiologyAnalysis+4*this.rate.diagnosticClarity+4*this.rate.treatmentPrograms+4*this.rate.empathy},commitResult:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["V"])({id:this.fd_ask._id,handler_content:this.reviewInfo.processResult});case 2:e=t.sent,s=e.code,a=e.data,2e4===s&&(a.result?(this.$message({message:"提交成功",type:"success"}),this.submitResults=!1,this.submitResultDisabled=!0):this.$message({message:a.message,type:"error"}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getReviewDetail:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["J"])(this.$route.params.id);case 2:e=t.sent,s=e.code,a=e.data,2e4===s&&a.result&&(this.msgReview=a.msg_review,this.msgs=a.msgs,a.msgs.length||(this.msgTip="暂无咨询记录"),this.rate.medicalHistory=a.msg_review.medical_history/4,this.rate.etiologyAnalysis=a.msg_review.cause_analysis/4,this.rate.diagnosticClarity=a.msg_review.clarify_diagnosis/4,this.rate.treatmentPrograms=a.msg_review.therapeutic_plans/4,this.rate.empathy=a.msg_review.empathy/4,this.score=a.msg_review.score,a.msg_review.content&&(this.isSubmit=!0),this.reviewContent=a.msg_review.content||"无",a.msg_review.feed_back&&(this.feedback=a.msg_review.feed_back),a.msg_review.handler_content&&(this.handlerContent=a.msg_review.handler_content));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),commitReview:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.reviewInfo.content||100===this.score){t.next=5;break}return this.errorReviewText="评论不能为空",t.abrupt("return");case 5:this.errorReviewText="";case 6:return t.next=8,Object(o["eb"])({medical_history:4*this.rate.medicalHistory,cause_analysis:4*this.rate.etiologyAnalysis,clarify_diagnosis:4*this.rate.diagnosticClarity,therapeutic_plans:4*this.rate.treatmentPrograms,empathy:4*this.rate.empathy,commentator:this.fd_ask.hm,msg_id:this.fd_ask._id,status:"submitted",content:this.reviewInfo.content,review_started_at:this.startTime,review_ended_at:Object(c["b"])(new Date)});case 8:e=t.sent,s=e.code,a=e.data,2e4===s&&(a.result?(this.isSubmit=!0,this.$message({message:"评价成功",type:"success"})):this.$message({message:a.message,type:"error"}));case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),switchMsg:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.hasReview){t.next=4;break}return this.msgs=[],this.hasReview=!1,t.abrupt("return");case 4:return t.next=6,Object(o["eb"])({commentator:this.fd_ask.hm,msg_id:this.fd_ask._id,status:"reviewed",review_started_at:this.startTime,review_ended_at:Object(c["b"])(new Date)});case 6:e=t.sent,s=e.code,2e4===s&&(this.goToReview(),this.isSubmit=!1,this.rate={medicalHistory:0,etiologyAnalysis:0,diagnosticClarity:0,treatmentPrograms:0,empathy:0},this.score=0,this.reviewInfo={content:"",processResult:""});case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToReview:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["U"])();case 2:e=t.sent,s=e.code,a=e.data,2e4===s&&(a.result&&a.messages&&a.messages.fd_ask?(this.$router.push("/learning-admin/comment/commit-review?timespan="+(new Date).getTime()),this.initPage()):this.hasReview=!0);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setErrorText:function(){this.reviewInfo.content?this.errorReviewText="":this.errorReviewText="评论不能为空"},getMsgs:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["U"])();case 2:e=t.sent,s=e.code,a=e.data,2e4===s&&(a.result&&a.messages&&a.messages.fd_ask?(this.msgs=a.messages.msgs,this.fd_ask=a.messages.fd_ask,this.babyId=a.messages.msgs.length&&a.messages.msgs[0].family_member):this.msgTip="暂无咨询记录");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),nextComment:function(){this.goToReview(),this.isSubmit=!1,this.rate={medicalHistory:0,etiologyAnalysis:0,diagnosticClarity:0,treatmentPrograms:0,empathy:0},this.score=0,this.reviewInfo={content:"",processResult:""}}}},m=d,p=(s("7e66"),s("2877")),f=Object(p["a"])(m,a,i,!1,null,"a25dffca",null);e["default"]=f.exports},"1d24":function(t,e,s){"use strict";var a=s("67f3"),i=s.n(a);i.a},"1f62":function(t,e,s){},"24d7":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.msgBody.subType&&"todo"===t.msgBody.subType?s("el-row",{attrs:{type:"flex",justify:"align-center"===t.textAlign?"center":""}},["round_apply_transfer"===t.msgBody.noticeType?s("ReplyUser",{attrs:{replyContent:t.msgBody.adminDesc,"msg-id":t.item._id,operated:t.msgBody.operated,btnIsDisabled:t.btnIsDisabled(t.msgBody),userIntent:t.msgBody.userDesc}}):t._e(),t.msgBody.noticeType&&"transfer_apply"===t.msgBody.noticeType||"transfer_reject"===t.msgBody.noticeType?s("TransferContent",{attrs:{item:t.item,msgOptions:t.msgBody,"bus-role":t.msgBody.bus_role,btnIsDisabled:t.btnIsDisabled(t.msgBody),"notice-type":t.msgBody.noticeType,operated:t.msgBody.operated,reason:t.msgBody.reason,"msg-id":t.item._id},on:{confirm:t.confirm}}):t._e(),t.msgBody.noticeType&&"transfer_accept"===t.msgBody.noticeType?s("TransferAccept",{class:t.textAlign,attrs:{msgId:t.item._id,btnIsDisabled:t.btnIsDisabled(t.msgBody),operated:t.msgBody.operated,msgOptions:t.msgBody},on:{confirm:t.confirm}}):t._e()],1):t._e(),t.msgBody.subType&&"todo"===t.msgBody.subType?t._e():s("el-row",{attrs:{type:"flex",justify:"align-center"===t.textAlign?"center":""}},[s("SystemContent",{class:t.textAlign,attrs:{"msg-type":t.msgBody.subType&&"record"===t.msgBody.subType?"systemWarnning":"systemInfo",content:t.msgBody.content}})],1)],1)},i=[],n=s("db72"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reply-user-box"},[s("p",{staticClass:"user_intent"},[t._v("\n    "+t._s(t.userIntent)+"\n  ")]),t.operated?s("el-row",[s("span",{staticClass:"span_key"},[t._v("回复用户留言")]),s("p",{staticClass:"notic-reason-box"},[t._v("\n      "+t._s(t.replyContent)+"\n    ")])]):t._e(),t.operated?t._e():s("div",[s("el-row",[s("span",{staticClass:"span_key"},[t._v("回复用户留言")]),s("el-input",{staticClass:"relpy_textarea",attrs:{type:"textarea",rows:3,maxlength:"100","show-word-limit":"",placeholder:"请输入内容"},model:{value:t.replyData,callback:function(e){t.replyData=e},expression:"replyData"}})],1),s("el-row",{attrs:{gutter:24,type:"flex",justify:"center"}},[s("el-button",{staticClass:"btn-group",attrs:{type:"primary",size:"mini",disabled:!(!1===t.btnIsDisabled&&t.activedBaby.is_asking)},on:{click:t.confirmUserIntent}},[t._v("\n        确认\n      ")])],1)],1)],1)},o=[],c=s("f44d"),l=s("2f62"),u={name:"reply-user-box",props:{userIntent:{type:String,default:""},operated:{type:Boolean,default:!0},btnIsDisabled:{type:Boolean,default:!0},replyContent:{type:String,default:""},msgId:{type:String,default:""}},data:function(){return{replyData:""}},computed:Object(n["a"])({},Object(l["c"])(["activedBabyId","activedBaby","userInfo"])),methods:{confirmUserIntent:function(){var t=this;this.replyData?Object(c["c"])(this.msgId,{desc:this.replyData,result:"已确认"}).then((function(e){t.$message({type:e.data.result?"success":"warning",message:e.data.result?"回复成功":"回复失败"}),e&&(t.$store.dispatch("chat/getLastC2CHistoryMessages","",{root:!0}),t.$store.dispatch("chat/getLastAsk"))})):this.$message.warning("回复内容不能为空")}}},d=u,m=(s("567c"),s("2877")),p=Object(m["a"])(d,r,o,!1,null,"38928f7d",null),f=p.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"transfer-apply-content"},[s("el-row",{attrs:{gutter:24}},[s("span",{staticClass:"transfer_key"},[t._v(t._s(t.msgOptions.title))])]),s("el-row",{attrs:{gutter:24}},[s("span",{staticClass:"transfer_key"},[t._v(t._s("transfer_reject"!==t.noticeType?"转诊原因：":"拒绝原因："))]),s("p",{staticClass:"notic-reason-box"},[t._v(t._s(t.msgOptions.reason||"无"))]),t.msgOptions.operateResult.result_text?s("p",{staticClass:"padding-top-10"},[t._v("\n      "+t._s(t.msgOptions.operateResult.result_text)+"\n    ")]):t._e(),t.operated?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-button",{staticClass:"notic_disabled_btn margin-top-10",attrs:{size:"mini",type:"info",disabled:!0}},[t._v("\n        "+t._s(t.msgOptions.operateResult.result)+"\n      ")])],1):t._e()],1),!1===t.operated?s("el-row",{staticClass:"btn-group"},["transfer_reject"!==t.noticeType?s("el-button",{attrs:{type:"primary",disabled:t.btnIsDisabled,size:"mini"},on:{click:t.acceptFun}},[t._v("\n      同意转诊\n    ")]):t._e(),"transfer_reject"!==t.noticeType?s("el-button",{staticClass:"reject_btn",attrs:{disabled:t.btnIsDisabled,size:"mini"},on:{click:t.rejectFun}},[t._v("\n      无需转诊\n    ")]):t._e(),"transfer_reject"===t.noticeType?s("el-button",{attrs:{disabled:t.btnIsDisabled,type:"primary",size:"mini"},on:{click:t.confirmAccept}},[t._v("\n      确认\n    ")]):t._e()],1):t._e(),t.showReason&&t.rejectRequest?s("el-row",{staticClass:"margin-top-10",attrs:{gutter:24}},[s("span",{staticClass:"transfer_key"},[s("i",{staticClass:"el-icon-info",staticStyle:{color:"#FF4E4E","margin-bottom":"5px"}}),t._v("拒绝原因：\n    ")]),s("span",{staticClass:"transfer_value"},[s("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:3,maxlength:"100","show-word-limit":"",placeholder:"请输入拒绝健康管理师转诊请求的原因"},model:{value:t.reject_reason,callback:function(e){t.reject_reason=e},expression:"reject_reason"}})],1)]):t._e()],1)},h=[],v=s("51a5"),_={name:"TransferContent",props:{item:{type:Object,default:function(){}},msgOptions:{type:Object,default:function(){}},busRole:{type:String,default:""},btnIsDisabled:{type:Boolean,default:!0},noticeType:{type:String,default:""},operated:{type:Boolean,default:!0},msgId:{type:String,default:""}},data:function(){return{reject_reason:"",showReason:!1,rejectRequest:!0}},computed:Object(n["a"])({},Object(l["c"])(["lastAsk","userInfo"])),methods:{confirmAccept:function(){this.$emit("confirm",this.msgId)},rejectFun:function(){var t=this;if(this.showReason){var e={message_id:this.msgId,transfer_reject_reason:this.reject_reason};this.reject_reason&&Object(v["m"])(this.item.fdAsk,e).then((function(e){var s="拒绝转诊";t.$message({type:e.data.result?"success":"error",message:e.data.result?s+"成功":s+"失败"}),e.data.result?t.rejectRequest=!1:t.rejectRequest=!0}))}else this.showReason||(this.showReason=!0)},acceptFun:function(){var t=this;this.item.fdAsk?Object(v["a"])(this.item.fdAsk,{message_id:this.msgId}).then((function(e){t.$message({type:e.data.result?"success":"error",message:e.data.result?"同意转诊成功":"同意转诊失败"}),e.data.result&&t.$store.dispatch("chat/getLastC2CHistoryMessages","",{root:!0})})):this.$message({type:"success",message:"同意转诊失败，请重试"})}}},y=_,b=(s("2bb6"),Object(m["a"])(y,g,h,!1,null,"6c2012b7",null)),w=b.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notic-box"},[s("p",[t._v("\n    "+t._s(t.msgOptions.content)+"\n  ")]),t.operated?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-button",{staticClass:"notic_disabled_btn margin-top-10 margin-bottom-10",attrs:{size:"mini",type:"info",disabled:!0}},[t._v("\n      "+t._s(t.msgOptions.operateResult.result)+"\n    ")])],1):t._e(),t.operated?t._e():s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-button",{staticClass:"margin-top-10 margin-bottom-10",attrs:{size:"mini",type:"primary",disabled:t.btnIsDisabled},on:{click:t.confirmAccept}},[t._v("\n      确认\n    ")])],1)],1)},k=[],x={props:{operated:{type:Boolean,default:!0},msgOptions:{type:Object,default:function(){}},btnIsDisabled:{type:Boolean,default:!0},msgId:{type:String,default:""}},data:function(){return{}},methods:{confirmAccept:function(){this.$emit("confirm",this.msgId)}}},O=x,T=Object(m["a"])(O,C,k,!1,null,null,null),I=T.exports,S=s("7160"),R={props:{msgBody:{type:Object,default:function(){}},item:{type:Object,default:function(){}},textAlign:{type:String,default:"align-center"}},components:{ReplyUser:f,TransferContent:w,TransferAccept:I,SystemContent:S["a"]},data:function(){return{}},computed:Object(n["a"])({},Object(l["c"])(["userInfo"])),methods:{btnIsDisabled:function(t){return!(t.bus_role_id===this.userInfo.id)},confirm:function(t){var e=this;if(t){var s={result:"已确认"};Object(c["d"])(t,s).then((function(t){e.$message({type:t&&t.data.result?"success":"error",message:t.message}),e.$store.dispatch("chat/getLastAsk")}))}else this.$message.info("messageId不能为空")}}},j=R,M=Object(m["a"])(j,a,i,!1,null,null,null);e["a"]=M.exports},"2bb6":function(t,e,s){"use strict";var a=s("1f62"),i=s.n(a);i.a},"4dce":function(t,e,s){"use strict";var a=s("0e79"),i=s.n(a);i.a},5118:function(t,e,s){(function(t){var a="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(i.call(setTimeout,a,arguments),clearTimeout)},e.setInterval=function(){return new n(i.call(setInterval,a,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(a,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},s("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,s("24aa"))},"567c":function(t,e,s){"use strict";var a=s("1840"),i=s.n(a);i.a},"5ca5":function(t,e,s){},6017:function(t,e,s){(function(t,e){(function(t,s){"use strict";if(!t.setImmediate){var a,i=1,n={},r=!1,o=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?p():f()?g():t.MessageChannel?h():o&&"onreadystatechange"in o.createElement("script")?v():_(),c.setImmediate=l,c.clearImmediate=u}function l(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),s=0;s<e.length;s++)e[s]=arguments[s+1];var r={callback:t,args:e};return n[i]=r,a(i),i++}function u(t){delete n[t]}function d(t){var e=t.callback,a=t.args;switch(a.length){case 0:e();break;case 1:e(a[0]);break;case 2:e(a[0],a[1]);break;case 3:e(a[0],a[1],a[2]);break;default:e.apply(s,a);break}}function m(t){if(r)setTimeout(m,0,t);else{var e=n[t];if(e){r=!0;try{d(e)}finally{u(t),r=!1}}}}function p(){a=function(t){e.nextTick((function(){m(t)}))}}function f(){if(t.postMessage&&!t.importScripts){var e=!0,s=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=s,e}}function g(){var e="setImmediate$"+Math.random()+"$",s=function(s){s.source===t&&"string"===typeof s.data&&0===s.data.indexOf(e)&&m(+s.data.slice(e.length))};t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),a=function(s){t.postMessage(e+s,"*")}}function h(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;m(e)},a=function(e){t.port2.postMessage(e)}}function v(){var t=o.documentElement;a=function(e){var s=o.createElement("script");s.onreadystatechange=function(){m(e),s.onreadystatechange=null,t.removeChild(s),s=null},t.appendChild(s)}}function _(){a=function(t){setTimeout(m,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,s("24aa"),s("4362"))},"65d1":function(t,e,s){"use strict";var a=s("f615"),i=s.n(a);i.a},"67f3":function(t,e,s){},"6a5c":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.msgOptions.type===t.MSG_ELEMENT_TYPE.TEXT?s("TextContent",{attrs:{text:t.msgOptions.text||t.msgOptions.content}}):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.ROBOT_CARD||"round_msg"===t.msgOptions.type?s("div",["re_ask"===t.msgOptions.content[0].ask_type||"new_ask"===t.msgOptions.content[0].ask_type?s("p",{staticClass:"confirm_text"},[t._v("\n      请确认本次咨询主要诉求\n    ")]):t._e(),t._l(t.msgOptions.content,(function(e,a){return s("div",{key:e.ask_type?e.ask_type+a:a},[s("BoutCard",{attrs:{title:t.msgOptions.title,boutCard:t.boutCardData(e,t.item.accountType,a,t.msgOptions),msgTime:t.item.msgTime},on:{showDetail:t.showDetail}}),a<t.msgOptions.content.length-1&&"re_ask"!==t.msgOptions.content[0].ask_type?s("p",{class:t.item.isSelfSend?"chat_divider":"chat_divider_left"}):t._e()],1)}))],2):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.IMAGE||"image"===t.msgOptions.type?s("div",{staticClass:"image_box"},[s("ImageContent",{attrs:{"images-options":t.msgOptions},on:{thumbClick:t.thumbClick}})],1):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.VIDEO?s("div",{staticClass:"image_box"},[s("div",{staticClass:"msg_VideoContent"},[s("img",{staticStyle:{"max-width":"540px"},attrs:{height:"200",src:t.msgOptions.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg","data-src":t.msgOptions.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg",alt:""}}),s("i",{staticClass:"el-icon-video-play",on:{click:function(e){return t.thumbClick("video",t.msgOptions.url)}}})])]):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.CARD?s("CardContent",{attrs:{"images-options":t.msgOptions,baby:t.msgOptions.content.family_member,symptom:t.msgOptions.content.ask_question_desc,"has-interven":t.msgOptions.content.has_interven,"interven-desc":t.msgOptions.content.interven_desc,"data-arr":t.msgOptions.content.ask_question_report},on:{showDetail:t.showDetail}}):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.VOICE?s("my-audio",{attrs:{msgtime:t.item.msgTime,src:t.msgOptions.url,vduration:t.msgOptions.duration}}):t._e(),t.msgOptions.show&&("voice_card"===t.msgOptions.type||t.msgOptions.is_card)?s("p",[s("voice-card",{attrs:{msgtime:t.item.msgTime,src:t.msgOptions.url,vduration:t.msgOptions.duration}})],1):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.LINK?s("LinkContent",{attrs:{"link-options":t.msgOptions}}):t._e(),"comment"===t.msgOptions.type?s("p",{staticClass:"align-left comment_content"},[t._v("\n    用户评价："+t._s(t.msgOptions&&t.msgOptions.content||"无")+"\n  ")]):t._e(),"suggestion"===t.msgOptions.type?s("p",{staticClass:"align-left comment_content"},[t._v("\n    "+t._s(t.msgOptions.bus_role_name)+"建议："+t._s(t.msgOptions&&t.msgOptions.suggestion||"无")+"\n  ")]):t._e()],1)},i=[],n=s("f41a"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"TextContent",domProps:{innerHTML:t._s(t.text)}})},o=[],c={name:"TextContent",props:{text:{type:String,default:""}}},l=c,u=(s("d8a3"),s("2877")),d=Object(u["a"])(l,r,o,!1,null,"d77f5c3a",null),m=d.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("img",{staticStyle:{"max-width":"540px"},attrs:{height:"300",alt:"",src:t.imagesOptions.images?t.imagesOptions.images.oriImage:t.imagesOptions.url},on:{click:t.thumbClickFun}})},f=[],g={name:"ImageContent",props:{imagesOptions:{type:Object,default:function(){return{}}}},created:function(){},methods:{thumbClickFun:function(){this.imagesOptions.images?this.$emit("thumbClick","image",this.imagesOptions.images.oriImage):this.$emit("thumbClick","image",this.imagesOptions.url)}}},h=g,v=Object(u["a"])(h,p,f,!1,null,null,null),_=v.exports,y=s("d679"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"linkContent"},[s("p",{staticClass:"link",domProps:{innerHTML:t._s(t.replaceURLWithHTMLLinks(t.linkOptions.content))},on:{click:function(e){return t.toURL(t.linkOptions.url)}}})])},w=[],C=s("ed08"),k={name:"ImageContent",props:{linkOptions:{type:Object,default:function(){return{}}}},created:function(){},methods:{replaceURLWithHTMLLinks:C["n"],toURL:function(t){t&&window.open(t)}}},x=k,O=(s("65d1"),Object(u["a"])(x,b,w,!1,null,"1e5c354a",null)),T=O.exports,I=s("c1a0"),S=s("92f3"),R=s("8975"),j={props:{msgOptions:{type:Object,default:function(){}},item:{type:Object,default:function(){}}},components:{TextContent:m,ImageContent:_,CardContent:y["a"],LinkContent:T,voiceCard:I["a"],BoutCard:S["a"]},data:function(){return{curUploadList:[],MSG_ELEMENT_TYPE:n["a"].MSG_ELEMENT_TYPE}},methods:{boutCardData:R["boutCardData"],showDetail:function(t){this.thumbClick(t.mediaType,t.meidiaUrl,t.list)},thumbClick:function(t,e,s){this.$parent.thumbClickFun?this.$parent.thumbClickFun(t,e,s):this.$emit("thumbClickFun",{type:t,url:e,list:s})}}},M=j,D=(s("1d24"),Object(u["a"])(M,a,i,!1,null,"e2dd5b8c",null));e["a"]=D.exports},7160:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"SystemContent"},[s("el-row",[s("p",{directives:[{name:"show",rawName:"v-show",value:"systemInfo"==t.msgType,expression:"msgType == 'systemInfo'"}],staticClass:"color-yellow"},[s("i",{staticClass:"el-icon-info"}),s("span",[t._v(t._s(t.content))])]),s("p",{directives:[{name:"show",rawName:"v-show",value:"systemWarnning"==t.msgType,expression:"msgType == 'systemWarnning'"}],staticClass:"systemWarnning"},[t._v("\n      "+t._s(t.content)+"\n    ")])])],1)},i=[],n={name:"SystemContent",props:{content:{type:String,default:"超过十分钟"},msgType:{type:String,default:"systemInfo"}}},r=n,o=(s("4dce"),s("2877")),c=Object(o["a"])(r,a,i,!1,null,"20a3d24a",null);e["a"]=c.exports},"7cb9":function(t,e,s){},"7e66":function(t,e,s){"use strict";var a=s("5ca5"),i=s.n(a);i.a},"88ae":function(t,e,s){t.exports=s.p+"static/img/pause.06cf94c2.png"},"8d1f":function(t,e,s){"use strict";var a=s("a482"),i=s.n(a);i.a},"92f3":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bout-card",on:{click:t.goMessageDetail}},[t.title?s("el-row",[s("h5",{staticClass:"card_title",staticStyle:{"min-width":"220px"}},[t._v(t._s(t.title))]),s("p",{staticClass:"divider"})]):t._e(),t._l(t.boutCard,(function(e,a){return s("el-row",{key:"boutItem"+a,attrs:{gutter:24}},[e.show?s("el-col",{attrs:{span:24}},["confirm_text"===e.type?s("div",[s("p",{staticClass:"confirm_text"},[t._v("\n          "+t._s(e.content)+"\n        ")])]):t._e(),"ask_type"===e.type?s("div",[s("p",{staticClass:"divider"}),s("p",{staticClass:"confirm_text"},[s("span",[t._v(" "+t._s(e.content))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.showTime,expression:"boutItem.showTime"}],staticClass:"float-right create_time"},[t._v("\n            "+t._s(e.time)+"\n          ")])]),s("p",{staticClass:"divider"})]):t._e(),"text"===e.type?s("div",[s("h5",{staticClass:"card_title"},[t._v(t._s(e.title))]),s("div",{staticClass:"text-wrap"},[t._v(t._s(e.content))])]):t._e(),"btn"===e.type?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-button",{staticClass:"notic_disabled_btn",attrs:{size:"mini",type:"info",disabled:!0}},[t._v("\n          已确认\n        ")])],1):t._e(),"voice"===e.type?s("div",[s("my-audio",{attrs:{msgtime:t.msgTime,src:e.voice.url,vduration:e.voice.duration}})],1):t._e(),e.dataArr&&e.dataArr.length>0?s("div",{staticClass:"data"},t._l(e.dataArr,(function(a,i){return s("div",{key:i,staticClass:"image-and-video"},["image"===a.type?s("img",{attrs:{src:a.url,alt:"",width:"50px"},on:{click:function(s){return t.showMediaDetail(a.url,a.type,e.dataArr)}}}):"video"===a.type?s("div",{staticClass:"video-container"},[s("div",{staticClass:"VideoContent"},[s("img",{attrs:{src:a.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg","data-src":a.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg",alt:""}}),s("i",{staticClass:"el-icon-video-play",on:{click:function(e){return t.showMediaDetail(a.url,"video",[])}}})])]):t._e()])})),0):t._e()],1):t._e()],1)}))],2)},i=[],n=s("2b0e"),r=n["default"].filter("gender"),o={name:"bout-card",components:{},props:{msgTime:{type:String,default:""},boutCard:{type:Array,default:function(){return[]}},hasInterven:{type:Boolean,default:!1},intervenDesc:{type:String,default:""},title:{type:String,default:""}},data:function(){return{currentMediaType:"",currentMediaUrl:"",dialogVisible:!1}},methods:{genderFilter:r,goMessageDetail:function(){this.$emit("goMsgDetail")},showMediaDetail:function(t,e,s){for(var a=[],i=0;i<s.length;i++){var n=s[i];"image"===n.type&&n.url&&a.push(n.url)}var r={mediaType:e,meidiaUrl:t,list:a};this.$emit("showDetail",r)},closeVideoDialog:function(){if("video"===this.currentMediaType){var t=document.getElementById("myVideo");t.pause()}}}},c=o,l=(s("8d1f"),s("2877")),u=Object(l["a"])(c,a,i,!1,null,"130bdd5e",null);e["a"]=u.exports},"9fbc":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"refmsgCard",staticClass:"msg-card"},[t.msgList&&t.msgList.length>0?s("div",{staticClass:"infinite-list-wrapper"},[s("ul",t._l(t.msgList,(function(e,a){return s("li",{key:a,staticStyle:{"line-height":"30px"}},[s("el-row",{staticClass:"all",attrs:{gutter:24}},[s("el-col",{class:t.searchType+"-right",attrs:{span:24}},[s("p",{staticClass:"color-999 align-left"},[t.showAdmin?s("span",[t._v(t._s(e.account&&e.account.name))]):s("span",[t._v(t._s("User"===e.from_account_type?"用户":"服务团队"))]),s("span",{staticClass:"fontsize-10 margin-left-20"},[t._v(t._s(t._f("formatTime")(new Date(e.created_at))))])]),"notice"===e.message_body.type?s("noticeMsg",{attrs:{msgBody:e.message_body,textAlign:"align-left",item:e}}):s("chatMsg",{attrs:{msgOptions:e.message_body,item:e},on:{thumbClickFun:t.thumbClickFunComment}})],1)],1)],1)})),0)]):s("div",{staticStyle:{"text-align":"center",color:"#5a5e66"}},[t._v("\n    暂无咨询记录\n  ")]),s("monitor",{ref:"monitor",attrs:{"monitor-info":t.monitorInfo,"current-image-url-arr":t.curUploadUrlList}})],1)},i=[],n=(s("20d6"),s("7962")),r=s("6a5c"),o=s("24d7"),c=s("2ef0"),l=s.n(c),u={components:{Monitor:n["a"],chatMsg:r["a"],noticeMsg:o["a"]},props:{searchType:{type:String,default:"all"},msgList:{type:Array,default:function(){return[]}},showAdmin:{type:Boolean,default:!0}},data:function(){return{monitorInfo:{},curUploadUrlList:[],imageArr:[]}},created:function(){console.log("msgList==",this.msgList)},methods:{thumbClickFun:function(t,e,s){if(this.monitorInfo={type:t,meta:{url:e}},s&&(this.curUploadUrlList=s),this.curUploadUrlList&&this.curUploadUrlList.length&&"video"!==t){var a=l.a.findIndex(this.curUploadUrlList,(function(t){return t===e}));-1===a&&this.curUploadUrlList.push(e),this.curUploadUrlList=l.a.sortedUniq(this.curUploadUrlList)}else"video"!==t?this.curUploadUrlList.push(e):this.curUploadUrlList=[];this.$refs.monitor.show()},thumbClickFunComment:function(t){var e=t.type,s=t.url,a=t.list;if(this.monitorInfo={type:e,meta:{url:s}},a&&(this.curUploadUrlList=a),this.curUploadUrlList&&this.curUploadUrlList.length&&"video"!==e){var i=l.a.findIndex(this.curUploadUrlList,(function(t){return t===s}));-1===i&&this.curUploadUrlList.push(s),this.curUploadUrlList=l.a.sortedUniq(this.curUploadUrlList)}else"video"!==e?this.curUploadUrlList.push(s):this.curUploadUrlList=[];this.$refs.monitor.show()}}},d=u,m=(s("f2ae"),s("2877")),p=Object(m["a"])(d,a,i,!1,null,"e85f6b80",null);e["a"]=p.exports},a482:function(t,e,s){},a822:function(t,e,s){"use strict";var a=s("f596"),i=s.n(a);i.a},c1a0:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"clearfix"},[s("span",{staticClass:"title"},[t._v("通话录音")]),s("span",{staticClass:"float-right"},[t._v(t._s(t.msgtime))])]),s("div",{ref:"wrap",staticClass:"x-audio-wrap",staticStyle:{"min-width":"250px","max-width":"500px"},style:"width:"+t.width+"px"},[s("div",{staticClass:"x-sector",on:{click:t.play}},[s("img",{staticClass:"sound-img",attrs:{src:t.soundImg}})]),s("div",{staticClass:"progress_box"},[s("el-slider",{attrs:{"format-tooltip":t.formatTooltip},on:{change:t.changeProgressValue},model:{value:t.progressValue,callback:function(e){t.progressValue=e},expression:"progressValue"}})],1),s("div",{staticClass:"x-time"},[t._v(t._s(t.duration&&t.showDuration?t.duration:t.text))])])])},i=[],n=s("7618"),r=(s("ac6a"),s("db72")),o=(s("c5f6"),s("2f62")),c={name:"VoiceCard",props:{src:{type:String,default:""},msgtime:{type:String,default:""},text:{type:String,default:""},vduration:{type:Number,default:0},showDuration:{type:Boolean,default:!0}},data:function(){return{width:"",progressValue:0,audio:null,animate:!1,timer:null,duration:null,soundImg:s("df84"),slideLeft:"0",oldvalue:0,audioTime:"",is_moving:!1,sb_bkx:0,sb_bky:0}},computed:Object(r["a"])({},Object(o["c"])(["activedBaby"])),watch:{animate:function(){!1===this.animate?this.soundImg=s("df84"):this.soundImg=s("88ae")},activedBaby:function(){this.audio.pause()}},mounted:function(){var t=this;this.audio=new Audio,this.audio.src=this.src,this.width=this.vduration/6e4*75-25,this.audio.setAttribute("msgtime",this.msgtime),this.audio.addEventListener("canplaythrough",(function(){})),this.audio.onplay=function(){t.timer=setInterval((function(e){t.updateProgress()}),300),t.animate=!0},this.audio.onpause=function(){t.animate=!1,t.timer&&clearInterval(t.timer)},this.audio.onended=function(){t.animate=!1,t.timer&&clearInterval(t.timer)},window.audioList.push(this.audio)},methods:{formatTooltip:function(){var t=0;return this.audio&&this.audio.duration&&(t=this.realFormatSecond(this.audio.duration*this.progressValue/100)),t},changeProgressValue:function(t){this.play(),this.audio.currentTime=parseInt(this.audio.duration*t/100)},play:function(){var t=this;window.audioList.forEach((function(e,s){var a=e.getAttribute("msgtime"),i=t.audio.getAttribute("msgtime");a!==i&&e.pause()})),this.audio.paused?this.audio.play():this.audio.pause()},updateProgress:function(){var t=Math.round(Math.floor(this.audio.currentTime)/Math.floor(this.audio.duration)*100);t-this.oldvalue>0&&(this.oldvalue=t,this.progressValue=t)},realFormatSecond:function(t){var e=Object(n["a"])(t);if("number"===e||"string"===e){t=parseInt(t);var s=Math.floor(t/60);return t-=60*s,("0"+s).slice(-2)+":"+("0"+t).slice(-2)}return"00:00"}}},l=c,u=(s("ff2e"),s("2877")),d=Object(u["a"])(l,a,i,!1,null,"19341bc4",null);e["a"]=d.exports},d679:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CardContent"},[s("div",[s("el-row",{staticClass:"baby-info",attrs:{gutter:4}},[s("el-col",{attrs:{span:2}},[s("svg-icon",{attrs:{"icon-class":"baby"}})],1),s("el-col",{attrs:{span:22}},[s("p",[t._v("宝宝信息")]),s("div",[t._v("\n          姓名："+t._s(t.baby.name)+"    性别："+t._s(t.genderFilter(t.baby.gender))+"\n             年龄："+t._s(t.baby.age_of_month?t.baby.age_of_month:"未知")+"\n        ")])])],1),s("el-row",{staticClass:"symptom",attrs:{gutter:24}},[s("el-col",{attrs:{span:2}},[s("svg-icon",{attrs:{"icon-class":"yiliaoqixie"}})],1),s("el-col",{attrs:{span:22}},[s("p",[t._v("症状描述")]),s("div",[t._v(t._s(t.symptom))])])],1),s("el-row",{staticClass:"interven",attrs:{gutter:24}},[s("el-col",{attrs:{span:2}},[s("svg-icon",{attrs:{"icon-class":"yao"}})],1),s("el-col",{attrs:{span:22}},[s("p",[t._v("干预史")]),s("div",[t._v(t._s(t.intervenDesc||"无"))])])],1),s("el-row",{staticClass:"data",attrs:{gutter:24}},[s("el-col",{attrs:{span:2}},[s("svg-icon",{attrs:{"icon-class":"tupian"}})],1),s("el-col",{attrs:{span:22}},[s("p",[t._v("资料照片及视频")]),t.dataArr&&t.dataArr.length>0?s("div",t._l(t.dataArr,(function(e,a){return s("div",{key:a,staticClass:"image-and-video"},["image"===e.type?s("img",{attrs:{src:e.url,alt:"",width:"50px"},on:{click:function(s){return t.showMediaDetail(e.url,e.type)}}}):"video"===e.type?s("div",{staticClass:"video-container"},[s("div",{staticClass:"VideoContent"},[s("img",{attrs:{src:e.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg","data-src":e.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg",alt:""}}),s("i",{staticClass:"el-icon-video-play",on:{click:function(s){return t.showMediaDetail(e.url,"video")}}})])]):t._e()])})),0):t._e(),t.dataArr.length<=0?s("p",[t._v("无")]):t._e()])],1)],1)])},i=[],n=s("2b0e"),r=n["default"].filter("gender"),o={name:"CardContent",components:{},props:{baby:{type:Object,default:function(){return{name:"未知",gender:0,age:"未知"}}},symptom:{type:String,default:""},hasInterven:{type:Boolean,default:!1},intervenDesc:{type:String,default:""},dataArr:{type:Array,default:function(){return["http://"]}}},data:function(){return{currentMediaType:"",currentMediaUrl:"",dialogVisible:!1}},methods:{genderFilter:r,showMediaDetail:function(t,e){for(var s=[],a=0;a<this.dataArr.length;a++){var i=this.dataArr[a];"image"===i.type&&i.url&&s.push(i.url)}var n={mediaType:e,meidiaUrl:t,list:s};this.$emit("showDetail",n)},closeVideoDialog:function(){if("video"===this.currentMediaType){var t=document.getElementById("myVideo");t.pause()}}}},c=o,l=(s("a822"),s("2877")),u=Object(l["a"])(c,a,i,!1,null,"7cfbca32",null);e["a"]=u.exports},d8a3:function(t,e,s){"use strict";var a=s("11b6"),i=s.n(a);i.a},df84:function(t,e,s){t.exports=s.p+"static/img/play.c0a23e29.png"},f2ae:function(t,e,s){"use strict";var a=s("7cb9"),i=s.n(a);i.a},f596:function(t,e,s){},f615:function(t,e,s){},fd0b:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"c",(function(){return i})),s.d(e,"b",(function(){return n}));var a=function(t){var e=t.getFullYear(),s=t.getMonth()+1,a=t.getDate(),i=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return s<10&&(s="0"+s),"".concat(e,"-").concat(s,"-").concat(a," ").concat(i,":").concat(n,":").concat(r)},i=function(t){var e=t.start,s=t.end,a=t.time;if(!e&&!s&&!a)return"0天0小时0分钟";a||(a=new Date(s)-new Date(e));var i=Math.floor(a/864e5),n=a%864e5,r=Math.floor(n/36e5),o=n%36e5,c=Math.ceil(o/6e4);return i+"天"+r+"小时"+c+"分钟"},n=function(t){var e=new Date(t),s="-",a=":",i=e.getMonth()+1,n=e.getDate();i>=1&&i<=9&&(i="0"+i),n>=0&&n<=9&&(n="0"+n);var r=e.getFullYear()+s+i+s+n+" "+e.getHours()+a+e.getMinutes()+a+e.getSeconds();return-1!==r.indexOf("NaN")?"/":r}},ff2e:function(t,e,s){"use strict";var a=s("117b"),i=s.n(a);i.a}}]);
//# sourceMappingURL=chunk-927c041e.3ca2b832.js.map