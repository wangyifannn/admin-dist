(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21188597"],{"0acd":function(e,t,r){"use strict";var n=r("bc3a"),a=r.n(n),o=r("5c96"),u=r("a18c"),i=r("4360"),m=r("5f87"),s=a.a.create({baseURL:"https://api-ch.baobaohehu.com/",timeout:2e5});s.interceptors.request.use((function(e){return i["a"].getters.token&&(e.headers["Authorization"]=Object(m["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.config,r=e.data;return t.url.indexOf(t.baseURL)>-1&&1e3!==r.code?4001===r.code?(u["c"].push("/404"),Promise.reject()):(Object(o["Message"])({message:r.message||"Error",type:"error",duration:5e3}),401===r.code&&i["a"].dispatch("user/resetToken").then((function(){location.reload()})),Promise.reject(new Error(r.message||"Error"))):r}),(function(e){return console.log("err"+e),Object(o["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}));var c=s;function l(e){return c({url:"/wx_wechat/wx_menu/list",method:"get",params:e})}function d(e){return c({url:"/wx_wechat/wx_menu",method:"post",data:e})}function p(e,t){return c({url:"/wx_wechat/wx_menu/"+e,method:"get",params:t})}function h(e,t){return c({url:"/wx_wechat/wx_menu/"+e,method:"put",data:t})}function y(e){return c({url:"/wx_wechat/wx_menu/"+e,method:"delete"})}function f(e){return c({url:"/wx_wechat/release/wx_menu",method:"post",data:e})}function w(e){return c({url:"/wx_wechat/wx_material",method:"post",data:e})}function _(e){return c({url:"/wx_wechat/wx_keyword_callback",method:"post",data:e})}function b(){return c({url:"/wx_wechat/wx_keyword_callback",method:"get"})}function F(e){return c({url:"/wx_wechat/wx_keyword_callback/"+e,method:"get"})}function g(e,t){return c({url:"/wx_wechat/wx_keyword_callback/"+e,method:"put",data:t})}function k(e){return c({url:"/wx_wechat/wx_keyword_callback/"+e,method:"delete"})}r.d(t,"j",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"i",(function(){return p})),r.d(t,"k",(function(){return h})),r.d(t,"d",(function(){return y})),r.d(t,"l",(function(){return f})),r.d(t,"h",(function(){return w})),r.d(t,"a",(function(){return _})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return F})),r.d(t,"e",(function(){return g})),r.d(t,"c",(function(){return k}))},"65ac":function(e,t,r){"use strict";var n=r("9804"),a=r.n(n);a.a},"687f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-scene"},[r("el-form",{ref:"menuForm",staticClass:"demo-ruleForm",attrs:{model:e.menuForm,"label-width":"120px"}},["addKeyword"!==e.$route.name&&"editKeyword"!==e.$route.name?r("el-form-item",{attrs:{label:"菜单名称",prop:"name",rules:[{required:!0,message:"请输入名称",target:"blur"}]}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入名称"},model:{value:e.menuForm.name,callback:function(t){e.$set(e.menuForm,"name",t)},expression:"menuForm.name"}})],1):e._e(),"addKeyword"===e.$route.name||"editKeyword"===e.$route.name?r("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入关键词"},model:{value:e.menuForm.keyword,callback:function(t){e.$set(e.menuForm,"keyword",t)},expression:"menuForm.keyword"}})],1):e._e(),"addKeyword"!==e.$route.name&&"editKeyword"!==e.$route.name?r("el-form-item",{attrs:{label:"类型",prop:"type",rules:[{required:!0,message:"请选择类型",target:"change"}]}},[r("el-select",{attrs:{placeholder:"请选择类型"},on:{change:e.setMenu},model:{value:e.menuForm.type,callback:function(t){e.$set(e.menuForm,"type",t)},expression:"menuForm.type"}},e._l(e.typeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"view"===e.menuForm.type||"miniprogram"===e.menuForm.type?r("el-form-item",{attrs:{label:"url",prop:"url"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入url"},model:{value:e.menuForm.url,callback:function(t){e.$set(e.menuForm,"url",t)},expression:"menuForm.url"}})],1):e._e(),"view"!==e.menuForm.type&&"miniprogram"!==e.menuForm.type&&"media_id"!==e.menuForm.type&&"view_limited"!==e.menuForm.type&&"addKeyword"!==e.$route.name&&"editKeyword"!==e.$route.name?r("el-form-item",{attrs:{label:"key",prop:"key",rules:[{required:!0,message:"请输入key",target:"blur"}]}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入key"},model:{value:e.menuForm.key,callback:function(t){e.$set(e.menuForm,"key",t)},expression:"menuForm.key"}})],1):e._e(),"miniprogram"===e.menuForm.type&&"addKeyword"!==e.$route.name&&"editKeyword"!==e.$route.name?r("el-form-item",{attrs:{label:"页面路径",prop:"pagePath",rules:[{required:!0,message:"请输入小程序的页面路径",target:"blur"}]}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入小程序的页面路径"},model:{value:e.menuForm.pagePath,callback:function(t){e.$set(e.menuForm,"pagePath",t)},expression:"menuForm.pagePath"}})],1):e._e(),"miniprogram"===e.menuForm.type&&"addKeyword"!==e.$route.name&&"editKeyword"!==e.$route.name?r("el-form-item",{attrs:{label:"AppId",prop:"appId",rules:[{required:!0,message:"请输入小程序的AppId",target:"blur"}]}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入小程序的AppId"},model:{value:e.menuForm.appId,callback:function(t){e.$set(e.menuForm,"appId",t)},expression:"menuForm.appId"}})],1):e._e(),"media_id"===e.menuForm.type||"view_limited"===e.menuForm.type||"addKeyword"===e.$route.name||"editKeyword"===e.$route.name||"click"===e.menuForm.type?r("el-form-item",{attrs:{label:"返回内容格式",prop:"content_type",rules:[{required:!0,message:"请选择格式",target:"change"}]}},[r("el-select",{attrs:{placeholder:"请选择格式"},model:{value:e.menuForm.content_type,callback:function(t){e.$set(e.menuForm,"content_type",t)},expression:"menuForm.content_type"}},e._l(e.content_type_list,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"media_id"!==e.menuForm.type&&"view_limited"!==e.menuForm.type||"addKeyword"===e.$route.name||"editKeyword"===e.$route.name?e._e():r("el-form-item",{attrs:{label:"素材Id",prop:"media_id"}},[r("el-select",{attrs:{placeholder:"请选择素材"},model:{value:e.menuForm.media_id,callback:function(t){e.$set(e.menuForm,"media_id",t)},expression:"menuForm.media_id"}},e._l(e.mediaList,(function(e){return r("el-option",{key:e.media_id,attrs:{label:e.name,value:e.media_id}})})),1)],1),"addKeyword"===e.$route.name||"editKeyword"===e.$route.name||"click"===e.menuForm.type?r("el-form-item",{attrs:{label:"返回数据",prop:"content",rules:[{required:!0,message:"请输入返回数据",target:"blur"}]}},["text"===e.menuForm.content_type?r("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",clearable:"",placeholder:"请输入返回数据"},model:{value:e.menuForm.content,callback:function(t){e.$set(e.menuForm,"content",t)},expression:"menuForm.content"}}):e._e(),"text"!==e.menuForm.content_type?r("el-select",{attrs:{placeholder:"请选择素材"},model:{value:e.menuForm.content,callback:function(t){e.$set(e.menuForm,"content",t)},expression:"menuForm.content"}},e._l(e.mediaList,(function(e){return r("el-option",{key:e.media_id,attrs:{label:e.name,value:e.media_id}})})),1):e._e()],1):e._e(),r("el-form-item",{attrs:{prop:"setUp"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("menuForm")}}},[e._v("\n        "+e._s(e.btnText)+"\n      ")])],1)],1)],1)},a=[],o=(r("96cf"),r("3b8d")),u=(r("7f7f"),r("0acd")),i={data:function(){return{btnText:"确认新增",menuForm:{name:"",type:"",url:"",key:"",keyword:"",media_id:"",pagePath:"",appId:"",content_type:"",content:""},mediaList:[],typeList:[{value:"view",label:"跳转url"},{value:"click",label:"点击推事件"},{value:"scancode_push",label:"扫码推事件"},{value:"scancode_waitmsg",label:"扫码推事件且弹出“消息接收中”提示框"},{value:"pic_sysphoto",label:"弹出系统拍照发图"},{value:"pic_photo_or_album",label:"弹出拍照或者相册发图"},{value:"pic_weixin",label:" 弹出微信相册发图器"},{value:"location_select",label:" 弹出地理位置选择器"},{value:"media_id",label:" 下发消息（除文本消息）"},{value:"miniprogram",label:" 打开小程序"}],content_type_list:[{value:"text",label:"文本"},{value:"news",label:"图文"},{value:"image",label:"图片"},{value:"voice",label:"语音"},{value:"video",label:"视频"}]}},watch:{"menuForm.content_type":function(e){"image"!==e&&"video"!==e&&"voice"!==e&&"news"!==e||!this.menuForm.type&&"addKeyword"!==this.$route.name&&"editKeyword"!==this.$route.name||this.getMedia()}},created:function(){"editMenu"!==this.$route.name&&"editKeyword"!==this.$route.name||("editMenu"===this.$route.name?this.getMenuDetail():this.getKeywordDetail(),this.btnText="确认编辑")},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;"addMenu"===t.$route.name||"editMenu"===t.$route.name?t.createMenu():t.createKeyword()}))},setMenu:function(){this.menuForm.url="",this.menuForm.key="",this.menuForm.media_id="",this.menuForm.pagePath="",this.menuForm.appId="",this.menuForm.content_type="",this.menuForm.content=""},resetForm:function(e){this.$refs[e].resetFields()},getMedia:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={page:1,pageSize:12,type:this.menuForm.content_type},e.next=3,Object(u["h"])(t);case 3:r=e.sent,n=r.code,a=r.data,1e3===n&&(this.mediaList=a.item.map((function(e){return{name:e.name,media_id:e.media_id,url:e.url}})));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createMenu:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,o,i,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t={name:this.menuForm.name,type:this.menuForm.type,parent_id:this.$route.query.id||void 0},this.menuForm.url&&(t.url=this.menuForm.url),this.menuForm.key&&(t.key=this.menuForm.key),this.menuForm.content_type&&(t.callback_type=this.menuForm.content_type),this.menuForm.content&&(t.callback_data=this.menuForm.content),this.menuForm.pagePath&&(t.pagepath=this.menuForm.pagePath),this.menuForm.appId&&(t.appid=this.menuForm.appId),this.menuForm.media_id&&(t.media_id=this.menuForm.media_id),!this.$route.params.id){e.next=17;break}return e.next=11,Object(u["k"])(this.$route.params.id,t);case 11:r=e.sent,n=r.code,a=r.message,1e3===n&&(this.$message.success(a),this.$router.push({name:"officialAccount"})),e.next=23;break;case 17:return e.next=19,Object(u["b"])(t);case 19:o=e.sent,i=o.code,m=o.message,1e3===i&&(this.$message.success(m),this.$router.push({name:"officialAccount"}));case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMenuDetail:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["i"])(this.$route.params.id);case 2:t=e.sent,r=t.code,n=t.data,1e3===r&&(this.menuForm.type=n.type,this.menuForm.name=n.name,this.menuForm.url=n.url,this.menuForm.key=n.key,this.menuForm.media_id=n.media_id,this.menuForm.pagePath=n.pagepath,this.menuForm.appId=n.appid,this.menuForm.content_type=n.callback_type,this.menuForm.content=n.callback_data);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createKeyword:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,o,i,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t={keyword:this.menuForm.keyword,callback_type:this.menuForm.content_type,callback_data:this.menuForm.content},"addKeyword"!==this.$route.name){e.next=8;break}return e.next=4,Object(u["a"])(t);case 4:r=e.sent,n=r.code,a=r.message,1e3===n&&(this.$message.success(a),this.$router.push({name:"officialAccount"}));case 8:if("editKeyword"!==this.$route.name){e.next=15;break}return e.next=11,Object(u["e"])(this.$route.params.id,t);case 11:o=e.sent,i=o.code,m=o.message,1e3===i&&(this.$message.success(m),this.$router.push({name:"officialAccount"}));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getKeywordDetail:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["g"])(this.$route.params.id);case 2:t=e.sent,r=t.code,n=t.data,1e3===r&&(this.menuForm.keyword=n.keyword,this.menuForm.content_type=n.callback_type,this.menuForm.content=n.callback_data);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},m=i,s=(r("65ac"),r("2877")),c=Object(s["a"])(m,n,a,!1,null,"6c6f4994",null);t["default"]=c.exports},9804:function(e,t,r){}}]);
//# sourceMappingURL=chunk-21188597.7d04de7f.js.map