{"version":3,"sources":["webpack:///./src/views/system-settings/plan/components/taskSchedule.vue?bf65","webpack:///./src/views/system-settings/plan/components/taskSchedule.vue?cede","webpack:///./src/api/upload.js","webpack:///./src/utils/healthManagement/index.js","webpack:///./src/views/system-settings/plan/index.vue?3a7b","webpack:///./src/views/system-settings/plan/components/taskSchedule.vue?56b1","webpack:///./src/api/plan.js","webpack:///src/views/system-settings/plan/components/taskSchedule.vue","webpack:///./src/views/system-settings/plan/components/taskSchedule.vue?44d1","webpack:///./src/views/system-settings/plan/components/taskSchedule.vue","webpack:///src/views/system-settings/plan/index.vue","webpack:///./src/views/system-settings/plan/index.vue?58a1","webpack:///./src/views/system-settings/plan/index.vue"],"names":["oss","request","url","method","getImageMeta","postObject","ossData","key","file","onProgress","data","FormData","append","OSSAccessKeyId","policy","Signature","headers","onUploadProgress","type","indexOf","meta","videoMeta","size","Error","extname","filename","a","split","reverse","join","b","substring","search","upload","random","Math","floor","fileName","Date","getTime","fileType","name","path","prefix","res","vaccineType","row","vaccine_type","vaccineClass","vaccine_class","getSimpleText","html","re1","RegExp","msg","replace","length","slice","statusOptions","value","label","render","_vm","this","_h","$createElement","_c","_self","staticClass","model","callback","$$v","activeName","expression","attrs","ref","staticRenderFns","taskTimeForm","taskTimeRules","staticStyle","_v","$set","_n","domProps","_s","scheduleType","tableData","objectSpanMethod","scopedSlots","_u","fn","scope","year","month","day","_e","_f","desc","on","$event","handleEdit","handleDelete","currentPage","pageSize","total","handleSizeChange","handleCurrentChange","formStatus","dialogVisible","upsertTaskSchedule","title","handleDialogOpen","ruleForm","required","message","trigger","validator","checkTaskTime","_l","item","submitForm","getTaskSchedule","params","deleteTaskSchedule","id","createTaskSchedule","updateTaskSchedule","components","UploaderList","props","Number","default","setTimeout","createDay","executeDay","vaccineClassOptions","vaccineTypeOptions","currentRow","vaccine_name","vaccine_num","vaccine_all","icons","spanArr","position","watch","val","$refs","clearValidate","mounted","methods","reg","resetFormDate","resetFields","code","task","validate","valid","create_day","execute_day","rowspan","forEach","index","age","lastAge","columnIndex","_row","colspan","_col","deleteText","$alert","formName","component","TaskSchedule"],"mappings":"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","file":"static/js/chunk-e41457da.d2796380.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taskSchedule.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taskSchedule.vue?vue&type=style&index=1&lang=scss&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taskSchedule.vue?vue&type=style&index=0&id=7eefcfa2&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taskSchedule.vue?vue&type=style&index=0&id=7eefcfa2&scoped=true&lang=scss&\"","import request from '@/utils/request'\r\nexport const oss = () => {\r\n  return request({\r\n    url: '/oss/auth',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const getImageMeta = url => {\r\n  return request({\r\n    url: url + '?x-oss-process=image/info',\r\n    method: 'get'\r\n  })\r\n}\r\nexport const postObject = async ({ oss: ossData, key, file, onProgress }) => {\r\n  const data = new FormData()\r\n  data.append('OSSAccessKeyId', ossData.OSSAccessKeyId)\r\n  data.append('success_action_status', 200)\r\n  data.append('policy', ossData.policy)\r\n  data.append('Signature', ossData.Signature)\r\n  data.append('key', key)\r\n  data.append('file', file)\r\n  let url = 'https://pic1.baobaohehu.com/'\r\n  await request({\r\n    url,\r\n    method: 'post',\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    },\r\n    onUploadProgress: onProgress || null,\r\n    data\r\n  })\r\n  url = url + key\r\n  let meta\r\n  if (file.type.indexOf('image') > -1) {\r\n    meta = await getImageMeta(url)\r\n  } else if (file.type.indexOf('video') > -1) {\r\n    meta = {\r\n      ...file.videoMeta,\r\n      size: file.size\r\n    }\r\n  } else if (file.type.indexOf('audio') > -1) {\r\n    meta = {\r\n      size: file.size,\r\n      type: file.type\r\n    }\r\n  } else {\r\n    throw new Error(\r\n      '当前上传的类型不是image或者video；当前上传的类型是' + file.type\r\n    )\r\n  }\r\n  return {\r\n    url,\r\n    meta: meta\r\n  }\r\n}\r\n// 获取文件后缀名\r\nexport const extname = filename => {\r\n  if (!filename || typeof filename !== 'string') {\r\n    return false\r\n  }\r\n  const a = filename\r\n    .split('')\r\n    .reverse()\r\n    .join('')\r\n  const b = a\r\n    .substring(0, a.search(/\\./))\r\n    .split('')\r\n    .reverse()\r\n    .join('')\r\n  return b\r\n}\r\n/**\r\n * 封装下oss获取跟上传\r\n * @param file\r\n * @param onProgress\r\n * @returns {Promise.<*>}\r\n */\r\nexport const upload = async (file, onProgress) => {\r\n  const { data } = await oss()\r\n  const random = Math.floor(Math.random() * (100 - 1)) + 1\r\n  let fileName = new Date().getTime()\r\n  const fileType = extname(file.name)\r\n  fileName = fileName + random + '.' + fileType\r\n  const key = `${data.path}/${data.prefix}/${fileName}`\r\n  const res = await postObject({ oss: data, key, file, onProgress })\r\n  return res\r\n}\r\n","import $router from '@/router'\r\nexport const gotoNewPage = function(path) {\r\n  $router.push(`prevention/${path}`)\r\n}\r\n\r\nexport const vaccineType = function(row) {\r\n  switch (row.vaccine_type) {\r\n    case 1:\r\n      return '减毒'\r\n    case 2:\r\n      return '灭活'\r\n    case 3:\r\n      return '多糖'\r\n  }\r\n}\r\n\r\nexport const vaccineClass = function(row) {\r\n  switch (row.vaccine_class) {\r\n    case 1:\r\n      return '一类'\r\n    case 2:\r\n      return '二类'\r\n  }\r\n}\r\n\r\nexport const getSimpleText = function(html) {\r\n  const re1 = new RegExp('<.+?>', 'g') // 匹配html标签的正则表达式，\"g\"是搜索匹配多个符合的内容\r\n  const msg = html.replace(re1, '') // 执行替换成空字符\r\n  if (msg.length > 38) {\r\n    return msg.slice(0, 38) + '...'\r\n  }\r\n  return msg\r\n}\r\n\r\nexport const statusOptions = [\r\n  {\r\n    value: 0,\r\n    label: '待发送'\r\n  },\r\n  {\r\n    value: 2,\r\n    label: '已保存'\r\n  },\r\n  {\r\n    value: 3,\r\n    label: '已发送'\r\n  },\r\n  {\r\n    value: 1,\r\n    label: '留言待回复'\r\n  },\r\n  {\r\n    value: 4,\r\n    label: '已完成'\r\n  },\r\n  {\r\n    value: 5,\r\n    label: '已取消'\r\n  },\r\n  {\r\n    value: 6,\r\n    label: '已关闭'\r\n  },\r\n  {\r\n    value: 100,\r\n    label: '延期'\r\n  }\r\n]\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"plan-container\"},[_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"月龄科普计划\",\"name\":\"guidance\"}}),_c('el-tab-pane',{attrs:{\"label\":\"疫苗提醒计划\",\"name\":\"prevention\"}})],1),_c('task-schedule',{ref:\"taskSchedule\",attrs:{\"schedule-type\":_vm.activeName === 'prevention' ? 2 : 1}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"plan-container\"},[_c('div',[_c('el-form',{ref:\"taskTimeForm\",attrs:{\"model\":_vm.taskTimeForm,\"rules\":_vm.taskTimeRules}},[_c('div',{staticClass:\"plan-time\"},[_c('div',{staticClass:\"plan-time-text\"},[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"*\")]),_vm._v(\"宝宝到达月龄前第\\n        \")]),_c('div',{staticClass:\"time-container\"},[_c('el-form-item',{attrs:{\"prop\":\"createDay\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入正整数\",\"size\":\"mini\"},model:{value:(_vm.taskTimeForm.createDay),callback:function ($$v) {_vm.$set(_vm.taskTimeForm, \"createDay\", _vm._n($$v))},expression:\"taskTimeForm.createDay\"}})],1)],1),_c('div',{staticClass:\"plan-time-text\"},[_vm._v(\"天，创建任务\")])]),_c('div',{staticClass:\"plan-time\"},[_c('div',{staticClass:\"plan-time-text\"},[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"*\")]),_vm._v(\"创建任务后第\\n        \")]),_c('div',{staticClass:\"time-container\"},[_c('el-form-item',{attrs:{\"prop\":\"executeDay\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入正整数\",\"size\":\"mini\"},model:{value:(_vm.taskTimeForm.executeDay),callback:function ($$v) {_vm.$set(_vm.taskTimeForm, \"executeDay\", _vm._n($$v))},expression:\"taskTimeForm.executeDay\"}})],1)],1),_c('div',{staticClass:\"plan-time-text\"},[_vm._v(\"\\n          天，为任务执行时间\\n        \")])])]),_c('div',{staticClass:\"table-title\"},[_c('span',{domProps:{\"textContent\":_vm._s(_vm.scheduleType === 1 ? '月龄科普计划' : '疫苗提醒计划')}}),_c('span',[_vm._v(\"任务列表\")])]),_c('div',{staticClass:\"plan-table\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"height\":\"350px\",\"empty-text\":\"请单击下方+添加第一条数据\",\"data\":_vm.tableData,\"span-method\":_vm.objectSpanMethod}},[_c('el-table-column',{attrs:{\"label\":\"任务月龄\",\"align\":\"center\",\"header-align\":\"center\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n            \"+_vm._s(scope.row.year)+\"岁\"+_vm._s(scope.row.month)+\"月\"+_vm._s(scope.row.day)+\"天\\n          \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"标题\",\"width\":\"260\",\"align\":\"center\",\"header-align\":\"center\"}}),(_vm.scheduleType === 2)?_c('el-table-column',{attrs:{\"prop\":\"vaccine_name\",\"label\":\"疫苗名称\",\"align\":\"center\",\"header-align\":\"center\"}}):_vm._e(),(_vm.scheduleType === 2)?_c('el-table-column',{attrs:{\"formatter\":_vm.vaccineClass,\"prop\":\"vaccine_type\",\"label\":\"疫苗种类\",\"align\":\"center\",\"header-align\":\"center\"}}):_vm._e(),(_vm.scheduleType === 2)?_c('el-table-column',{attrs:{\"formatter\":_vm.vaccineType,\"prop\":\"vaccine_class\",\"label\":\"疫苗类型\",\"align\":\"center\",\"header-align\":\"center\"}}):_vm._e(),(_vm.scheduleType === 2)?_c('el-table-column',{attrs:{\"prop\":\"vaccine_num\",\"label\":\"接种剂次\",\"align\":\"center\",\"header-align\":\"center\"}}):_vm._e(),(_vm.scheduleType === 2)?_c('el-table-column',{attrs:{\"prop\":\"vaccine_all\",\"label\":\"总剂次\",\"align\":\"center\",\"header-align\":\"center\"}}):_vm._e(),_c('el-table-column',{attrs:{\"label\":\"参考知识点\",\"align\":\"left\",\"header-align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n            \"+_vm._s(_vm._f(\"ellipsis\")(scope.row.desc,_vm.scheduleType === 1 ? 80 : 30))+\"\\n          \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"header-align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticStyle:{\"margin-top\":\"30px\",\"text-align\":\"center\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-sizes\":[10, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1),_c('div',{staticClass:\"plan-add\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.formStatus = 'add'\n          _vm.dialogVisible = true}}},[_vm._v(\"添加一条任务\")])],1)],1),_c('div',{staticClass:\"submit-button-container\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.upsertTaskSchedule}},[_vm._v(\"提交\")])],1),_c('el-dialog',{attrs:{\"title\":_vm.title,\"visible\":_vm.dialogVisible,\"width\":\"600px\",\"center\":true},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"opened\":_vm.handleDialogOpen}},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"label-width\":\"100px\",\"label-position\":'left'}},[_c('el-form-item',{attrs:{\"label\":\"任务月龄\",\"prop\":\"year\",\"rules\":[\n          { required: true, message: '请输入任务月龄', trigger: 'blur' },\n          { validator: _vm.checkTaskTime, trigger: 'blur' }\n        ]}},[_c('div',{staticClass:\"age-flex-box\"},[_c('div',{staticClass:\"age-container\"},[_c('el-input',{attrs:{\"placeholder\":\"请填写自然数\",\"size\":\"mini\"},model:{value:(_vm.ruleForm.year),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"year\", _vm._n($$v))},expression:\"ruleForm.year\"}}),_vm._v(\"  岁\\n          \")],1),_c('div',{staticClass:\"age-container\"},[_c('el-input',{ref:\"month\",attrs:{\"placeholder\":\"请填写自然数\",\"size\":\"mini\"},model:{value:(_vm.ruleForm.month),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"month\", _vm._n($$v))},expression:\"ruleForm.month\"}}),_vm._v(\"  月\\n          \")],1),_c('div',{staticClass:\"age-container\"},[_c('el-input',{ref:\"day\",attrs:{\"placeholder\":\"请填写自然数\",\"size\":\"mini\"},model:{value:(_vm.ruleForm.day),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"day\", _vm._n($$v))},expression:\"ruleForm.day\"}}),_vm._v(\"  天\\n          \")],1)])]),_c('el-form-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\",\"rules\":[{ required: true, message: '请输入标题', trigger: 'blur' }]}},[_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"请输入标题\",\"maxlength\":\"20\",\"show-word-limit\":\"\"},model:{value:(_vm.ruleForm.title),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"title\", $$v)},expression:\"ruleForm.title\"}})],1),(_vm.scheduleType === 2)?_c('el-form-item',{attrs:{\"label\":\"疫苗名称\",\"prop\":\"vaccine_name\",\"rules\":[\n          { required: true, message: '请输入疫苗名称', trigger: 'blur' }\n        ]}},[_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"请输入疫苗名称\",\"maxlength\":\"20\",\"show-word-limit\":\"\"},model:{value:(_vm.ruleForm.vaccine_name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"vaccine_name\", $$v)},expression:\"ruleForm.vaccine_name\"}})],1):_vm._e(),(_vm.scheduleType === 2)?_c('el-form-item',{attrs:{\"label\":\"疫苗种类\",\"prop\":\"vaccine_class\",\"rules\":[\n          { required: true, message: '请选择疫苗种类', trigger: 'change' }\n        ]}},[_c('el-select',{attrs:{\"size\":\"mini\"},model:{value:(_vm.ruleForm.vaccine_class),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"vaccine_class\", $$v)},expression:\"ruleForm.vaccine_class\"}},_vm._l((_vm.vaccineClassOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1):_vm._e(),(_vm.scheduleType === 2)?_c('el-form-item',{attrs:{\"label\":\"疫苗类型\",\"prop\":\"vaccine_type\",\"rules\":[\n          { required: true, message: '请选择疫苗类型', trigger: 'change' }\n        ]}},[_c('el-select',{attrs:{\"size\":\"mini\"},model:{value:(_vm.ruleForm.vaccine_type),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"vaccine_type\", $$v)},expression:\"ruleForm.vaccine_type\"}},_vm._l((_vm.vaccineTypeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1):_vm._e(),(_vm.scheduleType === 2)?_c('el-form-item',{attrs:{\"label\":\"接种剂次\",\"prop\":\"vaccine_num\",\"rules\":[\n          {\n            required: true,\n            message: '请输入正整数',\n            trigger: 'blur',\n            type: 'number'\n          }\n        ]}},[_c('div',{staticClass:\"vaccine-input\"},[_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"请填写正整数\"},model:{value:(_vm.ruleForm.vaccine_num),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"vaccine_num\", _vm._n($$v))},expression:\"ruleForm.vaccine_num\"}})],1)]):_vm._e(),(_vm.scheduleType === 2)?_c('el-form-item',{attrs:{\"label\":\"总剂次\",\"prop\":\"vaccine_all\",\"rules\":[\n          {\n            required: true,\n            message: '请输入正整数',\n            trigger: 'blur',\n            type: 'number'\n          }\n        ]}},[_c('div',{staticClass:\"vaccine-input\"},[_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"请填写正整数\"},model:{value:(_vm.ruleForm.vaccine_all),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"vaccine_all\", _vm._n($$v))},expression:\"ruleForm.vaccine_all\"}})],1)]):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"参考知识点\",\"prop\":\"desc\",\"rules\":[\n          { required: true, message: '请输入参考知识点', trigger: 'blur' }\n        ]}},[_c('el-input',{staticStyle:{\"width\":\"420px\"},attrs:{\"size\":\"mini\",\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"请输入内容\",\"maxlength\":\"1000\",\"show-word-limit\":\"\"},model:{value:(_vm.ruleForm.desc),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"desc\", $$v)},expression:\"ruleForm.desc\"}})],1),_c('el-form-item',[_c('uploader-list',{staticClass:\"rbd-consult-record__body__editor__image\",attrs:{\"width\":\"70px\",\"height\":\"70px\",\"max\":3},model:{value:(_vm.ruleForm.icons),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"icons\", $$v)},expression:\"ruleForm.icons\"}})],1),_c('el-form-item',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"确认\")])],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n// 获取计划任务信息\r\nexport function getTaskSchedule(type, params) {\r\n  return request({\r\n    url: `/task_schedule/${type}/list`,\r\n    method: 'get',\r\n    params: params\r\n    // mock: true\r\n  })\r\n}\r\nexport function deleteTaskSchedule(type, id) {\r\n  return request({\r\n    url: `/task_schedule/${type}/deleteTask/${id}`,\r\n    method: 'delete'\r\n    // mock: true\r\n  })\r\n}\r\n\r\nexport function upsertTaskSchedule(type, params) {\r\n  return request({\r\n    url: `/task_schedule/${type}/upsert`,\r\n    method: 'post',\r\n    data: params\r\n    // mock: true\r\n  })\r\n}\r\n\r\nexport function createTaskSchedule(type, params) {\r\n  return request({\r\n    url: `/task_schedule/${type}/create`,\r\n    method: 'post',\r\n    data: params\r\n    // mock: true\r\n  })\r\n}\r\n\r\nexport function updateTaskSchedule(type, id, params) {\r\n  return request({\r\n    url: `/task_schedule/${type}/updateTask/${id}`,\r\n    method: 'put',\r\n    data: params\r\n    // mock: true\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"plan-container\">\r\n    <div>\r\n      <el-form ref=\"taskTimeForm\" :model=\"taskTimeForm\" :rules=\"taskTimeRules\">\r\n        <div class=\"plan-time\">\r\n          <div class=\"plan-time-text\">\r\n            <span style=\"color: red\">*</span>宝宝到达月龄前第\r\n          </div>\r\n          <div class=\"time-container\">\r\n            <el-form-item prop=\"createDay\">\r\n              <el-input\r\n                v-model.number=\"taskTimeForm.createDay\"\r\n                placeholder=\"请输入正整数\"\r\n                size=\"mini\"\r\n              />\r\n            </el-form-item>\r\n          </div>\r\n          <div class=\"plan-time-text\">天，创建任务</div>\r\n        </div>\r\n        <div class=\"plan-time\">\r\n          <div class=\"plan-time-text\">\r\n            <span style=\"color: red\">*</span>创建任务后第\r\n          </div>\r\n          <div class=\"time-container\">\r\n            <el-form-item prop=\"executeDay\">\r\n              <el-input\r\n                v-model.number=\"taskTimeForm.executeDay\"\r\n                placeholder=\"请输入正整数\"\r\n                size=\"mini\"\r\n              />\r\n            </el-form-item>\r\n          </div>\r\n          <div class=\"plan-time-text\">\r\n            天，为任务执行时间\r\n          </div>\r\n        </div>\r\n      </el-form>\r\n      <div class=\"table-title\">\r\n        <span\r\n          v-text=\"scheduleType === 1 ? '月龄科普计划' : '疫苗提醒计划'\"\r\n        /><span>任务列表</span>\r\n      </div>\r\n      <div class=\"plan-table\">\r\n        <el-table\r\n          height=\"350px\"\r\n          empty-text=\"请单击下方+添加第一条数据\"\r\n          :data=\"tableData\"\r\n          :span-method=\"objectSpanMethod\"\r\n          style=\"width: 100%\"\r\n        >\r\n          <el-table-column\r\n            label=\"任务月龄\"\r\n            align=\"center\"\r\n            header-align=\"center\"\r\n            width=\"120\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.year }}岁{{ scope.row.month }}月{{ scope.row.day }}天\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"title\"\r\n            label=\"标题\"\r\n            width=\"260\"\r\n            align=\"center\"\r\n            header-align=\"center\"\r\n          />\r\n          <el-table-column\r\n            v-if=\"scheduleType === 2\"\r\n            prop=\"vaccine_name\"\r\n            label=\"疫苗名称\"\r\n            align=\"center\"\r\n            header-align=\"center\"\r\n          />\r\n          <el-table-column\r\n            v-if=\"scheduleType === 2\"\r\n            :formatter=\"vaccineClass\"\r\n            prop=\"vaccine_type\"\r\n            label=\"疫苗种类\"\r\n            align=\"center\"\r\n            header-align=\"center\"\r\n          />\r\n          <el-table-column\r\n            v-if=\"scheduleType === 2\"\r\n            :formatter=\"vaccineType\"\r\n            prop=\"vaccine_class\"\r\n            label=\"疫苗类型\"\r\n            align=\"center\"\r\n            header-align=\"center\"\r\n          />\r\n          <el-table-column\r\n            v-if=\"scheduleType === 2\"\r\n            prop=\"vaccine_num\"\r\n            label=\"接种剂次\"\r\n            align=\"center\"\r\n            header-align=\"center\"\r\n          />\r\n          <el-table-column\r\n            v-if=\"scheduleType === 2\"\r\n            prop=\"vaccine_all\"\r\n            label=\"总剂次\"\r\n            align=\"center\"\r\n            header-align=\"center\"\r\n          />\r\n          <el-table-column\r\n            label=\"参考知识点\"\r\n            align=\"left\"\r\n            header-align=\"center\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.desc | ellipsis(scheduleType === 1 ? 80 : 30) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" align=\"center\" header-align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" @click=\"handleEdit(scope.row)\"\r\n                >编辑</el-button\r\n              >\r\n              <el-button type=\"text\" @click=\"handleDelete(scope.row)\"\r\n                >删除</el-button\r\n              >\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div style=\"margin-top: 30px;text-align: center;\">\r\n          <el-pagination\r\n            background\r\n            :current-page.sync=\"currentPage\"\r\n            :page-sizes=\"[10, 50, 100]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"plan-add\">\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-plus\"\r\n          size=\"mini\"\r\n          @click=\"\r\n            formStatus = 'add'\r\n            dialogVisible = true\r\n          \"\r\n          >添加一条任务</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <div class=\"submit-button-container\">\r\n      <el-button type=\"primary\" size=\"mini\" @click=\"upsertTaskSchedule\"\r\n        >提交</el-button\r\n      >\r\n    </div>\r\n    <!--弹框表单-->\r\n    <el-dialog\r\n      :title=\"title\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"600px\"\r\n      :center=\"true\"\r\n      @opened=\"handleDialogOpen\"\r\n    >\r\n      <el-form\r\n        ref=\"ruleForm\"\r\n        :model=\"ruleForm\"\r\n        label-width=\"100px\"\r\n        :label-position=\"'left'\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item\r\n          label=\"任务月龄\"\r\n          prop=\"year\"\r\n          :rules=\"[\r\n            { required: true, message: '请输入任务月龄', trigger: 'blur' },\r\n            { validator: checkTaskTime, trigger: 'blur' }\r\n          ]\"\r\n        >\r\n          <div class=\"age-flex-box\">\r\n            <div class=\"age-container\">\r\n              <el-input\r\n                v-model.number=\"ruleForm.year\"\r\n                placeholder=\"请填写自然数\"\r\n                size=\"mini\"\r\n              />&nbsp;&nbsp;岁\r\n            </div>\r\n            <div class=\"age-container\">\r\n              <el-input\r\n                ref=\"month\"\r\n                v-model.number=\"ruleForm.month\"\r\n                placeholder=\"请填写自然数\"\r\n                size=\"mini\"\r\n              />&nbsp;&nbsp;月\r\n            </div>\r\n            <div class=\"age-container\">\r\n              <el-input\r\n                ref=\"day\"\r\n                v-model.number=\"ruleForm.day\"\r\n                placeholder=\"请填写自然数\"\r\n                size=\"mini\"\r\n              />&nbsp;&nbsp;天\r\n            </div>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"标题\"\r\n          prop=\"title\"\r\n          :rules=\"[{ required: true, message: '请输入标题', trigger: 'blur' }]\"\r\n        >\r\n          <el-input\r\n            v-model=\"ruleForm.title\"\r\n            size=\"mini\"\r\n            placeholder=\"请输入标题\"\r\n            maxlength=\"20\"\r\n            show-word-limit\r\n          />\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-if=\"scheduleType === 2\"\r\n          label=\"疫苗名称\"\r\n          prop=\"vaccine_name\"\r\n          :rules=\"[\r\n            { required: true, message: '请输入疫苗名称', trigger: 'blur' }\r\n          ]\"\r\n        >\r\n          <el-input\r\n            v-model=\"ruleForm.vaccine_name\"\r\n            size=\"mini\"\r\n            placeholder=\"请输入疫苗名称\"\r\n            maxlength=\"20\"\r\n            show-word-limit\r\n          />\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-if=\"scheduleType === 2\"\r\n          label=\"疫苗种类\"\r\n          prop=\"vaccine_class\"\r\n          :rules=\"[\r\n            { required: true, message: '请选择疫苗种类', trigger: 'change' }\r\n          ]\"\r\n        >\r\n          <el-select v-model=\"ruleForm.vaccine_class\" size=\"mini\">\r\n            <el-option\r\n              v-for=\"item in vaccineClassOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-if=\"scheduleType === 2\"\r\n          label=\"疫苗类型\"\r\n          prop=\"vaccine_type\"\r\n          :rules=\"[\r\n            { required: true, message: '请选择疫苗类型', trigger: 'change' }\r\n          ]\"\r\n        >\r\n          <el-select v-model=\"ruleForm.vaccine_type\" size=\"mini\">\r\n            <el-option\r\n              v-for=\"item in vaccineTypeOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-if=\"scheduleType === 2\"\r\n          label=\"接种剂次\"\r\n          prop=\"vaccine_num\"\r\n          :rules=\"[\r\n            {\r\n              required: true,\r\n              message: '请输入正整数',\r\n              trigger: 'blur',\r\n              type: 'number'\r\n            }\r\n          ]\"\r\n        >\r\n          <div class=\"vaccine-input\">\r\n            <el-input\r\n              v-model.number=\"ruleForm.vaccine_num\"\r\n              size=\"mini\"\r\n              placeholder=\"请填写正整数\"\r\n            />\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item\r\n          v-if=\"scheduleType === 2\"\r\n          label=\"总剂次\"\r\n          prop=\"vaccine_all\"\r\n          :rules=\"[\r\n            {\r\n              required: true,\r\n              message: '请输入正整数',\r\n              trigger: 'blur',\r\n              type: 'number'\r\n            }\r\n          ]\"\r\n        >\r\n          <div class=\"vaccine-input\">\r\n            <el-input\r\n              v-model.number=\"ruleForm.vaccine_all\"\r\n              size=\"mini\"\r\n              placeholder=\"请填写正整数\"\r\n            />\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"参考知识点\"\r\n          prop=\"desc\"\r\n          :rules=\"[\r\n            { required: true, message: '请输入参考知识点', trigger: 'blur' }\r\n          ]\"\r\n        >\r\n          <el-input\r\n            v-model=\"ruleForm.desc\"\r\n            style=\"width: 420px\"\r\n            size=\"mini\"\r\n            type=\"textarea\"\r\n            :rows=\"4\"\r\n            placeholder=\"请输入内容\"\r\n            maxlength=\"1000\"\r\n            show-word-limit\r\n          />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <uploader-list\r\n            v-model=\"ruleForm.icons\"\r\n            class=\"rbd-consult-record__body__editor__image\"\r\n            width=\"70px\"\r\n            height=\"70px\"\r\n            :max=\"3\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <div style=\"text-align: center\">\r\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\r\n              >确认</el-button\r\n            >\r\n          </div>\r\n        </el-form-item>\r\n      </el-form></el-dialog\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from 'lodash'\r\nimport { vaccineType, vaccineClass } from '@/utils/healthManagement'\r\nimport UploaderList from '@/components/UploaderList'\r\nimport {\r\n  getTaskSchedule,\r\n  upsertTaskSchedule,\r\n  createTaskSchedule,\r\n  deleteTaskSchedule,\r\n  updateTaskSchedule\r\n} from '@/api/plan'\r\nexport default {\r\n  components: {\r\n    UploaderList\r\n  },\r\n  props: {\r\n    scheduleType: {\r\n      type: Number,\r\n      default: 1\r\n    }\r\n  },\r\n  data() {\r\n    const checkPositiveNum = (rule, value, callback) => {\r\n      setTimeout(() => {\r\n        if (value < 1) {\r\n          callback(new Error('请填写正整数'))\r\n        } else {\r\n          callback()\r\n        }\r\n      }, 1000)\r\n    }\r\n    return {\r\n      formStatus: 'add',\r\n      taskTimeRules: {\r\n        createDay: [\r\n          {\r\n            required: true,\r\n            message: '请填写正整数',\r\n            trigger: 'blur',\r\n            type: 'number'\r\n          },\r\n          { validator: checkPositiveNum, trigger: 'blur' }\r\n        ],\r\n        executeDay: [\r\n          {\r\n            required: true,\r\n            message: '请填写正整数',\r\n            trigger: 'blur',\r\n            type: 'number'\r\n          }\r\n        ]\r\n      },\r\n      taskTimeForm: {\r\n        createDay: null,\r\n        executeDay: null\r\n      },\r\n      vaccineClassOptions: [\r\n        {\r\n          value: 1,\r\n          label: '一类'\r\n        },\r\n        { value: 2, label: '二类' }\r\n      ],\r\n      vaccineTypeOptions: [\r\n        {\r\n          value: 1,\r\n          label: '减毒'\r\n        },\r\n        { value: 2, label: '灭活' },\r\n        {\r\n          value: 3,\r\n          label: '多糖'\r\n        }\r\n      ],\r\n      total: 0,\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      currentRow: {},\r\n      dialogVisible: false,\r\n      tableData: [],\r\n      ruleForm: {\r\n        day: null,\r\n        month: null,\r\n        year: null,\r\n        title: '',\r\n        desc: '',\r\n        vaccine_name: '',\r\n        vaccine_type: null,\r\n        vaccine_class: null,\r\n        vaccine_num: null,\r\n        vaccine_all: null,\r\n        icons: []\r\n      },\r\n      spanArr: [],\r\n      position: 0,\r\n      title: ''\r\n    }\r\n  },\r\n  watch: {\r\n    scheduleType(val) {\r\n      this.tableData = []\r\n      this.getTaskSchedule(val)\r\n      // tab切换时清除表单验证结果\r\n      this.$refs.taskTimeForm.clearValidate()\r\n      // 切换tab时恢复分页组件设置\r\n      this.currentPage = 1\r\n      this.pageSize = 10\r\n    }\r\n  },\r\n  mounted() {\r\n    // this.getTableData()\r\n    this.getTaskSchedule()\r\n  },\r\n  methods: {\r\n    // 表单验证函数\r\n    checkTaskTime(rule, value, callback) {\r\n      const month = this.$refs.month.value\r\n      const day = this.$refs.day.value\r\n      var reg = /^[0-9]\\d*$/\r\n      if (\r\n        reg.test(value) === false ||\r\n        reg.test(month) === false ||\r\n        reg.test(day) === false\r\n      ) {\r\n        callback(new Error('请填写全部自然数格式的任务月龄'))\r\n      }\r\n      if (month > 12) {\r\n        callback(new Error('任务月龄月数不能大于12'))\r\n      }\r\n      if (day > 31) {\r\n        callback(new Error('任务月龄天数不能大于31'))\r\n      }\r\n      callback()\r\n    },\r\n    resetFormDate() {\r\n      this.ruleForm = {\r\n        day: null,\r\n        month: null,\r\n        year: null,\r\n        title: '',\r\n        desc: '',\r\n        vaccine_name: '',\r\n        vaccine_type: null,\r\n        vaccine_class: null,\r\n        vaccine_num: null,\r\n        vaccine_all: null,\r\n        icons: []\r\n      }\r\n    },\r\n    handleDialogOpen() {\r\n      let title = ''\r\n      if (this.scheduleType === 1) {\r\n        if (this.formStatus === 'add') {\r\n          title = '添加月龄科普任务'\r\n        } else if (this.formStatus === 'edit') {\r\n          title = '编辑月龄科普任务'\r\n        }\r\n      } else if (this.scheduleType === 2) {\r\n        if (this.formStatus === 'add') {\r\n          title = '添加疫苗提醒任务'\r\n        } else if (this.formStatus === 'edit') {\r\n          title = '编辑疫苗提醒任务'\r\n        }\r\n      }\r\n      this.title = title\r\n      if (this.formStatus === 'add') {\r\n        this.resetFormDate()\r\n        this.$refs.ruleForm.resetFields()\r\n      }\r\n    },\r\n    // 疫苗种类\r\n    vaccineClass,\r\n    // 疫苗类型\r\n    vaccineType,\r\n    // 当前页码发生改变\r\n    handleCurrentChange(currentPage) {\r\n      this.currentPage = currentPage\r\n      this.getTaskSchedule()\r\n    },\r\n    // 每页显示条数发生改变\r\n    handleSizeChange(pageSize) {\r\n      this.currentPage = 1\r\n      this.pageSize = pageSize\r\n      this.getTaskSchedule()\r\n    },\r\n    // 请求整个页面数据\r\n    getTaskSchedule() {\r\n      const params = {\r\n        currentPage: this.currentPage,\r\n        pageSize: this.pageSize\r\n      }\r\n      getTaskSchedule(this.scheduleType, params).then(res => {\r\n        if (res.code === 20000) {\r\n          const data = res.data\r\n          this.tableData = data.list\r\n          this.total = data.count\r\n          if (data.task) {\r\n            this.taskTimeForm.createDay = data.task.create_day\r\n            this.taskTimeForm.executeDay = data.task.execute_day\r\n          } else {\r\n            this.taskTimeForm.createDay = ''\r\n            this.taskTimeForm.executeDay = ''\r\n          }\r\n          // 合并单元格\r\n          this.rowspan()\r\n        }\r\n      })\r\n    },\r\n    // 更改任务创建及执行时间\r\n    upsertTaskSchedule() {\r\n      this.$refs.taskTimeForm.validate(valid => {\r\n        if (valid) {\r\n          const params = {\r\n            create_day: this.taskTimeForm.createDay,\r\n            execute_day: this.taskTimeForm.executeDay\r\n          }\r\n          upsertTaskSchedule(this.scheduleType, params).then(res => {\r\n            if (res.code === 20000) {\r\n              this.$message.success('创建任务计划成功')\r\n            }\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    rowspan() {\r\n      this.spanArr = []\r\n      this.tableData.forEach((item, index) => {\r\n        if (index === 0) {\r\n          this.spanArr.push(1)\r\n          this.position = 0\r\n        } else {\r\n          const age =\r\n            '' +\r\n            this.tableData[index].year +\r\n            this.tableData[index].month +\r\n            this.tableData[index].day\r\n          const lastAge =\r\n            '' +\r\n            this.tableData[index - 1].year +\r\n            this.tableData[index - 1].month +\r\n            this.tableData[index - 1].day\r\n          if (age === lastAge) {\r\n            this.spanArr[this.position] += 1\r\n            this.spanArr.push(0)\r\n          } else {\r\n            this.spanArr.push(1)\r\n            this.position = index\r\n          }\r\n        }\r\n      })\r\n    },\r\n    objectSpanMethod({ row, column, rowIndex, columnIndex }) {\r\n      if (this.scheduleType === 2) {\r\n        if (columnIndex === 0 || columnIndex === 1) {\r\n          const _row = this.spanArr[rowIndex]\r\n          const _col = _row > 0 ? 1 : 0\r\n          return {\r\n            rowspan: _row,\r\n            colspan: _col\r\n          }\r\n        }\r\n      }\r\n    },\r\n    handleEdit(row) {\r\n      this.currentRow = row\r\n      this.ruleForm = _.cloneDeep(row)\r\n      this.formStatus = 'edit'\r\n      this.dialogVisible = true\r\n    },\r\n    handleDelete(row) {\r\n      // eslint-disable-next-line no-unused-vars\r\n      let deleteText = ''\r\n      if (this.scheduleType === 1) {\r\n        deleteText = '删除月龄科普任务'\r\n      } else {\r\n        deleteText = '删除疫苗提醒任务'\r\n      }\r\n      this.$alert(\r\n        '删除后该条数据将从列表中移除，请确认是否继续删除',\r\n        deleteText,\r\n        {\r\n          confirmButtonText: '删除',\r\n          cancelButtonText: '放弃删除',\r\n          center: true,\r\n          callback: action => {\r\n            if (action === 'confirm') {\r\n              deleteTaskSchedule(this.scheduleType, row._id).then(res => {\r\n                if (res.code === 20000) {\r\n                  this.getTaskSchedule()\r\n                  this.$message({\r\n                    type: 'success',\r\n                    message: '删除成功'\r\n                  })\r\n                }\r\n              })\r\n            }\r\n          }\r\n        }\r\n      )\r\n    },\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          delete this.ruleForm._id\r\n          if (this.formStatus === 'add') {\r\n            createTaskSchedule(this.scheduleType, this.ruleForm).then(res => {\r\n              if (res.code === 20000) {\r\n                this.$message.success('保存成功')\r\n                this.dialogVisible = false\r\n                this.getTaskSchedule()\r\n              }\r\n            })\r\n          } else {\r\n            updateTaskSchedule(\r\n              this.scheduleType,\r\n              this.currentRow._id,\r\n              this.ruleForm\r\n            ).then(res => {\r\n              if (res.code === 20000) {\r\n                this.$message.success('修改成功')\r\n                this.dialogVisible = false\r\n                this.getTaskSchedule()\r\n              }\r\n            })\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.plan-container {\r\n  position: relative;\r\n  height: 650px;\r\n  font-size: 14px;\r\n  color: #576277;\r\n  .plan-time {\r\n    position: relative;\r\n    display: flex;\r\n    .time-container {\r\n      width: 130px;\r\n    }\r\n    &-text {\r\n      position: relative;\r\n      top: 18px;\r\n      &:first-child {\r\n        margin-right: 15px;\r\n      }\r\n      &:last-child {\r\n        margin-left: 15px;\r\n      }\r\n    }\r\n  }\r\n  .table-title {\r\n    padding: 0 30px;\r\n    width: 100%;\r\n    height: 48px;\r\n    line-height: 48px;\r\n    color: #17233d;\r\n    background-color: #f5f7fa;\r\n  }\r\n  .plan-table {\r\n    min-width: 1000px;\r\n    line-height: 30px;\r\n  }\r\n  .plan-add {\r\n    margin-top: 30px;\r\n    cursor: pointer;\r\n  }\r\n  .age-flex-box {\r\n    display: flex;\r\n    .age-container {\r\n      flex: 1;\r\n    }\r\n  }\r\n  .submit-button-container {\r\n    position: absolute;\r\n    right: 700px;\r\n    bottom: 0;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.plan-container {\r\n  .el-table--enable-row-hover .el-table__body tr:hover > td {\r\n    background-color: #fff !important;\r\n  }\r\n}\r\n.demo-ruleForm {\r\n  .el-input {\r\n    width: 93%;\r\n  }\r\n}\r\n.age-container {\r\n  .el-input {\r\n    width: 80%;\r\n  }\r\n}\r\n.vaccine-input {\r\n  .el-input {\r\n    width: 20%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taskSchedule.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taskSchedule.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./taskSchedule.vue?vue&type=template&id=7eefcfa2&scoped=true&\"\nimport script from \"./taskSchedule.vue?vue&type=script&lang=js&\"\nexport * from \"./taskSchedule.vue?vue&type=script&lang=js&\"\nimport style0 from \"./taskSchedule.vue?vue&type=style&index=0&id=7eefcfa2&scoped=true&lang=scss&\"\nimport style1 from \"./taskSchedule.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7eefcfa2\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"plan-container\">\r\n    <el-tabs v-model=\"activeName\">\r\n      <el-tab-pane label=\"月龄科普计划\" name=\"guidance\" />\r\n      <el-tab-pane label=\"疫苗提醒计划\" name=\"prevention\" />\r\n    </el-tabs>\r\n    <task-schedule\r\n      ref=\"taskSchedule\"\r\n      :schedule-type=\"activeName === 'prevention' ? 2 : 1\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TaskSchedule from './components/taskSchedule'\r\nexport default {\r\n  name: 'Index',\r\n  components: {\r\n    TaskSchedule\r\n  },\r\n  data() {\r\n    return {\r\n      activeName: 'guidance'\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e3976ff8&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}