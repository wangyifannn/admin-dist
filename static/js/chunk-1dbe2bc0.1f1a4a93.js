(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dbe2bc0"],{"0e79":function(t,e,s){},"117b":function(t,e,s){},"11b6":function(t,e,s){},1840:function(t,e,s){},"1d24":function(t,e,s){"use strict";var a=s("67f3"),n=s.n(a);n.a},"1f62":function(t,e,s){},"24d7":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.msgBody.subType&&"todo"===t.msgBody.subType?s("el-row",{attrs:{type:"flex",justify:"align-center"===t.textAlign?"center":""}},["round_apply_transfer"===t.msgBody.noticeType?s("ReplyUser",{attrs:{replyContent:t.msgBody.adminDesc,"msg-id":t.item._id,operated:t.msgBody.operated,btnIsDisabled:t.btnIsDisabled(t.msgBody),userIntent:t.msgBody.userDesc}}):t._e(),t.msgBody.noticeType&&"transfer_apply"===t.msgBody.noticeType||"transfer_reject"===t.msgBody.noticeType?s("TransferContent",{attrs:{item:t.item,msgOptions:t.msgBody,"bus-role":t.msgBody.bus_role,btnIsDisabled:t.btnIsDisabled(t.msgBody),"notice-type":t.msgBody.noticeType,operated:t.msgBody.operated,reason:t.msgBody.reason,"msg-id":t.item._id},on:{confirm:t.confirm}}):t._e(),t.msgBody.noticeType&&"transfer_accept"===t.msgBody.noticeType?s("TransferAccept",{class:t.textAlign,attrs:{msgId:t.item._id,btnIsDisabled:t.btnIsDisabled(t.msgBody),operated:t.msgBody.operated,msgOptions:t.msgBody},on:{confirm:t.confirm}}):t._e()],1):t._e(),t.msgBody.subType&&"todo"===t.msgBody.subType?t._e():s("el-row",{attrs:{type:"flex",justify:"align-center"===t.textAlign?"center":""}},[s("SystemContent",{class:t.textAlign,attrs:{"msg-type":t.msgBody.subType&&"record"===t.msgBody.subType?"systemWarnning":"systemInfo",content:t.msgBody.content}})],1)],1)},n=[],i=s("db72"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reply-user-box"},[s("p",{staticClass:"user_intent"},[t._v("\n    "+t._s(t.userIntent)+"\n  ")]),t.operated?s("el-row",[s("span",{staticClass:"span_key"},[t._v("回复用户留言")]),s("p",{staticClass:"notic-reason-box"},[t._v("\n      "+t._s(t.replyContent)+"\n    ")])]):t._e(),t.operated?t._e():s("div",[s("el-row",[s("span",{staticClass:"span_key"},[t._v("回复用户留言")]),s("el-input",{staticClass:"relpy_textarea",attrs:{type:"textarea",rows:3,maxlength:"100","show-word-limit":"",placeholder:"请输入内容"},model:{value:t.replyData,callback:function(e){t.replyData=e},expression:"replyData"}})],1),s("el-row",{attrs:{gutter:24,type:"flex",justify:"center"}},[s("el-button",{staticClass:"btn-group",attrs:{type:"primary",size:"mini",disabled:!(!1===t.btnIsDisabled&&t.activedBaby.is_asking)},on:{click:t.confirmUserIntent}},[t._v("\n        确认\n      ")])],1)],1)],1)},r=[],c=s("f44d"),l=s("2f62"),u={name:"reply-user-box",props:{userIntent:{type:String,default:""},operated:{type:Boolean,default:!0},btnIsDisabled:{type:Boolean,default:!0},replyContent:{type:String,default:""},msgId:{type:String,default:""}},data:function(){return{replyData:""}},computed:Object(i["a"])({},Object(l["c"])(["activedBabyId","activedBaby","userInfo"])),methods:{confirmUserIntent:function(){var t=this;this.replyData?Object(c["c"])(this.msgId,{desc:this.replyData,result:"已确认"}).then((function(e){t.$message({type:e.data.result?"success":"warning",message:e.data.result?"回复成功":"回复失败"}),e&&(t.$store.dispatch("chat/getLastC2CHistoryMessages","",{root:!0}),t.$store.dispatch("chat/getLastAsk"))})):this.$message.warning("回复内容不能为空")}}},d=u,m=(s("567c"),s("2877")),p=Object(m["a"])(d,o,r,!1,null,"38928f7d",null),f=p.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"transfer-apply-content"},[s("el-row",{attrs:{gutter:24}},[s("span",{staticClass:"transfer_key"},[t._v(t._s(t.msgOptions.title))])]),s("el-row",{attrs:{gutter:24}},[s("span",{staticClass:"transfer_key"},[t._v(t._s("transfer_reject"!==t.noticeType?"转诊原因：":"拒绝原因："))]),s("p",{staticClass:"notic-reason-box"},[t._v(t._s(t.msgOptions.reason||"无"))]),t.msgOptions.operateResult.result_text?s("p",{staticClass:"padding-top-10"},[t._v("\n      "+t._s(t.msgOptions.operateResult.result_text)+"\n    ")]):t._e(),t.operated?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-button",{staticClass:"notic_disabled_btn margin-top-10",attrs:{size:"mini",type:"info",disabled:!0}},[t._v("\n        "+t._s(t.msgOptions.operateResult.result)+"\n      ")])],1):t._e()],1),!1===t.operated?s("el-row",{staticClass:"btn-group"},["transfer_reject"!==t.noticeType?s("el-button",{attrs:{type:"primary",disabled:t.btnIsDisabled,size:"mini"},on:{click:t.acceptFun}},[t._v("\n      同意转诊\n    ")]):t._e(),"transfer_reject"!==t.noticeType?s("el-button",{staticClass:"reject_btn",attrs:{disabled:t.btnIsDisabled,size:"mini"},on:{click:t.rejectFun}},[t._v("\n      无需转诊\n    ")]):t._e(),"transfer_reject"===t.noticeType?s("el-button",{attrs:{disabled:t.btnIsDisabled,type:"primary",size:"mini"},on:{click:t.confirmAccept}},[t._v("\n      确认\n    ")]):t._e()],1):t._e(),t.showReason&&t.rejectRequest?s("el-row",{staticClass:"margin-top-10",attrs:{gutter:24}},[s("span",{staticClass:"transfer_key"},[s("i",{staticClass:"el-icon-info",staticStyle:{color:"#FF4E4E","margin-bottom":"5px"}}),t._v("拒绝原因：\n    ")]),s("span",{staticClass:"transfer_value"},[s("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:3,maxlength:"100","show-word-limit":"",placeholder:"请输入拒绝健康管理师转诊请求的原因"},model:{value:t.reject_reason,callback:function(e){t.reject_reason=e},expression:"reject_reason"}})],1)]):t._e()],1)},_=[],h=s("51a5"),y={name:"TransferContent",props:{item:{type:Object,default:function(){}},msgOptions:{type:Object,default:function(){}},busRole:{type:String,default:""},btnIsDisabled:{type:Boolean,default:!0},noticeType:{type:String,default:""},operated:{type:Boolean,default:!0},msgId:{type:String,default:""}},data:function(){return{reject_reason:"",showReason:!1,rejectRequest:!0}},computed:Object(i["a"])({},Object(l["c"])(["lastAsk","userInfo"])),methods:{confirmAccept:function(){this.$emit("confirm",this.msgId)},rejectFun:function(){var t=this;if(this.showReason){var e={message_id:this.msgId,transfer_reject_reason:this.reject_reason};this.reject_reason&&Object(h["m"])(this.item.fdAsk,e).then((function(e){var s="拒绝转诊";t.$message({type:e.data.result?"success":"error",message:e.data.result?s+"成功":s+"失败"}),e.data.result?t.rejectRequest=!1:t.rejectRequest=!0}))}else this.showReason||(this.showReason=!0)},acceptFun:function(){var t=this;this.item.fdAsk?Object(h["a"])(this.item.fdAsk,{message_id:this.msgId}).then((function(e){t.$message({type:e.data.result?"success":"error",message:e.data.result?"同意转诊成功":"同意转诊失败"}),e.data.result&&t.$store.dispatch("chat/getLastC2CHistoryMessages","",{root:!0})})):this.$message({type:"success",message:"同意转诊失败，请重试"})}}},v=y,b=(s("2bb6"),Object(m["a"])(v,g,_,!1,null,"6c2012b7",null)),C=b.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notic-box"},[s("p",[t._v("\n    "+t._s(t.msgOptions.content)+"\n  ")]),t.operated?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-button",{staticClass:"notic_disabled_btn margin-top-10 margin-bottom-10",attrs:{size:"mini",type:"info",disabled:!0}},[t._v("\n      "+t._s(t.msgOptions.operateResult.result)+"\n    ")])],1):t._e(),t.operated?t._e():s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-button",{staticClass:"margin-top-10 margin-bottom-10",attrs:{size:"mini",type:"primary",disabled:t.btnIsDisabled},on:{click:t.confirmAccept}},[t._v("\n      确认\n    ")])],1)],1)},w=[],x={props:{operated:{type:Boolean,default:!0},msgOptions:{type:Object,default:function(){}},btnIsDisabled:{type:Boolean,default:!0},msgId:{type:String,default:""}},data:function(){return{}},methods:{confirmAccept:function(){this.$emit("confirm",this.msgId)}}},k=x,T=Object(m["a"])(k,O,w,!1,null,null,null),j=T.exports,I=s("7160"),E={props:{msgBody:{type:Object,default:function(){}},item:{type:Object,default:function(){}},textAlign:{type:String,default:"align-center"}},components:{ReplyUser:f,TransferContent:C,TransferAccept:j,SystemContent:I["a"]},data:function(){return{}},computed:Object(i["a"])({},Object(l["c"])(["userInfo"])),methods:{btnIsDisabled:function(t){return!(t.bus_role_id===this.userInfo.id)},confirm:function(t){var e=this;if(t){var s={result:"已确认"};Object(c["d"])(t,s).then((function(t){e.$message({type:t&&t.data.result?"success":"error",message:t.message}),e.$store.dispatch("chat/getLastAsk")}))}else this.$message.info("messageId不能为空")}}},L=E,U=Object(m["a"])(L,a,n,!1,null,null,null);e["a"]=U.exports},"2bb6":function(t,e,s){"use strict";var a=s("1f62"),n=s.n(a);n.a},3679:function(t,e,s){},"4dce":function(t,e,s){"use strict";var a=s("0e79"),n=s.n(a);n.a},"4f4d":function(t,e,s){"use strict";var a=s("3679"),n=s.n(a);n.a},"567c":function(t,e,s){"use strict";var a=s("1840"),n=s.n(a);n.a},"65d1":function(t,e,s){"use strict";var a=s("f615"),n=s.n(a);n.a},"67f3":function(t,e,s){},"6a5c":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.msgOptions.type===t.MSG_ELEMENT_TYPE.TEXT?s("TextContent",{attrs:{text:t.msgOptions.text||t.msgOptions.content}}):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.ROBOT_CARD||"round_msg"===t.msgOptions.type?s("div",["re_ask"===t.msgOptions.content[0].ask_type||"new_ask"===t.msgOptions.content[0].ask_type?s("p",{staticClass:"confirm_text"},[t._v("\n      请确认本次咨询主要诉求\n    ")]):t._e(),t._l(t.msgOptions.content,(function(e,a){return s("div",{key:e.ask_type?e.ask_type+a:a},[s("BoutCard",{attrs:{title:t.msgOptions.title,boutCard:t.boutCardData(e,t.item.accountType,a,t.msgOptions),msgTime:t.item.msgTime},on:{showDetail:t.showDetail}}),a<t.msgOptions.content.length-1&&"re_ask"!==t.msgOptions.content[0].ask_type?s("p",{class:t.item.isSelfSend?"chat_divider":"chat_divider_left"}):t._e()],1)}))],2):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.IMAGE||"image"===t.msgOptions.type?s("div",{staticClass:"image_box"},[s("ImageContent",{attrs:{"images-options":t.msgOptions},on:{thumbClick:t.thumbClick}})],1):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.VIDEO?s("div",{staticClass:"image_box"},[s("div",{staticClass:"msg_VideoContent"},[s("img",{staticStyle:{"max-width":"540px"},attrs:{height:"200",src:t.msgOptions.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg","data-src":t.msgOptions.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg",alt:""}}),s("i",{staticClass:"el-icon-video-play",on:{click:function(e){return t.thumbClick("video",t.msgOptions.url)}}})])]):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.CARD?s("CardContent",{attrs:{"images-options":t.msgOptions,baby:t.msgOptions.content.family_member,symptom:t.msgOptions.content.ask_question_desc,"has-interven":t.msgOptions.content.has_interven,"interven-desc":t.msgOptions.content.interven_desc,"data-arr":t.msgOptions.content.ask_question_report},on:{showDetail:t.showDetail}}):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.VOICE?s("my-audio",{attrs:{msgtime:t.item.msgTime,src:t.msgOptions.url,vduration:t.msgOptions.duration}}):t._e(),t.msgOptions.show&&("voice_card"===t.msgOptions.type||t.msgOptions.is_card)?s("p",[s("voice-card",{attrs:{msgtime:t.item.msgTime,src:t.msgOptions.url,vduration:t.msgOptions.duration}})],1):t._e(),t.msgOptions.type===t.MSG_ELEMENT_TYPE.LINK?s("LinkContent",{attrs:{"link-options":t.msgOptions}}):t._e(),"comment"===t.msgOptions.type?s("p",{staticClass:"align-left comment_content"},[t._v("\n    用户评价："+t._s(t.msgOptions&&t.msgOptions.content||"无")+"\n  ")]):t._e(),"suggestion"===t.msgOptions.type?s("p",{staticClass:"align-left comment_content"},[t._v("\n    "+t._s(t.msgOptions.bus_role_name)+"建议："+t._s(t.msgOptions&&t.msgOptions.suggestion||"无")+"\n  ")]):t._e()],1)},n=[],i=s("f41a"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"TextContent",domProps:{innerHTML:t._s(t.text)}})},r=[],c={name:"TextContent",props:{text:{type:String,default:""}}},l=c,u=(s("d8a3"),s("2877")),d=Object(u["a"])(l,o,r,!1,null,"d77f5c3a",null),m=d.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("img",{staticStyle:{"max-width":"540px"},attrs:{height:"300",alt:"",src:t.imagesOptions.images?t.imagesOptions.images.oriImage:t.imagesOptions.url},on:{click:t.thumbClickFun}})},f=[],g={name:"ImageContent",props:{imagesOptions:{type:Object,default:function(){return{}}}},created:function(){},methods:{thumbClickFun:function(){this.imagesOptions.images?this.$emit("thumbClick","image",this.imagesOptions.images.oriImage):this.$emit("thumbClick","image",this.imagesOptions.url)}}},_=g,h=Object(u["a"])(_,p,f,!1,null,null,null),y=h.exports,v=s("d679"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"linkContent"},[s("p",{staticClass:"link",domProps:{innerHTML:t._s(t.replaceURLWithHTMLLinks(t.linkOptions.content))},on:{click:function(e){return t.toURL(t.linkOptions.url)}}})])},C=[],O=s("ed08"),w={name:"ImageContent",props:{linkOptions:{type:Object,default:function(){return{}}}},created:function(){},methods:{replaceURLWithHTMLLinks:O["n"],toURL:function(t){t&&window.open(t)}}},x=w,k=(s("65d1"),Object(u["a"])(x,b,C,!1,null,"1e5c354a",null)),T=k.exports,j=s("c1a0"),I=s("92f3"),E=s("8975"),L={props:{msgOptions:{type:Object,default:function(){}},item:{type:Object,default:function(){}}},components:{TextContent:m,ImageContent:y,CardContent:v["a"],LinkContent:T,voiceCard:j["a"],BoutCard:I["a"]},data:function(){return{curUploadList:[],MSG_ELEMENT_TYPE:i["a"].MSG_ELEMENT_TYPE}},methods:{boutCardData:E["boutCardData"],showDetail:function(t){this.thumbClick(t.mediaType,t.meidiaUrl,t.list)},thumbClick:function(t,e,s){this.$parent.thumbClickFun?this.$parent.thumbClickFun(t,e,s):this.$emit("thumbClickFun",{type:t,url:e,list:s})}}},U=L,D=(s("1d24"),Object(u["a"])(U,a,n,!1,null,"e2dd5b8c",null));e["a"]=D.exports},7160:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"SystemContent"},[s("el-row",[s("p",{directives:[{name:"show",rawName:"v-show",value:"systemInfo"==t.msgType,expression:"msgType == 'systemInfo'"}],staticClass:"color-yellow"},[s("i",{staticClass:"el-icon-info"}),s("span",[t._v(t._s(t.content))])]),s("p",{directives:[{name:"show",rawName:"v-show",value:"systemWarnning"==t.msgType,expression:"msgType == 'systemWarnning'"}],staticClass:"systemWarnning"},[t._v("\n      "+t._s(t.content)+"\n    ")])])],1)},n=[],i={name:"SystemContent",props:{content:{type:String,default:"超过十分钟"},msgType:{type:String,default:"systemInfo"}}},o=i,r=(s("4dce"),s("2877")),c=Object(r["a"])(o,a,n,!1,null,"20a3d24a",null);e["a"]=c.exports},"7cb9":function(t,e,s){},"88ae":function(t,e,s){t.exports=s.p+"static/img/pause.06cf94c2.png"},"8d1f":function(t,e,s){"use strict";var a=s("a482"),n=s.n(a);n.a},"92f3":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bout-card",on:{click:t.goMessageDetail}},[t.title?s("el-row",[s("h5",{staticClass:"card_title",staticStyle:{"min-width":"220px"}},[t._v(t._s(t.title))]),s("p",{staticClass:"divider"})]):t._e(),t._l(t.boutCard,(function(e,a){return s("el-row",{key:"boutItem"+a,attrs:{gutter:24}},[e.show?s("el-col",{attrs:{span:24}},["confirm_text"===e.type?s("div",[s("p",{staticClass:"confirm_text"},[t._v("\n          "+t._s(e.content)+"\n        ")])]):t._e(),"ask_type"===e.type?s("div",[s("p",{staticClass:"divider"}),s("p",{staticClass:"confirm_text"},[s("span",[t._v(" "+t._s(e.content))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.showTime,expression:"boutItem.showTime"}],staticClass:"float-right create_time"},[t._v("\n            "+t._s(e.time)+"\n          ")])]),s("p",{staticClass:"divider"})]):t._e(),"text"===e.type?s("div",[s("h5",{staticClass:"card_title"},[t._v(t._s(e.title))]),s("div",{staticClass:"text-wrap"},[t._v(t._s(e.content))])]):t._e(),"btn"===e.type?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-button",{staticClass:"notic_disabled_btn",attrs:{size:"mini",type:"info",disabled:!0}},[t._v("\n          已确认\n        ")])],1):t._e(),"voice"===e.type?s("div",[s("my-audio",{attrs:{msgtime:t.msgTime,src:e.voice.url,vduration:e.voice.duration}})],1):t._e(),e.dataArr&&e.dataArr.length>0?s("div",{staticClass:"data"},t._l(e.dataArr,(function(a,n){return s("div",{key:n,staticClass:"image-and-video"},["image"===a.type?s("img",{attrs:{src:a.url,alt:"",width:"50px"},on:{click:function(s){return t.showMediaDetail(a.url,a.type,e.dataArr)}}}):"video"===a.type?s("div",{staticClass:"video-container"},[s("div",{staticClass:"VideoContent"},[s("img",{attrs:{src:a.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg","data-src":a.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg",alt:""}}),s("i",{staticClass:"el-icon-video-play",on:{click:function(e){return t.showMediaDetail(a.url,"video",[])}}})])]):t._e()])})),0):t._e()],1):t._e()],1)}))],2)},n=[],i=s("2b0e"),o=i["default"].filter("gender"),r={name:"bout-card",components:{},props:{msgTime:{type:String,default:""},boutCard:{type:Array,default:function(){return[]}},hasInterven:{type:Boolean,default:!1},intervenDesc:{type:String,default:""},title:{type:String,default:""}},data:function(){return{currentMediaType:"",currentMediaUrl:"",dialogVisible:!1}},methods:{genderFilter:o,goMessageDetail:function(){this.$emit("goMsgDetail")},showMediaDetail:function(t,e,s){for(var a=[],n=0;n<s.length;n++){var i=s[n];"image"===i.type&&i.url&&a.push(i.url)}var o={mediaType:e,meidiaUrl:t,list:a};this.$emit("showDetail",o)},closeVideoDialog:function(){if("video"===this.currentMediaType){var t=document.getElementById("myVideo");t.pause()}}}},c=r,l=(s("8d1f"),s("2877")),u=Object(l["a"])(c,a,n,!1,null,"130bdd5e",null);e["a"]=u.exports},"9fbc":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"refmsgCard",staticClass:"msg-card"},[t.msgList&&t.msgList.length>0?s("div",{staticClass:"infinite-list-wrapper"},[s("ul",t._l(t.msgList,(function(e,a){return s("li",{key:a,staticStyle:{"line-height":"30px"}},[s("el-row",{staticClass:"all",attrs:{gutter:24}},[s("el-col",{class:t.searchType+"-right",attrs:{span:24}},[s("p",{staticClass:"color-999 align-left"},[t.showAdmin?s("span",[t._v(t._s(e.account&&e.account.name))]):s("span",[t._v(t._s("User"===e.from_account_type?"用户":"服务团队"))]),s("span",{staticClass:"fontsize-10 margin-left-20"},[t._v(t._s(t._f("formatTime")(new Date(e.created_at))))])]),"notice"===e.message_body.type?s("noticeMsg",{attrs:{msgBody:e.message_body,textAlign:"align-left",item:e}}):s("chatMsg",{attrs:{msgOptions:e.message_body,item:e},on:{thumbClickFun:t.thumbClickFunComment}})],1)],1)],1)})),0)]):s("div",{staticStyle:{"text-align":"center",color:"#5a5e66"}},[t._v("\n    暂无咨询记录\n  ")]),s("monitor",{ref:"monitor",attrs:{"monitor-info":t.monitorInfo,"current-image-url-arr":t.curUploadUrlList}})],1)},n=[],i=(s("20d6"),s("7962")),o=s("6a5c"),r=s("24d7"),c=s("2ef0"),l=s.n(c),u={components:{Monitor:i["a"],chatMsg:o["a"],noticeMsg:r["a"]},props:{searchType:{type:String,default:"all"},msgList:{type:Array,default:function(){return[]}},showAdmin:{type:Boolean,default:!0}},data:function(){return{monitorInfo:{},curUploadUrlList:[],imageArr:[]}},created:function(){console.log("msgList==",this.msgList)},methods:{thumbClickFun:function(t,e,s){if(this.monitorInfo={type:t,meta:{url:e}},s&&(this.curUploadUrlList=s),this.curUploadUrlList&&this.curUploadUrlList.length&&"video"!==t){var a=l.a.findIndex(this.curUploadUrlList,(function(t){return t===e}));-1===a&&this.curUploadUrlList.push(e),this.curUploadUrlList=l.a.sortedUniq(this.curUploadUrlList)}else"video"!==t?this.curUploadUrlList.push(e):this.curUploadUrlList=[];this.$refs.monitor.show()},thumbClickFunComment:function(t){var e=t.type,s=t.url,a=t.list;if(this.monitorInfo={type:e,meta:{url:s}},a&&(this.curUploadUrlList=a),this.curUploadUrlList&&this.curUploadUrlList.length&&"video"!==e){var n=l.a.findIndex(this.curUploadUrlList,(function(t){return t===s}));-1===n&&this.curUploadUrlList.push(s),this.curUploadUrlList=l.a.sortedUniq(this.curUploadUrlList)}else"video"!==e?this.curUploadUrlList.push(s):this.curUploadUrlList=[];this.$refs.monitor.show()}}},d=u,m=(s("f2ae"),s("2877")),p=Object(m["a"])(d,a,n,!1,null,"e85f6b80",null);e["a"]=p.exports},a482:function(t,e,s){},a822:function(t,e,s){"use strict";var a=s("f596"),n=s.n(a);n.a},c1a0:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"clearfix"},[s("span",{staticClass:"title"},[t._v("通话录音")]),s("span",{staticClass:"float-right"},[t._v(t._s(t.msgtime))])]),s("div",{ref:"wrap",staticClass:"x-audio-wrap",staticStyle:{"min-width":"250px","max-width":"500px"},style:"width:"+t.width+"px"},[s("div",{staticClass:"x-sector",on:{click:t.play}},[s("img",{staticClass:"sound-img",attrs:{src:t.soundImg}})]),s("div",{staticClass:"progress_box"},[s("el-slider",{attrs:{"format-tooltip":t.formatTooltip},on:{change:t.changeProgressValue},model:{value:t.progressValue,callback:function(e){t.progressValue=e},expression:"progressValue"}})],1),s("div",{staticClass:"x-time"},[t._v(t._s(t.duration&&t.showDuration?t.duration:t.text))])])])},n=[],i=s("7618"),o=(s("ac6a"),s("db72")),r=(s("c5f6"),s("2f62")),c={name:"VoiceCard",props:{src:{type:String,default:""},msgtime:{type:String,default:""},text:{type:String,default:""},vduration:{type:Number,default:0},showDuration:{type:Boolean,default:!0}},data:function(){return{width:"",progressValue:0,audio:null,animate:!1,timer:null,duration:null,soundImg:s("df84"),slideLeft:"0",oldvalue:0,audioTime:"",is_moving:!1,sb_bkx:0,sb_bky:0}},computed:Object(o["a"])({},Object(r["c"])(["activedBaby"])),watch:{animate:function(){!1===this.animate?this.soundImg=s("df84"):this.soundImg=s("88ae")},activedBaby:function(){this.audio.pause()}},mounted:function(){var t=this;this.audio=new Audio,this.audio.src=this.src,this.width=this.vduration/6e4*75-25,this.audio.setAttribute("msgtime",this.msgtime),this.audio.addEventListener("canplaythrough",(function(){})),this.audio.onplay=function(){t.timer=setInterval((function(e){t.updateProgress()}),300),t.animate=!0},this.audio.onpause=function(){t.animate=!1,t.timer&&clearInterval(t.timer)},this.audio.onended=function(){t.animate=!1,t.timer&&clearInterval(t.timer)},window.audioList.push(this.audio)},methods:{formatTooltip:function(){var t=0;return this.audio&&this.audio.duration&&(t=this.realFormatSecond(this.audio.duration*this.progressValue/100)),t},changeProgressValue:function(t){this.play(),this.audio.currentTime=parseInt(this.audio.duration*t/100)},play:function(){var t=this;window.audioList.forEach((function(e,s){var a=e.getAttribute("msgtime"),n=t.audio.getAttribute("msgtime");a!==n&&e.pause()})),this.audio.paused?this.audio.play():this.audio.pause()},updateProgress:function(){var t=Math.round(Math.floor(this.audio.currentTime)/Math.floor(this.audio.duration)*100);t-this.oldvalue>0&&(this.oldvalue=t,this.progressValue=t)},realFormatSecond:function(t){var e=Object(i["a"])(t);if("number"===e||"string"===e){t=parseInt(t);var s=Math.floor(t/60);return t-=60*s,("0"+s).slice(-2)+":"+("0"+t).slice(-2)}return"00:00"}}},l=c,u=(s("ff2e"),s("2877")),d=Object(u["a"])(l,a,n,!1,null,"19341bc4",null);e["a"]=d.exports},d436:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"top-overview"},[s("div",{staticClass:"detail-number"},[s("span",{staticClass:"label"},[t._v("咨询编号：")]),t._v(t._s(t.detail.fd_ask_ID)+"\n    ")]),s("div",{staticClass:"detail-package"},[s("span",{staticClass:"label"},[t._v("套餐版本： ")]),t._v(t._s(t.detail.fd_service_type)+"\n    ")])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"detail__content"},[s("div",{staticClass:"detail__content__tips"},[t._v("\n        温馨提示：对用户承诺的评价方式为匿名评价，因此当出现对评价内容有疑问的情况，请注意与用户和医疗团队的沟通方式，注意保护用户隐私！\n      ")]),s("div",{staticClass:"detail__content__rate"},[s("div",{staticClass:"rate-title"},[t._v("\n          用户评价\n        ")]),s("div",{staticClass:"rate-content"},[s("div",{staticClass:"rate-content__item"},[s("div",{staticClass:"label"},[t._v("评价时间：")]),s("div",{staticClass:"content"},[t._v("\n              "+t._s(t.detail.commets&&t.detail.commets.length?t.formatTime(t.detail.commets[0].created_at):"无")+"\n            ")])]),t._l(t.detail.commets,(function(e,a){return s("div",{key:a},[s("div",{staticClass:"rate-content__item"},[s("div",{staticClass:"label"},[t._v("\n                对"+t._s(e.admin_user.name)+"("+t._s(t.systemRole(e.bus_role,""))+")的满意度：\n              ")]),s("div",{staticClass:"content"},[t._v(t._s(e.star)+"星")])]),s("div",{staticClass:"rate-content__item"},[s("div",{staticClass:"label"},[t._v("标签：")]),s("div",{staticClass:"content"},[e.tags&&e.tags.length>0?s("span",t._l(e.tags,(function(e,a){return s("span",{key:"tag"+a},[t._v("\n                    "+t._s(e)+"\n                  ")])})),0):s("span",[t._v("\n                  无\n                ")])])])])})),s("div",{staticClass:"multiple-line"},[s("span",{staticClass:"label"},[t._v("评价详情：")]),t.detail.commets&&t.detail.commets.length&&t.detail.commets[0].content?s("span",{staticClass:"content"},[t._v(t._s(t.detail.commets&&t.detail.commets[0].content))]):s("span",[t._v("无")])])],2)])]),s("div",{staticClass:"detail__history"},[s("div",{staticClass:"detail__history__title"},[t._v("咨询记录")]),s("msg-card",{attrs:{"msg-list":t.detail.message_list}})],1)])])},n=[],i=s("9fbc"),o=s("dffe"),r=s("0680"),c={name:"MedicalServiceDetail",components:{MsgCard:i["a"]},data:function(){return{detail:{}}},mounted:function(){var t=this,e=this.$route.params.id;Object(o["g"])(e).then((function(e){t.detail=e.data}))},methods:{systemRole:r["h"]}},l=c,u=(s("4f4d"),s("2877")),d=Object(u["a"])(l,a,n,!1,null,"7a1ed89d",null);e["default"]=d.exports},d679:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CardContent"},[s("div",[s("el-row",{staticClass:"baby-info",attrs:{gutter:4}},[s("el-col",{attrs:{span:2}},[s("svg-icon",{attrs:{"icon-class":"baby"}})],1),s("el-col",{attrs:{span:22}},[s("p",[t._v("宝宝信息")]),s("div",[t._v("\n          姓名："+t._s(t.baby.name)+"    性别："+t._s(t.genderFilter(t.baby.gender))+"\n             年龄："+t._s(t.baby.age_of_month?t.baby.age_of_month:"未知")+"\n        ")])])],1),s("el-row",{staticClass:"symptom",attrs:{gutter:24}},[s("el-col",{attrs:{span:2}},[s("svg-icon",{attrs:{"icon-class":"yiliaoqixie"}})],1),s("el-col",{attrs:{span:22}},[s("p",[t._v("症状描述")]),s("div",[t._v(t._s(t.symptom))])])],1),s("el-row",{staticClass:"interven",attrs:{gutter:24}},[s("el-col",{attrs:{span:2}},[s("svg-icon",{attrs:{"icon-class":"yao"}})],1),s("el-col",{attrs:{span:22}},[s("p",[t._v("干预史")]),s("div",[t._v(t._s(t.intervenDesc||"无"))])])],1),s("el-row",{staticClass:"data",attrs:{gutter:24}},[s("el-col",{attrs:{span:2}},[s("svg-icon",{attrs:{"icon-class":"tupian"}})],1),s("el-col",{attrs:{span:22}},[s("p",[t._v("资料照片及视频")]),t.dataArr&&t.dataArr.length>0?s("div",t._l(t.dataArr,(function(e,a){return s("div",{key:a,staticClass:"image-and-video"},["image"===e.type?s("img",{attrs:{src:e.url,alt:"",width:"50px"},on:{click:function(s){return t.showMediaDetail(e.url,e.type)}}}):"video"===e.type?s("div",{staticClass:"video-container"},[s("div",{staticClass:"VideoContent"},[s("img",{attrs:{src:e.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg","data-src":e.url+"?x-oss-process=video/snapshot,t_0,w_0,h_0,f_jpg",alt:""}}),s("i",{staticClass:"el-icon-video-play",on:{click:function(s){return t.showMediaDetail(e.url,"video")}}})])]):t._e()])})),0):t._e(),t.dataArr.length<=0?s("p",[t._v("无")]):t._e()])],1)],1)])},n=[],i=s("2b0e"),o=i["default"].filter("gender"),r={name:"CardContent",components:{},props:{baby:{type:Object,default:function(){return{name:"未知",gender:0,age:"未知"}}},symptom:{type:String,default:""},hasInterven:{type:Boolean,default:!1},intervenDesc:{type:String,default:""},dataArr:{type:Array,default:function(){return["http://"]}}},data:function(){return{currentMediaType:"",currentMediaUrl:"",dialogVisible:!1}},methods:{genderFilter:o,showMediaDetail:function(t,e){for(var s=[],a=0;a<this.dataArr.length;a++){var n=this.dataArr[a];"image"===n.type&&n.url&&s.push(n.url)}var i={mediaType:e,meidiaUrl:t,list:s};this.$emit("showDetail",i)},closeVideoDialog:function(){if("video"===this.currentMediaType){var t=document.getElementById("myVideo");t.pause()}}}},c=r,l=(s("a822"),s("2877")),u=Object(l["a"])(c,a,n,!1,null,"7cfbca32",null);e["a"]=u.exports},d8a3:function(t,e,s){"use strict";var a=s("11b6"),n=s.n(a);n.a},df84:function(t,e,s){t.exports=s.p+"static/img/play.c0a23e29.png"},dffe:function(t,e,s){"use strict";s.d(e,"e",(function(){return n})),s.d(e,"f",(function(){return i})),s.d(e,"b",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"c",(function(){return c})),s.d(e,"d",(function(){return l})),s.d(e,"g",(function(){return u}));var a=s("b775");function n(t){return Object(a["a"])({url:"/comment_manager/fd_ask/list",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/comment_manager/single_ask/list",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/comment_manager/fd_ask/updateStatus/"+t._id,method:"put",data:t})}function r(t){return Object(a["a"])({url:"/comment_manager/single_ask/updateStatus/"+t._id,method:"put",data:t})}function c(t){return Object(a["a"])({url:"/comment_manager/fd_ask/getComment/"+t,method:"get"})}function l(t){return Object(a["a"])({url:"/comment_manager/single_ask/".concat(t),method:"get"})}function u(t){return Object(a["a"])({url:"/comment_manager/fd_ask/".concat(t),method:"get"})}},f2ae:function(t,e,s){"use strict";var a=s("7cb9"),n=s.n(a);n.a},f596:function(t,e,s){},f615:function(t,e,s){},ff2e:function(t,e,s){"use strict";var a=s("117b"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-1dbe2bc0.1f1a4a93.js.map