{"version":3,"sources":["webpack:///./src/views/system-settings/professional-role/edit/index.vue?25b8","webpack:///./node_modules/core-js/modules/es6.number.is-integer.js","webpack:///./src/views/system-settings/professional-role/edit/index.vue?8af1","webpack:///./src/api/upload.js","webpack:///./node_modules/core-js/modules/_is-integer.js","webpack:///./src/views/system-settings/professional-role/edit/index.vue?5b6f","webpack:///./src/components/ProfessionalRole/Role.vue?9ac3","webpack:///src/components/ProfessionalRole/Role.vue","webpack:///./src/components/ProfessionalRole/Role.vue?1e2d","webpack:///./src/components/ProfessionalRole/Role.vue","webpack:///src/views/system-settings/professional-role/edit/index.vue","webpack:///./src/views/system-settings/professional-role/edit/index.vue?dbe1","webpack:///./src/views/system-settings/professional-role/edit/index.vue","webpack:///./src/views/system-settings/professional-role/edit/index.vue?2ec4"],"names":["$export","S","isInteger","oss","request","url","method","getImageMeta","postObject","ossData","key","file","onProgress","data","FormData","append","OSSAccessKeyId","policy","Signature","headers","onUploadProgress","type","indexOf","meta","videoMeta","size","Error","extname","filename","a","split","reverse","join","b","substring","search","upload","random","Math","floor","fileName","Date","getTime","fileType","name","path","prefix","res","isObject","module","exports","it","isFinite","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","pageTitle","ref","attrs","ruleForm","pageAction","pageRole","pageType","required","message","trigger","on","getRoleInfo","model","value","callback","$$v","$set","expression","_l","$store","state","dictionary","item","label","validator","checkPhone","trim","sectionOffice","_e","single_ask_price_info","$event","setNumber","toFixedNum","removeDepartment","showDepartment","addDepartment","fd_resource_curr","handleAvatarSuccess","uploadFunc","beforeAvatarUpload","imageUrl","slot","submitForm","dialogVisible","staticStyle","index","domProps","html","editReason","confirmForm","staticRenderFns","prop","rules","placeholder","selectDisable","onValueChange","_id","optionValue","options","props","Boolean","default","String","moduleName","Array","watch","val","created","getSupervisors","methods","getFreeDomApi","then","$emit","component","components","Role","setTimeout","Number","phoneReg","test","confrimItem","currentId","roleName","uploading","activeRole","gender","phone","limit","department","desc","skill","getPageType","getProfessionalRoleById","computed","$route","params","id","systemRole","fenToYuan","isNaN","price","getConfrimItem","isSingleAsk","priceInfo","formData","otherDepartmentInfo","arr","push","roleInfo","avatar","mobile","$message","isJPG","error","isLt2M","$refs","formName","validate","valid","console","log","fd_resource","description","expert","bus_role","role","single_ask_bus_role","apiName","warning","update_remark","updateApi","cancelDialogFun","genderFilter","roleId","getDetailApi","i"],"mappings":"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","file":"static/js/chunk-1be544a9.04afca94.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=2&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=2&lang=css&\"","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2cdf2b38&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2cdf2b38&scoped=true&lang=scss&\"","import request from '@/utils/request'\r\nexport const oss = () => {\r\n  return request({\r\n    url: '/oss/auth',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const getImageMeta = url => {\r\n  return request({\r\n    url: url + '?x-oss-process=image/info',\r\n    method: 'get'\r\n  })\r\n}\r\nexport const postObject = async ({ oss: ossData, key, file, onProgress }) => {\r\n  const data = new FormData()\r\n  data.append('OSSAccessKeyId', ossData.OSSAccessKeyId)\r\n  data.append('success_action_status', 200)\r\n  data.append('policy', ossData.policy)\r\n  data.append('Signature', ossData.Signature)\r\n  data.append('key', key)\r\n  data.append('file', file)\r\n  let url = 'https://pic1.baobaohehu.com/'\r\n  await request({\r\n    url,\r\n    method: 'post',\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    },\r\n    onUploadProgress: onProgress || null,\r\n    data\r\n  })\r\n  url = url + key\r\n  let meta\r\n  if (file.type.indexOf('image') > -1) {\r\n    meta = await getImageMeta(url)\r\n  } else if (file.type.indexOf('video') > -1) {\r\n    meta = {\r\n      ...file.videoMeta,\r\n      size: file.size\r\n    }\r\n  } else if (file.type.indexOf('audio') > -1) {\r\n    meta = {\r\n      size: file.size,\r\n      type: file.type\r\n    }\r\n  } else {\r\n    throw new Error(\r\n      '当前上传的类型不是image或者video；当前上传的类型是' + file.type\r\n    )\r\n  }\r\n  return {\r\n    url,\r\n    meta: meta\r\n  }\r\n}\r\n// 获取文件后缀名\r\nexport const extname = filename => {\r\n  if (!filename || typeof filename !== 'string') {\r\n    return false\r\n  }\r\n  const a = filename\r\n    .split('')\r\n    .reverse()\r\n    .join('')\r\n  const b = a\r\n    .substring(0, a.search(/\\./))\r\n    .split('')\r\n    .reverse()\r\n    .join('')\r\n  return b\r\n}\r\n/**\r\n * 封装下oss获取跟上传\r\n * @param file\r\n * @param onProgress\r\n * @returns {Promise.<*>}\r\n */\r\nexport const upload = async (file, onProgress) => {\r\n  const { data } = await oss()\r\n  const random = Math.floor(Math.random() * (100 - 1)) + 1\r\n  let fileName = new Date().getTime()\r\n  const fileType = extname(file.name)\r\n  fileName = fileName + random + '.' + fileType\r\n  const key = `${data.path}/${data.prefix}/${fileName}`\r\n  const res = await postObject({ oss: data, key, file, onProgress })\r\n  return res\r\n}\r\n","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',{staticClass:\"margin-left-20 color-576277\"},[_vm._v(_vm._s(_vm.pageTitle))]),_c('div',{staticClass:\"role-form\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"label-width\":\"120px\"}},[_c('role',{attrs:{\"select-disable\":_vm.pageAction === '编辑',\"placeholder\":(\"请选择\" + _vm.pageRole),\"prop\":'name',\"pageType\":_vm.pageType,\"rules\":[\n          { required: true, message: (\"请选择\" + _vm.pageRole), trigger: 'change' }\n        ]},on:{\"getRoleInfo\":_vm.getRoleInfo},model:{value:(_vm.ruleForm.name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"name\", $$v)},expression:\"ruleForm.name\"}}),(_vm.ruleForm.name)?_c('div',[_c('el-form-item',{attrs:{\"label\":\"性别\",\"prop\":\"gender\",\"rules\":[\n            { required: true, message: '请选择性别', trigger: 'blur' }\n          ]}},[_c('el-select',{attrs:{\"placeholder\":(_vm.pageRole + \"性别\"),\"disabled\":true},model:{value:(_vm.ruleForm.gender),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"gender\", $$v)},expression:\"ruleForm.gender\"}},_vm._l((_vm.$store.state.dictionary.genders),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"联系方式\",\"prop\":\"phone\",\"rules\":[\n            { required: true, message: '请输入联系方式', trigger: 'blur' },\n            { validator: _vm.checkPhone, trigger: 'blur' }\n          ]}},[_c('el-input',{attrs:{\"placeholder\":\"请输入联系方式\"},model:{value:(_vm.ruleForm.phone),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"phone\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.phone\"}}),_c('el-tooltip',{staticClass:\"icon-item color-576277\",attrs:{\"effect\":\"dark\",\"content\":\"电话转诊等类似业务将会呼叫该联系方式\",\"placement\":\"top\"}},[_c('i',{staticClass:\"el-icon-info\"})])],1),(_vm.pageRole !== '营养师' && _vm.pageType !== 'consult')?_c('el-form-item',{attrs:{\"label\":\"科室\",\"prop\":\"department\",\"rules\":[\n            { required: true, message: '请选择科室', trigger: 'change' }\n          ]}},[_c('el-select',{attrs:{\"placeholder\":\"请选择科室\"},model:{value:(_vm.ruleForm.department),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"department\", $$v)},expression:\"ruleForm.department\"}},_vm._l((_vm.sectionOffice('', 'arr', true)),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1):_vm._e(),(_vm.pageType === 'consult')?_c('div',{staticClass:\"section_box\"},[_c('el-form-item',{attrs:{\"label\":\"服务科室\",\"prop\":\"single_ask_price_info[0].department\",\"rules\":[\n              { required: true, message: '请选择服务科室', trigger: 'change' }\n            ]}},[_c('el-select',{attrs:{\"placeholder\":\"请选择服务科室\"},model:{value:(_vm.ruleForm.single_ask_price_info[0].department),callback:function ($$v) {_vm.$set(_vm.ruleForm.single_ask_price_info[0], \"department\", $$v)},expression:\"ruleForm.single_ask_price_info[0].department\"}},_vm._l((_vm.sectionOffice('', 'arr')),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"图文问诊单价\",\"prop\":\"single_ask_price_info[0].price\",\"rules\":[\n              {\n                required: true,\n                message: '请填写图文问诊单价，保留两位小数',\n                trigger: 'change'\n              }\n            ]}},[_c('el-input',{attrs:{\"placeholder\":\"请填写图文问诊单价，保留两位小数\"},on:{\"input\":function($event){return _vm.setNumber($event, 0)},\"change\":function($event){return _vm.toFixedNum($event, 0)}},model:{value:(_vm.ruleForm.single_ask_price_info[0].price),callback:function ($$v) {_vm.$set(_vm.ruleForm.single_ask_price_info[0], \"price\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.single_ask_price_info[0].price\"}})],1)],1):_vm._e(),(_vm.showDepartment)?_c('div',{staticClass:\"section_box\"},[_c('i',{staticClass:\"el-icon-close close_icon\",on:{\"click\":_vm.removeDepartment}}),(_vm.pageType === 'consult')?_c('el-form-item',{attrs:{\"label\":\"服务科室\",\"prop\":\"single_ask_price_info[1].department\",\"rules\":[\n              { required: true, message: '请选择服务科室', trigger: 'change' }\n            ]}},[_c('el-select',{attrs:{\"placeholder\":\"请选择科室\"},model:{value:(_vm.ruleForm.single_ask_price_info[1].department),callback:function ($$v) {_vm.$set(_vm.ruleForm.single_ask_price_info[1], \"department\", $$v)},expression:\"ruleForm.single_ask_price_info[1].department\"}},_vm._l((_vm.sectionOffice('', 'arr')),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1):_vm._e(),(_vm.pageRole !== '营养师' || _vm.pageType === 'consult')?_c('el-form-item',{attrs:{\"label\":\"图文问诊单价\",\"prop\":\"single_ask_price_info[1].price\",\"rules\":[\n              {\n                required: true,\n                message: '请填写图文问诊单价，保留两位小数',\n                trigger: 'change'\n              }\n            ]}},[_c('el-input',{attrs:{\"placeholder\":\"请填写图文问诊单价，保留两位小数\"},on:{\"input\":function($event){return _vm.setNumber($event, 1)},\"change\":function($event){return _vm.toFixedNum($event, 1)}},model:{value:(_vm.ruleForm.single_ask_price_info[1].price),callback:function ($$v) {_vm.$set(_vm.ruleForm.single_ask_price_info[1], \"price\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.single_ask_price_info[1].price\"}})],1):_vm._e()],1):_vm._e(),(_vm.pageType === 'consult' && !_vm.showDepartment)?_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.addDepartment}},[_vm._v(\"添加服务科室\")])],1):_vm._e(),(_vm.pageType !== 'consult')?_c('el-form-item',{attrs:{\"label\":\"服务上限\",\"prop\":\"limit\",\"rules\":[\n            { required: true, message: '请输入服务上限', trigger: 'blur' }\n          ]}},[_c('el-input-number',{attrs:{\"min\":_vm.ruleForm.fd_resource_curr},model:{value:(_vm.ruleForm.limit),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"limit\", $$v)},expression:\"ruleForm.limit\"}}),_c('el-tooltip',{staticClass:\"item color-576277\",attrs:{\"effect\":\"dark\",\"content\":(\"请输入正整数，服务上限值不可低于当前已占用的服务资源:\" + (_vm.ruleForm.limit)),\"placement\":\"top\"}},[_c('span',[_vm._v(\"\\n                \\n              \"),_c('i',{staticClass:\"el-icon-info\"})])])],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"头像\",\"prop\":\"imageUrl\",\"rules\":[\n            { required: true, message: '请上传头像', trigger: 'change' }\n          ]}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"http-request\":_vm.uploadFunc,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.ruleForm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.ruleForm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_c('div',{staticClass:\"el-upload__tip tips\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"\\n              图片格式支持：BMP、JPEG、JPG、PNG，大小不超过2M\\n              上传的头像将在小程序展示，请慎重上传！\\n              为保证美观，请上传长宽相等的图片\\n            \")])])],1),_c('el-form-item',{attrs:{\"label\":\"职业经历\",\"prop\":\"desc\",\"rules\":[\n            { required: true, message: '请输入职业经历', trigger: 'blur' }\n          ]}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请填写成员职业经历，填写完成的信息将在小程序展示，请慎重填写！\"},model:{value:(_vm.ruleForm.desc),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"desc\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.desc\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"skill\",\"label\":\"专业擅长\",\"rules\":[\n            { required: true, message: '请输入成员擅长', trigger: 'blur' }\n          ]}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请填写成员专业擅长，填写完成的信息将在小程序展示，请慎重填写！\"},model:{value:(_vm.ruleForm.skill),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"skill\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.skill\"}})],1)],1):_vm._e(),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"确认\"+_vm._s(this.pageAction))])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":(_vm.pageRole + \"信息确认\"),\"visible\":_vm.dialogVisible,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"confirm\",staticStyle:{\"overflow\":\"auto\",\"max-height\":\"500px\"}},[_vm._l((_vm.confrimItem),function(item,index){return _c('div',{key:item.label + index},[(item.show)?_c('div',{staticClass:\"confirm__item\"},[(item.label)?_c('div',{staticClass:\"confirm__item--label\"},[_vm._v(\"\\n            \"+_vm._s(item.label)+\"：\\n          \")]):_vm._e(),_c('div',{staticClass:\"confirm__item--content\",domProps:{\"innerHTML\":_vm._s(item.html)}},[_vm._v(\"\\n            \"+_vm._s(item.html)+\"\\n          \")])]):_vm._e()])}),(_vm.pageAction === '编辑')?_c('div',{staticClass:\"confirm__item\"},[_c('div',{staticClass:\"confirm__item--label\"},[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"*\")]),_vm._v(\"修改原因：\\n        \")]),_c('div',{staticClass:\"confirm__item--content\"},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"请输入内容\"},model:{value:(_vm.editReason),callback:function ($$v) {_vm.editReason=$$v},expression:\"editReason\"}})],1)]):_vm._e(),_c('div',{staticClass:\"tips margin-left-20\"},[_vm._v(\"\\n        提交的部分信息将展示在小程序并影响业务，请确保信息的准确性!\\n      \")])],2),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"返回修改\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmForm}},[_vm._v(\"确认\"+_vm._s(this.pageAction))])],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form-item',{attrs:{\"label\":_vm.label,\"prop\":_vm.prop,\"rules\":_vm.rules}},[_c('el-select',{attrs:{\"value\":_vm.value,\"filterable\":\"\",\"placeholder\":_vm.placeholder,\"disabled\":_vm.selectDisable,\"clearable\":\"\"},on:{\"change\":_vm.onValueChange}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item._id,attrs:{\"value\":item._id,\"label\":item.name}},[_vm._v(_vm._s(item.name))])}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- crm模块，负责人 -->\r\n  <el-form-item :label=\"label\" :prop=\"prop\" :rules=\"rules\">\r\n    <el-select\r\n      :value=\"value\"\r\n      filterable\r\n      @change=\"onValueChange\"\r\n      :placeholder=\"placeholder\"\r\n      :disabled=\"selectDisable\"\r\n      clearable\r\n    >\r\n      <el-option\r\n        v-for=\"item in options\"\r\n        :key=\"item._id\"\r\n        :value=\"item._id\"\r\n        :label=\"item.name\"\r\n        >{{ item.name }}</el-option\r\n      >\r\n    </el-select>\r\n  </el-form-item>\r\n</template>\r\n<script>\r\nimport {\r\n  getFreedomMembers,\r\n  getSingleAskFreedomMembers\r\n} from '@/api/professionalRole'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      optionValue: '',\r\n      options: []\r\n    }\r\n  },\r\n  props: {\r\n    selectDisable: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    moduleName: {\r\n      type: String,\r\n      default: '医生'\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: '姓名'\r\n    },\r\n    prop: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    rules: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: '请选择'\r\n    },\r\n    pageType: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.optionValue = val\r\n    }\r\n  },\r\n  created() {\r\n    this.getSupervisors()\r\n  },\r\n  methods: {\r\n    getSupervisors() {\r\n      const getFreeDomApi =\r\n        this.pageType === 'consult'\r\n          ? getSingleAskFreedomMembers\r\n          : getFreedomMembers\r\n      getFreeDomApi().then(res => {\r\n        this.options = res.data.list\r\n      })\r\n    },\r\n    onValueChange(val) {\r\n      this.$emit('input', val)\r\n      this.$emit(\r\n        'getRoleInfo',\r\n        this.options.find(option => option._id === val)\r\n      )\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=0fb45980&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <h1 class=\"margin-left-20 color-576277\">{{ pageTitle }}</h1>\r\n    <div class=\"role-form\">\r\n      <el-form\r\n        :model=\"ruleForm\"\r\n        ref=\"ruleForm\"\r\n        label-width=\"120px\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <role\r\n          :select-disable=\"pageAction === '编辑'\"\r\n          :placeholder=\"`请选择${pageRole}`\"\r\n          :prop=\"'name'\"\r\n          :pageType=\"pageType\"\r\n          v-model=\"ruleForm.name\"\r\n          @getRoleInfo=\"getRoleInfo\"\r\n          :rules=\"[\r\n            { required: true, message: `请选择${pageRole}`, trigger: 'change' }\r\n          ]\"\r\n        ></role>\r\n        <div v-if=\"ruleForm.name\">\r\n          <el-form-item\r\n            label=\"性别\"\r\n            prop=\"gender\"\r\n            :rules=\"[\r\n              { required: true, message: '请选择性别', trigger: 'blur' }\r\n            ]\"\r\n          >\r\n            <el-select\r\n              v-model=\"ruleForm.gender\"\r\n              :placeholder=\"`${pageRole}性别`\"\r\n              :disabled=\"true\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in $store.state.dictionary.genders\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item\r\n            label=\"联系方式\"\r\n            prop=\"phone\"\r\n            :rules=\"[\r\n              { required: true, message: '请输入联系方式', trigger: 'blur' },\r\n              { validator: checkPhone, trigger: 'blur' }\r\n            ]\"\r\n          >\r\n            <el-input\r\n              v-model.trim=\"ruleForm.phone\"\r\n              placeholder=\"请输入联系方式\"\r\n            ></el-input>\r\n            <el-tooltip\r\n              class=\"icon-item color-576277\"\r\n              effect=\"dark\"\r\n              content=\"电话转诊等类似业务将会呼叫该联系方式\"\r\n              placement=\"top\"\r\n            >\r\n              <i class=\"el-icon-info\" />\r\n            </el-tooltip>\r\n          </el-form-item>\r\n          <el-form-item\r\n            v-if=\"pageRole !== '营养师' && pageType !== 'consult'\"\r\n            label=\"科室\"\r\n            prop=\"department\"\r\n            :rules=\"[\r\n              { required: true, message: '请选择科室', trigger: 'change' }\r\n            ]\"\r\n          >\r\n            <el-select v-model=\"ruleForm.department\" placeholder=\"请选择科室\">\r\n              <el-option\r\n                v-for=\"item in sectionOffice('', 'arr', true)\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <div v-if=\"pageType === 'consult'\" class=\"section_box\">\r\n            <el-form-item\r\n              label=\"服务科室\"\r\n              prop=\"single_ask_price_info[0].department\"\r\n              :rules=\"[\r\n                { required: true, message: '请选择服务科室', trigger: 'change' }\r\n              ]\"\r\n            >\r\n              <el-select\r\n                v-model=\"ruleForm.single_ask_price_info[0].department\"\r\n                placeholder=\"请选择服务科室\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in sectionOffice('', 'arr')\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item\r\n              label=\"图文问诊单价\"\r\n              prop=\"single_ask_price_info[0].price\"\r\n              :rules=\"[\r\n                {\r\n                  required: true,\r\n                  message: '请填写图文问诊单价，保留两位小数',\r\n                  trigger: 'change'\r\n                }\r\n              ]\"\r\n            >\r\n              <el-input\r\n                @input=\"setNumber($event, 0)\"\r\n                @change=\"toFixedNum($event, 0)\"\r\n                v-model.trim=\"ruleForm.single_ask_price_info[0].price\"\r\n                placeholder=\"请填写图文问诊单价，保留两位小数\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </div>\r\n          <div v-if=\"showDepartment\" class=\"section_box\">\r\n            <i class=\"el-icon-close close_icon\" @click=\"removeDepartment\" />\r\n            <el-form-item\r\n              v-if=\"pageType === 'consult'\"\r\n              label=\"服务科室\"\r\n              prop=\"single_ask_price_info[1].department\"\r\n              :rules=\"[\r\n                { required: true, message: '请选择服务科室', trigger: 'change' }\r\n              ]\"\r\n            >\r\n              <el-select\r\n                v-model=\"ruleForm.single_ask_price_info[1].department\"\r\n                placeholder=\"请选择科室\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in sectionOffice('', 'arr')\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item\r\n              v-if=\"pageRole !== '营养师' || pageType === 'consult'\"\r\n              label=\"图文问诊单价\"\r\n              prop=\"single_ask_price_info[1].price\"\r\n              :rules=\"[\r\n                {\r\n                  required: true,\r\n                  message: '请填写图文问诊单价，保留两位小数',\r\n                  trigger: 'change'\r\n                }\r\n              ]\"\r\n            >\r\n              <el-input\r\n                @input=\"setNumber($event, 1)\"\r\n                @change=\"toFixedNum($event, 1)\"\r\n                v-model.trim=\"ruleForm.single_ask_price_info[1].price\"\r\n                placeholder=\"请填写图文问诊单价，保留两位小数\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </div>\r\n          <el-form-item v-if=\"pageType === 'consult' && !showDepartment\">\r\n            <el-button type=\"primary\" plain @click=\"addDepartment\"\r\n              >添加服务科室</el-button\r\n            >\r\n          </el-form-item>\r\n          <el-form-item\r\n            v-if=\"pageType !== 'consult'\"\r\n            label=\"服务上限\"\r\n            prop=\"limit\"\r\n            :rules=\"[\r\n              { required: true, message: '请输入服务上限', trigger: 'blur' }\r\n            ]\"\r\n          >\r\n            <el-input-number\r\n              v-model=\"ruleForm.limit\"\r\n              :min=\"ruleForm.fd_resource_curr\"\r\n            ></el-input-number>\r\n            <el-tooltip\r\n              class=\"item color-576277\"\r\n              effect=\"dark\"\r\n              :content=\"\r\n                `请输入正整数，服务上限值不可低于当前已占用的服务资源:${ruleForm.limit}`\r\n              \"\r\n              placement=\"top\"\r\n            >\r\n              <span>\r\n                &nbsp;&nbsp;\r\n                <i class=\"el-icon-info\" />\r\n              </span>\r\n            </el-tooltip>\r\n          </el-form-item>\r\n          <el-form-item\r\n            label=\"头像\"\r\n            prop=\"imageUrl\"\r\n            :rules=\"[\r\n              { required: true, message: '请上传头像', trigger: 'change' }\r\n            ]\"\r\n          >\r\n            <el-upload\r\n              class=\"avatar-uploader\"\r\n              action\r\n              :show-file-list=\"false\"\r\n              :on-success=\"handleAvatarSuccess\"\r\n              :http-request=\"uploadFunc\"\r\n              :before-upload=\"beforeAvatarUpload\"\r\n            >\r\n              <img\r\n                v-if=\"ruleForm.imageUrl\"\r\n                :src=\"ruleForm.imageUrl\"\r\n                class=\"avatar\"\r\n              />\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n              <div slot=\"tip\" class=\"el-upload__tip tips\">\r\n                图片格式支持：BMP、JPEG、JPG、PNG，大小不超过2M\r\n                上传的头像将在小程序展示，请慎重上传！\r\n                为保证美观，请上传长宽相等的图片\r\n              </div>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item\r\n            label=\"职业经历\"\r\n            prop=\"desc\"\r\n            :rules=\"[\r\n              { required: true, message: '请输入职业经历', trigger: 'blur' }\r\n            ]\"\r\n          >\r\n            <el-input\r\n              type=\"textarea\"\r\n              v-model.trim=\"ruleForm.desc\"\r\n              placeholder=\"请填写成员职业经历，填写完成的信息将在小程序展示，请慎重填写！\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            prop=\"skill\"\r\n            label=\"专业擅长\"\r\n            :rules=\"[\r\n              { required: true, message: '请输入成员擅长', trigger: 'blur' }\r\n            ]\"\r\n          >\r\n            <el-input\r\n              type=\"textarea\"\r\n              v-model.trim=\"ruleForm.skill\"\r\n              placeholder=\"请填写成员专业擅长，填写完成的信息将在小程序展示，请慎重填写！\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </div>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\r\n            >确认{{ this.pageAction }}</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <el-dialog\r\n      :title=\"`${pageRole}信息确认`\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"600px\"\r\n    >\r\n      <div class=\"confirm\" style=\"overflow:auto;max-height:500px\">\r\n        <div v-for=\"(item, index) in confrimItem\" :key=\"item.label + index\">\r\n          <div v-if=\"item.show\" class=\"confirm__item\">\r\n            <div v-if=\"item.label\" class=\"confirm__item--label\">\r\n              {{ item.label }}：\r\n            </div>\r\n            <div v-html=\"item.html\" class=\"confirm__item--content\">\r\n              {{ item.html }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"confirm__item\" v-if=\"pageAction === '编辑'\">\r\n          <div class=\"confirm__item--label\">\r\n            <span style=\"color: red\">*</span>修改原因：\r\n          </div>\r\n          <div class=\"confirm__item--content\">\r\n            <el-input\r\n              type=\"textarea\"\r\n              :rows=\"2\"\r\n              placeholder=\"请输入内容\"\r\n              v-model=\"editReason\"\r\n            ></el-input>\r\n          </div>\r\n        </div>\r\n        <div class=\"tips margin-left-20\">\r\n          提交的部分信息将展示在小程序并影响业务，请确保信息的准确性!\r\n        </div>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <div style=\"text-align: center\">\r\n          <el-button @click=\"dialogVisible = false\">返回修改</el-button>\r\n          <el-button type=\"primary\" @click=\"confirmForm\"\r\n            >确认{{ this.pageAction }}</el-button\r\n          >\r\n        </div>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Vue from 'vue'\r\nimport { upload } from '@/api/upload'\r\nimport { sectionOffice, systemRole } from '@/utils/dictionary'\r\n\r\nimport { fenToYuan } from '@/filters'\r\nimport {\r\n  updateMember,\r\n  updateSingleAskMember,\r\n  getMemberDetail,\r\n  getSingleAskMemberDetail,\r\n  createMember,\r\n  createSingleAskMember\r\n} from '@/api/professionalRole'\r\nimport Role from '@/components/ProfessionalRole/Role'\r\nimport _ from 'lodash'\r\nconst genderFilter = Vue.filter('gender')\r\nexport default {\r\n  components: {\r\n    Role\r\n  },\r\n  data() {\r\n    var checkPhone = (rule, value, callback) => {\r\n      const phoneReg = /^1(3|4|5|6|7|8|9)\\d{9}$/\r\n      if (!value) {\r\n        return callback(new Error('电话号码不能为空'))\r\n      }\r\n      setTimeout(() => {\r\n        // Number.isInteger是es6验证数字是否为整数的方法,但是我实际用的时候输入的数字总是识别成字符串\r\n        // 所以我就在前面加了一个+实现隐式转换\r\n        if (!Number.isInteger(+value)) {\r\n          callback(new Error('请输入数字值'))\r\n        } else {\r\n          if (phoneReg.test(value)) {\r\n            callback()\r\n          } else {\r\n            callback(new Error('电话号码格式不正确'))\r\n          }\r\n        }\r\n      }, 100)\r\n    }\r\n    return {\r\n      confrimItem: [],\r\n      editReason: '',\r\n      currentId: '',\r\n      roleName: '',\r\n      checkPhone: checkPhone,\r\n      dialogVisible: false,\r\n      uploading: false,\r\n      activeRole: '',\r\n      ruleForm: {\r\n        name: '',\r\n        gender: 0,\r\n        phone: '',\r\n        limit: 0,\r\n        imageUrl: '',\r\n        single_ask_price_info: [{ department: '', price: '' }],\r\n        department: '',\r\n        desc: '',\r\n        skill: '',\r\n        fd_resource_curr: 0\r\n      },\r\n      pageType: '',\r\n      showDepartment: false\r\n    }\r\n  },\r\n  watch: {\r\n    '$route.path'(val) {\r\n      this.getPageType()\r\n    }\r\n  },\r\n  created() {\r\n    this.getPageType()\r\n    this.getProfessionalRoleById()\r\n  },\r\n  computed: {\r\n    pageTitle() {\r\n      return this.pageAction + this.pageRole\r\n    },\r\n    pageRole() {\r\n      return systemRole(this.$route.params.role, '', '')\r\n    },\r\n    pageAction() {\r\n      return this.$route.params.id === 'new' ? '新增' : '编辑'\r\n    }\r\n  },\r\n  methods: {\r\n    // 根据所选成员给表单赋值\r\n    sectionOffice,\r\n    systemRole,\r\n    fenToYuan,\r\n    setNumber(value, index) {\r\n      if (isNaN(Number(value)))\r\n        this.ruleForm.single_ask_price_info[index].price = ''\r\n    },\r\n    toFixedNum(value, index) {\r\n      if (!value) return\r\n      if (Number(value)) {\r\n        this.ruleForm.single_ask_price_info[index].price = Number(\r\n          value\r\n        ).toFixed(2)\r\n      }\r\n    },\r\n    getConfrimItem() {\r\n      const formData = this.ruleForm\r\n      let otherDepartmentInfo = ''\r\n      let priceInfo = ''\r\n      let isSingleAsk = false\r\n      if (this.pageType === 'consult') {\r\n        isSingleAsk = true\r\n        priceInfo = formData.single_ask_price_info\r\n        if (this.showDepartment) {\r\n          otherDepartmentInfo =\r\n            this.sectionOffice(priceInfo[1].department, '', true) +\r\n            '（￥' +\r\n            priceInfo[1].price +\r\n            '）'\r\n        }\r\n      }\r\n      let arr = [\r\n        {\r\n          show: true,\r\n          label: '姓名',\r\n          html: this.roleName || formData.name\r\n        },\r\n        {\r\n          show: true,\r\n          label: '性别',\r\n          html: this.genderFilter(formData.gender)\r\n        },\r\n        {\r\n          show: true,\r\n          label: '联系方式',\r\n          html: formData.phone\r\n        },\r\n        {\r\n          show: this.pageRole !== '营养师' && !isSingleAsk,\r\n          label: '科室',\r\n          html: this.sectionOffice(formData.department, '', true)\r\n        },\r\n        {\r\n          show: isSingleAsk,\r\n          label: '服务科室及单价',\r\n          html: isSingleAsk\r\n            ? this.sectionOffice(priceInfo[0].department, '', true) +\r\n              '（￥' +\r\n              priceInfo[0].price +\r\n              '）&nbsp;' +\r\n              otherDepartmentInfo\r\n            : ''\r\n        },\r\n        {\r\n          show: !isSingleAsk,\r\n          label: '服务上限',\r\n          html: formData.limit\r\n        },\r\n        {\r\n          show: true,\r\n          label: '头像',\r\n          html:\r\n            '<img style=\"width: 50px;height: 50px;border-radius: 50%;vertical-align: middle;\" src=' +\r\n            formData.imageUrl +\r\n            ' />'\r\n        },\r\n        {\r\n          show: true,\r\n          label: '职业经历',\r\n          html: formData.desc\r\n        },\r\n        {\r\n          show: true,\r\n          label: '专业擅长',\r\n          html: formData.skill\r\n        }\r\n      ]\r\n      this.confrimItem = arr\r\n    },\r\n    getPageType() {\r\n      this.pageType =\r\n        this.$route.path.indexOf('consultation') !== -1\r\n          ? 'consult'\r\n          : 'familyDoctor'\r\n    },\r\n    addDepartment() {\r\n      this.ruleForm.single_ask_price_info.push({ department: '', price: '' })\r\n      this.showDepartment = true\r\n    },\r\n    removeDepartment() {\r\n      this.ruleForm.single_ask_price_info = _.remove(\r\n        this.ruleForm.single_ask_price_info,\r\n        function(n, index) {\r\n          return !(index === 1)\r\n        }\r\n      )\r\n      this.showDepartment = false\r\n    },\r\n    getRoleInfo(roleInfo) {\r\n      this.roleName = roleInfo.name\r\n      this.ruleForm.imageUrl = roleInfo.avatar\r\n      this.ruleForm.gender = roleInfo.gender\r\n      this.ruleForm.limit = roleInfo.fd_resource_curr\r\n      this.ruleForm.phone = roleInfo.mobile\r\n    },\r\n    handleAvatarSuccess(res, file) {\r\n      this.uploading = false\r\n      this.$message({ message: '上传成功', type: 'success' })\r\n    },\r\n    async uploadFunc(option) {\r\n      const data = await upload(option.file, progress => {})\r\n      this.ruleForm.imageUrl = data.url\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      this.uploading = true\r\n      const isJPG =\r\n        ['image/png', 'image/jpeg', 'image/jpg', 'image/bmp'].indexOf(\r\n          file.type\r\n        ) >= 0\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传头像图片只能是 JPG 格式!')\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!')\r\n      }\r\n      return isJPG && isLt2M\r\n    },\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          if (\r\n            this.showDepartment &&\r\n            this.ruleForm.single_ask_price_info[0].department ===\r\n              this.ruleForm.single_ask_price_info[1].department\r\n          ) {\r\n            this.$message.error('服务科室不能相同')\r\n            return false\r\n          }\r\n          this.dialogVisible = true\r\n          this.getConfrimItem()\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    confirmForm() {\r\n      const params = {\r\n        mobile: this.ruleForm.phone,\r\n        fd_resource: this.ruleForm.limit,\r\n        avatar: this.ruleForm.imageUrl,\r\n        description: this.ruleForm.desc,\r\n        expert: this.ruleForm.skill\r\n      }\r\n      if (this.pageRole !== '营养师' && this.pageType !== 'consult') {\r\n        params.department = this.ruleForm.department\r\n      }\r\n      params.bus_role = this.$route.params.role\r\n      if (this.pageType === 'consult') {\r\n        params.single_ask_bus_role = params.bus_role\r\n        params.single_ask_price_info = this.ruleForm.single_ask_price_info\r\n      }\r\n      if (this.pageAction === '新增') {\r\n        params.id = this.ruleForm.name\r\n        let apiName =\r\n          this.pageType === 'consult' ? createSingleAskMember : createMember\r\n        apiName(params).then(res => {\r\n          this.$message.success('新增业务角色成功')\r\n          this.dialogVisible = false\r\n          this.$router.back(-1)\r\n        })\r\n      } else if (this.pageAction === '编辑') {\r\n        if (!this.editReason) {\r\n          this.$message.warning('请填写修改原因')\r\n          return\r\n        }\r\n        params.update_remark = this.editReason\r\n        const updateApi =\r\n          this.pageType === 'consult' ? updateSingleAskMember : updateMember\r\n        updateApi(this.currentId, params).then(res => {\r\n          this.$message.success('更新业务角色成功')\r\n          this.dialogVisible = false\r\n          this.$router.back(-1)\r\n        })\r\n      }\r\n    },\r\n    cancelDialogFun() {\r\n      this.getProfessionalRoleById()\r\n    },\r\n    genderFilter,\r\n    getProfessionalRoleById() {\r\n      const roleId = this.$route.params.id\r\n      if (roleId === 'new') {\r\n        return\r\n      }\r\n      let getDetailApi =\r\n        this.pageType === 'consult' ? getSingleAskMemberDetail : getMemberDetail\r\n      getDetailApi(roleId, '').then(res => {\r\n        this.currentId = res.data._id\r\n        this.ruleForm.name = res.data.name\r\n        this.ruleForm.imageUrl = res.data.avatar\r\n        this.ruleForm.gender = res.data.gender\r\n        this.ruleForm.phone = res.data.mobile\r\n        this.ruleForm.desc = res.data.description\r\n        this.ruleForm.skill = res.data.expert\r\n        this.ruleForm.department = res.data.department\r\n        this.ruleForm.limit = res.data.fd_resource\r\n        this.ruleForm.fd_resource_curr = res.data.fd_resource_curr\r\n        const priceInfo = res.data.single_ask_price_info\r\n        if (priceInfo) {\r\n          for (let i = 0; i < priceInfo.length; i++) {\r\n            priceInfo[i].price = this.fenToYuan(priceInfo[i].price)\r\n          }\r\n          this.ruleForm.single_ask_price_info = priceInfo\r\n        }\r\n        if (\r\n          res.data.single_ask_price_info &&\r\n          res.data.single_ask_price_info.length > 1\r\n        ) {\r\n          this.showDepartment = true\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.tips {\r\n  font-size: 12px;\r\n  color: #f8747f;\r\n}\r\n.color-576277 {\r\n  color: #576277;\r\n}\r\n.icon-item {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: -20px;\r\n}\r\n.role-form {\r\n  margin-left: 280px;\r\n  width: 40%;\r\n}\r\n.avatar {\r\n  display: block;\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n.section_info_box {\r\n  .item_label {\r\n    font-weight: bold;\r\n  }\r\n}\r\n.section_box {\r\n  position: relative;\r\n  padding: 20px 10px 0 5px;\r\n  border: 1px solid #dcdfe6;\r\n  margin-bottom: 20px;\r\n  .close_icon {\r\n    position: absolute;\r\n    top: -8px;\r\n    right: -8px;\r\n    padding: 2px;\r\n    color: #fff;\r\n    background: #f8747f;\r\n    border: 1px solid #f8747f;\r\n    border-radius: 10px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n.confirm {\r\n  line-height: 20px;\r\n  font-size: 14px;\r\n  &__item {\r\n    display: flex;\r\n    margin-bottom: 12px;\r\n    &--label {\r\n      font-weight: bold;\r\n      text-align: right;\r\n      flex: 34px;\r\n    }\r\n    &--content {\r\n      flex: 5;\r\n      padding-left: 30px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.role-form {\r\n  .el-select {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n<style>\r\n.avatar-uploader .el-upload {\r\n  position: relative;\r\n  overflow: hidden;\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  width: 100px;\r\n  height: 100px;\r\n  line-height: 100px;\r\n  font-size: 28px;\r\n  text-align: center;\r\n  color: #8c939d;\r\n}\r\n.avatar {\r\n  display: block;\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2cdf2b38&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2cdf2b38&scoped=true&lang=scss&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&lang=scss&\"\nimport style2 from \"./index.vue?vue&type=style&index=2&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2cdf2b38\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=scss&\""],"sourceRoot":""}