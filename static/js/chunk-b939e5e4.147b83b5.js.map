{"version":3,"sources":["webpack:///./src/views/medical-service/grow-table/seeDetails.vue?0d44","webpack:///./src/api/grow-table.js","webpack:///./src/views/medical-service/grow-table/seeDetails.vue?0cb7","webpack:///src/views/medical-service/grow-table/seeDetails.vue","webpack:///./src/views/medical-service/grow-table/seeDetails.vue?ccdd","webpack:///./src/views/medical-service/grow-table/seeDetails.vue"],"names":["getGrowList","params","request","url","method","createGrow","data","updateGrow","id","deleteGrow","getGrowDetail","getGrowStatus","getGrowthList","getGrowthDetail","getGrowthStatus","sendGrowth","createFeedback","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","babyInfo","user","avatar","_v","_s","nickname","_e","name","birthday","on","getActiveList","model","value","callback","$$v","activeName","expression","_l","ref","label","num","key","slot","tableData","pageType","scopedSlots","_u","fn","scope","_f","Date","row","operateTime","suggestion","status","$store","state","bus_role","isMyUser","$event","sendClick","getOperation","seeDetail","undefined","growDialogVisible","rowInfo","confirmSend","staticRenderFns","props","type","String","default","member","replace","allDataArr","testedArr","suggestedArr","statusText","tabArr","computed","getStatus","str","isHasUser","created","$route","window","localStorage","setItem","watch","methods","$router","push","query","chat","growthId","$emit","$message","warning","beforeRouteLeave","to","meta","title","next","component"],"mappings":"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","file":"static/js/chunk-b939e5e4.147b83b5.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seeDetails.vue?vue&type=style&index=0&id=5c71082a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seeDetails.vue?vue&type=style&index=0&id=5c71082a&scoped=true&lang=scss&\"","import request from '@/utils/request'\r\n\r\n//  获取发育量模板列表\r\nexport function getGrowList(params) {\r\n  return request({\r\n    url: '/growth_info/list',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n//  创建发育量模板\r\nexport function createGrow(data) {\r\n  return request({\r\n    url: '/growth_info',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n//  更新发育量模板\r\nexport function updateGrow(id, data) {\r\n  return request({\r\n    url: '/growth_info/' + id,\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n//  删除发育量模板\r\nexport function deleteGrow(data) {\r\n  return request({\r\n    url: '/growth_info',\r\n    method: 'delete',\r\n    data\r\n  })\r\n}\r\n//  发育量模板详情\r\nexport function getGrowDetail(id) {\r\n  return request({\r\n    url: '/growth_info/' + id,\r\n    method: 'get'\r\n  })\r\n}\r\n//  发育量模板状态更改\r\nexport function getGrowStatus(id) {\r\n  return request({\r\n    url: '/growth_info/' + id + '/status',\r\n    method: 'put'\r\n  })\r\n}\r\n//  获取发育量列表\r\nexport function getGrowthList(params) {\r\n  return request({\r\n    url: '/family_member/in_server_list',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n//  获取发育量列表\r\nexport function getGrowthDetail(params) {\r\n  return request({\r\n    url: 'baby_growth_info/growth',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n//  获取发育详情\r\nexport function getGrowthStatus(id) {\r\n  return request({\r\n    url: 'baby_growth_info/detail/' + id,\r\n    method: 'get'\r\n  })\r\n}\r\n//  发送发育量表\r\nexport function sendGrowth(id) {\r\n  return request({\r\n    url: 'baby_growth_info/send/' + id,\r\n    method: 'get'\r\n  })\r\n}\r\n//  发送发育量表\r\nexport function createFeedback(data) {\r\n  return request({\r\n    url: 'baby_growth_info/content',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"see-details\"},[_c('el-row',{staticClass:\"user-info\"},[_c('el-col',{staticStyle:{\"max-width\":\"80px\"},attrs:{\"span\":4}},[_c('el-avatar',{attrs:{\"src\":_vm.babyInfo.user && _vm.babyInfo.user.avatar}})],1),_c('el-col',{attrs:{\"span\":20}},[_c('span',{staticClass:\"item-title\"},[_vm._v(\"用户名称：\")]),_c('span',{staticClass:\"item-text\"},[_vm._v(_vm._s(_vm.babyInfo.user && _vm.babyInfo.user.nickname)+\"  \"),(_vm.replace)?_c('svg-icon',{attrs:{\"icon-class\":\"replace\"}}):_vm._e()],1)])],1),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('span',{staticClass:\"item-title\"},[_vm._v(\"宝宝：\")]),_c('span',{staticClass:\"item-text\"},[_vm._v(_vm._s(_vm.babyInfo.name))]),_c('span',{staticClass:\"item-title\",staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(\"宝宝月龄：\")]),_c('span',{staticClass:\"item-text\"},[_vm._v(_vm._s(_vm.babyInfo.birthday))])])],1),_c('el-tabs',{staticClass:\"professional-role__header__tabs\",staticStyle:{\"margin-top\":\"30px\"},on:{\"tab-click\":_vm.getActiveList},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},_vm._l((_vm.tabArr),function(ref){\nvar label = ref.label;\nvar name = ref.name;\nvar num = ref.num;\nreturn _c('el-tab-pane',{key:name,attrs:{\"name\":name}},[_c('span',{staticClass:\"professional-role__header__tabs__slot-label\",attrs:{\"slot\":\"label\"},slot:\"label\"},[(num > 0)?_c('el-badge',{staticClass:\"item\",attrs:{\"value\":num}}):_vm._e(),_vm._v(_vm._s(label))],1)])}),1),_c('el-table',{staticStyle:{\"width\":\"100%\",\"min-width\":\"400px\"},attrs:{\"data\":_vm.tableData,\"empty-text\":\"暂无数据\"}},[_c('el-table-column',{attrs:{\"width\":_vm.pageType === 'chat' ? '60px' : '110px',\"prop\":\"monthAge\",\"label\":\"测试月龄\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"发育量表名称\",\"align\":\"center\",\"width\":_vm.pageType === 'chat' ? '110px' : '250px'}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"当前状态\",\"align\":\"center\",\"width\":_vm.pageType === 'chat' ? '100px' : '150px'}}),(_vm.pageType === 'health')?_c('el-table-column',{attrs:{\"label\":\"最近操作时间\",\"width\":\"220px\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm._f(\"formatTime\")(new Date(scope.row.operateTime)))+\"\\n      \")]}}],null,false,648558294)}):_vm._e(),(_vm.pageType === 'health')?_c('el-table-column',{attrs:{\"prop\":\"name\",\"align\":\"center\",\"label\":\"医生建议\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.suggestion ? scope.row.suggestion : '暂无数据')+\"\\n      \")]}}],null,false,135623844)}):_vm._e(),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":_vm.pageType === 'chat' ? '100px' : '200px',\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return (scope.row)?[_c('el-badge',{staticClass:\"dot-badge\",attrs:{\"is-dot\":(scope.row.status &&\n              scope.row.status === '待发送' &&\n              _vm.$store.state.user.bus_role === 'hm') ||\n              (scope.row.status && scope.row.status === '待反馈') ||\n              (scope.row.status &&\n                scope.row.status === '反馈已保存' &&\n                _vm.$store.state.user.bus_role === 'doctor')}},[(\n              (scope.row.status && scope.row.status !== '待测试') ||\n                scope.row.status !== '已完成'\n            )?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\",\"disabled\":!_vm.isMyUser},on:{\"click\":function($event){_vm.sendClick(_vm.getOperation(scope.row.status), scope.row)}}},[_vm._v(_vm._s(_vm.getOperation(scope.row.status)))]):_vm._e()],1),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.seeDetail(scope.row)}}},[_vm._v(\"查看\")])]:undefined}}],null,true)})],1),_c('el-dialog',{attrs:{\"title\":\"发送发育量表提醒\",\"visible\":_vm.growDialogVisible,\"width\":\"400px\",\"center\":\"\",\"top\":\"30vh\",\"modal\":false},on:{\"update:visible\":function($event){_vm.growDialogVisible=$event}}},[_c('span',{staticStyle:{\"line-height\":\"24px\"}},[_vm._v(\"操作成功后，您将发送【\"+_vm._s(_vm.rowInfo.name)+\"】给【\"+_vm._s(_vm.babyInfo.name)+\"】，如果确认无误，请单击确认发送\")]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticStyle:{\"padding\":\"6px 15px\",\"height\":\"32px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmSend}},[_vm._v(\"确认发送\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"see-details\">\r\n    <el-row class=\"user-info\">\r\n      <el-col :span=\"4\" style=\"max-width:80px;\">\r\n        <el-avatar :src=\"babyInfo.user && babyInfo.user.avatar\" />\r\n      </el-col>\r\n      <el-col :span=\"20\">\r\n        <span class=\"item-title\">用户名称：</span>\r\n        <span class=\"item-text\"\r\n          >{{ babyInfo.user && babyInfo.user.nickname }} &nbsp;<svg-icon\r\n            v-if=\"replace\"\r\n            icon-class=\"replace\"\r\n          />\r\n        </span>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <span class=\"item-title\">宝宝：</span\r\n        ><span class=\"item-text\">{{ babyInfo.name }}</span>\r\n        <span class=\"item-title\" style=\"margin-left:10px;\">宝宝月龄：</span\r\n        ><span class=\"item-text\">{{ babyInfo.birthday }}</span>\r\n      </el-col>\r\n    </el-row>\r\n    <el-tabs\r\n      v-model=\"activeName\"\r\n      style=\"margin-top:30px;\"\r\n      class=\"professional-role__header__tabs\"\r\n      @tab-click=\"getActiveList\"\r\n    >\r\n      <el-tab-pane\r\n        v-for=\"{ label, name, num } in tabArr\"\r\n        :key=\"name\"\r\n        :name=\"name\"\r\n      >\r\n        <span slot=\"label\" class=\"professional-role__header__tabs__slot-label\"\r\n          ><el-badge v-if=\"num > 0\" :value=\"num\" class=\"item\" />{{\r\n            label\r\n          }}</span\r\n        >\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <el-table\r\n      :data=\"tableData\"\r\n      empty-text=\"暂无数据\"\r\n      style=\"width:100%;min-width:400px;\"\r\n    >\r\n      <el-table-column\r\n        :width=\"pageType === 'chat' ? '60px' : '110px'\"\r\n        prop=\"monthAge\"\r\n        label=\"测试月龄\"\r\n        align=\"center\"\r\n      />\r\n      <el-table-column\r\n        prop=\"name\"\r\n        label=\"发育量表名称\"\r\n        align=\"center\"\r\n        :width=\"pageType === 'chat' ? '110px' : '250px'\"\r\n      />\r\n      <el-table-column\r\n        prop=\"status\"\r\n        label=\"当前状态\"\r\n        align=\"center\"\r\n        :width=\"pageType === 'chat' ? '100px' : '150px'\"\r\n      />\r\n      <el-table-column\r\n        v-if=\"pageType === 'health'\"\r\n        label=\"最近操作时间\"\r\n        width=\"220px\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ new Date(scope.row.operateTime) | formatTime() }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        v-if=\"pageType === 'health'\"\r\n        prop=\"name\"\r\n        align=\"center\"\r\n        label=\"医生建议\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.suggestion ? scope.row.suggestion : '暂无数据' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        :width=\"pageType === 'chat' ? '100px' : '200px'\"\r\n        align=\"center\"\r\n      >\r\n        <template v-if=\"scope.row\" slot-scope=\"scope\">\r\n          <el-badge\r\n            :is-dot=\"\r\n              (scope.row.status &&\r\n                scope.row.status === '待发送' &&\r\n                $store.state.user.bus_role === 'hm') ||\r\n                (scope.row.status && scope.row.status === '待反馈') ||\r\n                (scope.row.status &&\r\n                  scope.row.status === '反馈已保存' &&\r\n                  $store.state.user.bus_role === 'doctor')\r\n            \"\r\n            class=\"dot-badge\"\r\n          >\r\n            <el-button\r\n              v-if=\"\r\n                (scope.row.status && scope.row.status !== '待测试') ||\r\n                  scope.row.status !== '已完成'\r\n              \"\r\n              type=\"text\"\r\n              size=\"small\"\r\n              :disabled=\"!isMyUser\"\r\n              @click=\"sendClick(getOperation(scope.row.status), scope.row)\"\r\n              >{{ getOperation(scope.row.status) }}</el-button\r\n            >\r\n          </el-badge>\r\n          <el-button type=\"text\" size=\"small\" @click=\"seeDetail(scope.row)\"\r\n            >查看</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-dialog\r\n      title=\"发送发育量表提醒\"\r\n      :visible.sync=\"growDialogVisible\"\r\n      width=\"400px\"\r\n      center\r\n      top=\"30vh\"\r\n      :modal=\"false\"\r\n    >\r\n      <span style=\"line-height: 24px;\"\r\n        >操作成功后，您将发送【{{ rowInfo.name }}】给【{{\r\n          babyInfo.name\r\n        }}】，如果确认无误，请单击确认发送</span\r\n      >\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button\r\n          type=\"primary\"\r\n          style=\"padding: 6px 15px;height: 32px;\"\r\n          @click=\"confirmSend\"\r\n          >确认发送</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getGrowthDetail, sendGrowth } from '@/api/grow-table'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  props: {\r\n    pageType: {\r\n      type: String,\r\n      default: 'health'\r\n    },\r\n    member: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      replace: false,\r\n      activeName: 'all',\r\n      tableData: [],\r\n      allDataArr: [],\r\n      testedArr: [],\r\n      suggestedArr: [],\r\n      babyInfo: {},\r\n      statusText: '',\r\n      rowInfo: {},\r\n      tabArr: [\r\n        {\r\n          label: '全部',\r\n          name: 'all',\r\n          num: 0\r\n        },\r\n        {\r\n          label: '医生已反馈',\r\n          name: 'suggested',\r\n          num: 0\r\n        },\r\n        {\r\n          label: '已测',\r\n          name: 'tested',\r\n          num: 0\r\n        }\r\n      ],\r\n      growDialogVisible: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['isMyUser']),\r\n    getStatus() {\r\n      return function(str) {\r\n        if (str === 'un_send') return '未发送'\r\n        if (str === 'pre_send') return '待发送'\r\n        if (str === 'send') return '待测试'\r\n        if (str === 'tested') return '待反馈'\r\n        if (str === 'save') return '反馈已保存'\r\n        if (str === 'suggested') return '已完成'\r\n      }\r\n    },\r\n    getOperation() {\r\n      return function(str) {\r\n        if (str === '未发送' || str === '待发送') return '发送'\r\n        if (str === '待反馈') return '填写反馈'\r\n        if (str === '反馈已保存') return '编辑反馈'\r\n      }\r\n    },\r\n    isHasUser() {\r\n      return function(obj) {\r\n        return (\r\n          obj[this.$store.state.user.bus_role] === this.$store.state.user.id\r\n        )\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getGrowthDetail()\r\n    if (this.$route.params.id) {\r\n      window.localStorage.setItem('paramsID', this.$route.params.id)\r\n    }\r\n  },\r\n  watch: {\r\n    member() {\r\n      this.getGrowthDetail()\r\n    }\r\n  },\r\n  methods: {\r\n    getActiveList() {\r\n      const name = this.activeName\r\n      this.tableData =\r\n        name === 'all'\r\n          ? this.allDataArr\r\n          : name === 'suggested'\r\n          ? this.suggestedArr\r\n          : this.testedArr\r\n    },\r\n    seeDetail(row) {\r\n      this.statusText = row.status\r\n      if (this.$route.name === 'growListDetail') {\r\n        this.statusText = row.status\r\n        this.$router.push({\r\n          name: 'growStatusDetail',\r\n          params: { id: row.id },\r\n          query: { status: this.statusText }\r\n        })\r\n      } else {\r\n        this.$store.state.chat.growthId = row.id\r\n        this.$emit('setLookStatus', row.id)\r\n      }\r\n    },\r\n    async getGrowthDetail() {\r\n      const { data, code } = await getGrowthDetail({\r\n        member: this.$route.params.id || this.member,\r\n        needSort: this.pageType === 'health'\r\n      })\r\n      if (code === 20000) {\r\n        // 发育量表的代班情况\r\n        this.replace = data.baby.is_replace\r\n        this.babyInfo = data.baby\r\n        this.suggestedArr = []\r\n        this.testedArr = []\r\n        this.allDataArr = []\r\n        if (data.list && data.list.length) {\r\n          data.list.map(item => {\r\n            // 已完成-->医生已反馈（按照医生的反馈时间先后顺序）\r\n            if (item.status && item.status === 'suggested') {\r\n              this.suggestedArr.push({\r\n                monthAge: item.month_age,\r\n                name: item.name,\r\n                status: this.getStatus(item.status),\r\n                id: item._id,\r\n                reminded_at: item.reminded_at,\r\n                suggestion: item.suggest_content,\r\n                operateTime: item.operateTime\r\n              })\r\n            }\r\n            // 待反馈-->已测（按照用户提交的顺序）\r\n            else if (item.status && item.status === 'tested') {\r\n              this.testedArr.push({\r\n                monthAge: item.month_age,\r\n                name: item.name,\r\n                status: this.getStatus(item.status),\r\n                id: item._id,\r\n                reminded_at: item.reminded_at,\r\n                suggestion: item.suggest_content,\r\n                operateTime: item.operateTime\r\n              })\r\n            }\r\n            // 全部\r\n            this.allDataArr.push({\r\n              monthAge: item.month_age,\r\n              name: item.name,\r\n              status: this.getStatus(item.status),\r\n              id: item._id,\r\n              reminded_at: item.reminded_at,\r\n              suggestion: item.suggest_content,\r\n              operateTime: item.operateTime\r\n            })\r\n          })\r\n          this.tableData = this.suggestedArr\r\n        } else {\r\n          this.tableData = []\r\n        }\r\n        this.getActiveList()\r\n      }\r\n    },\r\n    sendClick(str, row) {\r\n      this.statusText = row.status\r\n      if (\r\n        (this.$store.state.user.bus_role !== 'hm' && str === '发送') ||\r\n        (this.$store.state.user.bus_role !== 'doctor' && str !== '发送')\r\n      ) {\r\n        return this.$message.warning('没有操作权限')\r\n      }\r\n      if (str === '发送') {\r\n        this.rowInfo = row\r\n        this.growDialogVisible = true\r\n      } else {\r\n        this.$router.push({\r\n          name: 'growStatusDetail',\r\n          params: { id: row.id },\r\n          query: { status: this.statusText }\r\n        })\r\n      }\r\n    },\r\n    async confirmSend() {\r\n      const { data, code } = await sendGrowth(this.rowInfo.id)\r\n      if (code === 20000 && data.result) {\r\n        this.$message.success('发送成功')\r\n        this.getGrowthDetail()\r\n        this.growDialogVisible = false\r\n      } else this.$message.error(data.message)\r\n    }\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    if (\r\n      this.statusText === '未发送' ||\r\n      this.statusText === '待发送' ||\r\n      this.statusText === '待测试'\r\n    ) {\r\n      to.meta.title = '未发送'\r\n    }\r\n    if (this.statusText === '待反馈') to.meta.title = '待反馈'\r\n    if (this.statusText === '反馈已保存') to.meta.title = '填写反馈'\r\n    if (this.statusText === '已完成') to.meta.title = '已完成'\r\n    next()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.see-details {\r\n  padding: 16px 10px;\r\n  .user-info {\r\n    display: flex;\r\n    line-height: 40px;\r\n    margin-bottom: 20px;\r\n    .item-title {\r\n      margin-right: 10px;\r\n      font-weight: 600;\r\n    }\r\n    .item-text {\r\n      margin-right: 20px;\r\n    }\r\n  }\r\n  .dot-badge {\r\n    margin-right: 10px;\r\n    /deep/.el-badge__content.is-dot {\r\n      top: 8px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seeDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seeDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./seeDetails.vue?vue&type=template&id=5c71082a&scoped=true&\"\nimport script from \"./seeDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./seeDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./seeDetails.vue?vue&type=style&index=0&id=5c71082a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c71082a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}