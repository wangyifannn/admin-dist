(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-144eb792"],{5248:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"layout--history":e.isHistory}},["user"===e.result.role?n("div",{staticClass:"user"},[e.isHistory?n("div",[n("p",{staticClass:"title--history"},[n("el-divider",{attrs:{"content-position":"center"}},[e._v(e._s((1===e.result.count?"首次提":2===e.result.count?"第1次追":"第2次追")+"问"))])],1),n("div",{staticClass:"userinfo"},[n("el-avatar",{attrs:{src:e.question.user.avatar}}),n("p",{staticClass:"nickname"},[e._v(e._s(e.question.user.nickname))]),n("p",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(e.result.created_at)))])],1)]):n("div",{staticClass:"title"},[n("p",{staticClass:"text"},[e._v("\n        "+e._s((1===e.result.count?"首次提":2===e.result.count?"第1次追":"第2次追")+"问")+"\n      ")]),n("p",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(new Date(e.result.created_at))))])]),n("div",{staticClass:"content"},[e.showData.length&&!e.isHistory?n("div",e._l(e.showData,(function(t,a){return n("div",{key:a},[t.show?n("div",{staticClass:"row"},[n("div",{staticClass:"label",class:e.type},[e._v(e._s(t.label))]),t.value?n("div",{staticClass:"value"},[e._v(e._s(t.value))]):e._e(),t.html?n("div",{staticClass:"content--text",domProps:{innerHTML:e._s(t.html)}}):e._e()]):e._e()])})),0):e._e(),n("div",{staticClass:"row"},[e.isHistory?n("div",{staticClass:"value"},e._l(e.showData,(function(t,a){return n("span",{key:a},[t.show?n("span",[n("span",[e._v(e._s(t.label))]),t.value?n("span",{staticClass:"value"},[e._v(e._s(t.value))]):e._e(),t.html?n("div",{staticClass:"content--text",domProps:{innerHTML:e._s(t.html)}}):e._e()]):e._e()])})),0):e._e()]),1!==e.result.count?n("div",{staticClass:"content--text",domProps:{innerHTML:e._s(e.result.msg_content.content)}}):e._e(),e.result.msg_content.voice?n("div",{staticClass:"row margin-top-10"},[n("my-audio",{attrs:{msgtime:e.result.msg_content.voice.msgTime?e.result.msg_content.voice.msgTime:"1",src:e.result.msg_content.voice.url,vduration:e.result.msg_content.voice.duration}})],1):e._e(),n("div",{staticClass:"row"},[e.result.msg_content.images.length?n("UploaderList",{staticClass:"uploader",attrs:{disabled:""},model:{value:e.result.msg_content.images,callback:function(t){e.$set(e.result.msg_content,"images",t)},expression:"result.msg_content.images"}}):e._e()],1)])]):e._e(),"admin"===e.result.role?n("div",{staticClass:"admin"},[e.result.admin.name?n("div",{staticClass:"title"},[n("el-avatar",{attrs:{src:e.result.admin.avatar}}),n("p",{staticClass:"name"},[e._v(e._s(e.result.admin.name))]),n("p",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(new Date(e.result.created_at))))])],1):e._e(),e._l(e.result.msg_content,(function(t,a){return n("div",{key:a,staticClass:"content"},[n("div",{staticClass:"content--text",domProps:{innerHTML:e._s(t.content)}}),t.images.length?n("UploaderList",{staticClass:"uploader",attrs:{disabled:""},model:{value:t.images,callback:function(n){e.$set(t,"images",n)},expression:"item.images"}}):e._e()],1)}))],2):e._e()])},s=[],r=n("dc16"),o=n("8975"),i=n("7a26"),c={components:{UploaderList:r["a"]},data:function(){return{type:"",showData:[]}},props:{result:{type:Object,default:function(){}},question:{type:Object,default:function(){}},isHistory:{type:Boolean,default:!1}},created:function(){this.getData(this.result,this.isHistory,this.question)},watch:{question:{handler:function(){this.getData(this.result,this.isHistory,this.question)},deep:!0}},methods:{curStageTxt:o["curStageTxt"],booleanToTxt:o["booleanToTxt"],measureToTxt:o["measureToTxt"],feedModeTxt:o["feedModeTxt"],fenmianModeTxt:o["fenmianModeTxt"],getChankeInfo:i["b"],getEekeOrOldChankeData:function(e,t,n,a){this.showData=[{show:"pediatric"===e,label:"患者性别：",value:1===t.gender?"男":"女"},{show:!0,label:"pediatric"===e?"患者出生日期：":"上次月经日期：",value:this.formatTime(t.birth_day,"{y}-{m}-{d}")},{show:"pediatric"===e,label:"患者年龄：",value:t.age},{show:!0,label:"pediatric"===e?"症状持续时长：":"孕周：",value:"pediatric"===e?t.symptom<90?"".concat(t.symptom,"天"):"超过".concat(t.symptom,"天"):"".concat(Math.floor(t.symptom/7),"周 ").concat(t.symptom%7,"天")},{show:!0,label:n?"":"症状描述：",value:"",html:a.msg_content.content}]},getData:function(e,t,n){var a=e.count,s=n.section_office,r=n.ask_basic_info?n.ask_basic_info:n;if(1===a)if("pediatric"===s||"obstetrics"===s&&r.is_old)this.type="erke",this.getEekeOrOldChankeData(s,r,t,e);else if("obstetrics"===s){this.type="chanke";var o=r.cur_stage;this.showData=this.getChankeInfo(o,r,t,e)}}}},l=c,u=(n("63c8"),n("2877")),d=Object(u["a"])(l,a,s,!1,null,"42247cc4",null);t["a"]=d.exports},"5e51":function(e,t,n){"use strict";var a=n("6ce2"),s=n.n(a);s.a},"63c8":function(e,t,n){"use strict";var a=n("a7ca"),s=n.n(a);s.a},"6ce2":function(e,t,n){},"7a26":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n("2ef0"),s=n.n(a),r=n("4360"),o=n("8975");function i(){return{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}],disabledDate:function(e){var t=(new Date).getTime();return e>t}}}function c(e){var t=e.event,n=e.bus_role;switch(e.type){case"over_time_send_suggestion":return{bgColor:"#FFFFFF",iconType:"icon-fsdz",color:"#0085FF",border:"1px solid #0085FF"};case"round_append":return{bgColor:"#FFFFFF",iconType:"icon-round_append",color:"#67CA39",border:"1px solid #67CA39"};case"admin_end":return{bgColor:"#FFFFFF",iconType:"icon-admin_end",color:"#ED3645",border:"1px solid #ED3645"};case"text_answer":return{bgColor:"#FFFFFF",iconType:"iconhushi",color:"#FF8181",border:"1px solid #FF8181"};case"system":return"error"===t?{bgColor:"#ED3645",iconType:"icon-setting-fill",border:"1px solid #ED3645"}:"warning"===t?{bgColor:"#FFB718",iconType:"icon-setting-fill",border:"1px solid #FFB718"}:"end"===t?{bgColor:"#979797",iconType:"icon-setting-fill",border:"1px solid #979797"}:"transfer_auto_accept"===t?{bgColor:"#67CA39",iconType:"icon-setting-fill",border:"1px solid #67CA39"}:{};case"system-info":return"error"===t?{bgColor:"#ED3645",iconType:"icon-setting-fill",borderColor:"#FFFFFF"}:"warning"===t?{bgColor:"#FFB718",iconType:"icon-setting-fill",borderColor:"#FFFFFF"}:"end"===t?{bgColor:"#979797",iconType:"icon-setting-fill",borderColor:"#FFFFFF"}:{};case"user_ask":return{bgColor:"#FFFFFF",iconType:"icon-signal-fill",color:"#0085FF",border:"1px solid #0085FF"};case"round_apply_transfer":return{bgColor:"#FFFFFF",iconType:"icon-signal-fill",color:"#0085FF",border:"1px solid #0085FF"};case"user_end":return{bgColor:"#FFFFFF",iconType:"el-icon-user-solid",color:"#979797",border:"1px solid #979797"};case"voice_transfer_answer":return{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"};case"text_transfer_answer":return"doctor"===n?{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"}:"dietician"===n?{bgColor:"#fff",iconType:"icon-yingyangshi1",color:"#FFB718",border:"1px solid #FFB718"}:{};case"transfer_apply":return{bgColor:"#FFFFFF",iconType:"iconhushi",color:"#FF8181",border:"1px solid #FF8181"};case"transfer_start":return{bgColor:"#FFFFFF",iconType:"iconhushi",color:"#FF8181",border:"1px solid #FF8181"};case"transfer_accept":return"doctor"===n?{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"}:"dietician"===n?{bgColor:"#fff",iconType:"icon-yingyangshi1",color:"#FFB718",border:"1px solid #FFB718"}:{};case"transfer_reject":return"doctor"===n?{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#67CA39",border:"1px solid #67CA39"}:"dietician"===n?{bgColor:"#fff",iconType:"icon-yingyangshi1",color:"#FFB718",border:"1px solid #FFB718"}:{};case"voice_transfer_end":return{bgColor:"#FFFFFF",iconType:"icon-yisheng",color:"#999",border:"1px solid #999"};case"user_transfer":return{bgColor:"#FFFFFF",iconType:"icon-signal-fill",color:"#0085FF",border:"1px solid #0085FF"};case"iconicon-ysdaiban":return{bgColor:"#FFFFFF",iconType:"iconicon-ysdaiban",color:"#0085FF",border:"1px solid #0085FF"};default:return{}}}function l(e){if(r["a"].state.chat.serviceItem){var t=r["a"].state.chat.serviceItem;if("transfer"===e&&t.length){for(var n=!1,a=0;a<t.length;a++)if(-1!==t[a].indexOf(e))return n=!0,n;return n}var o=s.a.indexOf(t,e);return o=-1!==o,o}}function u(e,t,n,a,s){var r="y-m-d",i=[{show:!0,label:"当前阶段：",value:Object(o["curStageTxt"])(e)},{show:!0,label:"月经史（月经是否规律）：",value:Object(o["booleanToTxt"])(t.is_schedule)},{show:!t.is_schedule&&t.measure_desc,label:"",html:'<span class="color-999">'+t.measure_desc+"</span>",value:""},{show:t.is_schedule,label:"月经周期：",value:t&&t.period_start?t.period_start+"天 至 "+t.period_end+"天":"-"},{show:t.is_schedule,label:"每次持续：",value:t&&t.duration_start?t.duration_start+"天 至 "+t.duration_end+"天":"-"},{show:t.is_schedule,label:"月经量：",value:t&&t.measure?this.measureToTxt(t.measure):"-"},{show:"byz"===e,label:"备孕开始日期：",value:s?this.formatTime(t.started_at,r):t.started_at},{show:"byz"===e,label:"备孕时长：",value:t.bysc},{show:"byz"===e,label:"是否做过孕前检查：",value:Object(o["booleanToTxt"])(t.is_checked)},{show:"byz"===e&&t.is_checked,label:"检查是否有异常：",value:Object(o["booleanToTxt"])(t.has_unusual_status)},{show:"byz"===e&&t.is_checked&&t.has_unusual_status,label:"",html:'<span class="color-999">'+t.unusual_desc+"</span>",value:""},{show:"hyz"===e,label:"末次月经日期：",value:s?this.formatTime(t.last_yuejing_at,r):t.last_yuejing_at},{show:"hyz"===e,label:"预产期：",value:s?this.formatTime(t.yuchan_at,r):t.yuchan_at},{show:"hyz"===e,label:"孕周：",value:t.gestational_weeks?t.gestational_weeks+"周"+t.gestational_days+"天":""},{show:"hyz"===e,label:"是否孕育过有缺陷的宝宝：",value:Object(o["booleanToTxt"])(t.has_unusual_baby)},{show:"hyz"===e&&t.has_unusual_baby,label:"",html:'<span class="color-999">'+t.unusual_baby_desc+"</span>",value:""},{show:"hyz"===e,label:"既往妊娠综合症：",value:Object(o["booleanToTxt"])(t.has_renshen_history,"has")},{show:"hyz"===e&&t.has_renshen_history,label:"",html:'<span class="color-999">'+t.renshen_desc+"</span>",value:""},{show:"crq"===e,label:"分娩日期：",value:s?this.formatTime(t.fenmian_at,r):t.fenmian_at},{show:"crq"===e,label:"分娩方式：",value:Object(o["fenmianModeTxt"])(t.fenmian_mode)},{show:"crq"===e&&"ydfm"===t.fenmian_mode,label:"是否侧切：",value:Object(o["booleanToTxt"])(t.is_ceqie)},{show:"crq"===e,label:"本次产后喂养方式：",value:Object(o["feedModeTxt"])(t.feed_mode)},{show:!!a,label:n?"":"症状描述：",value:"",html:a?a.msg_content.content:""}];return i}},"7af3":function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"k",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"l",(function(){return f})),n.d(t,"a",(function(){return _})),n.d(t,"d",(function(){return p})),n.d(t,"m",(function(){return b}));var a=n("b775");function s(e){return Object(a["a"])({url:"/admin/question/handler",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/admin/question/users",method:"get",params:e})}function o(){return Object(a["a"])({url:"/admin/question/list/doctors",method:"get"})}function i(){return Object(a["a"])({url:"/admin/question/reply",method:"get"})}function c(e){return Object(a["a"])({url:"/admin/question/list/users",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/admin/question/detail/".concat(e),method:"get"})}function u(e){return Object(a["a"])({url:"/admin/question/histories",method:"get",params:e})}function d(){return Object(a["a"])({url:"/admin/question/line",method:"get"})}function m(e){return Object(a["a"])({url:"/admin/question/reply",method:"post",data:e})}function f(){return Object(a["a"])({url:"/question_fast_reply/list",method:"get"})}function _(e){return Object(a["a"])({url:"/question_fast_reply",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/question_fast_reply/".concat(e),method:"delete"})}function b(e){return Object(a["a"])({url:"/question_fast_reply/".concat(e.id),method:"put",data:e})}},"8d90":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"top-overview"},[n("div",{staticClass:"detail-number"},[n("span",{staticClass:"label"},[e._v("问诊编号：")]),e._v(" "+e._s(e.detail.question_ID)+"\n    ")]),n("div",{staticClass:"detail-package"},[n("span",{staticClass:"label"},[e._v("科室： ")]),e._v(e._s(e.detail.section_office)+"\n    ")])]),n("div",{staticClass:"detail"},[n("div",{staticClass:"detail__content"},[n("div",{staticClass:"detail__content__tips"},[e._v("\n        温馨提示：对用户承诺的评价方式为匿名评价，因此当出现对评价内容有疑问的情况，请注意与用户和医疗团队的沟通方式，注意保护用户隐私！\n      ")]),n("div",{staticClass:"detail__content__rate"},[n("div",{staticClass:"rate-title"},[e._v("\n          用户评价\n        ")]),n("div",{staticClass:"rate-content"},[n("div",{staticClass:"rate-content__item"},[n("div",{staticClass:"label"},[e._v("评价时间：")]),n("div",{staticClass:"content"},[e._v("\n              "+e._s(e._f("formatTime")(new Date(e.detail.created_at)))+"\n            ")])]),n("div",{staticClass:"rate-content__item"},[n("div",{staticClass:"label"},[e._v("\n              对"+e._s(e.detail.admin_user&&e.detail.admin_user.name)+"满意度：\n            ")]),n("div",{staticClass:"content"},[e._v(e._s(e.detail.star)+"星")])]),n("div",{staticClass:"multiple-line"},[n("span",{staticClass:"label"},[e._v("评价详情：")]),n("span",{staticClass:"content"},[e._v(e._s(e.detail.content?e.detail.content:"无"))])])])])]),n("div",{staticClass:"detail__history",staticStyle:{overflow:"auto"}},[n("div",{staticClass:"detail__history__title"},[e._v("咨询记录")]),n("ReplyDetail",{attrs:{detail:e.history}})],1)])])},s=[],r=(n("96cf"),n("3b8d")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"margin-left-20 margin-right-20"},[e._l(e.detail.list,(function(t,a){return[n("ResultList",{key:a,attrs:{result:t,question:e.detail.question}})]}))],2)},i=[],c=n("5248"),l={components:{ResultList:c["a"]},props:{detail:{type:Object,default:function(){}}},data:function(){return{}},mounted:function(){},methods:{}},u=l,d=n("2877"),m=Object(d["a"])(u,o,i,!1,null,null,null),f=m.exports,_=n("7af3"),p=n("dffe"),b={name:"DiagnoseDetail",components:{ReplyDetail:f},data:function(){return{detail:{},history:{},labelList:["态度好","响应快","专业可靠","态度好","态度好"]}},mounted:function(){var e=this,t=this.$route.params.id;Object(p["d"])(t).then((function(t){e.detail=t.data,e.getQuestionDetail(e.detail.question)}))},methods:{getQuestionDetail:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["i"])(t);case 2:n=e.sent,a=n.data,this.history=a;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},h=b,F=(n("5e51"),Object(d["a"])(h,a,s,!1,null,"36ae2028",null));t["default"]=F.exports},"91b6":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));n("7f7f"),n("386d"),n("28a5");var a=n("db72"),s=(n("96cf"),n("3b8d")),r=n("b775"),o=function(){return Object(r["a"])({url:"/oss/auth",method:"get"})},i=function(e){return Object(r["a"])({url:e+"?x-oss-process=image/info",method:"get"})},c=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,s,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.oss,s=t.key,o=t.file,c=t.onProgress,l=new FormData,l.append("OSSAccessKeyId",n.OSSAccessKeyId),l.append("success_action_status",200),l.append("policy",n.policy),l.append("Signature",n.Signature),l.append("key",s),l.append("file",o),u="https://pic1.baobaohehu.com/",e.next=11,Object(r["a"])({url:u,method:"post",headers:{"Content-Type":"multipart/form-data"},onUploadProgress:c||null,data:l});case 11:if(u+=s,!(o.type.indexOf("image")>-1)){e.next=18;break}return e.next=15,i(u);case 15:d=e.sent,e.next=27;break;case 18:if(!(o.type.indexOf("video")>-1)){e.next=22;break}d=Object(a["a"])({},o.videoMeta,{size:o.size}),e.next=27;break;case 22:if(!(o.type.indexOf("audio")>-1)){e.next=26;break}d={size:o.size,type:o.type},e.next=27;break;case 26:throw new Error("当前上传的类型不是image或者video；当前上传的类型是"+o.type);case 27:return e.abrupt("return",{url:u,meta:d});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){if(!e||"string"!==typeof e)return!1;var t=e.split("").reverse().join(""),n=t.substring(0,t.search(/\./)).split("").reverse().join("");return n},u=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var a,s,r,i,u,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return a=e.sent,s=a.data,r=Math.floor(99*Math.random())+1,i=(new Date).getTime(),u=l(t.name),i=i+r+"."+u,d="".concat(s.path,"/").concat(s.prefix,"/").concat(i),e.next=11,c({oss:s,key:d,file:t,onProgress:n});case 11:return m=e.sent,e.abrupt("return",m);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},a7ca:function(e,t,n){},dffe:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"g",(function(){return u}));var a=n("b775");function s(e){return Object(a["a"])({url:"/comment_manager/fd_ask/list",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/comment_manager/single_ask/list",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/comment_manager/fd_ask/updateStatus/"+e._id,method:"put",data:e})}function i(e){return Object(a["a"])({url:"/comment_manager/single_ask/updateStatus/"+e._id,method:"put",data:e})}function c(e){return Object(a["a"])({url:"/comment_manager/fd_ask/getComment/"+e,method:"get"})}function l(e){return Object(a["a"])({url:"/comment_manager/single_ask/".concat(e),method:"get"})}function u(e){return Object(a["a"])({url:"/comment_manager/fd_ask/".concat(e),method:"get"})}}}]);
//# sourceMappingURL=chunk-144eb792.05d9f561.js.map