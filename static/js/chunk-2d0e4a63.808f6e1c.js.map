{"version":3,"sources":["webpack:///./node_modules/viewerjs/dist/viewer.esm.js"],"names":["DEFAULTS","initialViewIndex","inline","button","navbar","title","toolbar","tooltip","movable","zoomable","rotatable","scalable","transition","fullscreen","interval","keyboard","backdrop","loading","loop","minWidth","minHeight","zoomRatio","minZoomRatio","maxZoomRatio","zIndex","zIndexInline","url","container","filter","toggleOnDblclick","ready","show","shown","hide","hidden","view","viewed","zoom","zoomed","TEMPLATE","IN_BROWSER","window","WINDOW","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_CLICK","EVENT_DBLCLICK","EVENT_DRAG_START","EVENT_HIDDEN","EVENT_HIDE","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_POINTER_DOWN","PointerEvent","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_SHOW","EVENT_SHOWN","EVENT_TRANSITION_END","EVENT_VIEW","EVENT_VIEWED","EVENT_WHEEL","EVENT_ZOOM","EVENT_ZOOMED","DATA_ACTION","BUTTONS","_typeof","Symbol","iterator","obj","constructor","prototype","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","isString","value","isNaN","Number","isNumber","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","call","e","isFunction","forEach","data","callback","Array","isArray","keys","assign","_len","arguments","args","_key","arg","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","hasClass","classList","contains","className","indexOf","addClass","elem","add","trim","removeClass","remove","replace","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","removeData","undefined","removeAttribute","REGEXP_SPACES","onceSupported","supported","once","listener","options","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","apply","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","document","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","documentElement","clientLeft","top","pageYOffset","clientTop","getTransforms","_ref","rotate","scaleX","scaleY","translateX","translateY","values","push","transform","join","WebkitTransform","msTransform","getImageNameFromURL","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","appendChild","getResponsiveClass","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","Math","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","_ref2","endOnly","pageX","pageY","end","getPointersCenter","count","_ref3","render","this","initContainer","initViewer","initList","renderViewer","containerData","innerWidth","innerHeight","parent","viewerData","max","offsetWidth","offsetHeight","parentData","fulled","viewer","_this","list","items","images","alt","innerHTML","getElementsByTagName","item","firstElementChild","loadImage","renderList","index","outerWidth","resetList","initImage","done","_this2","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","sizingImage","imageInitializing","abort","aspectRatio","min","initialImageData","renderImage","_this3","marginLeft","marginTop","viewing","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","events","bind","canvas","onClick","click","onWheel","wheel","onDragStart","dragstart","onDblclick","dblclick","onPointerDown","pointerdown","ownerDocument","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","unbind","handlers","action","played","stop","exit","full","toggle","reset","prev","play","next","parentElement","load","timeout","clearTimeout","originalImage","parentWidth","parentHeight","filled","keyCode","which","charCode","preventDefault","ctrlKey","tagName","showing","hiding","changedTouches","touch","identifier","pointerType","isSwitchable","change","isShown","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","player","wheeling","setTimeout","delta","deltaY","wheelDelta","methods","immediate","build","transitioning","open","zoomTo","img","querySelector","onViewed","onLoad","complete","maxIndex","move","offsetX","offsetY","moveTo","x","y","changed","hasTooltip","_originalEvent","_zoomable","newWidth","newHeight","oldRatio","originalEvent","offset","center","degree","rotateTo","_scaleX","scale","_scaleY","total","onLoadWhenPlay","requestFullscreen","playing","_this4","exitFullscreen","_this5","_this6","close","_this7","tooltipBox","textContent","round","tooltipping","fading","update","isImg","destroy","querySelectorAll","indexes","destroyed","delaying","initializing","onStart","others","paddingRight","scrollbarWidth","parseFloat","initialBodyPaddingRight","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","absoluteOffsetX","p","AnotherViewer","Viewer","nodeType","Error","init","clientWidth","getComputedStyle","progress","template","custom","zoomButtons","slice","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling"],"mappings":"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","file":"static/js/chunk-2d0e4a63.808f6e1c.js","sourcesContent":["/*!\n * Viewer.js v1.2.0\n * https://fengyuanchen.github.io/viewerjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2018-07-15T10:10:54.376Z\n */\n\nvar DEFAULTS = {\n  /**\n   * Define the initial index of image for viewing.\n   * @type {number}\n   */\n  initialViewIndex: 0,\n\n  /**\n   * Enable inline mode.\n   * @type {boolean}\n   */\n  inline: false,\n\n  /**\n   * Show the button on the top-right of the viewer.\n   * @type {boolean}\n   */\n  button: true,\n\n  /**\n   * Show the navbar.\n   * @type {boolean | number}\n   */\n  navbar: true,\n\n  /**\n   * Specify the visibility and the content of the title.\n   * @type {boolean | number | Function | Array}\n   */\n  title: true,\n\n  /**\n   * Show the toolbar.\n   * @type {boolean | number | Object}\n   */\n  toolbar: true,\n\n  /**\n   * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n   * @type {boolean}\n   */\n  tooltip: true,\n\n  /**\n   * Enable to move the image.\n   * @type {boolean}\n   */\n  movable: true,\n\n  /**\n   * Enable to zoom the image.\n   * @type {boolean}\n   */\n  zoomable: true,\n\n  /**\n   * Enable to rotate the image.\n   * @type {boolean}\n   */\n  rotatable: true,\n\n  /**\n   * Enable to scale the image.\n   * @type {boolean}\n   */\n  scalable: true,\n\n  /**\n   * Enable CSS3 Transition for some special elements.\n   * @type {boolean}\n   */\n  transition: true,\n\n  /**\n   * Enable to request fullscreen when play.\n   * @type {boolean}\n   */\n  fullscreen: true,\n\n  /**\n   * The amount of time to delay between automatically cycling an image when playing.\n   * @type {number}\n   */\n  interval: 5000,\n\n  /**\n   * Enable keyboard support.\n   * @type {boolean}\n   */\n  keyboard: true,\n\n  /**\n   * Enable a modal backdrop, specify `static` for a backdrop\n   * which doesn't close the modal on click.\n   * @type {boolean}\n   */\n  backdrop: true,\n\n  /**\n   * Indicate if show a loading spinner when load image or not.\n   * @type {boolean}\n   */\n  loading: true,\n\n  /**\n   * Indicate if enable loop viewing or not.\n   * @type {boolean}\n   */\n  loop: true,\n\n  /**\n   * Min width of the viewer in inline mode.\n   * @type {number}\n   */\n  minWidth: 200,\n\n  /**\n   * Min height of the viewer in inline mode.\n   * @type {number}\n   */\n  minHeight: 100,\n\n  /**\n   * Define the ratio when zoom the image by wheeling mouse.\n   * @type {number}\n   */\n  zoomRatio: 0.1,\n\n  /**\n   * Define the min ratio of the image when zoom out.\n   * @type {number}\n   */\n  minZoomRatio: 0.01,\n\n  /**\n   * Define the max ratio of the image when zoom in.\n   * @type {number}\n   */\n  maxZoomRatio: 100,\n\n  /**\n   * Define the CSS `z-index` value of viewer in modal mode.\n   * @type {number}\n   */\n  zIndex: 2015,\n\n  /**\n   * Define the CSS `z-index` value of viewer in inline mode.\n   * @type {number}\n   */\n  zIndexInline: 0,\n\n  /**\n   * Define where to get the original image URL for viewing.\n   * @type {string | Function}\n   */\n  url: 'src',\n\n  /**\n   * Define where to put the viewer in modal mode.\n   * @type {string | Element}\n   */\n  container: 'body',\n\n  /**\n   * Filter the images for viewing. Return true if the image is viewable.\n   * @type {Function}\n   */\n  filter: null,\n\n  /**\n   * Indicate if toggle the image size between its natural size\n   * and initial size when double click on the image or not.\n   * @type {boolean}\n   */\n  toggleOnDblclick: true,\n\n  /**\n   * Event shortcuts.\n   * @type {Function}\n   */\n  ready: null,\n  show: null,\n  shown: null,\n  hide: null,\n  hidden: null,\n  view: null,\n  viewed: null,\n  zoom: null,\n  zoomed: null\n};\n\nvar TEMPLATE = '<div class=\"viewer-container\" touch-action=\"none\">' + '<div class=\"viewer-canvas\"></div>' + '<div class=\"viewer-footer\">' + '<div class=\"viewer-title\"></div>' + '<div class=\"viewer-toolbar\"></div>' + '<div class=\"viewer-navbar\">' + '<ul class=\"viewer-list\"></ul>' + '</div>' + '</div>' + '<div class=\"viewer-tooltip\"></div>' + '<div role=\"button\" class=\"viewer-button\" data-viewer-action=\"mix\"></div>' + '<div class=\"viewer-player\"></div>' + '</div>';\n\nvar IN_BROWSER = typeof window !== 'undefined';\nvar WINDOW = IN_BROWSER ? window : {};\nvar NAMESPACE = 'viewer';\n\n// Actions\nvar ACTION_MOVE = 'move';\nvar ACTION_SWITCH = 'switch';\nvar ACTION_ZOOM = 'zoom';\n\n// Classes\nvar CLASS_ACTIVE = NAMESPACE + '-active';\nvar CLASS_CLOSE = NAMESPACE + '-close';\nvar CLASS_FADE = NAMESPACE + '-fade';\nvar CLASS_FIXED = NAMESPACE + '-fixed';\nvar CLASS_FULLSCREEN = NAMESPACE + '-fullscreen';\nvar CLASS_FULLSCREEN_EXIT = NAMESPACE + '-fullscreen-exit';\nvar CLASS_HIDE = NAMESPACE + '-hide';\nvar CLASS_HIDE_MD_DOWN = NAMESPACE + '-hide-md-down';\nvar CLASS_HIDE_SM_DOWN = NAMESPACE + '-hide-sm-down';\nvar CLASS_HIDE_XS_DOWN = NAMESPACE + '-hide-xs-down';\nvar CLASS_IN = NAMESPACE + '-in';\nvar CLASS_INVISIBLE = NAMESPACE + '-invisible';\nvar CLASS_LOADING = NAMESPACE + '-loading';\nvar CLASS_MOVE = NAMESPACE + '-move';\nvar CLASS_OPEN = NAMESPACE + '-open';\nvar CLASS_SHOW = NAMESPACE + '-show';\nvar CLASS_TRANSITION = NAMESPACE + '-transition';\n\n// Events\nvar EVENT_CLICK = 'click';\nvar EVENT_DBLCLICK = 'dblclick';\nvar EVENT_DRAG_START = 'dragstart';\nvar EVENT_HIDDEN = 'hidden';\nvar EVENT_HIDE = 'hide';\nvar EVENT_KEY_DOWN = 'keydown';\nvar EVENT_LOAD = 'load';\nvar EVENT_POINTER_DOWN = WINDOW.PointerEvent ? 'pointerdown' : 'touchstart mousedown';\nvar EVENT_POINTER_MOVE = WINDOW.PointerEvent ? 'pointermove' : 'touchmove mousemove';\nvar EVENT_POINTER_UP = WINDOW.PointerEvent ? 'pointerup pointercancel' : 'touchend touchcancel mouseup';\nvar EVENT_READY = 'ready';\nvar EVENT_RESIZE = 'resize';\nvar EVENT_SHOW = 'show';\nvar EVENT_SHOWN = 'shown';\nvar EVENT_TRANSITION_END = 'transitionend';\nvar EVENT_VIEW = 'view';\nvar EVENT_VIEWED = 'viewed';\nvar EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\nvar EVENT_ZOOM = 'zoom';\nvar EVENT_ZOOMED = 'zoomed';\n\n// Data keys\nvar DATA_ACTION = NAMESPACE + 'Action';\nvar BUTTONS = ['zoom-in', 'zoom-out', 'one-to-one', 'reset', 'prev', 'play', 'next', 'rotate-left', 'rotate-right', 'flip-horizontal', 'flip-vertical'];\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n/**\n * Check if the given value is a string.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n */\nfunction isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Check if the given value is not a number.\n */\nvar isNaN = Number.isNaN || WINDOW.isNaN;\n\n/**\n * Check if the given value is a number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\nfunction isNumber(value) {\n  return typeof value === 'number' && !isNaN(value);\n}\n\n/**\n * Check if the given value is undefined.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\nfunction isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\nfunction isObject(value) {\n  return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\n\nfunction isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n\n  try {\n    var _constructor = value.constructor;\n    var prototype = _constructor.prototype;\n\n\n    return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Check if the given value is a function.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Iterate the given data.\n * @param {*} data - The data to iterate.\n * @param {Function} callback - The process function for each element.\n * @returns {*} The original data.\n */\nfunction forEach(data, callback) {\n  if (data && isFunction(callback)) {\n    if (Array.isArray(data) || isNumber(data.length) /* array-like */) {\n        var length = data.length;\n\n        var i = void 0;\n\n        for (i = 0; i < length; i += 1) {\n          if (callback.call(data, data[i], i, data) === false) {\n            break;\n          }\n        }\n      } else if (isObject(data)) {\n      Object.keys(data).forEach(function (key) {\n        callback.call(data, data[key], key, data);\n      });\n    }\n  }\n\n  return data;\n}\n\n/**\n * Extend the given object.\n * @param {*} obj - The object to be extended.\n * @param {*} args - The rest objects which will be merged to the first object.\n * @returns {Object} The extended object.\n */\nvar assign = Object.assign || function assign(obj) {\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  if (isObject(obj) && args.length > 0) {\n    args.forEach(function (arg) {\n      if (isObject(arg)) {\n        Object.keys(arg).forEach(function (key) {\n          obj[key] = arg[key];\n        });\n      }\n    });\n  }\n\n  return obj;\n};\n\nvar REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n\n/**\n * Apply styles to the given element.\n * @param {Element} element - The target element.\n * @param {Object} styles - The styles for applying.\n */\nfunction setStyle(element, styles) {\n  var style = element.style;\n\n\n  forEach(styles, function (value, property) {\n    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n      value += 'px';\n    }\n\n    style[property] = value;\n  });\n}\n\n/**\n * Check if the given element has a special class.\n * @param {Element} element - The element to check.\n * @param {string} value - The class to search.\n * @returns {boolean} Returns `true` if the special class was found.\n */\nfunction hasClass(element, value) {\n  return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n}\n\n/**\n * Add classes to the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be added.\n */\nfunction addClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      addClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.add(value);\n    return;\n  }\n\n  var className = element.className.trim();\n\n  if (!className) {\n    element.className = value;\n  } else if (className.indexOf(value) < 0) {\n    element.className = className + ' ' + value;\n  }\n}\n\n/**\n * Remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be removed.\n */\nfunction removeClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      removeClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(value);\n    return;\n  }\n\n  if (element.className.indexOf(value) >= 0) {\n    element.className = element.className.replace(value, '');\n  }\n}\n\n/**\n * Add or remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be toggled.\n * @param {boolean} added - Add only.\n */\nfunction toggleClass(element, value, added) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      toggleClass(elem, value, added);\n    });\n    return;\n  }\n\n  // IE10-11 doesn't support the second parameter of `classList.toggle`\n  if (added) {\n    addClass(element, value);\n  } else {\n    removeClass(element, value);\n  }\n}\n\nvar REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n\n/**\n * Transform the given string from camelCase to kebab-case\n * @param {string} value - The value to transform.\n * @returns {string} The transformed value.\n */\nfunction hyphenate(value) {\n  return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n}\n\n/**\n * Get data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to get.\n * @returns {string} The data value.\n */\nfunction getData(element, name) {\n  if (isObject(element[name])) {\n    return element[name];\n  }\n\n  if (element.dataset) {\n    return element.dataset[name];\n  }\n\n  return element.getAttribute('data-' + hyphenate(name));\n}\n\n/**\n * Set data to the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to set.\n * @param {string} data - The data value.\n */\nfunction setData(element, name, data) {\n  if (isObject(data)) {\n    element[name] = data;\n  } else if (element.dataset) {\n    element.dataset[name] = data;\n  } else {\n    element.setAttribute('data-' + hyphenate(name), data);\n  }\n}\n\n/**\n * Remove data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to remove.\n */\nfunction removeData(element, name) {\n  if (isObject(element[name])) {\n    try {\n      delete element[name];\n    } catch (e) {\n      element[name] = undefined;\n    }\n  } else if (element.dataset) {\n    // #128 Safari not allows to delete dataset property\n    try {\n      delete element.dataset[name];\n    } catch (e) {\n      element.dataset[name] = undefined;\n    }\n  } else {\n    element.removeAttribute('data-' + hyphenate(name));\n  }\n}\n\nvar REGEXP_SPACES = /\\s\\s*/;\nvar onceSupported = function () {\n  var supported = false;\n\n  if (IN_BROWSER) {\n    var once = false;\n    var listener = function listener() {};\n    var options = Object.defineProperty({}, 'once', {\n      get: function get$$1() {\n        supported = true;\n        return once;\n      },\n\n\n      /**\n       * This setter can fix a `TypeError` in strict mode\n       * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n       * @param {boolean} value - The value to set\n       */\n      set: function set$$1(value) {\n        once = value;\n      }\n    });\n\n    WINDOW.addEventListener('test', listener, options);\n    WINDOW.removeEventListener('test', listener, options);\n  }\n\n  return supported;\n}();\n\n/**\n * Remove event listener from the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nfunction removeListener(element, type, listener) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  var handler = listener;\n\n  type.trim().split(REGEXP_SPACES).forEach(function (event) {\n    if (!onceSupported) {\n      var listeners = element.listeners;\n\n\n      if (listeners && listeners[event] && listeners[event][listener]) {\n        handler = listeners[event][listener];\n        delete listeners[event][listener];\n\n        if (Object.keys(listeners[event]).length === 0) {\n          delete listeners[event];\n        }\n\n        if (Object.keys(listeners).length === 0) {\n          delete element.listeners;\n        }\n      }\n    }\n\n    element.removeEventListener(event, handler, options);\n  });\n}\n\n/**\n * Add event listener to the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nfunction addListener(element, type, listener) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  var _handler = listener;\n\n  type.trim().split(REGEXP_SPACES).forEach(function (event) {\n    if (options.once && !onceSupported) {\n      var _element$listeners = element.listeners,\n          listeners = _element$listeners === undefined ? {} : _element$listeners;\n\n\n      _handler = function handler() {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        delete listeners[event][listener];\n        element.removeEventListener(event, _handler, options);\n        listener.apply(element, args);\n      };\n\n      if (!listeners[event]) {\n        listeners[event] = {};\n      }\n\n      if (listeners[event][listener]) {\n        element.removeEventListener(event, listeners[event][listener], options);\n      }\n\n      listeners[event][listener] = _handler;\n      element.listeners = listeners;\n    }\n\n    element.addEventListener(event, _handler, options);\n  });\n}\n\n/**\n * Dispatch event on the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Object} data - The additional event data.\n * @returns {boolean} Indicate if the event is default prevented or not.\n */\nfunction dispatchEvent(element, type, data) {\n  var event = void 0;\n\n  // Event and CustomEvent on IE9-11 are global objects, not constructors\n  if (isFunction(Event) && isFunction(CustomEvent)) {\n    event = new CustomEvent(type, {\n      detail: data,\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, data);\n  }\n\n  return element.dispatchEvent(event);\n}\n\n/**\n * Get the offset base on the document.\n * @param {Element} element - The target element.\n * @returns {Object} The offset data.\n */\nfunction getOffset(element) {\n  var box = element.getBoundingClientRect();\n\n  return {\n    left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n    top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n  };\n}\n\n/**\n * Get transforms base on the given object.\n * @param {Object} obj - The target object.\n * @returns {string} A string contains transform values.\n */\nfunction getTransforms(_ref) {\n  var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n\n  var values = [];\n\n  if (isNumber(translateX) && translateX !== 0) {\n    values.push('translateX(' + translateX + 'px)');\n  }\n\n  if (isNumber(translateY) && translateY !== 0) {\n    values.push('translateY(' + translateY + 'px)');\n  }\n\n  // Rotate should come first before scale to match orientation transform\n  if (isNumber(rotate) && rotate !== 0) {\n    values.push('rotate(' + rotate + 'deg)');\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    values.push('scaleX(' + scaleX + ')');\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    values.push('scaleY(' + scaleY + ')');\n  }\n\n  var transform = values.length ? values.join(' ') : 'none';\n\n  return {\n    WebkitTransform: transform,\n    msTransform: transform,\n    transform: transform\n  };\n}\n\n/**\n * Get an image name from an image url.\n * @param {string} url - The target url.\n * @example\n * // picture.jpg\n * getImageNameFromURL('http://domain.com/path/to/picture.jpg?size=1280×960')\n * @returns {string} A string contains the image name.\n */\nfunction getImageNameFromURL(url) {\n  return isString(url) ? url.replace(/^.*\\//, '').replace(/[?&#].*$/, '') : '';\n}\n\nvar IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n/**\n * Get an image's natural sizes.\n * @param {string} image - The target image.\n * @param {Function} callback - The callback function.\n * @returns {HTMLImageElement} The new image.\n */\nfunction getImageNaturalSizes(image, callback) {\n  var newImage = document.createElement('img');\n\n  // Modern browsers (except Safari)\n  if (image.naturalWidth && !IS_SAFARI) {\n    callback(image.naturalWidth, image.naturalHeight);\n    return newImage;\n  }\n\n  var body = document.body || document.documentElement;\n\n  newImage.onload = function () {\n    callback(newImage.width, newImage.height);\n\n    if (!IS_SAFARI) {\n      body.removeChild(newImage);\n    }\n  };\n\n  newImage.src = image.src;\n\n  // iOS Safari will convert the image automatically\n  // with its orientation once append it into DOM\n  if (!IS_SAFARI) {\n    newImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n    body.appendChild(newImage);\n  }\n\n  return newImage;\n}\n\n/**\n * Get the related class name of a responsive type number.\n * @param {string} type - The responsive type.\n * @returns {string} The related class name.\n */\nfunction getResponsiveClass(type) {\n  switch (type) {\n    case 2:\n      return CLASS_HIDE_XS_DOWN;\n\n    case 3:\n      return CLASS_HIDE_SM_DOWN;\n\n    case 4:\n      return CLASS_HIDE_MD_DOWN;\n\n    default:\n      return '';\n  }\n}\n\n/**\n * Get the max ratio of a group of pointers.\n * @param {string} pointers - The target pointers.\n * @returns {number} The result ratio.\n */\nfunction getMaxZoomRatio(pointers) {\n  var pointers2 = assign({}, pointers);\n  var ratios = [];\n\n  forEach(pointers, function (pointer, pointerId) {\n    delete pointers2[pointerId];\n\n    forEach(pointers2, function (pointer2) {\n      var x1 = Math.abs(pointer.startX - pointer2.startX);\n      var y1 = Math.abs(pointer.startY - pointer2.startY);\n      var x2 = Math.abs(pointer.endX - pointer2.endX);\n      var y2 = Math.abs(pointer.endY - pointer2.endY);\n      var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n      var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n      var ratio = (z2 - z1) / z1;\n\n      ratios.push(ratio);\n    });\n  });\n\n  ratios.sort(function (a, b) {\n    return Math.abs(a) < Math.abs(b);\n  });\n\n  return ratios[0];\n}\n\n/**\n * Get a pointer from an event object.\n * @param {Object} event - The target event object.\n * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n * @returns {Object} The result pointer contains start and/or end point coordinates.\n */\nfunction getPointer(_ref2, endOnly) {\n  var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n\n  var end = {\n    endX: pageX,\n    endY: pageY\n  };\n\n  return endOnly ? end : assign({\n    startX: pageX,\n    startY: pageY\n  }, end);\n}\n\n/**\n * Get the center point coordinate of a group of pointers.\n * @param {Object} pointers - The target pointers.\n * @returns {Object} The center point coordinate.\n */\nfunction getPointersCenter(pointers) {\n  var pageX = 0;\n  var pageY = 0;\n  var count = 0;\n\n  forEach(pointers, function (_ref3) {\n    var startX = _ref3.startX,\n        startY = _ref3.startY;\n\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n\n  pageX /= count;\n  pageY /= count;\n\n  return {\n    pageX: pageX,\n    pageY: pageY\n  };\n}\n\nvar render = {\n  render: function render() {\n    this.initContainer();\n    this.initViewer();\n    this.initList();\n    this.renderViewer();\n  },\n  initContainer: function initContainer() {\n    this.containerData = {\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n  },\n  initViewer: function initViewer() {\n    var options = this.options,\n        parent = this.parent;\n\n    var viewerData = void 0;\n\n    if (options.inline) {\n      viewerData = {\n        width: Math.max(parent.offsetWidth, options.minWidth),\n        height: Math.max(parent.offsetHeight, options.minHeight)\n      };\n\n      this.parentData = viewerData;\n    }\n\n    if (this.fulled || !viewerData) {\n      viewerData = this.containerData;\n    }\n\n    this.viewerData = assign({}, viewerData);\n  },\n  renderViewer: function renderViewer() {\n    if (this.options.inline && !this.fulled) {\n      setStyle(this.viewer, this.viewerData);\n    }\n  },\n  initList: function initList() {\n    var _this = this;\n\n    var element = this.element,\n        options = this.options,\n        list = this.list;\n\n    var items = [];\n\n    forEach(this.images, function (image, i) {\n      var src = image.src;\n\n      var alt = image.alt || getImageNameFromURL(src);\n      var url = options.url;\n\n\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(_this, image);\n      }\n\n      if (src || url) {\n        items.push('<li>' + '<img' + (' src=\"' + (src || url) + '\"') + ' role=\"button\"' + ' data-viewer-action=\"view\"' + (' data-index=\"' + i + '\"') + (' data-original-url=\"' + (url || src) + '\"') + (' alt=\"' + alt + '\"') + '>' + '</li>');\n      }\n    });\n\n    list.innerHTML = items.join('');\n    this.items = list.getElementsByTagName('li');\n    forEach(this.items, function (item) {\n      var image = item.firstElementChild;\n\n      setData(image, 'filled', true);\n\n      if (options.loading) {\n        addClass(item, CLASS_LOADING);\n      }\n\n      addListener(image, EVENT_LOAD, function (event) {\n        if (options.loading) {\n          removeClass(item, CLASS_LOADING);\n        }\n\n        _this.loadImage(event);\n      }, {\n        once: true\n      });\n    });\n\n    if (options.transition) {\n      addListener(element, EVENT_VIEWED, function () {\n        addClass(list, CLASS_TRANSITION);\n      }, {\n        once: true\n      });\n    }\n  },\n  renderList: function renderList(index) {\n    var i = index || this.index;\n    var width = this.items[i].offsetWidth || 30;\n    var outerWidth = width + 1; // 1 pixel of `margin-left` width\n\n    // Place the active item in the center of the screen\n    setStyle(this.list, assign({\n      width: outerWidth * this.length\n    }, getTransforms({\n      translateX: (this.viewerData.width - width) / 2 - outerWidth * i\n    })));\n  },\n  resetList: function resetList() {\n    var list = this.list;\n\n\n    list.innerHTML = '';\n    removeClass(list, CLASS_TRANSITION);\n    setStyle(list, getTransforms({\n      translateX: 0\n    }));\n  },\n  initImage: function initImage(done) {\n    var _this2 = this;\n\n    var options = this.options,\n        image = this.image,\n        viewerData = this.viewerData;\n\n    var footerHeight = this.footer.offsetHeight;\n    var viewerWidth = viewerData.width;\n    var viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n    var oldImageData = this.imageData || {};\n    var sizingImage = void 0;\n\n    this.imageInitializing = {\n      abort: function abort() {\n        sizingImage.onload = null;\n      }\n    };\n\n    sizingImage = getImageNaturalSizes(image, function (naturalWidth, naturalHeight) {\n      var aspectRatio = naturalWidth / naturalHeight;\n      var width = viewerWidth;\n      var height = viewerHeight;\n\n      _this2.imageInitializing = false;\n\n      if (viewerHeight * aspectRatio > viewerWidth) {\n        height = viewerWidth / aspectRatio;\n      } else {\n        width = viewerHeight * aspectRatio;\n      }\n\n      width = Math.min(width * 0.9, naturalWidth);\n      height = Math.min(height * 0.9, naturalHeight);\n\n      var imageData = {\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        aspectRatio: aspectRatio,\n        ratio: width / naturalWidth,\n        width: width,\n        height: height,\n        left: (viewerWidth - width) / 2,\n        top: (viewerHeight - height) / 2\n      };\n      var initialImageData = assign({}, imageData);\n\n      if (options.rotatable) {\n        imageData.rotate = oldImageData.rotate || 0;\n        initialImageData.rotate = 0;\n      }\n\n      if (options.scalable) {\n        imageData.scaleX = oldImageData.scaleX || 1;\n        imageData.scaleY = oldImageData.scaleY || 1;\n        initialImageData.scaleX = 1;\n        initialImageData.scaleY = 1;\n      }\n\n      _this2.imageData = imageData;\n      _this2.initialImageData = initialImageData;\n\n      if (done) {\n        done();\n      }\n    });\n  },\n  renderImage: function renderImage(done) {\n    var _this3 = this;\n\n    var image = this.image,\n        imageData = this.imageData;\n\n\n    setStyle(image, assign({\n      width: imageData.width,\n      height: imageData.height,\n      marginLeft: imageData.left,\n      marginTop: imageData.top\n    }, getTransforms(imageData)));\n\n    if (done) {\n      if ((this.viewing || this.zooming) && this.options.transition) {\n        var onTransitionEnd = function onTransitionEnd() {\n          _this3.imageRendering = false;\n          done();\n        };\n\n        this.imageRendering = {\n          abort: function abort() {\n            removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n          }\n        };\n\n        addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n          once: true\n        });\n      } else {\n        done();\n      }\n    }\n  },\n  resetImage: function resetImage() {\n    // this.image only defined after viewed\n    if (this.viewing || this.viewed) {\n      var image = this.image;\n\n\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      image.parentNode.removeChild(image);\n      this.image = null;\n    }\n  }\n};\n\nvar events = {\n  bind: function bind() {\n    var canvas = this.canvas,\n        element = this.element,\n        viewer = this.viewer;\n\n\n    addListener(viewer, EVENT_CLICK, this.onClick = this.click.bind(this));\n    addListener(viewer, EVENT_WHEEL, this.onWheel = this.wheel.bind(this));\n    addListener(viewer, EVENT_DRAG_START, this.onDragStart = this.dragstart.bind(this));\n\n    if (this.options.toggleOnDblclick) {\n      addListener(canvas, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n    }\n\n    addListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown = this.pointerdown.bind(this));\n    addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onPointerMove = this.pointermove.bind(this));\n    addListener(element.ownerDocument, EVENT_POINTER_UP, this.onPointerUp = this.pointerup.bind(this));\n    addListener(element.ownerDocument, EVENT_KEY_DOWN, this.onKeyDown = this.keydown.bind(this));\n    addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n  },\n  unbind: function unbind() {\n    var canvas = this.canvas,\n        element = this.element,\n        viewer = this.viewer;\n\n\n    removeListener(viewer, EVENT_CLICK, this.onClick);\n    removeListener(viewer, EVENT_WHEEL, this.onWheel);\n    removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n\n    if (this.options.toggleOnDblclick) {\n      removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n    }\n\n    removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n    removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onPointerMove);\n    removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onPointerUp);\n    removeListener(element.ownerDocument, EVENT_KEY_DOWN, this.onKeyDown);\n    removeListener(window, EVENT_RESIZE, this.onResize);\n  }\n};\n\nvar handlers = {\n  click: function click(_ref) {\n    var target = _ref.target;\n    var options = this.options,\n        imageData = this.imageData;\n\n    var action = getData(target, DATA_ACTION);\n\n    switch (action) {\n      case 'mix':\n        if (this.played) {\n          this.stop();\n        } else if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          } else {\n            this.full();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      case 'hide':\n        this.hide();\n        break;\n\n      case 'view':\n        this.view(getData(target, 'index'));\n        break;\n\n      case 'zoom-in':\n        this.zoom(0.1, true);\n        break;\n\n      case 'zoom-out':\n        this.zoom(-0.1, true);\n        break;\n\n      case 'one-to-one':\n        this.toggle();\n        break;\n\n      case 'reset':\n        this.reset();\n        break;\n\n      case 'prev':\n        this.prev(options.loop);\n        break;\n\n      case 'play':\n        this.play(options.fullscreen);\n        break;\n\n      case 'next':\n        this.next(options.loop);\n        break;\n\n      case 'rotate-left':\n        this.rotate(-90);\n        break;\n\n      case 'rotate-right':\n        this.rotate(90);\n        break;\n\n      case 'flip-horizontal':\n        this.scaleX(-imageData.scaleX || -1);\n        break;\n\n      case 'flip-vertical':\n        this.scaleY(-imageData.scaleY || -1);\n        break;\n\n      default:\n        if (this.played) {\n          this.stop();\n        }\n    }\n  },\n  dblclick: function dblclick(event) {\n    if (event.target.parentElement === this.canvas) {\n      this.toggle();\n    }\n  },\n  load: function load() {\n    var _this = this;\n\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = false;\n    }\n\n    var element = this.element,\n        options = this.options,\n        image = this.image,\n        index = this.index,\n        viewerData = this.viewerData;\n\n\n    removeClass(image, CLASS_INVISIBLE);\n\n    if (options.loading) {\n      removeClass(this.canvas, CLASS_LOADING);\n    }\n\n    image.style.cssText = 'height:0;' + ('margin-left:' + viewerData.width / 2 + 'px;') + ('margin-top:' + viewerData.height / 2 + 'px;') + 'max-width:none!important;' + 'position:absolute;' + 'width:0;';\n\n    this.initImage(function () {\n      toggleClass(image, CLASS_MOVE, options.movable);\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n\n      _this.renderImage(function () {\n        _this.viewed = true;\n        _this.viewing = false;\n\n        if (isFunction(options.viewed)) {\n          addListener(element, EVENT_VIEWED, options.viewed, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_VIEWED, {\n          originalImage: _this.images[index],\n          index: index,\n          image: image\n        });\n      });\n    });\n  },\n  loadImage: function loadImage(e) {\n    var image = e.target;\n    var parent = image.parentNode;\n    var parentWidth = parent.offsetWidth || 30;\n    var parentHeight = parent.offsetHeight || 50;\n    var filled = !!getData(image, 'filled');\n\n    getImageNaturalSizes(image, function (naturalWidth, naturalHeight) {\n      var aspectRatio = naturalWidth / naturalHeight;\n      var width = parentWidth;\n      var height = parentHeight;\n\n      if (parentHeight * aspectRatio > parentWidth) {\n        if (filled) {\n          width = parentHeight * aspectRatio;\n        } else {\n          height = parentWidth / aspectRatio;\n        }\n      } else if (filled) {\n        height = parentWidth / aspectRatio;\n      } else {\n        width = parentHeight * aspectRatio;\n      }\n\n      setStyle(image, assign({\n        width: width,\n        height: height\n      }, getTransforms({\n        translateX: (parentWidth - width) / 2,\n        translateY: (parentHeight - height) / 2\n      })));\n    });\n  },\n  keydown: function keydown(e) {\n    var options = this.options;\n\n\n    if (!this.fulled || !options.keyboard) {\n      return;\n    }\n\n    switch (e.keyCode || e.which || e.charCode) {\n      // Escape\n      case 27:\n        if (this.played) {\n          this.stop();\n        } else if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      // Space\n      case 32:\n        if (this.played) {\n          this.stop();\n        }\n\n        break;\n\n      // ArrowLeft\n      case 37:\n        this.prev(options.loop);\n        break;\n\n      // ArrowUp\n      case 38:\n        // Prevent scroll on Firefox\n        e.preventDefault();\n\n        // Zoom in\n        this.zoom(options.zoomRatio, true);\n        break;\n\n      // ArrowRight\n      case 39:\n        this.next(options.loop);\n        break;\n\n      // ArrowDown\n      case 40:\n        // Prevent scroll on Firefox\n        e.preventDefault();\n\n        // Zoom out\n        this.zoom(-options.zoomRatio, true);\n        break;\n\n      // Ctrl + 0\n      case 48:\n      // Fall through\n\n      // Ctrl + 1\n      // eslint-disable-next-line no-fallthrough\n      case 49:\n        if (e.ctrlKey) {\n          e.preventDefault();\n          this.toggle();\n        }\n\n        break;\n\n      default:\n    }\n  },\n  dragstart: function dragstart(e) {\n    if (e.target.tagName.toLowerCase() === 'img') {\n      e.preventDefault();\n    }\n  },\n  pointerdown: function pointerdown(e) {\n    var options = this.options,\n        pointers = this.pointers;\n\n\n    if (!this.viewed || this.showing || this.viewing || this.hiding) {\n      return;\n    }\n\n    // This line is required for preventing page zooming in iOS browsers\n    e.preventDefault();\n\n    if (e.changedTouches) {\n      forEach(e.changedTouches, function (touch) {\n        pointers[touch.identifier] = getPointer(touch);\n      });\n    } else {\n      pointers[e.pointerId || 0] = getPointer(e);\n    }\n\n    var action = options.movable ? ACTION_MOVE : false;\n\n    if (Object.keys(pointers).length > 1) {\n      action = ACTION_ZOOM;\n    } else if ((e.pointerType === 'touch' || e.type === 'touchstart') && this.isSwitchable()) {\n      action = ACTION_SWITCH;\n    }\n\n    if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n      removeClass(this.image, CLASS_TRANSITION);\n    }\n\n    this.action = action;\n  },\n  pointermove: function pointermove(e) {\n    var pointers = this.pointers,\n        action = this.action;\n\n\n    if (!this.viewed || !action) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (e.changedTouches) {\n      forEach(e.changedTouches, function (touch) {\n        assign(pointers[touch.identifier], getPointer(touch, true));\n      });\n    } else {\n      assign(pointers[e.pointerId || 0], getPointer(e, true));\n    }\n\n    this.change(e);\n  },\n  pointerup: function pointerup(e) {\n    var action = this.action,\n        pointers = this.pointers;\n\n\n    if (e.changedTouches) {\n      forEach(e.changedTouches, function (touch) {\n        delete pointers[touch.identifier];\n      });\n    } else {\n      delete pointers[e.pointerId || 0];\n    }\n\n    if (!action) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (this.options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n      addClass(this.image, CLASS_TRANSITION);\n    }\n\n    this.action = false;\n  },\n  resize: function resize() {\n    var _this2 = this;\n\n    if (!this.isShown || this.hiding) {\n      return;\n    }\n\n    this.initContainer();\n    this.initViewer();\n    this.renderViewer();\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(function () {\n        _this2.renderImage();\n      });\n    }\n\n    if (this.played) {\n      if (this.options.fullscreen && this.fulled && !document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {\n        this.stop();\n        return;\n      }\n\n      forEach(this.player.getElementsByTagName('img'), function (image) {\n        addListener(image, EVENT_LOAD, _this2.loadImage.bind(_this2), {\n          once: true\n        });\n        dispatchEvent(image, EVENT_LOAD);\n      });\n    }\n  },\n  wheel: function wheel(e) {\n    var _this3 = this;\n\n    if (!this.viewed) {\n      return;\n    }\n\n    e.preventDefault();\n\n    // Limit wheel speed to prevent zoom too fast\n    if (this.wheeling) {\n      return;\n    }\n\n    this.wheeling = true;\n\n    setTimeout(function () {\n      _this3.wheeling = false;\n    }, 50);\n\n    var ratio = Number(this.options.zoomRatio) || 0.1;\n    var delta = 1;\n\n    if (e.deltaY) {\n      delta = e.deltaY > 0 ? 1 : -1;\n    } else if (e.wheelDelta) {\n      delta = -e.wheelDelta / 120;\n    } else if (e.detail) {\n      delta = e.detail > 0 ? 1 : -1;\n    }\n\n    this.zoom(-delta * ratio, true, e);\n  }\n};\n\nvar methods = {\n  /** Show the viewer (only available in modal mode)\n   * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n   * @returns {Viewer} this\n   */\n  show: function show() {\n    var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var element = this.element,\n        options = this.options;\n\n\n    if (options.inline || this.showing || this.isShown || this.showing) {\n      return this;\n    }\n\n    if (!this.ready) {\n      this.build();\n\n      if (this.ready) {\n        this.show(immediate);\n      }\n\n      return this;\n    }\n\n    if (isFunction(options.show)) {\n      addListener(element, EVENT_SHOW, options.show, {\n        once: true\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n      return this;\n    }\n\n    if (this.hiding) {\n      this.transitioning.abort();\n    }\n\n    this.showing = true;\n    this.open();\n\n    var viewer = this.viewer;\n\n\n    removeClass(viewer, CLASS_HIDE);\n\n    if (options.transition && !immediate) {\n      var shown = this.shown.bind(this);\n\n      this.transitioning = {\n        abort: function abort() {\n          removeListener(viewer, EVENT_TRANSITION_END, shown);\n          removeClass(viewer, CLASS_IN);\n        }\n      };\n\n      addClass(viewer, CLASS_TRANSITION);\n\n      // Force reflow to enable CSS3 transition\n      // eslint-disable-next-line\n      viewer.offsetWidth;\n      addListener(viewer, EVENT_TRANSITION_END, shown, {\n        once: true\n      });\n      addClass(viewer, CLASS_IN);\n    } else {\n      addClass(viewer, CLASS_IN);\n      this.shown();\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Hide the viewer (only available in modal mode)\n   * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n   * @returns {Viewer} this\n   */\n  hide: function hide() {\n    var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var element = this.element,\n        options = this.options;\n\n\n    if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n      return this;\n    }\n\n    if (isFunction(options.hide)) {\n      addListener(element, EVENT_HIDE, options.hide, {\n        once: true\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_HIDE) === false) {\n      return this;\n    }\n\n    if (this.showing) {\n      this.transitioning.abort();\n    }\n\n    this.hiding = true;\n\n    if (this.played) {\n      this.stop();\n    } else if (this.viewing) {\n      this.viewing.abort();\n    }\n\n    var viewer = this.viewer;\n\n\n    if (options.transition && !immediate) {\n      var hidden = this.hidden.bind(this);\n      var hide = function hide() {\n        addListener(viewer, EVENT_TRANSITION_END, hidden, {\n          once: true\n        });\n        removeClass(viewer, CLASS_IN);\n      };\n\n      this.transitioning = {\n        abort: function abort() {\n          if (this.viewed) {\n            removeListener(this.image, EVENT_TRANSITION_END, hide);\n          } else {\n            removeListener(viewer, EVENT_TRANSITION_END, hidden);\n          }\n        }\n      };\n\n      if (this.viewed) {\n        addListener(this.image, EVENT_TRANSITION_END, hide, {\n          once: true\n        });\n        this.zoomTo(0, false, false, true);\n      } else {\n        hide();\n      }\n    } else {\n      removeClass(viewer, CLASS_IN);\n      this.hidden();\n    }\n\n    return this;\n  },\n\n\n  /**\n   * View one of the images with image's index\n   * @param {number} index - The index of the image to view.\n   * @returns {Viewer} this\n   */\n  view: function view() {\n    var _this = this;\n\n    var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.initialViewIndex;\n\n    index = Number(index) || 0;\n\n    if (!this.isShown) {\n      this.index = index;\n      return this.show();\n    }\n\n    if (this.hiding || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {\n      return this;\n    }\n\n    if (this.viewing) {\n      this.viewing.abort();\n    }\n\n    var element = this.element,\n        options = this.options,\n        title = this.title,\n        canvas = this.canvas;\n\n    var item = this.items[index];\n    var img = item.querySelector('img');\n    var url = getData(img, 'originalUrl');\n    var alt = img.getAttribute('alt');\n    var image = document.createElement('img');\n\n    image.src = url;\n    image.alt = alt;\n\n    if (isFunction(options.view)) {\n      addListener(element, EVENT_VIEW, options.view, {\n        once: true\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_VIEW, {\n      originalImage: this.images[index],\n      index: index,\n      image: image\n    }) === false || !this.isShown || this.hiding || this.played) {\n      return this;\n    }\n\n    this.image = image;\n    removeClass(this.items[this.index], CLASS_ACTIVE);\n    addClass(item, CLASS_ACTIVE);\n    this.viewed = false;\n    this.index = index;\n    this.imageData = {};\n    addClass(image, CLASS_INVISIBLE);\n\n    if (options.loading) {\n      addClass(canvas, CLASS_LOADING);\n    }\n\n    canvas.innerHTML = '';\n    canvas.appendChild(image);\n\n    // Center current item\n    this.renderList();\n\n    // Clear title\n    title.innerHTML = '';\n\n    // Generate title after viewed\n    var onViewed = function onViewed() {\n      var imageData = _this.imageData;\n\n      var render = Array.isArray(options.title) ? options.title[1] : options.title;\n\n      title.innerHTML = isFunction(render) ? render.call(_this, image, imageData) : alt + ' (' + imageData.naturalWidth + ' \\xD7 ' + imageData.naturalHeight + ')';\n    };\n    var onLoad = void 0;\n\n    addListener(element, EVENT_VIEWED, onViewed, {\n      once: true\n    });\n\n    this.viewing = {\n      abort: function abort() {\n        removeListener(element, EVENT_VIEWED, onViewed);\n\n        if (image.complete) {\n          if (this.imageRendering) {\n            this.imageRendering.abort();\n          } else if (this.imageInitializing) {\n            this.imageInitializing.abort();\n          }\n        } else {\n          removeListener(image, EVENT_LOAD, onLoad);\n\n          if (this.timeout) {\n            clearTimeout(this.timeout);\n          }\n        }\n      }\n    };\n\n    if (image.complete) {\n      this.load();\n    } else {\n      addListener(image, EVENT_LOAD, onLoad = this.load.bind(this), {\n        once: true\n      });\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n\n      // Make the image visible if it fails to load within 1s\n      this.timeout = setTimeout(function () {\n        removeClass(image, CLASS_INVISIBLE);\n        _this.timeout = false;\n      }, 1000);\n    }\n\n    return this;\n  },\n\n\n  /**\n   * View the previous image\n   * @param {boolean} [loop=false] - Indicate if view the last one\n   * when it is the first one at present.\n   * @returns {Viewer} this\n   */\n  prev: function prev() {\n    var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    var index = this.index - 1;\n\n    if (index < 0) {\n      index = loop ? this.length - 1 : 0;\n    }\n\n    this.view(index);\n    return this;\n  },\n\n\n  /**\n   * View the next image\n   * @param {boolean} [loop=false] - Indicate if view the first one\n   * when it is the last one at present.\n   * @returns {Viewer} this\n   */\n  next: function next() {\n    var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    var maxIndex = this.length - 1;\n    var index = this.index + 1;\n\n    if (index > maxIndex) {\n      index = loop ? 0 : maxIndex;\n    }\n\n    this.view(index);\n    return this;\n  },\n\n\n  /**\n   * Move the image with relative offsets.\n   * @param {number} offsetX - The relative offset distance on the x-axis.\n   * @param {number} offsetY - The relative offset distance on the y-axis.\n   * @returns {Viewer} this\n   */\n  move: function move(offsetX, offsetY) {\n    var imageData = this.imageData;\n\n\n    this.moveTo(isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX), isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY));\n\n    return this;\n  },\n\n\n  /**\n   * Move the image to an absolute point.\n   * @param {number} x - The x-axis coordinate.\n   * @param {number} [y=x] - The y-axis coordinate.\n   * @returns {Viewer} this\n   */\n  moveTo: function moveTo(x) {\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n    var imageData = this.imageData;\n\n\n    x = Number(x);\n    y = Number(y);\n\n    if (this.viewed && !this.played && this.options.movable) {\n      var changed = false;\n\n      if (isNumber(x)) {\n        imageData.left = x;\n        changed = true;\n      }\n\n      if (isNumber(y)) {\n        imageData.top = y;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Zoom the image with a relative ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @returns {Viewer} this\n   */\n  zoom: function zoom(ratio) {\n    var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    var imageData = this.imageData;\n\n\n    ratio = Number(ratio);\n\n    if (ratio < 0) {\n      ratio = 1 / (1 - ratio);\n    } else {\n      ratio = 1 + ratio;\n    }\n\n    this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n\n    return this;\n  },\n\n\n  /**\n   * Zoom the image to an absolute ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n   * @returns {Viewer} this\n   */\n  zoomTo: function zoomTo(ratio) {\n    var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    var _this2 = this;\n\n    var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    var _zoomable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n    var element = this.element,\n        options = this.options,\n        pointers = this.pointers,\n        imageData = this.imageData;\n\n\n    ratio = Math.max(0, ratio);\n\n    if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n      if (!_zoomable) {\n        var minZoomRatio = Math.max(0.01, options.minZoomRatio);\n        var maxZoomRatio = Math.min(100, options.maxZoomRatio);\n\n        ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n      }\n\n      if (_originalEvent && ratio > 0.95 && ratio < 1.05) {\n        ratio = 1;\n      }\n\n      var newWidth = imageData.naturalWidth * ratio;\n      var newHeight = imageData.naturalHeight * ratio;\n      var oldRatio = imageData.width / imageData.naturalWidth;\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_ZOOM, {\n        ratio: ratio,\n        oldRatio: oldRatio,\n        originalEvent: _originalEvent\n      }) === false) {\n        return this;\n      }\n\n      this.zooming = true;\n\n      if (_originalEvent) {\n        var offset = getOffset(this.viewer);\n        var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n          pageX: _originalEvent.pageX,\n          pageY: _originalEvent.pageY\n        };\n\n        // Zoom from the triggering point of the event\n        imageData.left -= (newWidth - imageData.width) * ((center.pageX - offset.left - imageData.left) / imageData.width);\n        imageData.top -= (newHeight - imageData.height) * ((center.pageY - offset.top - imageData.top) / imageData.height);\n      } else {\n        // Zoom from the center of the image\n        imageData.left -= (newWidth - imageData.width) / 2;\n        imageData.top -= (newHeight - imageData.height) / 2;\n      }\n\n      imageData.width = newWidth;\n      imageData.height = newHeight;\n      imageData.ratio = ratio;\n      this.renderImage(function () {\n        _this2.zooming = false;\n\n        if (isFunction(options.zoomed)) {\n          addListener(element, EVENT_ZOOMED, options.zoomed, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_ZOOMED, {\n          ratio: ratio,\n          oldRatio: oldRatio,\n          originalEvent: _originalEvent\n        });\n      });\n\n      if (hasTooltip) {\n        this.tooltip();\n      }\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Rotate the image with a relative degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Viewer} this\n   */\n  rotate: function rotate(degree) {\n    this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n\n    return this;\n  },\n\n\n  /**\n   * Rotate the image to an absolute degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Viewer} this\n   */\n  rotateTo: function rotateTo(degree) {\n    var imageData = this.imageData;\n\n\n    degree = Number(degree);\n\n    if (isNumber(degree) && this.viewed && !this.played && this.options.rotatable) {\n      imageData.rotate = degree;\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Scale the image on the x-axis.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @returns {Viewer} this\n   */\n  scaleX: function scaleX(_scaleX) {\n    this.scale(_scaleX, this.imageData.scaleY);\n\n    return this;\n  },\n\n\n  /**\n   * Scale the image on the y-axis.\n   * @param {number} scaleY - The scale ratio on the y-axis.\n   * @returns {Viewer} this\n   */\n  scaleY: function scaleY(_scaleY) {\n    this.scale(this.imageData.scaleX, _scaleY);\n\n    return this;\n  },\n\n\n  /**\n   * Scale the image.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n   * @returns {Viewer} this\n   */\n  scale: function scale(scaleX) {\n    var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n    var imageData = this.imageData;\n\n\n    scaleX = Number(scaleX);\n    scaleY = Number(scaleY);\n\n    if (this.viewed && !this.played && this.options.scalable) {\n      var changed = false;\n\n      if (isNumber(scaleX)) {\n        imageData.scaleX = scaleX;\n        changed = true;\n      }\n\n      if (isNumber(scaleY)) {\n        imageData.scaleY = scaleY;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Play the images\n   * @param {boolean} [fullscreen=false] - Indicate if request fullscreen or not.\n   * @returns {Viewer} this\n   */\n  play: function play() {\n    var _this3 = this;\n\n    var fullscreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    if (!this.isShown || this.played) {\n      return this;\n    }\n\n    var options = this.options,\n        player = this.player;\n\n    var onLoad = this.loadImage.bind(this);\n    var list = [];\n    var total = 0;\n    var index = 0;\n\n    this.played = true;\n    this.onLoadWhenPlay = onLoad;\n\n    if (fullscreen) {\n      this.requestFullscreen();\n    }\n\n    addClass(player, CLASS_SHOW);\n    forEach(this.items, function (item, i) {\n      var img = item.querySelector('img');\n      var image = document.createElement('img');\n\n      image.src = getData(img, 'originalUrl');\n      image.alt = img.getAttribute('alt');\n      total += 1;\n      addClass(image, CLASS_FADE);\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n\n      if (hasClass(item, CLASS_ACTIVE)) {\n        addClass(image, CLASS_IN);\n        index = i;\n      }\n\n      list.push(image);\n      addListener(image, EVENT_LOAD, onLoad, {\n        once: true\n      });\n      player.appendChild(image);\n    });\n\n    if (isNumber(options.interval) && options.interval > 0) {\n      var play = function play() {\n        _this3.playing = setTimeout(function () {\n          removeClass(list[index], CLASS_IN);\n          index += 1;\n          index = index < total ? index : 0;\n          addClass(list[index], CLASS_IN);\n          play();\n        }, options.interval);\n      };\n\n      if (total > 1) {\n        play();\n      }\n    }\n\n    return this;\n  },\n\n\n  // Stop play\n  stop: function stop() {\n    var _this4 = this;\n\n    if (!this.played) {\n      return this;\n    }\n\n    var player = this.player;\n\n\n    this.played = false;\n    clearTimeout(this.playing);\n    forEach(player.getElementsByTagName('img'), function (image) {\n      removeListener(image, EVENT_LOAD, _this4.onLoadWhenPlay);\n    });\n    removeClass(player, CLASS_SHOW);\n    player.innerHTML = '';\n    this.exitFullscreen();\n\n    return this;\n  },\n\n\n  // Enter modal mode (only available in inline mode)\n  full: function full() {\n    var _this5 = this;\n\n    var options = this.options,\n        viewer = this.viewer,\n        image = this.image,\n        list = this.list;\n\n\n    if (!this.isShown || this.played || this.fulled || !options.inline) {\n      return this;\n    }\n\n    this.fulled = true;\n    this.open();\n    addClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(list, CLASS_TRANSITION);\n\n      if (this.viewed) {\n        removeClass(image, CLASS_TRANSITION);\n      }\n    }\n\n    addClass(viewer, CLASS_FIXED);\n    viewer.setAttribute('style', '');\n    setStyle(viewer, {\n      zIndex: options.zIndex\n    });\n\n    this.initContainer();\n    this.viewerData = assign({}, this.containerData);\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(function () {\n        _this5.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n    }\n\n    return this;\n  },\n\n\n  // Exit modal mode (only available in inline mode)\n  exit: function exit() {\n    var _this6 = this;\n\n    var options = this.options,\n        viewer = this.viewer,\n        image = this.image,\n        list = this.list;\n\n\n    if (!this.isShown || this.played || !this.fulled || !options.inline) {\n      return this;\n    }\n\n    this.fulled = false;\n    this.close();\n    removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(list, CLASS_TRANSITION);\n\n      if (this.viewed) {\n        removeClass(image, CLASS_TRANSITION);\n      }\n    }\n\n    removeClass(viewer, CLASS_FIXED);\n    setStyle(viewer, {\n      zIndex: options.zIndexInline\n    });\n\n    this.viewerData = assign({}, this.parentData);\n    this.renderViewer();\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(function () {\n        _this6.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n    }\n\n    return this;\n  },\n\n\n  // Show the current ratio of the image with percentage\n  tooltip: function tooltip() {\n    var _this7 = this;\n\n    var options = this.options,\n        tooltipBox = this.tooltipBox,\n        imageData = this.imageData;\n\n\n    if (!this.viewed || this.played || !options.tooltip) {\n      return this;\n    }\n\n    tooltipBox.textContent = Math.round(imageData.ratio * 100) + '%';\n\n    if (!this.tooltipping) {\n      if (options.transition) {\n        if (this.fading) {\n          dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n        }\n\n        addClass(tooltipBox, CLASS_SHOW);\n        addClass(tooltipBox, CLASS_FADE);\n        addClass(tooltipBox, CLASS_TRANSITION);\n\n        // Force reflow to enable CSS3 transition\n        // eslint-disable-next-line\n        tooltipBox.offsetWidth;\n        addClass(tooltipBox, CLASS_IN);\n      } else {\n        addClass(tooltipBox, CLASS_SHOW);\n      }\n    } else {\n      clearTimeout(this.tooltipping);\n    }\n\n    this.tooltipping = setTimeout(function () {\n      if (options.transition) {\n        addListener(tooltipBox, EVENT_TRANSITION_END, function () {\n          removeClass(tooltipBox, CLASS_SHOW);\n          removeClass(tooltipBox, CLASS_FADE);\n          removeClass(tooltipBox, CLASS_TRANSITION);\n          _this7.fading = false;\n        }, {\n          once: true\n        });\n\n        removeClass(tooltipBox, CLASS_IN);\n        _this7.fading = true;\n      } else {\n        removeClass(tooltipBox, CLASS_SHOW);\n      }\n\n      _this7.tooltipping = false;\n    }, 1000);\n\n    return this;\n  },\n\n\n  // Toggle the image size between its natural size and initial size\n  toggle: function toggle() {\n    if (this.imageData.ratio === 1) {\n      this.zoomTo(this.initialImageData.ratio, true);\n    } else {\n      this.zoomTo(1, true);\n    }\n\n    return this;\n  },\n\n\n  // Reset the image to its initial state\n  reset: function reset() {\n    if (this.viewed && !this.played) {\n      this.imageData = assign({}, this.initialImageData);\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n\n  // Update viewer when images changed\n  update: function update() {\n    var element = this.element,\n        options = this.options,\n        isImg = this.isImg;\n\n    // Destroy viewer if the target image was deleted\n\n    if (isImg && !element.parentNode) {\n      return this.destroy();\n    }\n\n    var images = [];\n\n    forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n      if (options.filter) {\n        if (options.filter(image)) {\n          images.push(image);\n        }\n      } else {\n        images.push(image);\n      }\n    });\n\n    if (!images.length) {\n      return this;\n    }\n\n    this.images = images;\n    this.length = images.length;\n\n    if (this.ready) {\n      var indexes = [];\n\n      forEach(this.items, function (item, i) {\n        var img = item.querySelector('img');\n        var image = images[i];\n\n        if (image) {\n          if (image.src !== img.src) {\n            indexes.push(i);\n          }\n        } else {\n          indexes.push(i);\n        }\n      });\n\n      setStyle(this.list, {\n        width: 'auto'\n      });\n\n      this.initList();\n\n      if (this.isShown) {\n        if (this.length) {\n          if (this.viewed) {\n            var index = indexes.indexOf(this.index);\n\n            if (index >= 0) {\n              this.viewed = false;\n              this.view(Math.max(this.index - (index + 1), 0));\n            } else {\n              addClass(this.items[this.index], CLASS_ACTIVE);\n            }\n          }\n        } else {\n          this.image = null;\n          this.viewed = false;\n          this.index = 0;\n          this.imageData = {};\n          this.canvas.innerHTML = '';\n          this.title.innerHTML = '';\n        }\n      }\n    } else {\n      this.build();\n    }\n\n    return this;\n  },\n\n\n  // Destroy the viewer\n  destroy: function destroy() {\n    var element = this.element,\n        options = this.options;\n\n\n    if (!getData(element, NAMESPACE)) {\n      return this;\n    }\n\n    this.destroyed = true;\n\n    if (this.ready) {\n      if (this.played) {\n        this.stop();\n      }\n\n      if (options.inline) {\n        if (this.fulled) {\n          this.exit();\n        }\n\n        this.unbind();\n      } else if (this.isShown) {\n        if (this.viewing) {\n          if (this.imageRendering) {\n            this.imageRendering.abort();\n          } else if (this.imageInitializing) {\n            this.imageInitializing.abort();\n          }\n        }\n\n        if (this.hiding) {\n          this.transitioning.abort();\n        }\n\n        this.hidden();\n      } else if (this.showing) {\n        this.transitioning.abort();\n        this.hidden();\n      }\n\n      this.ready = false;\n      this.viewer.parentNode.removeChild(this.viewer);\n    } else if (options.inline) {\n      if (this.delaying) {\n        this.delaying.abort();\n      } else if (this.initializing) {\n        this.initializing.abort();\n      }\n    }\n\n    if (!options.inline) {\n      removeListener(element, EVENT_CLICK, this.onStart);\n    }\n\n    removeData(element, NAMESPACE);\n    return this;\n  }\n};\n\nvar others = {\n  open: function open() {\n    var body = this.body;\n\n\n    addClass(body, CLASS_OPEN);\n\n    body.style.paddingRight = this.scrollbarWidth + (parseFloat(this.initialBodyPaddingRight) || 0) + 'px';\n  },\n  close: function close() {\n    var body = this.body;\n\n\n    removeClass(body, CLASS_OPEN);\n    body.style.paddingRight = this.initialBodyPaddingRight;\n  },\n  shown: function shown() {\n    var element = this.element,\n        options = this.options;\n\n\n    this.fulled = true;\n    this.isShown = true;\n    this.render();\n    this.bind();\n    this.showing = false;\n\n    if (isFunction(options.shown)) {\n      addListener(element, EVENT_SHOWN, options.shown, {\n        once: true\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_SHOWN) === false) {\n      return;\n    }\n\n    if (this.ready && this.isShown && !this.hiding) {\n      this.view(this.index);\n    }\n  },\n  hidden: function hidden() {\n    var element = this.element,\n        options = this.options;\n\n\n    this.fulled = false;\n    this.viewed = false;\n    this.isShown = false;\n    this.close();\n    this.unbind();\n    addClass(this.viewer, CLASS_HIDE);\n    this.resetList();\n    this.resetImage();\n    this.hiding = false;\n\n    if (!this.destroyed) {\n      if (isFunction(options.hidden)) {\n        addListener(element, EVENT_HIDDEN, options.hidden, {\n          once: true\n        });\n      }\n\n      dispatchEvent(element, EVENT_HIDDEN);\n    }\n  },\n  requestFullscreen: function requestFullscreen() {\n    var document = this.element.ownerDocument;\n\n    if (this.fulled && !document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {\n      var documentElement = document.documentElement;\n\n\n      if (documentElement.requestFullscreen) {\n        documentElement.requestFullscreen();\n      } else if (documentElement.msRequestFullscreen) {\n        documentElement.msRequestFullscreen();\n      } else if (documentElement.mozRequestFullScreen) {\n        documentElement.mozRequestFullScreen();\n      } else if (documentElement.webkitRequestFullscreen) {\n        documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      }\n    }\n  },\n  exitFullscreen: function exitFullscreen() {\n    if (this.fulled) {\n      var document = this.element.ownerDocument;\n\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen();\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n      }\n    }\n  },\n  change: function change(e) {\n    var options = this.options,\n        pointers = this.pointers;\n\n    var pointer = pointers[Object.keys(pointers)[0]];\n    var offsetX = pointer.endX - pointer.startX;\n    var offsetY = pointer.endY - pointer.startY;\n\n    switch (this.action) {\n      // Move the current image\n      case ACTION_MOVE:\n        this.move(offsetX, offsetY);\n        break;\n\n      // Zoom the current image\n      case ACTION_ZOOM:\n        this.zoom(getMaxZoomRatio(pointers), false, e);\n        break;\n\n      case ACTION_SWITCH:\n        {\n          this.action = 'switched';\n\n          var absoluteOffsetX = Math.abs(offsetX);\n\n          if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n            // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n            this.pointers = {};\n\n            if (offsetX > 1) {\n              this.prev(options.loop);\n            } else if (offsetX < -1) {\n              this.next(options.loop);\n            }\n          }\n\n          break;\n        }\n\n      default:\n    }\n\n    // Override\n    forEach(pointers, function (p) {\n      p.startX = p.endX;\n      p.startY = p.endY;\n    });\n  },\n  isSwitchable: function isSwitchable() {\n    var imageData = this.imageData,\n        viewerData = this.viewerData;\n\n\n    return this.length > 1 && imageData.left >= 0 && imageData.top >= 0 && imageData.width <= viewerData.width && imageData.height <= viewerData.height;\n  }\n};\n\nvar AnotherViewer = WINDOW.Viewer;\n\nvar Viewer = function () {\n  /**\n   * Create a new Viewer.\n   * @param {Element} element - The target element for viewing.\n   * @param {Object} [options={}] - The configuration options.\n   */\n  function Viewer(element) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, Viewer);\n\n    if (!element || element.nodeType !== 1) {\n      throw new Error('The first argument is required and must be an element.');\n    }\n\n    this.element = element;\n    this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n    this.action = false;\n    this.fading = false;\n    this.fulled = false;\n    this.hiding = false;\n    this.imageData = {};\n    this.index = this.options.initialViewIndex;\n    this.isImg = false;\n    this.isShown = false;\n    this.length = 0;\n    this.played = false;\n    this.playing = false;\n    this.pointers = {};\n    this.ready = false;\n    this.showing = false;\n    this.timeout = false;\n    this.tooltipping = false;\n    this.viewed = false;\n    this.viewing = false;\n    this.wheeling = false;\n    this.zooming = false;\n    this.init();\n  }\n\n  createClass(Viewer, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      var element = this.element,\n          options = this.options;\n\n\n      if (getData(element, NAMESPACE)) {\n        return;\n      }\n\n      setData(element, NAMESPACE, this);\n\n      var isImg = element.tagName.toLowerCase() === 'img';\n      var images = [];\n\n      forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n        if (isFunction(options.filter)) {\n          if (options.filter.call(_this, image)) {\n            images.push(image);\n          }\n        } else {\n          images.push(image);\n        }\n      });\n\n      if (!images.length) {\n        return;\n      }\n\n      this.isImg = isImg;\n      this.length = images.length;\n      this.images = images;\n\n      var ownerDocument = element.ownerDocument;\n\n      var body = ownerDocument.body || ownerDocument.documentElement;\n\n      this.body = body;\n      this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n      this.initialBodyPaddingRight = window.getComputedStyle(body).paddingRight;\n\n      // Override `transition` option if it is not supported\n      if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n        options.transition = false;\n      }\n\n      if (options.inline) {\n        var count = 0;\n        var progress = function progress() {\n          count += 1;\n\n          if (count === _this.length) {\n            var timeout = void 0;\n\n            _this.initializing = false;\n            _this.delaying = {\n              abort: function abort() {\n                clearTimeout(timeout);\n              }\n            };\n\n            // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n            timeout = setTimeout(function () {\n              _this.delaying = false;\n              _this.build();\n            }, 0);\n          }\n        };\n\n        this.initializing = {\n          abort: function abort() {\n            forEach(images, function (image) {\n              if (!image.complete) {\n                removeListener(image, EVENT_LOAD, progress);\n              }\n            });\n          }\n        };\n\n        forEach(images, function (image) {\n          if (image.complete) {\n            progress();\n          } else {\n            addListener(image, EVENT_LOAD, progress, {\n              once: true\n            });\n          }\n        });\n      } else {\n        addListener(element, EVENT_CLICK, this.onStart = function (_ref) {\n          var target = _ref.target;\n\n          if (target.tagName.toLowerCase() === 'img') {\n            _this.view(_this.images.indexOf(target));\n          }\n        });\n      }\n    }\n  }, {\n    key: 'build',\n    value: function build() {\n      if (this.ready) {\n        return;\n      }\n\n      var element = this.element,\n          options = this.options;\n\n      var parent = element.parentNode;\n      var template = document.createElement('div');\n\n      template.innerHTML = TEMPLATE;\n\n      var viewer = template.querySelector('.' + NAMESPACE + '-container');\n      var title = viewer.querySelector('.' + NAMESPACE + '-title');\n      var toolbar = viewer.querySelector('.' + NAMESPACE + '-toolbar');\n      var navbar = viewer.querySelector('.' + NAMESPACE + '-navbar');\n      var button = viewer.querySelector('.' + NAMESPACE + '-button');\n      var canvas = viewer.querySelector('.' + NAMESPACE + '-canvas');\n\n      this.parent = parent;\n      this.viewer = viewer;\n      this.title = title;\n      this.toolbar = toolbar;\n      this.navbar = navbar;\n      this.button = button;\n      this.canvas = canvas;\n      this.footer = viewer.querySelector('.' + NAMESPACE + '-footer');\n      this.tooltipBox = viewer.querySelector('.' + NAMESPACE + '-tooltip');\n      this.player = viewer.querySelector('.' + NAMESPACE + '-player');\n      this.list = viewer.querySelector('.' + NAMESPACE + '-list');\n\n      addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title) ? options.title[0] : options.title));\n      addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n      toggleClass(button, CLASS_HIDE, !options.button);\n\n      if (options.backdrop) {\n        addClass(viewer, NAMESPACE + '-backdrop');\n\n        if (!options.inline && options.backdrop === true) {\n          setData(canvas, DATA_ACTION, 'hide');\n        }\n      }\n\n      if (options.toolbar) {\n        var list = document.createElement('ul');\n        var custom = isPlainObject(options.toolbar);\n        var zoomButtons = BUTTONS.slice(0, 3);\n        var rotateButtons = BUTTONS.slice(7, 9);\n        var scaleButtons = BUTTONS.slice(9);\n\n        if (!custom) {\n          addClass(toolbar, getResponsiveClass(options.toolbar));\n        }\n\n        forEach(custom ? options.toolbar : BUTTONS, function (value, index) {\n          var deep = custom && isPlainObject(value);\n          var name = custom ? hyphenate(index) : value;\n          var show = deep && !isUndefined(value.show) ? value.show : value;\n\n          if (!show || !options.zoomable && zoomButtons.indexOf(name) !== -1 || !options.rotatable && rotateButtons.indexOf(name) !== -1 || !options.scalable && scaleButtons.indexOf(name) !== -1) {\n            return;\n          }\n\n          var size = deep && !isUndefined(value.size) ? value.size : value;\n          var click = deep && !isUndefined(value.click) ? value.click : value;\n          var item = document.createElement('li');\n\n          item.setAttribute('role', 'button');\n          addClass(item, NAMESPACE + '-' + name);\n\n          if (!isFunction(click)) {\n            setData(item, DATA_ACTION, name);\n          }\n\n          if (isNumber(show)) {\n            addClass(item, getResponsiveClass(show));\n          }\n\n          if (['small', 'large'].indexOf(size) !== -1) {\n            addClass(item, NAMESPACE + '-' + size);\n          } else if (name === 'play') {\n            addClass(item, NAMESPACE + '-large');\n          }\n\n          if (isFunction(click)) {\n            addListener(item, EVENT_CLICK, click);\n          }\n\n          list.appendChild(item);\n        });\n\n        toolbar.appendChild(list);\n      } else {\n        addClass(toolbar, CLASS_HIDE);\n      }\n\n      if (!options.rotatable) {\n        var rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n\n        addClass(rotates, CLASS_INVISIBLE);\n        forEach(rotates, function (rotate) {\n          toolbar.appendChild(rotate);\n        });\n      }\n\n      if (options.inline) {\n        addClass(button, CLASS_FULLSCREEN);\n        setStyle(viewer, {\n          zIndex: options.zIndexInline\n        });\n\n        if (window.getComputedStyle(parent).position === 'static') {\n          setStyle(parent, {\n            position: 'relative'\n          });\n        }\n\n        parent.insertBefore(viewer, element.nextSibling);\n      } else {\n        addClass(button, CLASS_CLOSE);\n        addClass(viewer, CLASS_FIXED);\n        addClass(viewer, CLASS_FADE);\n        addClass(viewer, CLASS_HIDE);\n\n        setStyle(viewer, {\n          zIndex: options.zIndex\n        });\n\n        var container = options.container;\n\n\n        if (isString(container)) {\n          container = element.ownerDocument.querySelector(container);\n        }\n\n        if (!container) {\n          container = this.body;\n        }\n\n        container.appendChild(viewer);\n      }\n\n      if (options.inline) {\n        this.render();\n        this.bind();\n        this.isShown = true;\n      }\n\n      this.ready = true;\n\n      if (isFunction(options.ready)) {\n        addListener(element, EVENT_READY, options.ready, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_READY) === false) {\n        this.ready = false;\n        return;\n      }\n\n      if (this.ready && options.inline) {\n        this.view(this.index);\n      }\n    }\n\n    /**\n     * Get the no conflict viewer class.\n     * @returns {Viewer} The viewer class.\n     */\n\n  }], [{\n    key: 'noConflict',\n    value: function noConflict() {\n      window.Viewer = AnotherViewer;\n      return Viewer;\n    }\n\n    /**\n     * Change the default options.\n     * @param {Object} options - The new default options.\n     */\n\n  }, {\n    key: 'setDefaults',\n    value: function setDefaults(options) {\n      assign(DEFAULTS, isPlainObject(options) && options);\n    }\n  }]);\n  return Viewer;\n}();\n\nassign(Viewer.prototype, render, events, handlers, methods, others);\n\nexport default Viewer;\n"],"sourceRoot":""}