(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7542752e"],{6235:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"topic-list"},[r("el-form",{ref:"userSearch",attrs:{"label-position":"left","label-width":"100px",model:e.userSearch,inline:""}},[r("el-form-item",{staticClass:"search-item",attrs:{label:"用户昵称"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入用户昵称"},model:{value:e.userSearch.name,callback:function(t){e.$set(e.userSearch,"name","string"===typeof t?t.trim():t)},expression:"userSearch.name"}})],1),r("el-form-item",{staticClass:"search-item",attrs:{label:"用户来源"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择用户来源"},model:{value:e.userSearch.source,callback:function(t){e.$set(e.userSearch,"source","string"===typeof t?t.trim():t)},expression:"userSearch.source"}},e._l(e.sourceList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{staticClass:"search-item",attrs:{label:"用户类型"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择用户类型"},model:{value:e.userSearch.type,callback:function(t){e.$set(e.userSearch,"type","string"===typeof t?t.trim():t)},expression:"userSearch.type"}},e._l(e.typeList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{staticClass:"search-item",attrs:{label:"负责人"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入负责人姓名"},model:{value:e.userSearch.charge,callback:function(t){e.$set(e.userSearch,"charge","string"===typeof t?t.trim():t)},expression:"userSearch.charge"}})],1),r("el-form-item",{staticClass:"search-item",attrs:{label:"添加日期"}},[r("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"起始添加时间","end-placeholder":"截止添加时间","value-format":"yyyy-MM-dd"},model:{value:e.userSearch.time,callback:function(t){e.$set(e.userSearch,"time","string"===typeof t?t.trim():t)},expression:"userSearch.time"}})],1),r("el-form-item",{staticClass:"search-item",attrs:{label:"性别"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择用户性别"},model:{value:e.userSearch.gender,callback:function(t){e.$set(e.userSearch,"gender","string"===typeof t?t.trim():t)},expression:"userSearch.gender"}},e._l(e.genderList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{staticClass:"select-btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),r("el-button",{staticClass:"select-btn",attrs:{type:"primary"},on:{click:e.resetForm}},[e._v("重置")])],1)],1),r("div",{staticClass:"list"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"","empty-text":e.hasListInfo}},[r("el-table-column",{attrs:{fixed:"",prop:"name",label:"用户昵称",align:"center"}}),r("el-table-column",{attrs:{prop:"gender",label:"用户性别",align:"center"}}),r("el-table-column",{attrs:{prop:"baby",label:"宝宝信息",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{domProps:{innerHTML:e._s(t.row.baby)}})]}}])}),r("el-table-column",{attrs:{prop:"source",label:"用户来源",align:"center"}}),r("el-table-column",{attrs:{prop:"scene",label:"来源场景",align:"center"}}),r("el-table-column",{attrs:{prop:"type",label:"用户类型",align:"center"}}),r("el-table-column",{attrs:{prop:"follow",label:"跟进情况",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{domProps:{innerHTML:e._s(t.row.follow)}})]}}])}),r("el-table-column",{attrs:{prop:"charge",label:"当前负责人",align:"center"}}),r("el-table-column",{attrs:{prop:"appeal",label:"用户诉求",align:"center"}}),r("el-table-column",{attrs:{prop:"first_time",label:"首次添加时间",align:"center"}}),r("el-table-column",{attrs:{prop:"update_time",label:"更新时间",align:"center"}}),r("el-table-column",{attrs:{prop:"count",label:"签约次数",align:"center"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.$router.push("/user-manage/user-info/"+t.row.external_userid)}}},[e._v("查看详情")])]}}])})],1),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},a=[],o=(r("96cf"),r("3b8d")),u=(r("7f7f"),r("ac4d"),r("8a81"),r("ac6a"),r("ca7e")),c=r("ed08"),i={data:function(){return{isOpen:!1,list:[],currentPage:1,delShow:!1,pageSize:10,count:0,rowInfo:"",hasListInfo:"暂无数据",singleList:[],createNameList:[],babyInfo:[],userSearch:{name:"",source:"",type:"",charge:"",time:["",""],gender:""},typeList:[],sourceList:[],genderList:[{value:1,label:"男"},{value:2,label:"女"}],chargeList:[{value:"233",label:"233"}]}},computed:{getBaby:function(){return function(e){var t="",r=!0,n=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var i=o.value,s=1===i.gender?"男":2===i.gender?"女":"未知",l=Object(c["e"])(i.birthday),d=l.year,p=l.month,m=l.date,f="".concat(d?d+"年":"").concat(p?p+"月":"").concat(m?m+"天":"");t+="".concat(i.name?i.name+"/":"").concat(i.birthday?f+"/":"").concat(s,"<br />")}}catch(h){n=!0,a=h}finally{try{r||null==u.return||u.return()}finally{if(n)throw a}}return t||"/"}},getSourceType:function(){return function(e){return"public_account"===e?"公众号":"association"===e?"社群":"small_routine"===e?"小程序":"under_line"===e?"线下":"video"===e?"视频":"other"===e?"其它":void 0}},getFollowInfo:function(){return function(e,t,r){return(e>0?"跟进中":"未跟进")+"<br />跟进次数/总次数："+(e||0)+"/"+(t||0)+"<br />最近跟进时间间："+(r?this.formatTime(r):"/")}},getUserTypeInfo:function(){return function(e){return e?e.type+(e.level?"-"+e.level:""):""}},getUserSource:function(){return function(e){return e&&e.first_name?"".concat(e.first_name,"-").concat(e.second_name,"-").concat(e.three_name):""}}},created:function(){this.getCurrentList(),this.getUserType(),this.getUserTypeList()},methods:{onSubmit:function(){this.currentPage=1,this.getCurrentList(this.userSearch)},handleSizeChange:function(e){this.pageSize=e,this.getCurrentList(this.userSearch)},handleCurrentChange:function(e){this.currentPage=e,this.getCurrentList(this.userSearch)},resetForm:function(){this.userSearch={name:"",source:"",type:"",charge:"",time:["",""],gender:""},this.getCurrentList()},getCurrentList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={page:this.currentPage,pageSize:this.pageSize},t&&(t.name&&(r.name=t.name),t.type&&(r.user_type=t.type),t.charge&&(r.handler_name=t.charge),t.time&&t.time[0]&&t.time[1]&&(r.created_at=t.time[0]+"|"+t.time[1]),t.gender&&(r.gender=t.gender),t.source&&(r.user_source=t.source)),e.next=4,Object(u["q"])(r);case 4:n=e.sent,a=n.code,o=n.data,1e4===a&&(this.count=o.count,this.list=o.list.map((function(e){return{name:e.name,gender:1===e.gender?"男":2===e.gender?"女":"未知",baby:e.member?c.getBaby(e.member):"/",source:c.getUserSource(e.user_source)||"/",scene:e.from_scene||"/",type:c.getUserTypeInfo(e.user_type)||"/",follow:c.getFollowInfo(e.follow_current_times,e.follow_total_times,e.last_follow_at),charge:"".concat(e.handler_name||"").concat(e.nickname?"(".concat(e.nickname,")"):"")||"/",appeal:e.user_remark||"/",first_time:e.created_at?c.formatTime(e.created_at):"-",update_time:e.updated_at?c.formatTime(e.created_at):"-",count:e.order_count||0,id:e._id,user_id:e.user_id,external_userid:e.external_userid}})));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getUserType:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["A"])();case 2:t=e.sent,r=t.code,n=t.data,1e4===r&&(this.sourceList=n.list.map((function(e){return"".concat(e.first_name,"-").concat(e.second_name,"-").concat(e.three_name)})).filter((function(e,t,r){return r.indexOf(e)===t})));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getUserTypeList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["B"])({pageSize:0});case 2:t=e.sent,r=t.code,n=t.data,1e4===r&&(this.typeList=n.list.map((function(e){return e.type+(e.level?"-"+e.level:"")})).filter((function(e,t,r){return r.indexOf(e)===t})));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},s=i,l=(r("b459"),r("2877")),d=Object(l["a"])(s,n,a,!1,null,"461bce97",null);t["default"]=d.exports},"8b3e":function(e,t,r){},b459:function(e,t,r){"use strict";var n=r("8b3e"),a=r.n(n);a.a},ca7e:function(e,t,r){"use strict";var n=r("bc3a"),a=r.n(n),o=r("5c96"),u=r("a18c"),c=r("4360"),i=r("5f87"),s=a.a.create({baseURL:"https://api-crm.baobaohehu.com",timeout:2e5});s.interceptors.request.use((function(e){return c["a"].getters.token&&(e.headers["Authorization"]=Object(i["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.config,r=e.data;return t.url.indexOf(t.baseURL)>-1&&1e4!==r.code?40001===r.code?(u["c"].push("/404"),Promise.reject()):(Object(o["Message"])({message:r.message||"Error",type:"error",duration:5e3}),401===r.code&&c["a"].dispatch("user/resetToken").then((function(){location.reload()})),Promise.reject(new Error(r.message||"Error"))):r}),(function(e){return console.log("err"+e),Object(o["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}));var l=s;function d(e){return l({url:"/corp/wechat/helper",method:"get",params:e})}function p(e){return l({url:"/corp/admin",method:"get",params:e})}function m(e){return l({url:"/corp/helper",method:"get",params:e})}function f(e){return l({url:"/corp/helper",method:"post",data:e})}function h(e,t){return l({url:"/corp/helper/"+e,method:"put",data:t})}function g(e,t){return l({url:"/corp/helper/change/"+e,method:"put",data:t})}function b(e){return l({url:"/corp/helper/"+e,method:"delete"})}function _(e){return l({url:"/corp/source_channel",method:"get",params:e})}function y(e){return l({url:"/corp/source_channel",method:"post",data:e})}function v(e,t){return l({url:"/corp/source_channel/"+e,method:"put",data:t})}function S(e){return l({url:"/corp/source_channel/"+e,method:"delete"})}function w(e){return l({url:"/corp/user_type",method:"get",params:e})}function x(e){return l({url:"/corp/user_type",method:"post",data:e})}function k(e,t){return l({url:"/corp/user_type/"+e,method:"put",data:t})}function L(e){return l({url:"/corp/user_type/"+e,method:"delete"})}function C(e){return l({url:"/corp/user_visit",method:"get",params:e})}function j(e){return l({url:"/corp/user_visit",method:"post",data:e})}function z(e,t){return l({url:"/corp/user_visit/"+e,method:"put",data:t})}function O(e){return l({url:"/corp/user_visit/"+e,method:"delete"})}function T(e){return l({url:"/corp/user_visit/status/"+e,method:"put"})}r.d(t,"u",(function(){return d})),r.d(t,"n",(function(){return p})),r.d(t,"t",(function(){return m})),r.d(t,"d",(function(){return f})),r.d(t,"C",(function(){return h})),r.d(t,"H",(function(){return g})),r.d(t,"i",(function(){return b})),r.d(t,"o",(function(){return _})),r.d(t,"b",(function(){return y})),r.d(t,"F",(function(){return v})),r.d(t,"g",(function(){return S})),r.d(t,"B",(function(){return w})),r.d(t,"f",(function(){return x})),r.d(t,"I",(function(){return k})),r.d(t,"l",(function(){return L})),r.d(t,"r",(function(){return C})),r.d(t,"c",(function(){return j})),r.d(t,"G",(function(){return z})),r.d(t,"h",(function(){return O})),r.d(t,"E",(function(){return T})),r.d(t,"q",(function(){return P})),r.d(t,"z",(function(){return U})),r.d(t,"s",(function(){return I})),r.d(t,"A",(function(){return q})),r.d(t,"v",(function(){return R})),r.d(t,"a",(function(){return $})),r.d(t,"D",(function(){return M})),r.d(t,"x",(function(){return E})),r.d(t,"k",(function(){return F})),r.d(t,"y",(function(){return B})),r.d(t,"w",(function(){return A})),r.d(t,"p",(function(){return H})),r.d(t,"e",(function(){return J})),r.d(t,"j",(function(){return D})),r.d(t,"m",(function(){return G}));var P=function(e){return l({url:"corp/user",method:"get",params:e})},U=function(e){return l({url:"corp/admin/crm_user/"+e,method:"get"})},I=function(e){return l({url:"corp/follow_up_log",method:"get",params:e})},q=function(e){return l({url:"corp/source_channel",method:"get",params:e})},R=function(e){return l({url:"corp/admin/order/"+e,method:"get"})},$=function(e){return l({url:"corp/admin/scene",method:"post",data:e})},M=function(e,t){return l({url:"corp/admin/scene/"+e,method:"put",data:t})},E=function(e){return l({url:"corp/admin/scene/detail/"+e,method:"get"})},F=function(e){return l({url:"corp/admin/scene/"+e,method:"delete"})},B=function(e){return l({url:"corp/admin/scene",method:"get",params:e})},A=function(e){return l({url:"corp/admin/scene/qrcode/"+e,method:"get"})},H=function(e){return l({url:"corp/admin/wx_qrcode",method:"get",params:e})},J=function(e){return l({url:"corp/admin/wx_qrcode",method:"post",data:e})},D=function(e){return l({url:"corp/admin/wx_qrcode/"+e,method:"delete"})},G=function(e){return l({url:"corp/admin/wx_qrcode/download",method:"get",params:e})}}}]);
//# sourceMappingURL=chunk-7542752e.b53309f2.js.map