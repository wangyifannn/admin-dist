(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb964360"],{"18b3":function(t){t.exports={opratorAction:{item:[{type:"text",name:"name",value:"",placeholder:"请输入运营动作名称",width:"100%",label:"运营动作:",show:!0,showlimit:!0,maxlength:20,rules:[{required:!0,message:"请输入运营动作名称",trigger:"blur"}]},{type:"textarea",name:"desc",value:"",placeholder:"请填写描述",width:"100%",label:"描述:",show:!0,rules:[]},{type:"tip",name:"",value:"提交后仅可修改运营动作描述，请慎重！",width:"100%",show:!0}],data:{name:"",desc:""}},userType:{item:[{type:"text",name:"name",value:"",placeholder:"请输入客户类型名称",width:"100%",label:"客户类型:",show:!0,showlimit:!0,maxlength:20,rules:[{required:!0,message:"请输入客户类型名称",trigger:"blur"}]},{type:"textarea",name:"desc",value:"",placeholder:"请填写描述",width:"100%",label:"描述:",show:!0,rules:[]},{type:"tip",name:"",value:"提交后仅可修改客户类型描述，请慎重！",width:"100%",show:!0}],data:{name:"",desc:""}},sourceChannel:{item:[{type:"select",name:"first",value:"",placeholder:"请选择一级渠道",width:"100%",label:"一级来源渠道:",show:!0,allowCreate:!0,filterable:!0,options:[],rules:[{required:!0,message:"请选择一级渠道",trigger:"blur"}]},{type:"select",name:"second",value:"",placeholder:"请选择二级渠道",width:"100%",label:"二级来源渠道:",show:!0,allowCreate:!0,filterable:!0,options:[],rules:[{required:!0,message:"请选择二级渠道",trigger:"blur"}]},{type:"text",name:"third",value:"",placeholder:"请输入三级来源渠道",width:"100%",label:"三级来源渠道:",show:!0,rules:[{required:!0,message:"请输入三级来源渠道",trigger:"blur"}]},{type:"textarea",name:"desc",value:"",placeholder:"请填写描述",width:"100%",label:"描述:",show:!0,rules:[]},{type:"tip",name:"",value:"提交后仅可修改来源渠道描述，请慎重！",width:"100%",show:!0}],data:{first:"",second:"",third:"",desc:""}}}},"3acd":function(t,e,a){"use strict";a.d(e,"i",(function(){return o})),a.d(e,"l",(function(){return n})),a.d(e,"m",(function(){return r})),a.d(e,"g",(function(){return s})),a.d(e,"a",(function(){return l})),a.d(e,"o",(function(){return u})),a.d(e,"d",(function(){return c})),a.d(e,"k",(function(){return d})),a.d(e,"f",(function(){return m})),a.d(e,"e",(function(){return h})),a.d(e,"h",(function(){return p})),a.d(e,"n",(function(){return f})),a.d(e,"c",(function(){return g})),a.d(e,"j",(function(){return b})),a.d(e,"b",(function(){return w}));var i=a("b775");function o(t){return Object(i["a"])({url:"/crm/customer/list",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/crm/user/list",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/crm/user/".concat(t),method:"get",params:t})}function s(t){return Object(i["a"])({url:"/crm/customer/".concat(t,"/detail"),method:"get",params:t})}function l(t){return Object(i["a"])({url:"/crm/customer",method:"post",data:t})}function u(t,e){return Object(i["a"])({url:"/crm/customer/".concat(e,"/update"),method:"put",data:t})}function c(t,e){return Object(i["a"])({url:"/crm/customer/".concat(e,"/relative"),method:"put",data:t})}function d(t,e){return Object(i["a"])({url:"/crm/customer/".concat(t,"/orders"),method:"get",params:e})}function m(t){return Object(i["a"])({url:"/crm/customer/".concat(t,"/brief_info"),method:"get"})}function h(t,e){return Object(i["a"])({url:"/crm/customer/".concat(t,"/path"),method:"post",data:e})}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])({url:"/crm/customer/".concat(t,"/path/list"),method:"get",params:e})}function f(){return Object(i["a"])({url:"/crm/basic/customer/supervisor/options",method:"get"})}function g(t){return Object(i["a"])({url:"/crm/customer/change_supervisor",method:"put",data:t})}function b(t){return Object(i["a"])({url:"/crm/customer/".concat(t,"/creator_options"),method:"get"})}function w(t){return Object(i["a"])({url:"/crm/customer/".concat(t,"/cancel_relative"),method:"put"})}},5118:function(t,e,a){(function(t){var i="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new n(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},a("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,a("24aa"))},6017:function(t,e,a){(function(t,e){(function(t,a){"use strict";if(!t.setImmediate){var i,o=1,n={},r=!1,s=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?h():p()?f():t.MessageChannel?g():s&&"onreadystatechange"in s.createElement("script")?b():w(),l.setImmediate=u,l.clearImmediate=c}function u(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),a=0;a<e.length;a++)e[a]=arguments[a+1];var r={callback:t,args:e};return n[o]=r,i(o),o++}function c(t){delete n[t]}function d(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(a,i);break}}function m(t){if(r)setTimeout(m,0,t);else{var e=n[t];if(e){r=!0;try{d(e)}finally{c(t),r=!1}}}}function h(){i=function(t){e.nextTick((function(){m(t)}))}}function p(){if(t.postMessage&&!t.importScripts){var e=!0,a=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=a,e}}function f(){var e="setImmediate$"+Math.random()+"$",a=function(a){a.source===t&&"string"===typeof a.data&&0===a.data.indexOf(e)&&m(+a.data.slice(e.length))};t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(a){t.postMessage(e+a,"*")}}function g(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;m(e)},i=function(e){t.port2.postMessage(e)}}function b(){var t=s.documentElement;i=function(e){var a=s.createElement("script");a.onreadystatechange=function(){m(e),a.onreadystatechange=null,t.removeChild(a),a=null},t.appendChild(a)}}function w(){i=function(t){setTimeout(m,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,a("24aa"),a("4362"))},7871:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"客户类型",name:"customerType"}}),a("el-tab-pane",{attrs:{label:"来源渠道",name:"chanel"}}),a("el-tab-pane",{attrs:{label:"运营动作",name:"action"}})],1),a("div",["customerType"===t.activeName?a("userType"):"action"===t.activeName?a("opratorAction"):a("sourceChannel")],1)],1)},o=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("SearchForm",{attrs:{optionsVal:t.customerTypeValue},on:{reset:t.resetForm,searchFun:t.searchFun}},[a("userTypeSelect",{attrs:{slot:"optionsType",moduleName:t.moduleName,isOpen:"all"},slot:"optionsType",model:{value:t.customerTypeValue,callback:function(e){t.customerTypeValue=e},expression:"customerTypeValue"}})],1),a("el-button",{staticClass:"margin-bottom-30",attrs:{type:"primary",size:"small"},on:{click:t.addUserType}},[t._v("新增"+t._s(t.moduleName))]),a("MyTable",{attrs:{size:"mini",stripe:!1,border:!0,multiple:!1,operation:t.operation,column:t.column,data:t.tableData,currentPage:t.currentPage,pageSize:t.pageSize,total:t.total},on:{update:t.update,customerTableSwitchChange:t.handleStatusColClick,handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}}),a("Dialog",{attrs:{title:t.dialogTitle,width:"status"!==t.dialogType?"30%":"20%",hasConfirmBtn:"status"===t.dialogType,showCancelBtn:"status"===t.dialogType},on:{cancel:t.getUserTypeList,btnHandle:t.statusConfirm},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[a("div",{attrs:{slot:"form"},slot:"form"},["status"!==t.dialogType?a("MyForm",{ref:"operatorActionAddForm",attrs:{form:t.dialogForm,formData:t.formData,formItem:t.formItem},on:{submit:t.dialogSubmit}}):t._e()],1),"status"===t.dialogType?a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v(t._s(t.dialogContent))])]):t._e()])],1)},r=[],s=(a("7f7f"),a("ac6a"),a("9250")),l=a("c708"),u=a("18b3");function c(t){return l[t]}function d(t,e){return u[t][e]}var m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"small",model:t.formInline}},[t._t("optionsType"),a("CommonStatusSelect",{attrs:{moduleName:t.moduleName},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary"},on:{click:t.reset}},[t._v("重置")])],1)],2)},h=[],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"状态",prop:t.prop,rules:t.rules}},[a("el-select",{attrs:{value:t.value,placeholder:"请选择"+t.moduleName+"状态",clearable:"",disabled:t.disabled},on:{change:t.onValueChange}},t._l(t.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}},[t._v(t._s(e.label))])})),1)],1)},f=[],g={data:function(){return{statusOptions:[{label:"开启",value:!0},{label:"关闭",value:!1}]}},props:{value:[String,Boolean],moduleName:{type:String,default:""},prop:{type:String,default:""},rules:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},methods:{onValueChange:function(t){this.$emit("input",t)}}},b=g,w=a("2877"),y=Object(w["a"])(b,p,f,!1,null,null,null),T=y.exports,v={data:function(){return{formInline:{},status:""}},props:{optionsVal:[Array,String],moduleName:{type:String,default:""}},components:{CommonStatusSelect:T},methods:{onSubmit:function(){var t={opration_action:this.optionsVal,is_open:this.status};this.$emit("searchFun",t)},reset:function(){this.status="",this.$emit("reset")}}},C=v,_=Object(w["a"])(C,m,h,!1,null,null,null),S=_.exports,F=a("b5b3"),O=a("e298"),x=a("9039"),D=a("63d4"),I={data:function(){var t={showFormBorder:!1,showTitle:!1,ref:"customerTableAddForm",labelWidth:"100px",labelPositon:"right",style:"notprepend",column:1,hasSubmit:!0,submitDisabled:!1,submitText:"确认新增",cancleText:"取消"},e={nowPage:"customerTable",show:!0,fixed:!1,size:"mini",width:80,minWidth:100,label:"操作",btns:[{type:"text",size:"mini",content:"编辑",icon:"",handle:"update",class:"button-operator"}]};return{customerTypeValue:"",moduleName:"客户类型",dialogType:"status",dialogContent:"",titleOprator:"新增",dialogTitle:"",dialogVisible:!1,dialogForm:t,searchParams:{},column:[],putVal:{is_open:!1,_id:""},formItem:[],formData:{},tableData:[],pageSize:10,currentPage:1,total:0,operation:e}},components:{MyForm:D["a"],SearchForm:S,Dialog:x["a"],userTypeSelect:s["a"],MyTable:F["a"]},created:function(){this.fieldInit(),this.getUserTypeList()},methods:{resetForm:function(){this.customerTypeValue="",this.searchParams={},this.currentPage=1,this.getUserTypeList()},searchFun:function(t){this.searchParams=t,this.currentPage=1,this.getUserTypeList()},fieldInit:function(){var t=c("userType");t.forEach((function(t){t.width&&"auto"!=t.width&&(t.width="300")})),this.column=t},update:function(t){this.setDialogAttr("编辑","update","确认修改"),this.dialogFormInit(t),this.formItem[0].disabled=!0,this.formItem[2].show=!1,this.dialogShow()},handleCurrentChange:function(t){this.currentPage=t,this.getUserTypeList()},handleSizeChange:function(t){this.pageSize=t,this.getUserTypeList()},setTableData:function(t){var e=this,a=t.list;this.tableData=a.map((function(t,a){return{_id:t._id?t._id:a,id:t.id?t.id:"",name:t.name?t.name:"-",desc:t.desc?t.desc:"-",creator:t.creator?t.creator:"-",creatorName:t.creator?t.creator.name:"-",createAt:t.created_at?e.formatTime(t.created_at):"-",status:!!t.is_open&&t.is_open}}))},getUserTypeList:function(){var t=this;this.handleClose();var e={page_size:this.pageSize,current_page:this.currentPage},a=Object.assign({},e,this.searchParams);Object(O["j"])(a).then((function(e){e&&(t.total=e.data.count,t.setTableData(e.data))}))},handleStatusColClick:function(t){var e=t.row;t.$index;this.dialogTitle="状态切换提示",this.dialogType="status",this.dialogContent="确认".concat(e.status?"开启":"关闭","该客户类型吗？"),this.dialogForm.submitText="状态切换",this.putVal.is_open=e.status,this.putVal._id=e._id,this.dialogShow()},dialogFormInit:function(t){this.formItem=d("userType","item"),this.formData=t||d("userType","data"),this.formItem[0].disabled=!1,this.formItem[2].show=!0},dialogSubmit:function(){var t=this;this.dialogForm.submitDisabled=!0,this.formData._id?this.putUserType(this.formData,""):Object(O["c"])(this.formData).then((function(e){t.dialogForm.submitDisabled=!1,t.$message({type:e.data&&e.data.result?"success":"error",message:e.data&&e.data.result?t.dialogForm.submitText+"成功":e.data.message}),e.data.result&&t.getUserTypeList()})).catch((function(e){t.dialogForm.submitDisabled=!1}))},dialogShow:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},setDialogAttr:function(t,e,a){this.titleOprator=t,this.dialogTitle=this.titleOprator+this.moduleName,this.dialogType=e,this.dialogForm.submitText=a},addUserType:function(){this.setDialogAttr("新增","add","确认新增");var t={name:"",desc:""};this.dialogFormInit(t),this.dialogShow()},statusConfirm:function(){this.putUserType(this.putVal,"status")},putUserType:function(t,e){var a=this;Object(O["n"])(t,e).then((function(t){a.dialogForm.submitDisabled=!1,a.$message({type:t.data&&t.data.result?"success":"error",message:t.data&&t.data.result?a.dialogForm.submitText+"成功":a.dialogForm.submitText+"失败"}),t&&t.data.result&&a.getUserTypeList()}))}}},V=I,A=Object(w["a"])(V,n,r,!1,null,null,null),j=A.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("SearchForm",{attrs:{optionsVal:t.actionValue},on:{reset:t.resetForm,searchFun:t.searchFun}},[a("OpratorActionSelect",{attrs:{slot:"optionsType",moduleName:t.moduleName,isOpen:"all"},slot:"optionsType",model:{value:t.actionValue,callback:function(e){t.actionValue=e},expression:"actionValue"}})],1),a("el-button",{staticClass:"margin-bottom-30",attrs:{type:"primary",size:"small"},on:{click:t.addOpratorAction}},[t._v("新增"+t._s(t.moduleName))]),a("MyTable",{attrs:{size:"mini",stripe:!1,border:!0,multiple:!1,operation:t.operation,column:t.column,data:t.tableData,currentPage:t.currentPage,pageSize:t.pageSize,total:t.total},on:{update:t.update,actionTableSwitchChange:t.handleStatusColClick,handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}}),a("Dialog",{attrs:{title:t.dialogTitle,width:"status"!==t.dialogType?"30%":"20%",hasConfirmBtn:"status"===t.dialogType,showCancelBtn:"status"===t.dialogType},on:{cancel:t.getActionList,btnHandle:t.statusConfirm},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[a("div",{attrs:{slot:"form"},slot:"form"},["status"!==t.dialogType?a("MyForm",{ref:"operatorActionAddForm",attrs:{form:t.dialogForm,formData:t.formData,formItem:t.formItem},on:{submit:t.dialogSubmit}}):t._e()],1),"status"===t.dialogType?a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v(t._s(t.dialogContent))])]):t._e()])],1)},z=[],N=a("54b5"),k={data:function(){var t={showFormBorder:!1,showTitle:!1,ref:"operatorActionAddForm",labelWidth:"100px",labelPositon:"right",submitDisabled:!1,style:"notprepend",column:1,hasSubmit:!0,submitText:"确认新增",cancleText:"取消"},e={nowPage:"actionTable",show:!0,fixed:!1,size:"mini",width:80,minWidth:100,label:"操作",btns:[{type:"text",size:"mini",content:"编辑",icon:"",handle:"update",class:"button-operator"}]};return{dialogType:"status",moduleName:"运营动作",dialogContent:"确认开启该运营动作吗？",titleOprator:"新增",dialogTitle:"",dialogVisible:!1,dialogForm:t,actionValue:"",searchParams:{},formItem:[],formData:{},column:[],putVal:{is_open:!1,_id:""},tableData:[],pageSize:10,currentPage:1,total:0,operation:e}},components:{MyForm:D["a"],SearchForm:S,Dialog:x["a"],OpratorActionSelect:N["a"],MyTable:F["a"]},created:function(){this.getActionList(),this.fieldInit()},methods:{handleStatusColClick:function(t){var e=t.row;t.$index;this.dialogTitle="状态切换提示",this.dialogContent="确认".concat(e.status?"开启":"关闭","该客户类型吗？"),this.dialogForm.submitText="状态切换",this.dialogType="status",this.putVal.is_open=e.status,this.putVal._id=e._id,this.dialogShow()},setTableData:function(t){var e=this,a=t.list;this.tableData=a.map((function(t,a){return{_id:t._id?t._id:a,id:t.id?t.id:"",name:t.name?t.name:"-",desc:t.desc?t.desc:"-",creatorName:t.creator&&t.creator.name?t.creator.name:"-",createAt:t.created_at?e.formatTime(t.created_at):"-",status:!!t.is_open&&t.is_open}}))},getActionList:function(){var t=this;this.handleClose();var e={page_size:this.pageSize,current_page:this.currentPage},a=Object.assign({},e,this.searchParams);Object(O["g"])(a).then((function(e){e&&(t.total=e.data.count,t.setTableData(e.data))}))},fieldInit:function(){var t=c("opratorAction");t.forEach((function(t){t.width&&"auto"!=t.width&&(t.width="300")})),this.column=t},update:function(t){this.setDialogAttr("编辑","update","确认修改"),this.dialogFormInit(t),this.formItem[0].disabled=!0,this.formItem[2].show=!1,this.dialogShow()},setDialogAttr:function(t,e,a){this.titleOprator=t,this.dialogTitle=this.titleOprator+this.moduleName,this.dialogType=e,this.dialogForm.submitText=a},handleSizeChange:function(t){this.pageSize=t,this.getActionList()},handleCurrentChange:function(t){this.currentPage=t,this.getActionList()},searchFun:function(t){this.searchParams=t,this.currentPage=1,this.getActionList()},resetForm:function(){this.actionValue="",this.searchParams={},this.currentPage=1,this.getActionList()},addOpratorAction:function(){this.setDialogAttr("新增","add","确认新增");var t=this.initFormData();this.dialogFormInit(t),this.dialogShow()},dialogShow:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},initFormData:function(){var t={name:"",desc:""};return t},dialogFormInit:function(t){this.formItem=d("opratorAction","item"),this.formData=t||d("opratorAction","data"),this.formItem[0].disabled=!1,this.formItem[2].show=!0},dialogSubmit:function(){var t=this;this.dialogForm.submitDisabled=!0,this.formData._id?this.putOpratorAction(this.formData,""):Object(O["a"])(this.formData).then((function(e){t.dialogForm.submitDisabled=!1,t.$message({type:e.data&&e.data.result?"success":"error",message:e.data&&e.data.result?t.dialogForm.submitText+"成功":e.data.message}),e&&e.data.result&&t.getActionList()})).catch((function(e){t.dialogForm.submitDisabled=!1}))},statusConfirm:function(){this.putOpratorAction(this.putVal,"status")},putOpratorAction:function(t,e){var a=this;Object(O["l"])(t,e).then((function(t){a.dialogForm.submitDisabled=!1,a.$message({type:t.data&&t.data.result?"success":"error",message:t.data&&t.data.result?a.dialogForm.submitText+"成功":a.dialogForm.submitText+"失败"}),t&&t.data.result&&a.getActionList()})).catch((function(t){a.dialogForm.submitDisabled=!1}))}}},L=k,$=Object(w["a"])(L,P,z,!1,null,null,null),M=$.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("SearchForm",{attrs:{optionsVal:t.channelVlaue},on:{reset:t.resetForm,searchFun:t.searchFun}},[a("SourceChannelSelect",{attrs:{slot:"optionsType",moduleName:t.moduleName,isOpen:"all"},on:{thirdValue:t.thirdValue},slot:"optionsType",model:{value:t.channelVlaue,callback:function(e){t.channelVlaue=e},expression:"channelVlaue"}})],1),a("el-button",{staticClass:"margin-bottom-30",attrs:{type:"primary",size:"small"},on:{click:t.addSourceChannel}},[t._v("新增"+t._s(t.moduleName))]),a("MyTable",{attrs:{size:"mini",stripe:!1,border:!0,multiple:!1,operation:t.operation,column:t.column,data:t.tableData,currentPage:t.currentPage,pageSize:t.pageSize,total:t.total},on:{update:t.update,channelTableSwitchChange:t.handleStatusColClick,handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}}),a("Dialog",{attrs:{title:t.dialogTitle,width:"status"!==t.dialogType?"30%":"20%",hasConfirmBtn:"status"===t.dialogType,showCancelBtn:"status"===t.dialogType},on:{cancel:t.getSourceChannelList,btnHandle:t.statusConfirm},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[a("div",{attrs:{slot:"form"},slot:"form"},["status"!==t.dialogType?a("MyForm",{ref:"operatorActionAddForm",attrs:{form:t.dialogForm,formData:t.formData,formItem:t.formItem},on:{submit:t.dialogSubmit}}):t._e()],1),"status"===t.dialogType?a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"margin-bottom-10"},[t._v(t._s(t.dialogContent))])]):t._e()])],1)},U=[],B=(a("7514"),a("db72")),W=a("7fd9"),q=a("2f62"),H=a("2ef0"),J=a.n(H),G={data:function(){var t={showFormBorder:!1,showTitle:!1,ref:"operatorActionAddForm",labelWidth:"120px",labelPositon:"right",submitDisabled:!1,style:"notprepend",column:1,hasSubmit:!0,submitText:"确认新增",cancleText:"取消"},e={nowPage:"channelTable",show:!0,fixed:!1,size:"mini",width:80,minWidth:100,label:"操作",btns:[{type:"text",size:"mini",content:"编辑",icon:"",handle:"update",class:"button-operator"}]};return{dialogType:"status",moduleName:"来源渠道",dialogContent:"确认开启该来源渠道吗？",titleOprator:"新增",dialogTitle:"",dialogVisible:!1,dialogForm:t,channelVlaue:"",searchParams:{},formItem:[],formData:{},column:[],putVal:{is_open:!1,_id:""},searchFlag:!1,thirds:[],tableData:[],pageSize:10,currentPage:1,total:0,operation:e}},computed:Object(B["a"])({},Object(q["c"])(["oneChannelOptions","twoChannelOptions","threeChannelOptions","sourceChannelOptions"])),components:{MyForm:D["a"],SearchForm:S,Dialog:x["a"],SourceChannelSelect:W["a"],MyTable:F["a"]},created:function(){this.fieldInit(),this.getSourceChannelList()},watch:{"formData.first":{handler:function(t){if(t&&"update"!==this.dialogType){this.formData.second="";var e=J.a.find(this.sourceChannelOptions,(function(e){return e.value==t}));this.formItem[1].options=e.children}},deep:!0}},methods:{initFormData:function(){var t={first:"",second:"",third:"",desc:""};return t},handleStatusColClick:function(t){var e=t.row;t.$index;this.dialogTitle="状态切换提示",this.dialogType="status",this.dialogForm.submitText="状态切换",this.dialogContent="确认".concat(e.status?"开启":"关闭","该来源渠道吗？"),this.putVal.is_open=e.status,this.putVal._id=e._id,this.dialogShow()},setTableData:function(t){var e=this,a=t.list;this.tableData=a.map((function(t,a){return{_id:t._id?t._id:a,id:t.id?t.id:"",first:t.first?t.first:"-",second:t.second?t.second:"-",third:t.third?t.third:"",desc:t.desc?t.desc:"-",creator:t.creator?t.creator:"-",creatorName:t.creator&&t.creator.name?t.creator.name:"-",createAt:t.created_at?e.formatTime(t.created_at):"-",status:!!t.is_open&&t.is_open}}))},getSourceChannelList:function(){var t=this;this.handleClose();var e={page_size:this.pageSize,current_page:this.currentPage},a=Object.assign({},e,this.searchParams);this.searchFlag&&(a.thirds=this.thirds),Object(O["h"])(a).then((function(e){t.searchFlag=!1,e&&(t.total=e.data.count,t.setTableData(e.data))}))},fieldInit:function(){var t=c("sourceChannel");t.forEach((function(t){t.width&&"auto"!=t.width&&(t.width="300")})),this.column=t},update:function(t){this.setDialogAttr("编辑","update","确认修改"),this.dialogFormInit(t),this.formItem[0].disabled=!0,this.formItem[1].disabled=!0,this.formItem[2].disabled=!0,this.formItem[4].show=!1,this.dialogShow()},setDialogAttr:function(t,e,a){this.titleOprator=t,this.dialogTitle=this.titleOprator+this.moduleName,this.dialogType=e,this.dialogForm.submitText=a},handleSizeChange:function(t){this.pageSize=t,this.getSourceChannelList()},handleCurrentChange:function(t){this.currentPage=t,this.getSourceChannelList()},thirdValue:function(t){this.thirds=t},searchFun:function(t){this.searchParams.is_open=String(t.is_open),this.currentPage=1,this.searchFlag=!0,this.getSourceChannelList()},resetForm:function(){this.channelVlaue="",this.searchParams={},this.currentPage=1,this.getSourceChannelList()},addSourceChannel:function(){this.setDialogAttr("新增","add","确认新增");var t=this.initFormData();this.dialogFormInit(t),this.dialogShow()},dialogShow:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},dialogFormInit:function(t){this.formItem=d("sourceChannel","item"),this.formItem[0].options=this.oneChannelOptions,this.formItem[0].disabled=!1,this.formItem[1].disabled=!1,this.formItem[2].disabled=!1,this.formItem[4].show=!0,"update"===this.dialogType?this.formItem[1].options=this.twoChannelOptions:this.formItem[1].options=[],this.formData=t||d("sourceChannel","data")},dialogSubmit:function(){var t=this;this.dialogForm.submitDisabled=!0,this.formData._id?this.putSourceChannel(this.formData,""):Object(O["b"])(this.formData).then((function(e){t.dialogForm.submitDisabled=!1,t.$message({type:e.data&&e.data.result?"success":"error",message:e.data&&e.data.result?t.dialogForm.submitText+"成功":e.data.message}),e&&e.data.result&&(t.getSourceChannelList(),t.$store.dispatch("crm/getChannelOptions","",{root:!0}))})).catch((function(e){t.dialogForm.submitDisabled=!1}))},statusConfirm:function(){this.putSourceChannel(this.putVal,"status")},putSourceChannel:function(t,e){var a=this;Object(O["m"])(t,e).then((function(t){a.dialogForm.submitDisabled=!1,a.$message({type:t.data&&t.data.result?"success":"error",message:t.data&&t.data.result?a.dialogForm.submitText+"成功":a.dialogForm.submitText+"失败"}),t&&t.data.result&&a.getSourceChannelList()}))}}},K=G,Q=Object(w["a"])(K,E,U,!1,null,null,null),R=Q.exports,X={name:"index",data:function(){return{activeName:"customerType"}},components:{userType:j,opratorAction:M,sourceChannel:R},created:function(){this.getLocalActiveName()},methods:{getLocalActiveName:function(){null!=window.sessionStorage.getItem("crm_activeName")&&(this.activeName=window.sessionStorage.getItem("crm_activeName")?window.sessionStorage.getItem("crm_activeName"):"customerType")},handleClick:function(){window.sessionStorage.setItem("crm_activeName",this.activeName)}}},Y=X,Z=Object(w["a"])(Y,i,o,!1,null,null,null);e["default"]=Z.exports},c708:function(t){t.exports={userType:[{prop:"id",label:"编号",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"name",label:"客户类型名称",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"desc",label:"描述",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"creatorName",label:"创建人",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"createAt",label:"创建时间",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"status",label:"状态",type:"switch",width:"auto",fixed:!1,sortable:!1,show:!0}],sourceChannel:[{prop:"id",label:"编号",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"first",label:"一级来源渠道名称",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"second",label:"二级来源渠道",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"third",label:"三级来源渠道",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"desc",label:"描述",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"creatorName",label:"创建人",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"createAt",label:"创建时间",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"status",label:"状态",type:"switch",width:"auto",fixed:!1,sortable:!1,show:!0}],opratorAction:[{prop:"id",label:"编号",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"name",label:"运营动作名称",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"desc",label:"描述",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"creatorName",label:"创建人",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"createAt",label:"创建时间",width:"auto",fixed:!1,sortable:!1,show:!0},{prop:"status",label:"状态",width:"auto",type:"switch",fixed:!1,sortable:!1,show:!0}]}},f8b7:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"i",(function(){return n})),a.d(e,"h",(function(){return r})),a.d(e,"k",(function(){return s})),a.d(e,"l",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"f",(function(){return c})),a.d(e,"e",(function(){return d})),a.d(e,"j",(function(){return m})),a.d(e,"g",(function(){return h})),a.d(e,"c",(function(){return p})),a.d(e,"m",(function(){return f})),a.d(e,"b",(function(){return g}));var i=a("b775");function o(t){return Object(i["a"])({url:"/fd/contract/".concat(t,"/active"),method:"put"})}function n(){return Object(i["a"])({url:"order/basic/options",method:"get"})}function r(){return Object(i["a"])({url:"/order/basic/order_name/options",method:"get"})}function s(){return Object(i["a"])({url:"/order/basic/order_status/options",method:"get"})}function l(){return Object(i["a"])({url:"/order/basic/order_type/options",method:"get"})}function u(t){return Object(i["a"])({url:"/order/check_export",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/order/".concat(t,"/detail"),method:"get"})}function d(t,e){return Object(i["a"])({url:"/order/".concat(t,"/close"),method:"put",data:e})}function m(){return Object(i["a"])({url:"/order/process_numbers",method:"get"})}function h(t){return Object(i["a"])({url:"/order/list",method:"post",data:t})}function p(t,e){return Object(i["a"])({url:"/order/".concat(t,"/refund"),method:"put",data:e})}function f(t){return Object(i["a"])({url:"/order/log",method:"get",params:t})}function g(t){return Object(i["a"])({url:"/order/log",method:"post",data:t})}}}]);
//# sourceMappingURL=chunk-eb964360.e5777a3f.js.map