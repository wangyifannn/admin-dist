{"version":3,"sources":["webpack:///./src/views/obstetrics-doctor/healthFollow/index.vue?60c1","webpack:///./src/views/obstetrics-doctor/healthFollow/index.vue?041f","webpack:///./src/api/obstetricsFollow.js","webpack:///./src/views/obstetrics-doctor/healthFollow/index.vue?da2e","webpack:///./src/views/obstetrics-doctor/healthFollow/components/TaskList.vue?7fc2","webpack:///src/views/obstetrics-doctor/healthFollow/components/TaskList.vue","webpack:///./src/views/obstetrics-doctor/healthFollow/components/TaskList.vue?ef24","webpack:///./src/views/obstetrics-doctor/healthFollow/components/TaskList.vue","webpack:///src/views/obstetrics-doctor/healthFollow/index.vue","webpack:///./src/views/obstetrics-doctor/healthFollow/index.vue?ce79","webpack:///./src/views/obstetrics-doctor/healthFollow/index.vue"],"names":["createFollowTask","data","request","url","method","updateTaskContent","updateSavedTaskContent","id","sendTask","taskId","closeTask","previewTask","getTaskContent","getAllTaskList","params","replayUser","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","on","$event","gotoNewPage","_v","attrs","model","value","searchForm","callback","$$v","$set","expression","_l","$store","state","dictionary","item","key","label","statusDisable","searchTime","search","reset","handleTab","activeName","slot","taskCount","todayListNum","allListNum","needToRelayNum","ref","staticRenderFns","directives","name","rawName","tableData","scopedSlots","_u","fn","scope","_s","row","family_member_info","_e","user_info","avatar","nickname","user_id","creator_info","sender_info","_f","task_message_type","Date","created_at","executed_at","status","taskHasNotSend","sended_at","delay_day","handleClick","switchHandleText","canBeCanceled","onHandleClose","currentPage","pageSize","total","handleSizeChange","handleCurrentChange","closeDialogVisible","props","type","Object","default","components","TaskCloseDialog","currentTaskId","closeTaskId","loading","destroyed","setTaskCount","methods","_id","closed_reason","reasonForm","closeReasonType","closed_reason_message","closeReason","res","code","result","current_page","page_size","task_type","show_replace","console","log","tab_number","all_un_send","pending_reply","today_un_send","val","$router","push","path","query","component","TaskList","family_member_name","family_member_id","user_name","executed_at_start","executed_at_end","computed","watch","resetSearchForm","$refs","taskList","tab_type","needKeepAlive","keepAliveRoutes","some","refreshPage","beforeRouteEnter","next","vm","from"],"mappings":"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","file":"static/js/chunk-a9e4c3e2.92b2c12d.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=13290030&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=13290030&scoped=true&lang=scss&\"","import request from '@/utils/request'\r\n\r\n// 创建健康随访自定义任务\r\nexport function createFollowTask(data) {\r\n  return request({\r\n    url: '/task_manager/chanke/task',\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 直接发送健康随访任务 点击保存按钮或者预览按钮时都需要掉该创建接口\r\n\r\nexport function updateTaskContent(data) {\r\n  return request({\r\n    url: '/task_manager/chanke/task_message',\r\n    method: 'post',\r\n    data: data\r\n    // mock: true\r\n  })\r\n}\r\n\r\n// 从去发送进入，点击保存\r\nexport function updateSavedTaskContent(id, data) {\r\n  return request({\r\n    url: `/task_manager/chanke/task/${id}/save`,\r\n    method: 'put',\r\n    data: data\r\n    // mock: true\r\n  })\r\n}\r\n// 任务发送\r\nexport function sendTask(taskId) {\r\n  return request({\r\n    url: `task_manager/chanke/task/${taskId}/send`,\r\n    method: 'put'\r\n    // mock: true\r\n  })\r\n}\r\n\r\n// 关闭任务\r\nexport function closeTask(taskId, data) {\r\n  return request({\r\n    url: `/task_manager/chanke/task/${taskId}/close`,\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\n// 获取预览信息\r\nexport function previewTask(taskId) {\r\n  return request({\r\n    url: `/task_manager/chanke/task/${taskId}/preview`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 获取任务详情\r\nexport function getTaskContent(taskId) {\r\n  return request({\r\n    url: `/task_manager/chanke/task/${taskId}/detail`,\r\n    method: 'get'\r\n    // mock: true\r\n  })\r\n}\r\n\r\n// 获取任务列表\r\nexport function getAllTaskList(params) {\r\n  return request({\r\n    url: '/task_manager/chanke/tasks',\r\n    method: 'get',\r\n    params: params\r\n    // mock: true\r\n  })\r\n}\r\n\r\n// 回复留言\r\nexport function replayUser(taskId, data) {\r\n  return request({\r\n    url: `/task_manager/chanke/task/${taskId}/reply_msg`,\r\n    method: 'put',\r\n    data: data\r\n    // mock: true\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"guidance-container\"},[_c('el-card',{staticStyle:{\"margin-bottom\":\"30px\"}},[_c('div',{staticClass:\"express-container\"},[_c('div',{staticClass:\"express-item\",on:{\"click\":function($event){return _vm.gotoNewPage('add')}}},[_vm._v(\"新建随访任务\")]),_c('div',{staticClass:\"express-item\",on:{\"click\":function($event){return _vm.gotoNewPage('send')}}},[_vm._v(\"\\n        直接发送随访消息\\n      \")])]),_c('div',{staticClass:\"search-container\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"患者姓名\")]),_c('div',[_c('el-input',{attrs:{\"placeholder\":\"请输入患者姓名\",\"size\":\"mini\"},model:{value:(_vm.searchForm.family_member_name),callback:function ($$v) {_vm.$set(_vm.searchForm, \"family_member_name\", $$v)},expression:\"searchForm.family_member_name\"}})],1)])]),_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"患者ID\")]),_c('div',[_c('el-input',{attrs:{\"placeholder\":\"请输入患者ID\",\"size\":\"mini\"},model:{value:(_vm.searchForm.family_member_id),callback:function ($$v) {_vm.$set(_vm.searchForm, \"family_member_id\", $$v)},expression:\"searchForm.family_member_id\"}})],1)])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"用户\")]),_c('div',[_c('el-input',{attrs:{\"placeholder\":\"请输入用户昵称或备注名\",\"size\":\"mini\"},model:{value:(_vm.searchForm.user_name),callback:function ($$v) {_vm.$set(_vm.searchForm, \"user_name\", $$v)},expression:\"searchForm.user_name\"}})],1)])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"用户ID\")]),_c('div',[_c('el-input',{attrs:{\"placeholder\":\"请输入用户ID\",\"size\":\"mini\"},model:{value:(_vm.searchForm.user_id),callback:function ($$v) {_vm.$set(_vm.searchForm, \"user_id\", $$v)},expression:\"searchForm.user_id\"}})],1)])])],1),_c('el-row',[_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"消息任务类型\")]),_c('div',[_c('el-select',{attrs:{\"size\":\"mini\"},model:{value:(_vm.searchForm.task_message_type),callback:function ($$v) {_vm.$set(_vm.searchForm, \"task_message_type\", $$v)},expression:\"searchForm.task_message_type\"}},_vm._l((_vm.$store.state.dictionary.chankeFollowType),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)])]),_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"完成状态\")]),_c('div',[_c('el-select',{attrs:{\"size\":\"mini\",\"disabled\":_vm.statusDisable},model:{value:(_vm.searchForm.status),callback:function ($$v) {_vm.$set(_vm.searchForm, \"status\", $$v)},expression:\"searchForm.status\"}},[_vm._l((_vm.$store.state.dictionary.chankeFinishStatus),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),_c('el-option',{key:\"delayed\",attrs:{\"label\":\"延期\",\"value\":\"delayed\"}})],2)],1)])]),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"search-time search-date-picker\"},[_c('div',[_vm._v(\"\\n              任务执行日期\\n            \")]),_c('div',[_c('el-date-picker',{attrs:{\"size\":\"mini\",\"type\":\"daterange\",\"range-separator\":\"-\",\"start-placeholder\":\"请选择时间范围起始\",\"end-placeholder\":\"请选择时间范围结束\"},model:{value:(_vm.searchTime),callback:function ($$v) {_vm.searchTime=$$v},expression:\"searchTime\"}})],1)])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"search-item search-button margin-left-20\"},[_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索\")])],1),_c('div',[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)])])],1)],1)]),_c('el-card',[_c('el-tabs',{staticClass:\"tab-container\",staticStyle:{\"padding-right\":\"20px\"},on:{\"tab-click\":_vm.handleTab},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"全部随访\",\"name\":\"all\"}}),_c('el-tab-pane',{attrs:{\"name\":\"today_un_send\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('div',[(_vm.taskCount.todayListNum > 0)?_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.taskCount.todayListNum,\"max\":99}},[_vm._v(\"\\n              今日待随访任务\\n            \")]):_c('span',[_vm._v(\"今日待随访任务\")])],1)])]),_c('el-tab-pane',{attrs:{\"name\":\"all_un_send\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('div',[(_vm.taskCount.allListNum > 0)?_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.taskCount.allListNum,\"max\":99}},[_vm._v(\"\\n              全部待随访任务\\n            \")]):_c('span',[_vm._v(\"全部待随访任务\")])],1)])]),_c('el-tab-pane',{attrs:{\"name\":\"pending_reply\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('div',[(_vm.taskCount.needToRelayNum > 0)?_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.taskCount.needToRelayNum,\"max\":99}},[_vm._v(\"\\n              留言待回复\\n            \")]):_c('span',[_vm._v(\"留言待回复\")])],1)])])],1),_c('div',{staticClass:\"table-title\"},[_vm._v(\"\\n      产科健康随访消息任务列表\\n    \")]),_c('task-list',{ref:\"taskList\",attrs:{\"search-form\":_vm.searchForm},on:{\"closeTask\":_vm.search}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"width\":\"80px\",\"prop\":\"index\",\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"prop\":\"title\",\"width\":\"260px\",\"label\":\"标题\"}}),_c('el-table-column',{attrs:{\"label\":\"患者\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('div',[_vm._v(\"\\n            \"+_vm._s(scope.row.family_member_info &&\n                scope.row.family_member_info.name)+\"\\n            \"),(scope.row.is_replace)?_c('svg-icon',{attrs:{\"icon-class\":\"replace\"}}):_vm._e()],1),_c('div',[_vm._v(\"\\n            \"+_vm._s(scope.row.family_member_info && scope.row.family_member_info.id)+\"\\n          \")])])]}}])}),_c('el-table-column',{attrs:{\"label\":\"用户\",\"width\":\"130px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('el-avatar',{staticStyle:{\"vertical-align\":\"middle\"},attrs:{\"size\":'small',\"src\":scope.row.user_info.avatar}}),_vm._v(\"\\n            \"+_vm._s(scope.row.user_info.nickname)+\"\\n          \")],1),_c('div',[_vm._v(\"\\n            \"+_vm._s(scope.row.user_info.user_id)+\"\\n          \")])])]}}])}),_c('el-table-column',{attrs:{\"width\":\"80px\",\"label\":\"创建人\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.creator_info ? scope.row.creator_info.name : '系统')+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"sender\",\"width\":\"80px\",\"label\":\"发送人\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.sender_info ? scope.row.sender_info.name : '未知')+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"消息任务类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm._f(\"chankeFollowType\")(scope.row.task_message_type))+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"任务创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm._f(\"formatTime\")(new Date(scope.row.created_at),'{y}-{m}-{d}'))+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"任务执行日期\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm._f(\"formatTime\")(new Date(scope.row.executed_at),'{y}-{m}-{d}'))+\"\\n        \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"发送时间\",\"width\":\"200px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(scope.row.status === 'closed')?_c('span',[_vm._v(\"\\n            已关闭\\n          \")]):(_vm.taskHasNotSend(scope.row.status))?_c('span',[_vm._v(\"\\n            待发送\\n          \")]):_c('span',[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"formatTime\")(new Date(scope.row.sended_at)))+\"\\n          \")])])]}}])}),_c('el-table-column',{attrs:{\"width\":\"100px\",\"label\":\"完成状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('div',[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"chankeFinishStatus\")(scope.row.status))+\"\\n          \")]),(scope.row.delay_day && scope.row.delay_day > 0)?_c('div',{staticStyle:{\"font-size\":\"12px\",\"color\":\"red\"}},[_vm._v(\"\\n            延期\"+_vm._s(scope.row.delay_day)+\"天\\n          \")]):_vm._e()])]}}])}),_c('el-table-column',{attrs:{\"width\":\"180px\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleClick(scope.row)}}},[_vm._v(_vm._s(_vm.switchHandleText(scope.row.status)))]),(_vm.canBeCanceled(scope.row.status))?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.onHandleClose(scope.row)}}},[_vm._v(\"关闭任务\")]):_vm._e()],1)])]}}])})],1),_c('div',{staticStyle:{\"margin-top\":\"10px\",\"text-align\":\"center\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-sizes\":[10, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('task-close-dialog',{attrs:{\"closeDialogVisible\":_vm.closeDialogVisible},on:{\"closeTask\":_vm.closeTask,\"closeDialog\":function($event){_vm.closeDialogVisible = false}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-table v-loading=\"loading\" :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column width=\"80px\" prop=\"index\" label=\"序号\" />\r\n      <el-table-column prop=\"title\" width=\"260px\" label=\"标题\" />\r\n      <el-table-column label=\"患者\">\r\n        <template slot-scope=\"scope\">\r\n          <div>\r\n            <div>\r\n              {{\r\n                scope.row.family_member_info &&\r\n                  scope.row.family_member_info.name\r\n              }}\r\n              <svg-icon v-if=\"scope.row.is_replace\" icon-class=\"replace\" />\r\n            </div>\r\n            <div>\r\n              {{\r\n                scope.row.family_member_info && scope.row.family_member_info.id\r\n              }}\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"用户\" width=\"130px\">\r\n        <template slot-scope=\"scope\">\r\n          <div>\r\n            <div style=\"display: inline-block\">\r\n              <el-avatar\r\n                :size=\"'small'\"\r\n                :src=\"scope.row.user_info.avatar\"\r\n                style=\"vertical-align: middle\"\r\n              />\r\n              {{ scope.row.user_info.nickname }}\r\n            </div>\r\n            <div>\r\n              {{ scope.row.user_info.user_id }}\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"80px\" label=\"创建人\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.creator_info ? scope.row.creator_info.name : '系统' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"sender\" width=\"80px\" label=\"发送人\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.sender_info ? scope.row.sender_info.name : '未知' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"消息任务类型\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.task_message_type | chankeFollowType }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createTime\" label=\"任务创建时间\">\r\n        <template slot-scope=\"scope\">\r\n          {{ new Date(scope.row.created_at) | formatTime('{y}-{m}-{d}') }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"任务执行日期\">\r\n        <template slot-scope=\"scope\">\r\n          <span>\r\n            {{ new Date(scope.row.executed_at) | formatTime('{y}-{m}-{d}') }}\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"发送时间\" width=\"200px\">\r\n        <template slot-scope=\"scope\">\r\n          <div>\r\n            <span v-if=\"scope.row.status === 'closed'\">\r\n              已关闭\r\n            </span>\r\n            <span v-else-if=\"taskHasNotSend(scope.row.status)\">\r\n              待发送\r\n            </span>\r\n            <span v-else>\r\n              {{ new Date(scope.row.sended_at) | formatTime() }}\r\n            </span>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"100px\" label=\"完成状态\">\r\n        <template slot-scope=\"scope\">\r\n          <div>\r\n            <div>\r\n              {{ scope.row.status | chankeFinishStatus }}\r\n            </div>\r\n            <div\r\n              v-if=\"scope.row.delay_day && scope.row.delay_day > 0\"\r\n              style=\"font-size: 12px;color: red;\"\r\n            >\r\n              延期{{ scope.row.delay_day }}天\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"180px\" label=\"操作\"\r\n        ><template slot-scope=\"scope\">\r\n          <div>\r\n            <span>\r\n              <el-button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                @click=\"handleClick(scope.row)\"\r\n                >{{ switchHandleText(scope.row.status) }}</el-button\r\n              >\r\n              <el-button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                @click=\"onHandleClose(scope.row)\"\r\n                v-if=\"canBeCanceled(scope.row.status)\"\r\n                >关闭任务</el-button\r\n              >\r\n            </span>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div style=\"margin-top: 10px;text-align: center;\">\r\n      <el-pagination\r\n        background\r\n        :current-page.sync=\"currentPage\"\r\n        :page-sizes=\"[10, 50, 100]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n    <task-close-dialog\r\n      @closeTask=\"closeTask\"\r\n      @closeDialog=\"closeDialogVisible = false\"\r\n      :closeDialogVisible=\"closeDialogVisible\"\r\n    ></task-close-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAllTaskList, closeTask } from '@/api/obstetricsFollow'\r\nimport TaskCloseDialog from '@/components/TaskCloseDialog'\r\nimport { mapMutations } from 'vuex'\r\n\r\nexport default {\r\n  name: 'TaskList',\r\n  props: {\r\n    searchForm: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  components: {\r\n    TaskCloseDialog\r\n  },\r\n  data() {\r\n    return {\r\n      closeDialogVisible: false,\r\n      currentTaskId: '',\r\n      closeTaskId: '',\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      tableData: [],\r\n      loading: false\r\n    }\r\n  },\r\n  destroyed() {\r\n    this.setTaskCount({})\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      setTaskCount: 'obstetrics/SET_TASKCOUNT'\r\n    }),\r\n    taskHasNotSend(status) {\r\n      return status === 'saved' || status === 'pending_send'\r\n    },\r\n    onHandleClose(row) {\r\n      this.currentTaskId = row._id\r\n      this.closeDialogVisible = true\r\n    },\r\n    closeTask(reasonForm) {\r\n      // 请求取消任务的接口,取消成功后刷新任务列表\r\n      const params = {\r\n        closed_reason: reasonForm.closeReasonType,\r\n        closed_reason_message: reasonForm.closeReason\r\n      }\r\n      closeTask(this.currentTaskId, params).then(res => {\r\n        if (res.code === 20000 && res.data.result === true) {\r\n          this.closeDialogVisible = false\r\n          this.$message.success('关闭任务成功')\r\n          this.$emit('closeTask')\r\n        }\r\n      })\r\n    },\r\n    canBeCanceled(status) {\r\n      return status === 'pending_send' || status === 'saved'\r\n    },\r\n    switchHandleText(status) {\r\n      switch (status) {\r\n        case 'pending_send':\r\n          return '去发送'\r\n        case 'pending_reply':\r\n          return '去回复'\r\n        case 'saved':\r\n          return '去发送'\r\n        case 'sended':\r\n          return '查看详情'\r\n        case 'finished':\r\n          return '查看详情'\r\n        case 'closed':\r\n          return '查看详情'\r\n      }\r\n    },\r\n    getAllTaskList(searchParams = {}) {\r\n      this.loading = true\r\n\r\n      const params = {\r\n        ...searchParams,\r\n        current_page: this.currentPage,\r\n        page_size: this.pageSize,\r\n        task_type: 'health_follow',\r\n        show_replace: 1\r\n      }\r\n      getAllTaskList(params).then(res => {\r\n        this.loading = false\r\n        const data = res.data\r\n        this.tableData = data.list\r\n        console.log('this.tableData=', this.tableData)\r\n        this.total = data.total\r\n        // 设置tab标签上的任务数量\r\n        const taskCountObj = {\r\n          allListNum: data.tab_number.all_un_send,\r\n          needToRelayNum: data.tab_number.pending_reply,\r\n          todayListNum: data.tab_number.today_un_send\r\n        }\r\n        this.setTaskCount(taskCountObj)\r\n      })\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.currentPage = 1\r\n      this.getAllTaskList(this.searchForm)\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val\r\n      this.getAllTaskList(this.searchForm)\r\n    },\r\n    handleClick(row) {\r\n      const query = { babyId: row.family_member_info._id, taskId: row._id }\r\n      switch (row.status) {\r\n        case 'pending_send':\r\n          this.$router.push({\r\n            path: 'follow/send',\r\n            query\r\n          })\r\n          break\r\n        case 'pending_reply':\r\n          this.$router.push({\r\n            path: `follow/comment`,\r\n            query\r\n          })\r\n          break\r\n        case 'saved':\r\n          this.$router.push({\r\n            path: `follow/send`,\r\n            query\r\n          })\r\n          break\r\n        case 'sended':\r\n          this.$router.push({\r\n            path: `follow/detail`,\r\n            query\r\n          })\r\n          break\r\n        case 'finished':\r\n          this.$router.push({\r\n            path: `follow/detail`,\r\n            query\r\n          })\r\n          break\r\n        case 'closed':\r\n          this.$router.push({\r\n            path: `follow/close`,\r\n            query\r\n          })\r\n          break\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskList.vue?vue&type=template&id=26d41bbe&\"\nimport script from \"./TaskList.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"guidance-container\">\r\n    <el-card style=\"margin-bottom: 30px;\">\r\n      <div class=\"express-container\">\r\n        <div class=\"express-item\" @click=\"gotoNewPage('add')\">新建随访任务</div>\r\n        <div class=\"express-item\" @click=\"gotoNewPage('send')\">\r\n          直接发送随访消息\r\n        </div>\r\n      </div>\r\n      <div class=\"search-container\">\r\n        <el-row>\r\n          <el-col :span=\"5\">\r\n            <div class=\"search-item\">\r\n              <div>患者姓名</div>\r\n              <div>\r\n                <el-input\r\n                  v-model=\"searchForm.family_member_name\"\r\n                  placeholder=\"请输入患者姓名\"\r\n                  size=\"mini\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <div class=\"search-item\">\r\n              <div>患者ID</div>\r\n              <div>\r\n                <el-input\r\n                  v-model=\"searchForm.family_member_id\"\r\n                  placeholder=\"请输入患者ID\"\r\n                  size=\"mini\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <div class=\"search-item\">\r\n              <div>用户</div>\r\n              <div>\r\n                <el-input\r\n                  v-model=\"searchForm.user_name\"\r\n                  placeholder=\"请输入用户昵称或备注名\"\r\n                  size=\"mini\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <div class=\"search-item\">\r\n              <div>用户ID</div>\r\n              <div>\r\n                <el-input\r\n                  v-model=\"searchForm.user_id\"\r\n                  placeholder=\"请输入用户ID\"\r\n                  size=\"mini\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"5\">\r\n            <div class=\"search-item\">\r\n              <div>消息任务类型</div>\r\n              <div>\r\n                <el-select v-model=\"searchForm.task_message_type\" size=\"mini\">\r\n                  <el-option\r\n                    v-for=\"item in $store.state.dictionary.chankeFollowType\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  />\r\n                </el-select>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <div class=\"search-item\">\r\n              <div>完成状态</div>\r\n              <div>\r\n                <el-select\r\n                  v-model=\"searchForm.status\"\r\n                  size=\"mini\"\r\n                  :disabled=\"statusDisable\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in $store.state.dictionary.chankeFinishStatus\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  />\r\n                  <el-option\r\n                    key=\"delayed\"\r\n                    label=\"延期\"\r\n                    value=\"delayed\"\r\n                  ></el-option>\r\n                </el-select>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <div class=\"search-time search-date-picker\">\r\n              <div>\r\n                任务执行日期\r\n              </div>\r\n              <div>\r\n                <el-date-picker\r\n                  v-model=\"searchTime\"\r\n                  size=\"mini\"\r\n                  type=\"daterange\"\r\n                  range-separator=\"-\"\r\n                  start-placeholder=\"请选择时间范围起始\"\r\n                  end-placeholder=\"请选择时间范围结束\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <div class=\"search-item search-button margin-left-20\">\r\n              <div>\r\n                <el-button type=\"primary\" size=\"mini\" @click=\"search\"\r\n                  >搜索</el-button\r\n                >\r\n              </div>\r\n              <div>\r\n                <el-button size=\"mini\" @click=\"reset\">重置</el-button>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-card>\r\n    <el-card>\r\n      <el-tabs\r\n        v-model=\"activeName\"\r\n        class=\"tab-container\"\r\n        style=\"padding-right: 20px\"\r\n        @tab-click=\"handleTab\"\r\n      >\r\n        <el-tab-pane label=\"全部随访\" name=\"all\" />\r\n        <el-tab-pane name=\"today_un_send\">\r\n          <span slot=\"label\">\r\n            <div>\r\n              <el-badge\r\n                v-if=\"taskCount.todayListNum > 0\"\r\n                :value=\"taskCount.todayListNum\"\r\n                class=\"item\"\r\n                :max=\"99\"\r\n              >\r\n                今日待随访任务\r\n              </el-badge>\r\n              <span v-else>今日待随访任务</span>\r\n            </div>\r\n          </span>\r\n        </el-tab-pane>\r\n        <el-tab-pane name=\"all_un_send\">\r\n          <span slot=\"label\">\r\n            <div>\r\n              <el-badge\r\n                v-if=\"taskCount.allListNum > 0\"\r\n                :value=\"taskCount.allListNum\"\r\n                class=\"item\"\r\n                :max=\"99\"\r\n              >\r\n                全部待随访任务\r\n              </el-badge>\r\n              <span v-else>全部待随访任务</span>\r\n            </div>\r\n          </span>\r\n        </el-tab-pane>\r\n        <el-tab-pane name=\"pending_reply\">\r\n          <span slot=\"label\">\r\n            <div>\r\n              <el-badge\r\n                v-if=\"taskCount.needToRelayNum > 0\"\r\n                :value=\"taskCount.needToRelayNum\"\r\n                class=\"item\"\r\n                :max=\"99\"\r\n              >\r\n                留言待回复\r\n              </el-badge>\r\n              <span v-else>留言待回复</span>\r\n            </div>\r\n          </span>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n      <div class=\"table-title\">\r\n        产科健康随访消息任务列表\r\n      </div>\r\n      <task-list ref=\"taskList\" :search-form=\"searchForm\" @closeTask=\"search\" />\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TaskList from './components/TaskList'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  name: 'Guidance',\r\n  components: {\r\n    TaskList\r\n  },\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        status: '',\r\n        family_member_name: '',\r\n        family_member_id: '',\r\n        user_name: '',\r\n        user_id: '',\r\n        task_message_type: '',\r\n        executed_at_start: '',\r\n        executed_at_end: ''\r\n      },\r\n      statusDisable: false,\r\n      searchTime: null,\r\n      activeName: 'all'\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      taskCount: state => state.obstetrics.taskCount\r\n    })\r\n  },\r\n  watch: {\r\n    activeName(val) {\r\n      if (val !== 'all') {\r\n        this.searchForm.status = ''\r\n        this.statusDisable = true\r\n      } else {\r\n        this.statusDisable = false\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    resetSearchForm() {\r\n      this.searchForm = {\r\n        status: '',\r\n        family_member_name: '',\r\n        family_member_id: '',\r\n        user_name: '',\r\n        user_id: '',\r\n        task_message_type: '',\r\n        executed_at_start: '',\r\n        executed_at_end: ''\r\n      }\r\n    },\r\n    // 点击标签页事件\r\n    handleTab() {\r\n      this.$refs.taskList.pageSize = 10\r\n      this.$refs.taskList.currentPage = 1\r\n      this.resetSearchForm()\r\n      this.searchForm.tab_type = this.activeName\r\n      this.$refs.taskList.getAllTaskList(this.searchForm)\r\n    },\r\n    // 根据搜索条件查询任务列表\r\n    search() {\r\n      this.$refs.taskList.pageSize = 10\r\n      this.$refs.taskList.currentPage = 1\r\n      this.searchForm.executed_at_start = this.searchTime\r\n        ? this.searchTime[0]\r\n        : ''\r\n      this.searchForm.executed_at_end = this.searchTime\r\n        ? this.searchTime[1]\r\n        : ''\r\n      this.$refs.taskList.getAllTaskList(this.searchForm)\r\n    },\r\n    // 重置查询条件\r\n    reset() {\r\n      this.resetSearchForm()\r\n      // 每次重置基于当前选项卡\r\n      this.searchForm.tab_type = this.activeName\r\n      this.searchTime = null\r\n      this.$refs.taskList.pageSize = 10\r\n      this.$refs.taskList.currentPage = 1\r\n      this.$refs.taskList.getAllTaskList(this.searchForm)\r\n    },\r\n    gotoNewPage(path) {\r\n      this.$router.push(`follow/${path}`)\r\n    },\r\n    needKeepAlive(path) {\r\n      const keepAliveRoutes = [\r\n        'follow/send',\r\n        'follow/detail',\r\n        'follow/comment',\r\n        'follow/add',\r\n        'follow/close'\r\n      ]\r\n      return keepAliveRoutes.some(route => path.includes(route))\r\n    },\r\n    refreshPage() {\r\n      this.activeName = 'all'\r\n      this.reset()\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      if (!vm.needKeepAlive(from.path)) {\r\n        vm.refreshPage()\r\n      } else {\r\n        vm.search()\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.search-item {\r\n  .el-input {\r\n    width: 180px;\r\n  }\r\n}\r\n.tab-container {\r\n  .el-badge__content.is-fixed {\r\n    top: 10px;\r\n  }\r\n}\r\n</style>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/styles/healthManagement/page.scss';\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=13290030&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=13290030&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13290030\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}