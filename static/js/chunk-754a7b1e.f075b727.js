(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-754a7b1e"],{2381:function(e,t,a){e.exports={menuText:"#17233D",menuActiveText:"#409EFF",subMenuActiveText:"#17233D",menuBg:"#FEFEFE",menuHover:"#ECF4FF",subMenuBg:"#FEFEFE",subMenuHover:"#ECF4FF",sideBarWidth:"240px"}},"3a89":function(e,t,a){"use strict";var r=a("2381"),n=a.n(r);n.a},"3e07":function(e,t,a){},"6baa":function(e,t,a){"use strict";var r=a("3e07"),n=a.n(r);n.a},"6e69":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("HeaderForm",{ref:"headerForm",on:{search:e.setSearch}}),a("GrowTable",{ref:"growTableInfo",attrs:{"search-params":e.searchParams}})],1)},n=[],s=(a("6762"),a("2fdb"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grow-search"},[a("el-form",{ref:"growForm",staticClass:"search__form",attrs:{"label-position":"left",model:e.growForm,"label-width":"80px",inline:""}},[a("el-form-item",{attrs:{label:"宝宝乳名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入宝宝乳名",clearable:"",size:"mini"},model:{value:e.growForm.name,callback:function(t){e.$set(e.growForm,"name",t)},expression:"growForm.name"}})],1),a("el-form-item",{staticClass:"search-item",attrs:{label:"宝宝ID",prop:"babyId"}},[a("el-input",{attrs:{placeholder:"请输入宝宝ID",size:"mini"},model:{value:e.growForm.babyId,callback:function(t){e.$set(e.growForm,"babyId",t)},expression:"growForm.babyId"}})],1),a("el-form-item",{attrs:{label:"套餐名称",prop:"package"}},[a("service-package",{model:{value:e.growForm.package,callback:function(t){e.$set(e.growForm,"package",t)},expression:"growForm.package"}})],1),a("el-form-item",{attrs:{label:"用户",prop:"user"}},[a("el-input",{attrs:{placeholder:"请输入用户昵称或备注名",size:"mini",clearable:""},model:{value:e.growForm.user,callback:function(t){e.$set(e.growForm,"user",t)},expression:"growForm.user"}})],1),a("br"),a("el-form-item",{attrs:{label:"用户ID",prop:"userId"}},[a("el-input",{staticStyle:{"margin-right":"50px"},attrs:{placeholder:"请输入用户ID",size:"mini",clearable:""},model:{value:e.growForm.userId,callback:function(t){e.$set(e.growForm,"userId",t)},expression:"growForm.userId"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.resetForm("growForm")}}},[e._v("重置")])],1)],1)],1)}),o=[],i=a("92c2"),l={data:function(){return{growForm:{name:"",package:"",user:"",userId:"",babyId:""}}},components:{ServicePackage:i["a"]},methods:{handleSearch:function(){var e=this;this.$refs["growForm"].validate((function(t){if(!t)return!1;e.$emit("search",e.growForm)}))},resetForm:function(e){this.$refs[e].resetFields(),this.$emit("search",this.growForm)}}},c=l,u=(a("6baa"),a("2877")),m=Object(u["a"])(c,s,o,!1,null,"9cfff8b2",null),d=m.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grow-table",staticStyle:{"margin-top":"10px"}},[a("el-tabs",{staticClass:"professional-role__header__tabs",on:{"tab-click":e.getStatusList},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabArr,(function(t){var r=t.label,n=t.name,s=t.num;return a("el-tab-pane",{key:n,attrs:{name:n}},[a("span",{staticClass:"professional-role__header__tabs__slot-label",attrs:{slot:"label"},slot:"label"},[s>0?a("el-badge",{staticClass:"item",attrs:{value:s}}):e._e(),e._v(e._s(r))],1)])})),1),a("div",{staticClass:"grow-table__header"},[e._v("服务中的宝宝列表")]),a("el-table",{staticClass:"grow-table__list",attrs:{data:e.tableDate}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"80",prop:"num",fixed:""}}),a("el-table-column",{attrs:{align:"center",label:"宝宝","min-width":"120",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.name))]),a("p",[e._v(e._s(t.row.babyId||t.row.id))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"用户","min-width":"180",prop:"user"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"user-avatar"},[a("el-avatar",{attrs:{src:t.row.avatar,size:28}}),e._v(e._s(t.row.user)+"\n          "),t.row.is_replace?a("svg-icon",{attrs:{"icon-class":"replace"}}):e._e()],1),a("div",[e._v(e._s(t.row.userId))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"出生日期","min-width":"100",prop:"birthday"}}),a("el-table-column",{attrs:{align:"center",label:"月龄","min-width":"80",prop:"monthAge"}}),a("el-table-column",{attrs:{align:"center",label:"宝宝备注",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"baby-note"},[e._v("\n          "+e._s(t.row.babyNote)+"\n        ")])]}}])},[a("template",{slot:"header"},[a("span",[e._v("宝宝备注")]),a("el-tooltip",{staticClass:"item color-576277",attrs:{effect:"dark",content:"接诊台宝宝资料处添加的备注",placement:"top"}},[a("i",{staticClass:"el-icon-info"})])],1)],2),a("el-table-column",{attrs:{align:"center",label:"当前服务套餐","min-width":"120",prop:"package"}}),a("el-table-column",{attrs:{align:"center",label:"当前服务时间",width:"210",prop:"serviceTime"}}),a("el-table-column",{attrs:{align:"center",label:"是否有待发送","min-width":"80",prop:"sent"}}),a("el-table-column",{attrs:{align:"center",label:"是否有待反馈","min-width":"80",prop:"feedback"}}),a("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleSee(t)}}},[e._v("查看")])],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},h=[],f=(a("7f7f"),a("875a")),g={props:{searchParams:{type:Object,default:function(){}}},data:function(){return{addLoading:!1,addMembers:[],members:[],loading:!1,tableDate:[],currentPage:1,pageSize:10,count:0,activeName:"un_send",tabArr:[{label:"待发送",name:"un_send",num:0},{label:"待反馈",name:"tested",num:0},{label:"全部",name:"all",num:0}]}},created:function(){"hm"===this.$store.state.user.bus_role&&(this.activeName="un_send"),"doctor"===this.$store.state.user.bus_role&&(this.activeName="tested"),"dietician"===this.$store.state.user.bus_role&&(this.activeName="all"),this.getTableDataFun()},methods:{handleSizeChange:function(e){this.pageSize=e,this.getTableDataFun()},handleCurrentChange:function(e){this.currentPage=e,this.getTableDataFun()},handleSee:function(e){var t=e.row;this.$router.push({name:"growListDetail",params:{id:t._id}})},getTableDataFun:function(e){var t=this,a={page_size:this.pageSize,current_page:this.currentPage,baby_grow_info_status:this.activeName,service_item:"baby_growth",show_replace:1};this.searchParams&&(this.searchParams.name&&(a.baby_name=this.searchParams.name),this.searchParams.package&&(a.fd_service_type=this.searchParams.package),this.searchParams.user&&(a.user_name=this.searchParams.user),this.searchParams.userId&&(a.user_id=this.searchParams.userId),this.searchParams.babyId&&(a.baby_id=this.searchParams.babyId)),e&&(e.name&&(a.baby_name=e.name),e.package&&(a.fd_service_type=e.package),e.user&&(a.user_name=e.user),e.userId&&(a.user_id=e.userId),e.babyId&&(a.baby_id=e.babyId)),Object(f["h"])(a).then((function(e){e&&e.data?(t.count=e.data.count,t.tabArr[0].num=e.data.baby_grow_info.un_send_count,t.tabArr[1].num=e.data.baby_grow_info.suggest_count,t.tableDate=e.data.list.map((function(e){return{num:e.index,name:e.name,user:e.user_info.nickname,avatar:e.user_info.avatar,userId:e.user_info._id,birthday:t.formatTime(e.birthday,"{y}-{m}-{d}")||"--",monthAge:e.age_of_month||"--",babyNote:e.remark||"宝宝备注",package:e.fd_service_type_info.name,serviceTime:e.fd_contract_info.started_at&&e.fd_contract_info.ended_at?t.formatTime(e.fd_contract_info.started_at,"{y}-{m}-{d}")+"到"+t.formatTime(e.fd_contract_info.ended_at,"{y}-{m}-{d}"):"--",sent:"no"===e.is_un_send?"否":"是",feedback:"no"===e.is_suggest?"否":"是",id:e.id,_id:e._id,babyId:e.babyId,is_replace:e.is_replace}}))):(t.tableDate=[],t.count=0)}))},getStatusList:function(){this.getTableDataFun()}}},p=g,_=(a("3a89"),Object(u["a"])(p,b,h,!1,null,null,null)),w=_.exports,v={name:"GrowthTable",components:{HeaderForm:d,GrowTable:w},data:function(){return{searchParams:{}}},methods:{setSearch:function(e){this.searchParams=e,this.$refs.growTableInfo.currentPage=1,this.$refs.growTableInfo.pageSize=10,this.$refs.growTableInfo.getTableDataFun(e)},resetSearch:function(){"hm"===this.$store.state.user.bus_role&&(this.$refs.growTableInfo.activeName="un_send"),"doctor"===this.$store.state.user.bus_role&&(this.$refs.growTableInfo.activeName="tested"),"dietician"===this.$store.state.user.bus_role&&(this.$refs.growTableInfo.activeName="all"),this.$refs.headerForm.resetForm("growForm")}},beforeRouteEnter:function(e,t,a){a((function(e){t.path.includes("/grow-table/see-detail")?e.$refs.headerForm.handleSearch():e.resetSearch()}))}},F=v,y=Object(u["a"])(F,r,n,!1,null,null,null);t["default"]=y.exports},"875a":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"k",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return m})),a.d(t,"i",(function(){return d})),a.d(t,"j",(function(){return b})),a.d(t,"a",(function(){return h}));var r=a("b775");function n(e){return Object(r["a"])({url:"/growth_info/list",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/growth_info",method:"post",data:e})}function o(e,t){return Object(r["a"])({url:"/growth_info/"+e,method:"put",data:t})}function i(e){return Object(r["a"])({url:"/growth_info",method:"delete",data:e})}function l(e){return Object(r["a"])({url:"/growth_info/"+e,method:"get"})}function c(e){return Object(r["a"])({url:"/growth_info/"+e+"/status",method:"put"})}function u(e){return Object(r["a"])({url:"/family_member/in_server_list",method:"get",params:e})}function m(e){return Object(r["a"])({url:"baby_growth_info/growth",method:"get",params:e})}function d(e){return Object(r["a"])({url:"baby_growth_info/detail/"+e,method:"get"})}function b(e){return Object(r["a"])({url:"baby_growth_info/send/"+e,method:"get"})}function h(e){return Object(r["a"])({url:"baby_growth_info/content",method:"post",data:e})}}}]);
//# sourceMappingURL=chunk-754a7b1e.f075b727.js.map