(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2639ad42"],{"1c9d":function(t,e,a){"use strict";var r=a("d952"),n=a.n(r);n.a},3681:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var r=a("db72");a("ac6a");function n(t){var e=["一","二","三","四","五","六","七","八","九","十"],a="";t=""+t;for(var r=0;r<t.length;r++)a+=e[parseInt(t.charAt(r))];return 2===a.length&&(a.charAt(1)===e[0]?(a=a.charAt(0)+e[10],a===e[1]+e[10]&&(a=e[10])):a.charAt(0)===e[1]&&(a=e[10]+a.charAt(1))),a}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=[],o=function(t){switch(t){case 1:return n;case 2:return function(t){return 1+t};case 3:return function(t){return a+1+"."+(1+t)};default:throw new Error("超过3级")}}(e);return t.forEach((function(t,a){var n=JSON.parse(JSON.stringify(t));delete n.children;var c=Object(r["a"])({},t,{ptitle:o(a)+" "+t.title});t.children&&t.children.length>0&&(c.children=i(t.children,e+1,a)),s.push(c)})),s}},"5c99":function(t,e,a){t.exports=a.p+"static/img/frameAdmin.8d546622.png"},9222:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"learning-admin"},[r("div",{staticClass:"learning-admin-frame"},[t.frameAdminData&&t.frameAdminData.length>0||t.isSearch?r("div",{staticClass:"search-box"},[r("div",{staticClass:"search"},[r("el-input",{staticStyle:{width:"220px"},attrs:{clearable:"",placeholder:"请输入查找关键词",size:"small"},nativeOn:{keyup:function(e){return t.inputChange(e)}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),r("el-button",{staticClass:"search-box-button",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.serachData()}}},[t._v("查询")])],1),r("el-button",{staticClass:"search-box-button",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addFirstCategory()}}},[t._v("添加")])],1):t._e(),t.frameAdminData&&t.frameAdminData.length>0||t.isSearch?r("div",{staticClass:"learning-admin-frame-tree"},[r("div",{staticClass:"title"},[t._v("框架管理")]),r("el-tree",{attrs:{data:t.frameAdminData,props:t.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"empty-text":"暂无内容，请重新输入关键词查询"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,n=e.data;return r("span",{staticClass:"custom-tree-node"},[r("span",[t._v(t._s(a.label))]),r("span",{staticClass:"handle-btns"},["third"!==a.data.type?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.addSecondAndThird(a,n,"添加")}}},[t._v("\n              添加\n            ")]):t._e(),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.edit(a,n,"编辑")}}},[t._v("\n              编辑\n            ")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.remove(a,n)}}},[t._v("\n              删除\n            ")])],1)])}}],null,!1,46316624)})],1):t._e()]),t.frameAdminData&&0===t.frameAdminData.length&&!t.isSearch?r("div",{staticClass:"learning-admin-empty"},[r("div",{staticClass:"learning-admin-empty-img",on:{click:function(e){return t.addFirstCategory()}}},[r("img",{attrs:{src:a("5c99"),alt:""}}),r("el-button",{staticClass:"learning-admin-empty-btn",attrs:{type:"primary",size:"small"}},[t._v("去添加")])],1)]):t._e(),r("el-dialog",{attrs:{title:t.dialogTitle,visible:t.centerDialogVisible,width:"35%",center:"",top:"25vh"},on:{"update:visible":function(e){t.centerDialogVisible=e},close:function(e){return t.closeDialog("formData")}}},[r("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-width":"110px"}},[r("el-form-item",{attrs:{label:t.dialogTypeName+"级类目名称",prop:"title"}},[r("el-input",{attrs:{type:"text",maxlength:"15","show-word-limit":"",placeholder:"请输入课程名称"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),r("el-form-item",{attrs:{label:"显示顺序",prop:"sort"}},[r("el-input",{attrs:{placeholder:"输入阿拉伯数字，如1，2…"},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",t._n(e))},expression:"formData.sort"}})],1),"二"===t.dialogTypeName?r("el-form-item",{attrs:{label:"章节导言",prop:"summary"}},[r("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入导言内容",maxlength:"300","show-word-limit":""},model:{value:t.formData.summary,callback:function(e){t.$set(t.formData,"summary",e)},expression:"formData.summary"}})],1):t._e(),"二"===t.dialogTypeName?r("el-form-item",{attrs:{label:"重点内容",prop:"content"}},[r("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入导言内容",maxlength:"2000","show-word-limit":""},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1):t._e()],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitForm("formData")}}},[t._v("确定")])],1)],1)],1)},n=[],i=(a("96cf"),a("3b8d")),s=(a("55dd"),a("b415"),a("f296")),o=a("3681"),c={name:"LearningAdminFrame",components:{},data:function(){return{inputVal:"",dialogTitle:"添加",dialogTypeName:"一",centerDialogVisible:!1,frameAdminData:null,defaultProps:{children:"children",label:"ptitle"},rules:{title:[{required:!0,message:"您输入的内容有误，请重新输入"}],sort:[{required:!0,message:"您输入的内容有误，请重新输入"},{type:"number",message:"输入阿拉伯数字，如1，2…"}],summary:[{required:!0,message:"您输入的内容有误，请重新输入"}],content:[{required:!0,message:"您输入的内容有误，请重新输入"}]},formData:{title:"",sort:1,summary:"",content:""},arrNum:["一","二","三","四","五","六","七","八","九","十"],isSearch:!1,showEmptyImg:!1}},created:function(){this.getFrameList(),this.frameAdminData&&0===this.frameAdminData.length&&(this.showEmptyImg=!0)},mounted:function(){},methods:{addSecondAndThird:function(t,e,a){this.dialogTitle=a,"first"===e.type?this.dialogTypeName="二":"second"===e.type&&(this.dialogTypeName="三"),this.isSearch?this.getMaxSort(e.id):e.children&&e.children.length?this.formData.sort=e.children[e.children.length-1].sort+1:this.formData.sort=1,e.id&&(this.formData.parent_id=e.id),this.isADD=!0,this.secondThird=!0,this.centerDialogVisible=!0,this.formData.title="",this.formData.content="",this.formData.summary=""},edit:function(t,e,a){this.dialogTitle=a,this.formData.title=e.title,this.formData.sort=e.sort,e.summary&&(this.formData.summary=e.summary),e.content&&(this.formData.content=e.content),"first"===e.type?this.dialogTypeName="一":"second"===e.type?this.dialogTypeName="二":"third"===e.type&&(this.dialogTypeName="三"),this.formData.id=e.id,this.isADD=!1,this.centerDialogVisible=!0},getFrameList:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["B"])(e);case 2:a=t.sent,a&&(this.frameAdminData=Object(o["a"])(a.data.list));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addFirstCategory:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.dialogTypeName="一",this.isSearch?this.getMaxSort(0):(this.frameAdminData&&0===this.frameAdminData.length&&(this.formData.sort=this.frameAdminData.length+1),this.frameAdminData&&this.frameAdminData.length>0&&(this.formData.sort=this.frameAdminData[this.frameAdminData.length-1].sort+1)),this.isADD=!0,this.secondThird=!1,this.centerDialogVisible=!0,this.formData.title="";case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getMaxSort:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e},t.next=3,Object(s["W"])(a);case 3:r=t.sent,this.formData.sort=r.data.sort+1;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),closeDialog:function(t){this.$refs[t].resetFields()},submitForm:function(t){var e=this;this.$refs[t].validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}e.addEditFun(),e.centerDialogVisible=!1,t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},addEditFun:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={title:this.formData.title,sort:this.formData.sort},this.formData.summary&&(e.summary=this.formData.summary),this.formData.content&&(e.content=this.formData.content),!this.isADD){t.next=11;break}return this.formData.parent_id&&this.secondThird&&(e.parent_id=this.formData.parent_id),t.next=7,Object(s["c"])(e);case 7:a=t.sent,a.data.result?this.$message({type:"success",message:"添加成功!"}):this.$confirm(a.data.message,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}),t.next=16;break;case 11:return this.formData.id&&(e.id=this.formData.id),t.next=14,Object(s["ab"])(e);case 14:r=t.sent,2e4===r.code&&(r.data.result?this.$message({type:"success",message:"编辑成功!"}):this.$confirm("该类目下信息正在被使用，不可以编辑","提示",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}));case 16:return t.next=18,this.getFrameList();case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),remove:function(t,e){var a=this,r="";("first"===e.type||"second"===e.type)&&e.children&&e.children.length>0&&(r="该类目下包含子类目，删除后该类目下所有信息将不再保留，请确认是否删除？"),"first"!==e.type&&"second"!==e.type||!e.children||0!==e.children.length||(r="删除后，该类目下信息将不在保留,请确定是否删除"),"third"===e.type&&(r="删除后，该类目下信息将不在保留,请确定是否删除");var n={id:e.id};this.$confirm(r,"删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["q"])(n);case 2:if(e=t.sent,2e4!==e.code){t.next=11;break}if(!e.data.result){t.next=10;break}return t.next=7,a.getFrameList();case 7:a.$message({type:"success",message:"删除成功!"}),t.next=11;break;case 10:a.$confirm(e.data.message,"删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0});case 11:case"end":return t.stop()}}),t)})))).catch((function(){}))},serachData:function(){var t={search:this.inputVal};this.getFrameList(t),this.isSearch=!0},inputChange:function(t){var e=this;setTimeout((function(){""===e.inputVal&&(e.getFrameList(),e.isSearch=!1)}))},handleSizeChange:function(t){},handleCurrentChange:function(t){}}},l=c,m=(a("1c9d"),a("2877")),u=Object(m["a"])(l,r,n,!1,null,"9de07b64",null);e["default"]=u.exports},b415:function(t,e,a){},d952:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2639ad42.38c61628.js.map