(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-263bd170"],{"15b1":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-detail"},[r("div",{staticClass:"order-detail__status-section"},["CLOSED"!==t.tradeStatus?r("el-steps",{staticClass:"order-detail__status-section__steps",attrs:{"finish-status":"success",active:t.activeSteps,simple:""}},[r("el-step",{attrs:{title:"用户下单"}}),r("el-step",{attrs:{title:"待用户付款"}}),r("el-step",{attrs:{title:"交易成功"}})],1):t._e(),r("card",{staticClass:"order-detail__card",attrs:{title:"当前交易状态："+t.tradeStatusFilter(t.tradeStatus)}},[r("div",[r("div",{staticClass:"order-detail__card__description"},[t._v("\n          "+t._s(t._f("statusDescription")(t.tradeStatus,t.orderCloseReason))+"\n        ")]),"PENDING"===t.tradeStatus?r("close-trade",{attrs:{id:t.id},on:{closeTradeAfter:t.getOrderDetail},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[r("el-button",{staticClass:"close-trade__btn",attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("关闭交易")])],1):t._e()],1)])],1),r("el-tabs",{staticClass:"order-detail__other-info",attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"订单信息",name:"order-info"}},[r("order-info",{attrs:{"cur-order-info":t.curOrderInfo,tradeStatus:t.tradeStatus},on:{activeService:t.activeService}})],1),"FdServiceType"===t.curOrdertype&&t.curOrderInfo.contract&&t.curOrderInfo.contract.status?r("el-tab-pane",{attrs:{name:"activation-info"}},[r("span",{staticClass:"order-detail__other-info__el-tab-pane-label",attrs:{slot:"label"},slot:"label"},[t._v("家庭医生服务信息")]),r("server-info",{attrs:{"cur-server-info":t.curServerInfo}})],1):t._e(),"InquiryServiceType"===t.curOrdertype?r("el-tab-pane",{attrs:{label:"问诊信息",name:"interviews-info"}},[r("span",{staticClass:"order-detail__other-info__el-tab-pane-label",attrs:{slot:"label"},slot:"label"},[t._v("单次问诊信息")]),r("SingleaskInfo",{attrs:{"cur-server-info":t.curQuestionInfo}})],1):t._e()],1),r("el-dialog",{attrs:{title:"确认激活服务提示",visible:t.dialogActiveVisible,width:"30%"},on:{"update:visible":function(e){t.dialogActiveVisible=e}}},[r("div",{staticStyle:{"margin-bottom":"30px"}},[t._v("确认要激活该用户套餐吗？")]),r("div",[t._v("激活后服务立即生效，不可撤销")]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogActiveVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.confirmActive}},[t._v("确 定")])],1)])],1)},i=[],s=(r("96cf"),r("3b8d")),n=r("f8b7"),o=r("12f9"),c=r("19ea"),l=r("6d02"),d={components:{Card:o["a"],OrderInfo:c["b"],CloseTrade:c["a"],ServerInfo:c["c"],SingleaskInfo:c["d"]},filters:{statusDescription:function(t,e){switch(t){case"PENDING":return"用户已下单，等待支付";case"SUCCESS":return"交易已成功，如果用户提出售后要求，请积极用户与协商，做好售后服务。";case"CLOSED":return"取消原因：".concat(e);default:if(t)throw new Error("无法识别的订单状态: ".concat(t));return""}}},mixins:[l["a"]],data:function(){return{dialogActiveVisible:!1,tradeStatus:"",orderCloseReason:"",activeName:"order-info",curOrderInfo:{contract:{}},curServerInfo:{},curQuestionInfo:[],dialogVisible:!1,curOrdertype:""}},computed:{activeSteps:function(){return"PENDING"===this.tradeStatus?2:"SUCCESS"===this.tradeStatus?3:-1},id:function(){return this.$route.params.id}},created:function(){this.getOrderDetail()},methods:{activeService:function(){this.dialogActiveVisible=!0},confirmActive:function(){var t=this,e=this.curServerInfo._id;Object(n["a"])(e).then((function(e){t.$message.success("激活成功"),t.dialogActiveVisible=!1,t.getOrderDetail()}))},getOrderDetail:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["f"])(this.id);case 2:if(e=t.sent,r=e.data,this.tradeStatus=r.trade_status,this.orderCloseReason=r.close_reason,this.curOrdertype=r.order.order_type,this.curOrderInfo={order:r.order,user:r.user},0!==r.contracts.length){t.next=10;break}return t.abrupt("return");case 10:this.curOrderInfo.order._id=this.id,this.curOrderInfo.contract=r.contracts[0],this.curServerInfo=r.contracts[0],this.curQuestionInfo=r.contracts;case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},u=d,f=(r("2001"),r("d9e4"),r("2877")),v=Object(f["a"])(u,a,i,!1,null,"ef9ed880",null);e["default"]=v.exports},2001:function(t,e,r){"use strict";var a=r("7bd2"),i=r.n(a);i.a},"7bd2":function(t,e,r){t.exports={menuText:"#17233D",menuActiveText:"#409EFF",subMenuActiveText:"#17233D",menuBg:"#FEFEFE",menuHover:"#ECF4FF",subMenuBg:"#FEFEFE",subMenuHover:"#ECF4FF",sideBarWidth:"240px"}},"8e39":function(t,e,r){},d9e4:function(t,e,r){"use strict";var a=r("8e39"),i=r.n(a);i.a}}]);
//# sourceMappingURL=chunk-263bd170.f41a1df0.js.map