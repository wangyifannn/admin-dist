(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e4d9fec"],{1774:function(e,t,n){},5118:function(e,t,n){(function(e){var a="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(i.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("24aa"))},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var a,i=1,r={},s=!1,o=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?f():h()?p():e.MessageChannel?g():o&&"onreadystatechange"in o.createElement("script")?b():v(),l.setImmediate=c,l.clearImmediate=u}function c(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return r[i]=s,a(i),i++}function u(e){delete r[e]}function d(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a);break}}function m(e){if(s)setTimeout(m,0,e);else{var t=r[e];if(t){s=!0;try{d(t)}finally{u(e),s=!1}}}}function f(){a=function(e){t.nextTick((function(){m(e)}))}}function h(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function p(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&m(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;m(t)},a=function(t){e.port2.postMessage(t)}}function b(){var e=o.documentElement;a=function(t){var n=o.createElement("script");n.onreadystatechange=function(){m(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function v(){a=function(e){setTimeout(m,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("24aa"),n("4362"))},"96f7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-setting"},[n("search",{on:{searchList:e.searchList}}),n("admin-list",{ref:"adminList",on:{showAddAdmin:function(t){e.addAdminShow=!0}}}),e.addAdminShow?n("tip",{attrs:{"btn-text":"确定","has-footer":!1},model:{value:e.addAdminShow,callback:function(t){e.addAdminShow=t},expression:"addAdminShow"}},[n("section",{staticClass:"center",attrs:{slot:"content"},slot:"content"},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleAdmin,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"选择管理员",prop:"admin"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleAdmin.admin,callback:function(t){e.$set(e.ruleAdmin,"admin",t)},expression:"ruleAdmin.admin"}},e._l(e.userList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1),n("el-form-item",{attrs:{label:"选择角色",prop:"role"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleAdmin.role,callback:function(t){e.$set(e.ruleAdmin,"role",t)},expression:"ruleAdmin.role"}},[n("el-option",{attrs:{label:"人事",value:"human_resource"}}),n("el-option",{attrs:{label:"医生",value:"doctor"}}),n("el-option",{attrs:{label:"培训师",value:"teacher"}})],1)],1),n("el-form-item",{staticClass:"sure"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")])],1)],1)],1)]):e._e()],1)},i=[],r=(n("96cf"),n("3b8d")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-search"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.users}},[n("el-form-item",[n("el-input",{attrs:{clearable:"",placeholder:"请输入姓名"},model:{value:e.users.name,callback:function(t){e.$set(e.users,"name",t)},expression:"users.name"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1)},o=[],l=(n("7f7f"),{data:function(){return{users:{name:""}}},methods:{onSubmit:function(){this.$emit("searchList",this.users.name)}}}),c=l,u=(n("b4f0"),n("2877")),d=Object(u["a"])(c,s,o,!1,null,"125e3f68",null),m=d.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-list"},[n("div",{staticClass:"title"},[n("div",[e._v("管理员列表")]),n("el-button",{attrs:{type:"primary"},on:{click:e.showAdd}},[e._v("选择管理员")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"empty-text":e.hasListInfo}},[n("el-table-column",{attrs:{fixed:"",prop:"num",label:"序号","min-width":"150",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"120",align:"center"}}),n("el-table-column",{attrs:{prop:"type",label:"角色","min-width":"120",align:"center"}}),n("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"120",align:"center"}}),n("el-table-column",{attrs:{label:"操作","min-width":"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteClick(t.row)}}},[e._v("删除")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[8,10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("el-dialog",{attrs:{title:"删除提示",visible:e.delShow,width:"30%",center:"",top:"30vh"},on:{"update:visible":function(t){e.delShow=t}}},[n("p",{staticClass:"center"},[e._v("删除后，该管理员信息将不再保留，请确认是否删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.deleteAdmin}},[e._v("确 定")])],1)])],1)},h=[],p=n("f296"),g={data:function(){return{list:[],currentPage:1,delShow:!1,pageSize:8,count:0,delId:"",hasListInfo:"暂无数据"}},created:function(){this.getList(1)},methods:{handleSizeChange:function(e){this.pageSize=e,this.getList(1)},handleCurrentChange:function(e){this.currentPage=e,this.getList(e)},deleteClick:function(e){this.delShow=!0,this.delId=e.id},deleteAdmin:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["s"])(this.delId);case 2:return t=e.sent,n=t.data,n&&n.result&&this.$message({message:"删除成功",type:"success"}),e.next=7,this.getList(this.currentPage);case 7:this.delShow=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showAdd:function(){this.$emit("showAddAdmin")},getList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.hasListInfo=n?"暂无数据，请重新输入关键字查询":"暂无数据",a={pageSize:this.pageSize,page:t,name:n||void 0},e.next=4,Object(p["g"])(a);case 4:i=e.sent,r=i.data,r&&(r.result?this.list=r.list.map((function(e,t){return{num:t+1,name:e.name,type:"human_resource"===e.type?"人事":"teacher"===e.type?"培训师":"医生",mobile:e.mobile,id:e._id}})):this.list=r.list,this.count=r.count);case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}},b=g,v=(n("b4aa"),Object(u["a"])(b,f,h,!1,null,"25bfc38f",null)),w=v.exports,y=n("9039"),_={components:{Search:m,AdminList:w,Tip:y["a"]},data:function(){return{addAdminShow:!1,userList:[],adminList:[],ruleAdmin:{admin:"",role:""},rules:{admin:[{required:!0,message:"请选择管理员",trigger:"change"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]}}},watch:{addAdminShow:function(){this.addAdminShow||(this.ruleAdmin.admin="",this.ruleAdmin.role="")}},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["nb"])();case 2:t=e.sent,n=t.data,n&&n.length&&(this.userList=n);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=17;break}return e.next=3,Object(p["a"])({admin:t.ruleAdmin.admin,type:t.ruleAdmin.role});case 3:if(a=e.sent,i=a.code,r=a.data,2e4!==i){e.next=14;break}if(!r.result){e.next=13;break}return t.$message({message:"添加成功",type:"success"}),e.next=11,t.$refs["adminList"].getList(1);case 11:e.next=14;break;case 13:return e.abrupt("return",t.$message({message:r.message,type:"error"}));case 14:t.addAdminShow=!1,e.next=18;break;case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},searchList:function(e){this.$refs["adminList"].getList(1,e)}}},k=_,A=(n("ff96d"),Object(u["a"])(k,a,i,!1,null,"5a575e20",null));t["default"]=A.exports},aa51:function(e,t,n){},b4aa:function(e,t,n){"use strict";var a=n("1774"),i=n.n(a);i.a},b4f0:function(e,t,n){"use strict";var a=n("dae4"),i=n.n(a);i.a},dae4:function(e,t,n){},ff96d:function(e,t,n){"use strict";var a=n("aa51"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-9e4d9fec.07bed9d5.js.map