{"version":3,"sources":["webpack:///./src/views/medical-service/health-management/prevention/prevention.vue?a3e9","webpack:///./src/views/medical-service/health-management/components/TaskList.vue?0e3b","webpack:///src/views/medical-service/health-management/components/TaskList.vue","webpack:///./src/views/medical-service/health-management/components/TaskList.vue?5c01","webpack:///./src/views/medical-service/health-management/components/TaskList.vue","webpack:///./src/views/medical-service/health-management/prevention/prevention.vue?e40f","webpack:///./src/views/medical-service/health-management/prevention/prevention.vue?bb7b","webpack:///src/views/medical-service/health-management/prevention/prevention.vue","webpack:///./src/views/medical-service/health-management/prevention/prevention.vue?7c5a","webpack:///./src/views/medical-service/health-management/prevention/prevention.vue","webpack:///./src/utils/healthManagement/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticStyle","attrs","tableData","scopedSlots","_u","key","fn","scope","_v","_s","row","family_member","babyId","user","avatar","remark_name","nickname","_e","_id","creator","sender","_f","subType","Date","createTime","batchTaskIsSaved","batchTaskIsCanceled","executeTime","status","taskHasNotSend","sendTime","delayDay","on","$event","handleClick","switchHandleText","canBeCanceled","onHandleClose","total","currentPage","pageSize","handleSizeChange","handleCurrentChange","closeDialogVisible","closeTask","staticRenderFns","props","taskType","type","Number","default","searchForm","Object","components","TaskCloseDialog","data","currentTaskId","closeTaskId","loading","computed","destroyed","setTaskCount","methods","task","reason","reasonForm","closeReasonType","reason_message","closeReason","res","code","result","getAllTaskList","allListNum","needToRelayNum","todayListNum","val","taskTypeRouter","setSelectBaby","setSendStatus","$router","push","path","query","$message","warning","component","staticClass","gotoNewPage","model","callback","$$v","$set","_l","item","label","statusDisabled","searchTime","search","reset","handleTab","activeName","slot","taskCount","ref","TaskList","uid","beginTime","endTime","taskStatus","typeOptions","statusOptions","watch","getReplaceStatus","handler","newList","oldList","length","deep","resetSearchForm","$refs","taskList","filterSatatusOptions","resetStatus","needKeepAlive","keepAliveRoutes","some","refreshPage","beforeRouteEnter","next","vm","from","vaccineType","vaccine_type","vaccineClass","vaccine_class","getSimpleText","html","re1","RegExp","msg","replace","slice"],"mappings":"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","file":"static/js/chunk-b88a6902.6396b5ce.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prevention.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prevention.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"width\":\"80px\",\"align\":\"center\",\"prop\":\"index\",\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"prop\":\"title\",\"align\":\"center\",\"width\":\"260px\",\"label\":\"标题\"}}),_c('el-table-column',{attrs:{\"label\":\"宝宝\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('div',[_vm._v(\"\\n            \"+_vm._s(scope.row.family_member && scope.row.family_member.name)+\"\\n          \")]),_c('div',[_vm._v(\"\\n            \"+_vm._s(scope.row.family_member && scope.row.family_member.babyId)+\"\\n          \")])])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"用户\",\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('el-avatar',{staticStyle:{\"vertical-align\":\"middle\"},attrs:{\"size\":'small',\"src\":scope.row.user.avatar}}),_vm._v(\"\\n            \"+_vm._s(scope.row.user.remark_name\n                ? scope.row.user.remark_name\n                : scope.row.user.nickname)+\"\\n            \"),(scope.row.is_replace)?_c('svg-icon',{attrs:{\"icon-class\":\"replace\"}}):_vm._e()],1),_c('div',[_vm._v(\"\\n            \"+_vm._s(scope.row.user._id)+\"\\n          \")])])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"80px\",\"label\":\"创建人\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.creator ? scope.row.creator.name : '系统')+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"sender\",\"width\":\"80px\",\"label\":\"发送人\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.sender ? scope.row.sender.name : '未知')+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"消息任务类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm._f(\"taskType\")(scope.row.subType))+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"110px\",\"prop\":\"createTime\",\"label\":\"任务创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm._f(\"formatTime\")(new Date(scope.row.createTime),'y-m-d'))+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"width\":\"110px\",\"label\":\"任务执行日期\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[(_vm.batchTaskIsSaved(scope.row))?_c('span',[_vm._v(\"\\n            待发送\\n          \")]):(_vm.batchTaskIsCanceled(scope.row))?_c('span',[_vm._v(\"\\n            已取消\\n          \")]):_c('span',[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"formatTime\")(new Date(scope.row.executeTime),'y-m-d'))+\"\\n          \")])])]}}])}),_c('el-table-column',{attrs:{\"label\":\"发送时间\",\"align\":\"center\",\"width\":\"120px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(scope.row.status === 6)?_c('span',[_vm._v(\"\\n            已关闭\\n          \")]):(_vm.taskHasNotSend(scope.row.status))?_c('span',[_vm._v(\"\\n            待发送\\n          \")]):(_vm.batchTaskIsCanceled(scope.row))?_c('span',[_vm._v(\"\\n            已取消\\n          \")]):_c('span',[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"formatTime\")(new Date(scope.row.sendTime)))+\"\\n          \")])])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"100px\",\"label\":\"完成状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('div',[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"finishStatus\")(scope.row.status))+\"\\n          \")]),(scope.row.delayDay && scope.row.delayDay > 0)?_c('div',{staticStyle:{\"font-size\":\"12px\",\"color\":\"red\"}},[_vm._v(\"\\n            延期\"+_vm._s(scope.row.delayDay)+\"天\\n          \")]):_vm._e()])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"180px\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(\n              scope.row.subType === 1 &&\n                (scope.row.status === 0 || scope.row.status === 2)\n            )?_c('span',{staticStyle:{\"font-size\":\"12px\",\"cursor\":\"not-allowed\"}},[_c('span',[_vm._v(\"去发送\")]),_vm._v(\"   \"),_c('span',[_vm._v(\"关闭任务\")])]):_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleClick(scope.row)}}},[_vm._v(_vm._s(_vm.switchHandleText(scope.row.status)))]),(_vm.canBeCanceled(scope.row.status))?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.onHandleClose(scope.row)}}},[_vm._v(\"关闭任务\")]):_vm._e()],1)])]}}])})],1),(_vm.total > 0)?_c('div',{staticStyle:{\"margin-top\":\"10px\",\"text-align\":\"center\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-sizes\":[10, 50, 100],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1):_vm._e(),_c('task-close-dialog',{attrs:{\"closeDialogVisible\":_vm.closeDialogVisible},on:{\"closeTask\":_vm.closeTask,\"closeDialog\":function($event){_vm.closeDialogVisible = false}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-table v-loading=\"loading\" :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column width=\"80px\" align=\"center\" prop=\"index\" label=\"序号\" />\r\n      <el-table-column prop=\"title\" align=\"center\" width=\"260px\" label=\"标题\" />\r\n      <el-table-column label=\"宝宝\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <div>\r\n            <div>\r\n              {{ scope.row.family_member && scope.row.family_member.name }}\r\n            </div>\r\n            <div>\r\n              {{ scope.row.family_member && scope.row.family_member.babyId }}\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" label=\"用户\" width=\"150px\">\r\n        <template slot-scope=\"scope\">\r\n          <div>\r\n            <div style=\"display: inline-block\">\r\n              <el-avatar\r\n                :size=\"'small'\"\r\n                :src=\"scope.row.user.avatar\"\r\n                style=\"vertical-align: middle\"\r\n              />\r\n              {{\r\n                scope.row.user.remark_name\r\n                  ? scope.row.user.remark_name\r\n                  : scope.row.user.nickname\r\n              }}\r\n              <svg-icon v-if=\"scope.row.is_replace\" icon-class=\"replace\" />\r\n            </div>\r\n            <div>\r\n              {{ scope.row.user._id }}\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" width=\"80px\" label=\"创建人\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.creator ? scope.row.creator.name : '系统' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" prop=\"sender\" width=\"80px\" label=\"发送人\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.sender ? scope.row.sender.name : '未知' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" label=\"消息任务类型\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.subType | taskType }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        align=\"center\"\r\n        width=\"110px\"\r\n        prop=\"createTime\"\r\n        label=\"任务创建时间\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          {{ new Date(scope.row.createTime) | formatTime('y-m-d') }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column width=\"110px\" label=\"任务执行日期\">\r\n        <template slot-scope=\"scope\">\r\n          <span>\r\n            <span v-if=\"batchTaskIsSaved(scope.row)\">\r\n              待发送\r\n            </span>\r\n            <span v-else-if=\"batchTaskIsCanceled(scope.row)\">\r\n              已取消\r\n            </span>\r\n            <span v-else>\r\n              {{ new Date(scope.row.executeTime) | formatTime('y-m-d') }}\r\n            </span>\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"发送时间\" align=\"center\" width=\"120px\">\r\n        <template slot-scope=\"scope\">\r\n          <div>\r\n            <span v-if=\"scope.row.status === 6\">\r\n              已关闭\r\n            </span>\r\n            <span v-else-if=\"taskHasNotSend(scope.row.status)\">\r\n              待发送\r\n            </span>\r\n            <span v-else-if=\"batchTaskIsCanceled(scope.row)\">\r\n              已取消\r\n            </span>\r\n            <span v-else>\r\n              {{ new Date(scope.row.sendTime) | formatTime() }}\r\n            </span>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" width=\"100px\" label=\"完成状态\">\r\n        <template slot-scope=\"scope\">\r\n          <div>\r\n            <div>\r\n              {{ scope.row.status | finishStatus }}\r\n            </div>\r\n            <div\r\n              v-if=\"scope.row.delayDay && scope.row.delayDay > 0\"\r\n              style=\"font-size: 12px;color: red;\"\r\n            >\r\n              延期{{ scope.row.delayDay }}天\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" width=\"180px\" label=\"操作\"\r\n        ><template slot-scope=\"scope\">\r\n          <div>\r\n            <span\r\n              v-if=\"\r\n                scope.row.subType === 1 &&\r\n                  (scope.row.status === 0 || scope.row.status === 2)\r\n              \"\r\n              style=\"font-size: 12px; cursor: not-allowed\"\r\n            >\r\n              <span>去发送</span>&nbsp;&nbsp;&nbsp;<span>关闭任务</span>\r\n            </span>\r\n            <span v-else>\r\n              <el-button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                @click=\"handleClick(scope.row)\"\r\n                >{{ switchHandleText(scope.row.status) }}</el-button\r\n              >\r\n              <el-button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                @click=\"onHandleClose(scope.row)\"\r\n                v-if=\"canBeCanceled(scope.row.status)\"\r\n                >关闭任务</el-button\r\n              >\r\n            </span>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div v-if=\"total > 0\" style=\"margin-top: 10px;text-align: center;\">\r\n      <el-pagination\r\n        background\r\n        :current-page.sync=\"currentPage\"\r\n        :page-sizes=\"[10, 50, 100]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n    <task-close-dialog\r\n      @closeTask=\"closeTask\"\r\n      @closeDialog=\"closeDialogVisible = false\"\r\n      :closeDialogVisible=\"closeDialogVisible\"\r\n    ></task-close-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAllTaskList, closeTask } from '@/api/healthManagement'\r\nimport TaskCloseDialog from '@/components/TaskCloseDialog'\r\nimport { mapMutations, mapActions, mapGetters } from 'vuex'\r\nimport { localSave } from '@/utils'\r\n\r\nexport default {\r\n  name: 'TaskList',\r\n  props: {\r\n    taskType: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    searchForm: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  components: {\r\n    TaskCloseDialog\r\n  },\r\n  data() {\r\n    return {\r\n      closeDialogVisible: false,\r\n      currentTaskId: '',\r\n      closeTaskId: '',\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      tableData: [],\r\n      loading: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['babyList', 'selectBaby'])\r\n  },\r\n  destroyed() {\r\n    this.setTaskCount({})\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      setSelectBaby: 'health/SET_SELECTBABY',\r\n      setSendStatus: 'health/STE_SENDSTATUS',\r\n      setTaskCount: 'health/SET_TASKCOUNT'\r\n    }),\r\n    ...mapActions({\r\n      getBabyList: 'health/getBabyList'\r\n    }),\r\n    batchTaskIsSaved(task) {\r\n      return task.subType === 1 && task.status === 2\r\n    },\r\n    batchTaskIsCanceled(task) {\r\n      return task.subType === 1 && task.status === 5\r\n    },\r\n    taskHasNotSend(status) {\r\n      return status === 0 || status === 2\r\n    },\r\n    onHandleClose(row) {\r\n      this.currentTaskId = row._id\r\n      this.closeDialogVisible = true\r\n    },\r\n    closeTask(reasonForm) {\r\n      // 请求取消任务的接口,取消成功后刷新任务列表\r\n      const params = {\r\n        reason: reasonForm.closeReasonType,\r\n        reason_message: reasonForm.closeReason\r\n      }\r\n      closeTask(this.currentTaskId, params).then(res => {\r\n        if (res.code === 20000 && res.data.result === true) {\r\n          this.closeDialogVisible = false\r\n          this.$message.success('关闭任务成功')\r\n          this.$emit('closeTask')\r\n        }\r\n      })\r\n    },\r\n    canBeCanceled(status) {\r\n      return status === 0 || status === 2\r\n    },\r\n    switchHandleText(status) {\r\n      switch (status) {\r\n        case 0:\r\n          return '去发送'\r\n        case 1:\r\n          return '去回复'\r\n        case 2:\r\n          return '去发送'\r\n        case 3:\r\n        case 4:\r\n        case 5:\r\n        case 6:\r\n          return '查看详情'\r\n      }\r\n    },\r\n    getAllTaskList(searchParams = {}) {\r\n      this.loading = true\r\n\r\n      const params = {\r\n        ...searchParams,\r\n        currentPage: this.currentPage,\r\n        pageSize: this.pageSize\r\n      }\r\n      getAllTaskList(this.taskType, params).then(res => {\r\n        if (res.code === 20000) {\r\n          this.loading = false\r\n          const data = res.data\r\n          this.tableData = data.list\r\n          this.total = data.count\r\n          // 设置tab标签上的任务数量\r\n          const taskCountObj = {\r\n            allListNum: data.allListNum,\r\n            needToRelayNum: data.needToRelayNum,\r\n            todayListNum: data.todayListNum\r\n          }\r\n          this.setTaskCount(taskCountObj)\r\n        } else {\r\n          this.loading = false\r\n        }\r\n      })\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.currentPage = 1\r\n      this.getAllTaskList(this.searchForm)\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val\r\n      this.getAllTaskList(this.searchForm)\r\n    },\r\n    taskTypeRouter(type) {\r\n      switch (type) {\r\n        case 2:\r\n          return 'follow'\r\n        case 3:\r\n          return 'guidance'\r\n        case 4:\r\n          return 'prevention'\r\n      }\r\n    },\r\n    handleClick(row) {\r\n      // 发送前清空store中的宝宝\r\n      this.setSelectBaby(null)\r\n      this.setSendStatus('edit')\r\n      // 设置localStorage中的currentTask\r\n      localSave('currentTask', JSON.stringify(row))\r\n      const page = this.taskTypeRouter(this.taskType)\r\n      if (\r\n        !row.isOnServer &&\r\n        (row.status === 1 || row.status === 0 || row.status === 2)\r\n      ) {\r\n        this.$message.warning('该任务的宝宝不在服务中')\r\n        return\r\n      }\r\n      switch (row.status) {\r\n        case 0:\r\n        case 2:\r\n          this.$router.push({\r\n            path: `${page}/send`,\r\n            query: { step: 'send', taskId: row._id }\r\n          })\r\n          break\r\n        case 1:\r\n          this.$router.push({\r\n            path: `${page}/comment`,\r\n            query: { babyId: row.family_member._id, taskId: row._id }\r\n          })\r\n          break\r\n        case 3:\r\n        case 4:\r\n        case 5:\r\n          this.$router.push({\r\n            path: `${page}/detail`,\r\n            query: { babyId: row.family_member._id, taskId: row._id }\r\n          })\r\n          break\r\n        case 6:\r\n          this.$router.push({\r\n            path: `${page}/close`,\r\n            query: { babyId: row.family_member._id, taskId: row._id }\r\n          })\r\n          break\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskList.vue?vue&type=template&id=03c0c5d5&\"\nimport script from \"./TaskList.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prevention.vue?vue&type=style&index=1&id=1a3b601f&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prevention.vue?vue&type=style&index=1&id=1a3b601f&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"guidance-container\"},[_c('el-card',{staticStyle:{\"margin-bottom\":\"30px\"}},[_c('div',{staticClass:\"express-container\"},[_c('div',{staticClass:\"add-item\",on:{\"click\":function($event){return _vm.gotoNewPage('add')}}},[_vm._v(\"\\n        新建预防提醒任务\\n        \"),_c('div',{staticClass:\"add-text\"},[_vm._v(\"\\n          (或修改疫苗提醒计划任务)\\n        \")])]),_c('div',{staticClass:\"express-item\",on:{\"click\":function($event){return _vm.gotoNewPage('send')}}},[_vm._v(\"\\n        直接发送预防提醒消息\\n      \")])]),_c('div',{staticClass:\"search-container\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"宝宝乳名\")]),_c('div',[_c('el-input',{attrs:{\"placeholder\":\"请输入宝宝乳名\",\"size\":\"mini\"},model:{value:(_vm.searchForm.name),callback:function ($$v) {_vm.$set(_vm.searchForm, \"name\", $$v)},expression:\"searchForm.name\"}})],1)])]),_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"宝宝ID\")]),_c('div',[_c('el-input',{attrs:{\"placeholder\":\"请输入宝宝ID\",\"size\":\"mini\"},model:{value:(_vm.searchForm.babyId),callback:function ($$v) {_vm.$set(_vm.searchForm, \"babyId\", $$v)},expression:\"searchForm.babyId\"}})],1)])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"用户\")]),_c('div',[_c('el-input',{attrs:{\"placeholder\":\"请输入用户昵称或备注名\",\"size\":\"mini\"},model:{value:(_vm.searchForm.nickname),callback:function ($$v) {_vm.$set(_vm.searchForm, \"nickname\", $$v)},expression:\"searchForm.nickname\"}})],1)])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"用户ID\")]),_c('div',[_c('el-input',{attrs:{\"placeholder\":\"请输入\",\"size\":\"mini\"},model:{value:(_vm.searchForm.uid),callback:function ($$v) {_vm.$set(_vm.searchForm, \"uid\", $$v)},expression:\"searchForm.uid\"}})],1)])])],1),_c('el-row',[_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"消息任务类型\")]),_c('div',[_c('el-select',{attrs:{\"size\":\"mini\"},model:{value:(_vm.searchForm.subType),callback:function ($$v) {_vm.$set(_vm.searchForm, \"subType\", $$v)},expression:\"searchForm.subType\"}},_vm._l((_vm.typeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)])]),_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"search-item\"},[_c('div',[_vm._v(\"完成状态\")]),_c('div',[_c('el-select',{attrs:{\"size\":\"mini\",\"disabled\":_vm.statusDisabled,\"placeholder\":\"请选择\"},model:{value:(_vm.searchForm.status),callback:function ($$v) {_vm.$set(_vm.searchForm, \"status\", $$v)},expression:\"searchForm.status\"}},_vm._l((_vm.statusOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)])]),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"search-time search-date-picker\"},[_c('div',[_vm._v(\"\\n              任务执行日期\\n            \")]),_c('div',[_c('el-date-picker',{attrs:{\"size\":\"mini\",\"type\":\"daterange\",\"range-separator\":\"-\",\"start-placeholder\":\"请选择时间范围起始\",\"end-placeholder\":\"请选择时间范围结束\"},model:{value:(_vm.searchTime),callback:function ($$v) {_vm.searchTime=$$v},expression:\"searchTime\"}})],1)])]),_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"search-item search-button margin-left-20\"},[_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索\")])],1),_c('div',[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)])])],1)],1)]),_c('el-card',[_c('el-tabs',{staticClass:\"tab-container\",staticStyle:{\"padding-right\":\"20px\"},on:{\"tab-click\":_vm.handleTab},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"全部预防提醒\",\"name\":\"0\"}}),_c('el-tab-pane',{attrs:{\"name\":\"1\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('div',[(_vm.taskCount.todayListNum > 0)?_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.taskCount.todayListNum,\"max\":99}},[_vm._v(\"\\n              今日待预防提醒任务\\n            \")]):_c('span',[_vm._v(\"今日待预防提醒任务\")])],1)])]),_c('el-tab-pane',{attrs:{\"name\":\"2\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('div',[(_vm.taskCount.allListNum > 0)?_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.taskCount.allListNum,\"max\":99}},[_vm._v(\"\\n              全部待预防提醒任务\\n            \")]):_c('span',[_vm._v(\"全部待预防提醒任务\")])],1)])]),_c('el-tab-pane',{attrs:{\"name\":\"3\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('div',[(_vm.taskCount.needToRelayNum > 0)?_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.taskCount.needToRelayNum,\"max\":99}},[_vm._v(\"\\n              留言待回复\\n            \")]):_c('span',[_vm._v(\"留言待回复\")])],1)])])],1),_c('div',{staticClass:\"table-title\"},[_vm._v(\"\\n      预防提醒消息任务列表\\n    \")]),_c('task-list',{ref:\"taskList\",attrs:{\"task-type\":4,\"search-form\":_vm.searchForm},on:{\"closeTask\":_vm.search}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"guidance-container\">\r\n    <el-card style=\"margin-bottom: 30px;\">\r\n      <div class=\"express-container\">\r\n        <div class=\"add-item\" @click=\"gotoNewPage('add')\">\r\n          新建预防提醒任务\r\n          <div class=\"add-text\">\r\n            (或修改疫苗提醒计划任务)\r\n          </div>\r\n        </div>\r\n        <div class=\"express-item\" @click=\"gotoNewPage('send')\">\r\n          直接发送预防提醒消息\r\n        </div>\r\n      </div>\r\n      <div class=\"search-container\">\r\n        <el-row>\r\n          <el-col :span=\"5\">\r\n            <div class=\"search-item\">\r\n              <div>宝宝乳名</div>\r\n              <div>\r\n                <el-input\r\n                  v-model=\"searchForm.name\"\r\n                  placeholder=\"请输入宝宝乳名\"\r\n                  size=\"mini\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <div class=\"search-item\">\r\n              <div>宝宝ID</div>\r\n              <div>\r\n                <el-input\r\n                  v-model=\"searchForm.babyId\"\r\n                  placeholder=\"请输入宝宝ID\"\r\n                  size=\"mini\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <div class=\"search-item\">\r\n              <div>用户</div>\r\n              <div>\r\n                <el-input\r\n                  v-model=\"searchForm.nickname\"\r\n                  placeholder=\"请输入用户昵称或备注名\"\r\n                  size=\"mini\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <div class=\"search-item\">\r\n              <div>用户ID</div>\r\n              <div>\r\n                <el-input\r\n                  v-model=\"searchForm.uid\"\r\n                  placeholder=\"请输入\"\r\n                  size=\"mini\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"5\">\r\n            <div class=\"search-item\">\r\n              <div>消息任务类型</div>\r\n              <div>\r\n                <el-select v-model=\"searchForm.subType\" size=\"mini\">\r\n                  <el-option\r\n                    v-for=\"item in typeOptions\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  />\r\n                </el-select>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <div class=\"search-item\">\r\n              <div>完成状态</div>\r\n              <div>\r\n                <el-select\r\n                  v-model=\"searchForm.status\"\r\n                  size=\"mini\"\r\n                  :disabled=\"statusDisabled\"\r\n                  placeholder=\"请选择\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in statusOptions\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  />\r\n                </el-select>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <div class=\"search-time search-date-picker\">\r\n              <div>\r\n                任务执行日期\r\n              </div>\r\n              <div>\r\n                <el-date-picker\r\n                  v-model=\"searchTime\"\r\n                  size=\"mini\"\r\n                  type=\"daterange\"\r\n                  range-separator=\"-\"\r\n                  start-placeholder=\"请选择时间范围起始\"\r\n                  end-placeholder=\"请选择时间范围结束\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <div class=\"search-item search-button margin-left-20\">\r\n              <div>\r\n                <el-button type=\"primary\" size=\"mini\" @click=\"search\"\r\n                  >搜索</el-button\r\n                >\r\n              </div>\r\n              <div>\r\n                <el-button size=\"mini\" @click=\"reset\">重置</el-button>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-card>\r\n    <el-card>\r\n      <el-tabs\r\n        v-model=\"activeName\"\r\n        class=\"tab-container\"\r\n        style=\"padding-right: 20px\"\r\n        @tab-click=\"handleTab\"\r\n      >\r\n        <el-tab-pane label=\"全部预防提醒\" name=\"0\" />\r\n        <el-tab-pane name=\"1\">\r\n          <span slot=\"label\">\r\n            <div>\r\n              <el-badge\r\n                v-if=\"taskCount.todayListNum > 0\"\r\n                :value=\"taskCount.todayListNum\"\r\n                class=\"item\"\r\n                :max=\"99\"\r\n              >\r\n                今日待预防提醒任务\r\n              </el-badge>\r\n              <span v-else>今日待预防提醒任务</span>\r\n            </div>\r\n          </span>\r\n        </el-tab-pane>\r\n        <el-tab-pane name=\"2\">\r\n          <span slot=\"label\">\r\n            <div>\r\n              <el-badge\r\n                v-if=\"taskCount.allListNum > 0\"\r\n                :value=\"taskCount.allListNum\"\r\n                class=\"item\"\r\n                :max=\"99\"\r\n              >\r\n                全部待预防提醒任务\r\n              </el-badge>\r\n              <span v-else>全部待预防提醒任务</span>\r\n            </div>\r\n          </span>\r\n        </el-tab-pane>\r\n        <el-tab-pane name=\"3\">\r\n          <span slot=\"label\">\r\n            <div>\r\n              <el-badge\r\n                v-if=\"taskCount.needToRelayNum > 0\"\r\n                :value=\"taskCount.needToRelayNum\"\r\n                class=\"item\"\r\n                :max=\"99\"\r\n              >\r\n                留言待回复\r\n              </el-badge>\r\n              <span v-else>留言待回复</span>\r\n            </div>\r\n          </span>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n      <div class=\"table-title\">\r\n        预防提醒消息任务列表\r\n      </div>\r\n      <task-list\r\n        ref=\"taskList\"\r\n        :task-type=\"4\"\r\n        :search-form=\"searchForm\"\r\n        @closeTask=\"search\"\r\n      />\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TaskList from '../components/TaskList'\r\nimport { mapMutations, mapGetters } from 'vuex'\r\nimport { localSave } from '@/utils'\r\nimport { statusOptions } from '@/utils/healthManagement'\r\nimport _ from 'lodash'\r\n\r\nexport default {\r\n  name: 'Guidance',\r\n  components: {\r\n    TaskList\r\n  },\r\n  data() {\r\n    return {\r\n      statusDisabled: false,\r\n      searchForm: {\r\n        name: '',\r\n        nickname: '',\r\n        uid: '',\r\n        status: '',\r\n        subType: '',\r\n        beginTime: '',\r\n        endTime: '',\r\n        type: '',\r\n        taskStatus: '',\r\n        babyId: ''\r\n      },\r\n      searchTime: null,\r\n      activeName: 0,\r\n      typeOptions: [\r\n        {\r\n          value: 1,\r\n          label: '批量发送'\r\n        },\r\n        {\r\n          value: 3,\r\n          label: '直接发送'\r\n        },\r\n        {\r\n          value: 4,\r\n          label: '自定义任务'\r\n        },\r\n        {\r\n          value: 6,\r\n          label: '疫苗提醒任务'\r\n        }\r\n      ],\r\n      statusOptions: statusOptions\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['taskCount', 'sendStatus', 'getReplaceStatus'])\r\n  },\r\n  watch: {\r\n    getReplaceStatus: {\r\n      handler: function(val, oldVal) {\r\n        //代班状态改变时，重新请求任务列表\r\n        const newList = _.get(val, 'replace.replace_list')\r\n        const oldList = _.get(oldVal, 'replace.replace_list')\r\n        if (newList && oldList && newList.length !== oldList.length) {\r\n          this.search()\r\n        }\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      setSendStatus: 'health/STE_SENDSTATUS'\r\n    }),\r\n    resetSearchForm() {\r\n      this.searchForm = {\r\n        name: '',\r\n        user: '',\r\n        status: '',\r\n        subType: '',\r\n        beginTime: '',\r\n        endTime: '',\r\n        type: '',\r\n        babyId: ''\r\n      }\r\n    },\r\n    // 点击标签页事件\r\n    handleTab() {\r\n      this.$refs.taskList.pageSize = 10\r\n      this.$refs.taskList.currentPage = 1\r\n      this.resetSearchForm()\r\n      this.searchForm.taskStatus = this.activeName\r\n      this.$refs.taskList.getAllTaskList(this.searchForm)\r\n      if (this.activeName !== '0') {\r\n        this.statusDisabled = true\r\n        // 过滤完成状态的搜索条件\r\n        this.filterSatatusOptions(this.activeName)\r\n        return\r\n      }\r\n      this.statusDisabled = false\r\n      this.resetStatus()\r\n    },\r\n    // 重置完成状态\r\n    resetStatus() {\r\n      this.searchForm.status = null\r\n      this.statusOptions = statusOptions\r\n    },\r\n    // 过滤完成状态\r\n    filterSatatusOptions(activeName) {\r\n      switch (activeName) {\r\n        case '1':\r\n          this.searchForm.status = ''\r\n          this.statusOptions = [\r\n            {\r\n              value: '',\r\n              label: '今日待预防提醒'\r\n            }\r\n          ]\r\n          break\r\n        case '2':\r\n          this.searchForm.status = ''\r\n          this.statusOptions = [\r\n            {\r\n              value: '',\r\n              label: '全部待预防提醒'\r\n            }\r\n          ]\r\n          break\r\n        case '3':\r\n          this.searchForm.status = ''\r\n          this.statusOptions = [\r\n            {\r\n              value: '',\r\n              label: '留言待回复'\r\n            }\r\n          ]\r\n          break\r\n        case '4':\r\n          this.statusOptions = [\r\n            {\r\n              value: '',\r\n              label: '已关闭'\r\n            }\r\n          ]\r\n      }\r\n    },\r\n    // 根据搜索条件查询任务列表\r\n    search() {\r\n      this.$refs.taskList.pageSize = 10\r\n      this.$refs.taskList.currentPage = 1\r\n      this.searchForm.beginTime = this.searchTime ? this.searchTime[0] : ''\r\n      this.searchForm.endTime = this.searchTime ? this.searchTime[1] : ''\r\n      this.$refs.taskList.getAllTaskList(this.searchForm)\r\n    },\r\n    // 重置查询条件\r\n    reset() {\r\n      this.resetSearchForm()\r\n      // 每次重置基于当前选项卡\r\n      this.searchForm.taskStatus = this.activeName\r\n      this.searchTime = null\r\n      this.$refs.taskList.pageSize = 10\r\n      this.$refs.taskList.currentPage = 1\r\n      this.$refs.taskList.getAllTaskList(this.searchForm)\r\n    },\r\n    gotoNewPage(path) {\r\n      if (path === 'send') {\r\n        this.setSendStatus('select')\r\n        localSave('taskStep', 0)\r\n      }\r\n      this.$router.push(`prevention/${path}`)\r\n    },\r\n    needKeepAlive(path) {\r\n      const keepAliveRoutes = [\r\n        'prevention/send',\r\n        'prevention/detail',\r\n        'prevention/comment',\r\n        'prevention/add',\r\n        'prevention/close'\r\n      ]\r\n      return keepAliveRoutes.some(route => path.includes(route))\r\n    },\r\n    refreshPage() {\r\n      this.statusDisabled = false\r\n      this.activeName = '0'\r\n      this.statusOptions = statusOptions\r\n      this.reset()\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      if (!vm.needKeepAlive(from.path)) {\r\n        vm.refreshPage()\r\n      } else {\r\n        vm.search()\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.search-item {\r\n  .el-input {\r\n    width: 180px;\r\n  }\r\n}\r\n.tab-container {\r\n  .el-badge__content.is-fixed {\r\n    top: 10px;\r\n  }\r\n}\r\n</style>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/styles/healthManagement/page.scss';\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prevention.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prevention.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./prevention.vue?vue&type=template&id=1a3b601f&scoped=true&\"\nimport script from \"./prevention.vue?vue&type=script&lang=js&\"\nexport * from \"./prevention.vue?vue&type=script&lang=js&\"\nimport style0 from \"./prevention.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./prevention.vue?vue&type=style&index=1&id=1a3b601f&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a3b601f\",\n  null\n  \n)\n\nexport default component.exports","import $router from '@/router'\r\nexport const gotoNewPage = function(path) {\r\n  $router.push(`prevention/${path}`)\r\n}\r\n\r\nexport const vaccineType = function(row) {\r\n  switch (row.vaccine_type) {\r\n    case 1:\r\n      return '减毒'\r\n    case 2:\r\n      return '灭活'\r\n    case 3:\r\n      return '多糖'\r\n  }\r\n}\r\n\r\nexport const vaccineClass = function(row) {\r\n  switch (row.vaccine_class) {\r\n    case 1:\r\n      return '一类'\r\n    case 2:\r\n      return '二类'\r\n  }\r\n}\r\n\r\nexport const getSimpleText = function(html) {\r\n  const re1 = new RegExp('<.+?>', 'g') // 匹配html标签的正则表达式，\"g\"是搜索匹配多个符合的内容\r\n  const msg = html.replace(re1, '') // 执行替换成空字符\r\n  if (msg.length > 38) {\r\n    return msg.slice(0, 38) + '...'\r\n  }\r\n  return msg\r\n}\r\n\r\nexport const statusOptions = [\r\n  {\r\n    value: 0,\r\n    label: '待发送'\r\n  },\r\n  {\r\n    value: 2,\r\n    label: '已保存'\r\n  },\r\n  {\r\n    value: 3,\r\n    label: '已发送'\r\n  },\r\n  {\r\n    value: 1,\r\n    label: '留言待回复'\r\n  },\r\n  {\r\n    value: 4,\r\n    label: '已完成'\r\n  },\r\n  {\r\n    value: 5,\r\n    label: '已取消'\r\n  },\r\n  {\r\n    value: 6,\r\n    label: '已关闭'\r\n  },\r\n  {\r\n    value: 100,\r\n    label: '延期'\r\n  }\r\n]\r\n"],"sourceRoot":""}